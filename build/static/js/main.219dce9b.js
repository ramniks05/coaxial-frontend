/*! For license information please see main.219dce9b.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,s)=>{e.exports=s(202)},153:(e,t,s)=>{var a=s(43),n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,s){var a,r={},c=null,d=null;for(a in void 0!==s&&(c=""+s),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,a)&&!o.hasOwnProperty(a)&&(r[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===r[a]&&(r[a]=t[a]);return{$$typeof:n,type:e,key:c,ref:d,props:r,_owner:l.current}}t.Fragment=r,t.jsx=c,t.jsxs=c},202:(e,t)=>{var s=Symbol.for("react.element"),a=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,x={};function g(e,t,s){this.props=e,this.context=t,this.refs=x,this.updater=s||h}function v(){}function b(e,t,s){this.props=e,this.context=t,this.refs=x,this.updater=s||h}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=g.prototype;var y=b.prototype=new v;y.constructor=b,f(y,g.prototype),y.isPureReactComponent=!0;var j=Array.isArray,N=Object.prototype.hasOwnProperty,w={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,a){var n,r={},i=null,l=null;if(null!=t)for(n in void 0!==t.ref&&(l=t.ref),void 0!==t.key&&(i=""+t.key),t)N.call(t,n)&&!k.hasOwnProperty(n)&&(r[n]=t[n]);var o=arguments.length-2;if(1===o)r.children=a;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];r.children=c}if(e&&e.defaultProps)for(n in o=e.defaultProps)void 0===r[n]&&(r[n]=o[n]);return{$$typeof:s,type:e,key:i,ref:l,props:r,_owner:w.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===s}var I=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function E(e,t,n,r,i){var l=typeof e;"undefined"!==l&&"boolean"!==l||(e=null);var o=!1;if(null===e)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case s:case a:o=!0}}if(o)return i=i(o=e),e=""===r?"."+A(o,0):r,j(i)?(n="",null!=e&&(n=e.replace(I,"$&/")+"/"),E(i,t,n,"",function(e){return e})):null!=i&&(C(i)&&(i=function(e,t){return{$$typeof:s,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(I,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=""===r?".":r+":",j(e))for(var c=0;c<e.length;c++){var d=r+A(l=e[c],c);o+=E(l,t,n,d,i)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=m&&e[m]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(l=e.next()).done;)o+=E(l=l.value,t,n,d=r+A(l,c++),i);else if("object"===l)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function T(e,t,s){if(null==e)return e;var a=[],n=0;return E(e,a,"","",function(e){return t.call(s,e,n++)}),a}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L={current:null},R={transition:null},M={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:R,ReactCurrentOwner:w};function D(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:T,forEach:function(e,t,s){T(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=n,t.Profiler=i,t.PureComponent=b,t.StrictMode=r,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.act=D,t.cloneElement=function(e,t,a){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=f({},e.props),r=e.key,i=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,l=w.current),void 0!==t.key&&(r=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)N.call(t,c)&&!k.hasOwnProperty(c)&&(n[c]=void 0===t[c]&&void 0!==o?o[c]:t[c])}var c=arguments.length-2;if(1===c)n.children=a;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];n.children=o}return{$$typeof:s,type:e.type,key:r,ref:i,props:n,_owner:l}},t.createContext=function(e){return(e={$$typeof:o,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=D,t.useCallback=function(e,t){return L.current.useCallback(e,t)},t.useContext=function(e){return L.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return L.current.useDeferredValue(e)},t.useEffect=function(e,t){return L.current.useEffect(e,t)},t.useId=function(){return L.current.useId()},t.useImperativeHandle=function(e,t,s){return L.current.useImperativeHandle(e,t,s)},t.useInsertionEffect=function(e,t){return L.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return L.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return L.current.useMemo(e,t)},t.useReducer=function(e,t,s){return L.current.useReducer(e,t,s)},t.useRef=function(e){return L.current.useRef(e)},t.useState=function(e){return L.current.useState(e)},t.useSyncExternalStore=function(e,t,s){return L.current.useSyncExternalStore(e,t,s)},t.useTransition=function(){return L.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function s(e,t){var s=e.length;e.push(t);e:for(;0<s;){var a=s-1>>>1,n=e[a];if(!(0<r(n,t)))break e;e[a]=t,e[s]=n,s=a}}function a(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],s=e.pop();if(s!==t){e[0]=s;e:for(var a=0,n=e.length,i=n>>>1;a<i;){var l=2*(a+1)-1,o=e[l],c=l+1,d=e[c];if(0>r(o,s))c<n&&0>r(d,o)?(e[a]=d,e[c]=s,a=c):(e[a]=o,e[l]=s,a=l);else{if(!(c<n&&0>r(d,s)))break e;e[a]=d,e[c]=s,a=c}}}return t}function r(e,t){var s=e.sortIndex-t.sortIndex;return 0!==s?s:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,p=null,m=3,h=!1,f=!1,x=!1,g="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function y(e){for(var t=a(d);null!==t;){if(null===t.callback)n(d);else{if(!(t.startTime<=e))break;n(d),t.sortIndex=t.expirationTime,s(c,t)}t=a(d)}}function j(e){if(x=!1,y(e),!f)if(null!==a(c))f=!0,R(N);else{var t=a(d);null!==t&&M(j,t.startTime-e)}}function N(e,s){f=!1,x&&(x=!1,v(C),C=-1),h=!0;var r=m;try{for(y(s),p=a(c);null!==p&&(!(p.expirationTime>s)||e&&!E());){var i=p.callback;if("function"===typeof i){p.callback=null,m=p.priorityLevel;var l=i(p.expirationTime<=s);s=t.unstable_now(),"function"===typeof l?p.callback=l:p===a(c)&&n(c),y(s)}else n(c);p=a(c)}if(null!==p)var o=!0;else{var u=a(d);null!==u&&M(j,u.startTime-s),o=!1}return o}finally{p=null,m=r,h=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,k=!1,S=null,C=-1,I=5,A=-1;function E(){return!(t.unstable_now()-A<I)}function T(){if(null!==S){var e=t.unstable_now();A=e;var s=!0;try{s=S(!0,e)}finally{s?w():(k=!1,S=null)}}else k=!1}if("function"===typeof b)w=function(){b(T)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,L=P.port2;P.port1.onmessage=T,w=function(){L.postMessage(null)}}else w=function(){g(T,0)};function R(e){S=e,k||(k=!0,w())}function M(e,s){C=g(function(){e(t.unstable_now())},s)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||h||(f=!0,R(N))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return a(c)},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var s=m;m=t;try{return e()}finally{m=s}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var s=m;m=e;try{return t()}finally{m=s}},t.unstable_scheduleCallback=function(e,n,r){var i=t.unstable_now();switch("object"===typeof r&&null!==r?r="number"===typeof(r=r.delay)&&0<r?i+r:i:r=i,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:u++,callback:n,priorityLevel:e,startTime:r,expirationTime:l=r+l,sortIndex:-1},r>i?(e.sortIndex=r,s(d,e),null===a(c)&&e===a(d)&&(x?(v(C),C=-1):x=!0,M(j,r-i))):(e.sortIndex=l,s(c,e),f||h||(f=!0,R(N))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=m;return function(){var s=m;m=t;try{return e.apply(this,arguments)}finally{m=s}}}},305:(e,t,s)=>{s.d(t,{tE:()=>r,Al:()=>d,Vg:()=>l,$P:()=>o,mu:()=>c});var a=s(555);const n=["method","body","includeContentType"],r="http://localhost:8080",i=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const{method:i="GET",body:l=null,includeContentType:o=null}=t,c=function(e,t){if(null==e)return{};var s,a,n=function(e,t){if(null==e)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;s[a]=e[a]}return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)s=r[a],-1===t.indexOf(s)&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}(t,n),d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const a={accept:"*/*"};return e&&(a.Authorization="Bearer ".concat(e)),(null!==s?s:["POST","PUT","PATCH"].includes(t.toUpperCase()))&&(a["Content-Type"]="application/json"),a}(s,i,o),u=(0,a.A)({method:i,headers:d},c);l&&["POST","PUT","PATCH"].includes(i.toUpperCase())&&(u.body="string"===typeof l?l:JSON.stringify(l));const p=e.startsWith("http")?e:"".concat(r).concat(e);console.log("Making ".concat(i," request to:"),p),console.log("Request headers:",d);const m=await fetch(p,u);if(console.log("Response status: ".concat(m.status," ").concat(m.statusText)),!m.ok){const e=await m.text();throw console.error("API Error Response:",e),new Error("API request failed: ".concat(m.status," ").concat(m.statusText," - ").concat(e))}return m},l=(e,t)=>i(e,{method:"GET"},t),o=(e,t,s)=>i(e,{method:"POST",body:t},s),c=(e,t,s)=>i(e,{method:"PUT",body:t},s),d=(e,t)=>i(e,{method:"DELETE"},t)},391:(e,t,s)=>{var a=s(950);t.createRoot=a.createRoot,t.hydrateRoot=a.hydrateRoot},555:(e,t,s)=>{function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function n(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,t||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function r(e,t,s){return(t=n(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function i(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,a)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?i(Object(s),!0).forEach(function(t){r(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}s.d(t,{A:()=>l})},579:(e,t,s)=>{e.exports=s(153)},580:(e,t,s)=>{s.d(t,{Dv:()=>w,nm:()=>k});var a=s(555),n=s(43),r=s(579);const i={user:null,token:null,isAuthenticated:!1,loading:!1,error:null,theme:"light",notifications:[],sidebarOpen:!1,currentPage:"home",backendConnected:!0,isOnline:!0,tokenRefreshInProgress:!1},l="SET_LOADING",o="SET_ERROR",c="CLEAR_ERROR",d="LOGIN_SUCCESS",u="LOGOUT",p="UPDATE_USER",m="SET_THEME",h="ADD_NOTIFICATION",f="REMOVE_NOTIFICATION",x="TOGGLE_SIDEBAR",g="SET_CURRENT_PAGE",v="SET_BACKEND_STATUS",b="SET_NETWORK_STATUS",y="SET_TOKEN_REFRESH_STATUS",j=(e,t)=>{switch(t.type){case l:return(0,a.A)((0,a.A)({},e),{},{loading:t.payload});case o:return(0,a.A)((0,a.A)({},e),{},{error:t.payload,loading:!1});case c:return(0,a.A)((0,a.A)({},e),{},{error:null});case d:return(0,a.A)((0,a.A)({},e),{},{user:t.payload.user,token:t.payload.token,isAuthenticated:!0,loading:!1,error:null});case u:return(0,a.A)((0,a.A)({},e),{},{user:null,token:null,isAuthenticated:!1,loading:!1,error:null,sidebarOpen:!1,tokenRefreshInProgress:!1});case p:return(0,a.A)((0,a.A)({},e),{},{user:(0,a.A)((0,a.A)({},e.user),t.payload)});case m:return(0,a.A)((0,a.A)({},e),{},{theme:t.payload});case h:return(0,a.A)((0,a.A)({},e),{},{notifications:[...e.notifications,t.payload]});case f:return(0,a.A)((0,a.A)({},e),{},{notifications:e.notifications.filter(e=>e.id!==t.payload)});case x:return(0,a.A)((0,a.A)({},e),{},{sidebarOpen:!e.sidebarOpen});case g:return(0,a.A)((0,a.A)({},e),{},{currentPage:t.payload});case v:return(0,a.A)((0,a.A)({},e),{},{backendConnected:t.payload});case b:return(0,a.A)((0,a.A)({},e),{},{isOnline:t.payload});case y:return(0,a.A)((0,a.A)({},e),{},{tokenRefreshInProgress:t.payload});default:return e}},N=(0,n.createContext)(),w=e=>{let{children:t}=e;const[s,w]=(0,n.useReducer)(j,i),[k,S]=(0,n.useState)(0),[C,I]=(0,n.useState)(null);(0,n.useEffect)(()=>{const e=localStorage.getItem("user"),t=localStorage.getItem("token");if(w({type:b,payload:navigator.onLine}),P(),e&&t)try{const s=JSON.parse(e);if(A(t))return console.log("Token expired, attempting refresh..."),void T(t);w({type:d,payload:{user:s,token:t}})}catch(s){console.error("Error parsing user data:",s),localStorage.removeItem("user"),localStorage.removeItem("token")}},[]),(0,n.useEffect)(()=>{const e=()=>{console.log("Network is back online"),w({type:b,payload:!0}),P()},t=()=>{console.log("Network is offline"),w({type:b,payload:!1})};return window.addEventListener("online",e),window.addEventListener("offline",t),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}},[]),(0,n.useEffect)(()=>{const e=setInterval(()=>{s.isOnline&&P()},3e4);return()=>clearInterval(e)},[s.isOnline]),(0,n.useEffect)(()=>{if(s.isAuthenticated&&s.token&&!s.tokenRefreshInProgress){const e=E(s.token)-Date.now();e<3e5&&e>0&&(console.log("Token expires soon, refreshing..."),T(s.token))}},[s.isAuthenticated,s.token,s.tokenRefreshInProgress]);const A=e=>{try{const t=JSON.parse(atob(e.split(".")[1])),s=Date.now()/1e3;return t.exp<s}catch(t){return console.error("Error checking token expiration:",t),!0}},E=e=>{try{return 1e3*JSON.parse(atob(e.split(".")[1])).exp}catch(t){return console.error("Error getting token expiry:",t),0}},T=async e=>{if(s.tokenRefreshInProgress)console.log("Token refresh already in progress");else{w({type:y,payload:!0});try{console.log("Refreshing token...");const t=await fetch("http://localhost:8080/api/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},signal:AbortSignal.timeout(1e3)});if(!t.ok)throw new Error("Token refresh failed: ".concat(t.status," ").concat(t.statusText));{const e=await t.json(),a=e.token||e.access_token;if(!a)throw new Error("No token received from refresh endpoint");console.log("Token refreshed successfully"),w({type:d,payload:{user:s.user,token:a}}),I(Date.now()),w({type:h,payload:{type:"success",message:"Session refreshed successfully",autoDismiss:!0,duration:3e3}})}}catch(t){console.error("Token refresh failed:",t),w({type:u}),w({type:h,payload:{type:"error",message:"Session expired. Please log in again.",autoDismiss:!1}}),localStorage.removeItem("user"),localStorage.removeItem("token")}finally{w({type:y,payload:!1})}}};(0,n.useEffect)(()=>{s.user&&s.token?(localStorage.setItem("user",JSON.stringify(s.user)),localStorage.setItem("token",s.token)):(localStorage.removeItem("user"),localStorage.removeItem("token"))},[s.user,s.token]);const P=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;try{const s=new AbortController,a=setTimeout(()=>s.abort(),5e3);console.log("Checking backend connectivity... (attempt ".concat(e+1,")"));const n=["http://localhost:8080/api/health","http://localhost:8080/api/auth/me","http://localhost:8080/actuator/health","http://localhost:8080/","http://localhost:8080/api/"];let r=!1;for(const e of n)try{console.log("Trying endpoint: ".concat(e));const t=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json"},signal:s.signal});if(console.log("Response from ".concat(e,":"),t.status,t.statusText),t.status<500){r=!0,console.log("Backend is connected via:",e);break}}catch(t){console.log("Endpoint ".concat(e," failed:"),t.message);continue}if(clearTimeout(a),!r)throw new Error("All endpoints failed");return console.log("Backend connectivity: Connected"),S(0),w({type:v,payload:!0}),r}catch(s){if(console.log("Backend connectivity check failed (attempt ".concat(e+1,"):"),s.message),e<3){const t=1e3*Math.pow(2,e);return console.log("Retrying in ".concat(t,"ms...")),setTimeout(()=>{P(e+1)},t),!1}return console.log("Backend connectivity: Disconnected (all retries exhausted)"),S(0),w({type:v,payload:!1}),3===e&&w({type:h,payload:{type:"warning",message:"Backend connection lost. Some features may be unavailable.",autoDismiss:!1}}),!1}},L=(0,n.useMemo)(()=>({setLoading:e=>w({type:l,payload:e}),setError:e=>w({type:o,payload:e}),clearError:()=>w({type:c}),loginSuccess:(e,t)=>w({type:d,payload:{user:e,token:t}}),logout:()=>w({type:u}),updateUser:e=>w({type:p,payload:e}),setTheme:e=>w({type:m,payload:e}),addNotification:e=>{const t=(0,a.A)((0,a.A)({},e),{},{id:Date.now(),autoDismiss:!1!==e.autoDismiss,duration:e.duration||5e3});return w({type:h,payload:t}),t.id},removeNotification:e=>w({type:f,payload:e}),toggleSidebar:()=>w({type:x}),setCurrentPage:e=>w({type:g,payload:e}),checkBackendConnectivity:P,refreshToken:T}),[]),R=(0,n.useMemo)(()=>(0,a.A)((0,a.A)((0,a.A)({},s),L),{},{retryCount:k,lastTokenRefresh:C}),[s,L,k,C]);return(0,r.jsx)(N.Provider,{value:R,children:t})},k=()=>{const e=(0,n.useContext)(N);if(!e)throw new Error("useApp must be used within an AppProvider");return e}},595:()=>{},712:(e,t,s)=>{s.d(t,{$d:()=>re,CB:()=>w,CE:()=>V,C_:()=>d,DI:()=>H,DU:()=>A,Dl:()=>N,Dt:()=>S,EH:()=>ie,EV:()=>r,Ez:()=>f,F3:()=>n,FP:()=>k,Fi:()=>B,J4:()=>u,JK:()=>oe,KO:()=>ae,N2:()=>i,NJ:()=>o,Ng:()=>ne,Nk:()=>T,OA:()=>O,OY:()=>L,Ou:()=>te,Tw:()=>R,V7:()=>c,YB:()=>U,Yt:()=>le,Z2:()=>ee,_A:()=>C,_p:()=>x,bd:()=>Q,do:()=>M,eQ:()=>Z,gC:()=>W,getChaptersCombinedFilter:()=>Y,gg:()=>j,hG:()=>K,iQ:()=>y,j6:()=>h,jh:()=>q,kV:()=>z,ko:()=>P,lw:()=>m,mR:()=>E,pm:()=>I,rJ:()=>F,s:()=>$,sW:()=>v,sr:()=>G,tW:()=>D,u3:()=>se,u7:()=>g,ui:()=>b,ul:()=>X,v0:()=>l,yS:()=>J,zs:()=>p});var a=s(305);const n=async e=>{const t="/api/admin/master-data/course-types";console.log("Fetching course types from:",t);try{const s=await(0,a.Vg)(t,e),n=await s.json();return console.log("Course types data:",n),n}catch(s){throw console.error("Error fetching course types:",s),s}},r=async(e,t)=>{console.log("Creating course type with data:",t);const s="/api/admin/master-data/course-types";console.log("Creating course type at endpoint:",s);try{const n=await(0,a.$P)(s,t,e),r=await n.json();return console.log("Course type created successfully:",r),r}catch(n){throw console.error("Error creating course type:",n),n}},i=async(e,t,s)=>{const n="".concat(a.tE,"/api/admin/master-data/course-types/").concat(t);console.log("Updating course type at endpoint:",n),console.log("Course type data being sent:",s);const r={accept:"*/*","Content-Type":"application/json"};e&&(r.Authorization="Bearer ".concat(e));const i=await fetch(n,{method:"PUT",headers:r,body:JSON.stringify(s)});if(console.log("Update course type response status:",i.status),!i.ok){const e=await i.text();throw console.error("Update course type error response:",e),console.error("Request data that caused error:",s),new Error("Failed to update course type: ".concat(i.status," ").concat(i.statusText," - ").concat(e))}const l=await i.json();return console.log("Update course type data:",l),l},l=async(e,t)=>{const s="".concat(a.tE,"/api/admin/master-data/course-types/").concat(t);console.log("Deleting course type at endpoint:",s);const n={accept:"*/*"};e&&(n.Authorization="Bearer ".concat(e));const r=await fetch(s,{method:"DELETE",headers:n});if(console.log("Delete course type response status:",r.status),!r.ok){const e=await r.text();throw console.error("Delete course type error response:",e),new Error("Failed to delete course type: ".concat(r.status," ").concat(r.statusText," - ").concat(e))}return r.ok},o=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"createdAt",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"desc";try{const l=new URLSearchParams;t&&l.append("courseTypeId",t),l.append("page",s),l.append("size",n),l.append("sortBy",r),l.append("sortDir",i);const o="".concat(a.tE,"/api/admin/master-data/courses?").concat(l);console.log("Fetching courses from:",o);const c={accept:"*/*"};e&&(c.Authorization="Bearer ".concat(e));const d=new AbortController,u=setTimeout(()=>d.abort(),1e4),p=await fetch(o,{headers:c,signal:d.signal});if(clearTimeout(u),console.log("Get courses response status:",p.status),!p.ok){const e=await p.text();throw console.error("Get courses error:",e),new Error("Failed to fetch courses: ".concat(p.status," ").concat(p.statusText," - ").concat(e))}const m=await p.json();return console.log("Courses data:",m),m}catch(l){if("AbortError"===l.name)throw new Error("Request timeout - Backend is taking too long to respond");throw l}},c=async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(!t)throw new Error("Course type ID is required");const n="".concat(a.tE,"/api/admin/master-data/courses/by-course-type?courseTypeId=").concat(t);console.log("Fetching courses by course type from:",n);const r={accept:"*/*"};e&&(r.Authorization="Bearer ".concat(e));const i=await fetch(n,{headers:r,signal:s});if(console.log("Get courses by course type response status:",i.status),!i.ok){const e=await i.text();throw console.error("Get courses by course type error:",e),new Error("Failed to fetch courses by course type: ".concat(i.status," ").concat(i.statusText," - ").concat(e))}const l=await i.json();return console.log("Courses by course type data:",l),l},d=async(e,t)=>{console.log("Creating course with data:",t);const s="".concat(a.tE,"/api/admin/master-data/courses");console.log("Creating course at endpoint:",s);const n=await fetch(s,{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(t)});if(console.log("Create course response status:",n.status),!n.ok){const e=await n.text();throw console.error("Create course error response:",e),new Error("Failed to create course: ".concat(n.status," ").concat(n.statusText," - ").concat(e))}const r=await n.json();return console.log("Create course data:",r),r},u=async(e,t,s)=>{const n="".concat(a.tE,"/api/admin/master-data/courses/").concat(t);console.log("Updating course at endpoint:",n);const r=await fetch(n,{method:"PUT",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(s)});if(console.log("Update course response status:",r.status),!r.ok){const e=await r.text();throw console.error("Update course error response:",e),new Error("Failed to update course: ".concat(r.status," ").concat(r.statusText," - ").concat(e))}const i=await r.json();return console.log("Update course data:",i),i},p=async(e,t)=>{const s="".concat(a.tE,"/api/admin/master-data/courses/").concat(t);console.log("Deleting course at endpoint:",s);const n=await fetch(s,{method:"DELETE",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(console.log("Delete course response status:",n.status),!n.ok){const e=await n.text();throw console.error("Delete course error response:",e),new Error("Failed to delete course: ".concat(n.status," ").concat(n.statusText," - ").concat(e))}return n.ok},m=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;const r=new URLSearchParams;t&&r.append("courseTypeId",t),s&&r.append("courseId",s);const i="".concat(a.tE,"/api/admin/master-data/classes?").concat(r);console.log("Fetching classes from:",i);const l=await fetch(i,{headers:{Authorization:"Bearer ".concat(e)},signal:n});if(console.log("Get classes response status:",l.status),!l.ok){const e=await l.text();throw console.error("Get classes error:",e),new Error("Failed to fetch classes: ".concat(l.status," ").concat(l.statusText," - ").concat(e))}const o=await l.json();return console.log("Classes data:",o),o},h=async(e,t)=>{console.log("Creating class with data:",t);const s="".concat(a.tE,"/api/admin/master-data/classes");console.log("Creating class at endpoint:",s);const n=await fetch(s,{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(t)});if(console.log("Create class response status:",n.status),!n.ok){const e=await n.text();throw console.error("Create class error response:",e),new Error("Failed to create class: ".concat(n.status," ").concat(n.statusText," - ").concat(e))}const r=await n.json();return console.log("Create class data:",r),r},f=async(e,t,s)=>{const n="".concat(a.tE,"/api/admin/master-data/classes/").concat(t);console.log("Updating class at endpoint:",n);const r=await fetch(n,{method:"PUT",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(s)});if(console.log("Update class response status:",r.status),!r.ok){const e=await r.text();throw console.error("Update class error response:",e),new Error("Failed to update class: ".concat(r.status," ").concat(r.statusText," - ").concat(e))}const i=await r.json();return console.log("Update class data:",i),i},x=async(e,t)=>{const s="".concat(a.tE,"/api/admin/master-data/classes/").concat(t);console.log("Deleting class at endpoint:",s);const n=await fetch(s,{method:"DELETE",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(console.log("Delete class response status:",n.status),!n.ok){const e=await n.text();throw console.error("Delete class error response:",e),new Error("Failed to delete class: ".concat(n.status," ").concat(n.statusText," - ").concat(e))}return n.ok},g=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return await v(e,{active:r,courseTypeId:t,courseId:s,classId:a,examId:n})},v=async function(e){let{active:t=null,courseTypeId:s=null,courseId:n=null,classId:r=null,examId:i=null,isCompulsory:l=null,search:o=null,unique:c=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const d=new URLSearchParams;null!==t&&d.append("active",t),s&&d.append("courseTypeId",s),n&&d.append("courseId",n),r&&d.append("classId",r),i&&d.append("examId",i),null!==l&&d.append("isCompulsory",l),o&&d.append("search",o),null!==c&&d.append("unique",c);const u="/api/admin/subjects/subject-linkages/filter".concat(d.toString()?"?".concat(d.toString()):"");console.log("Fetching subjects from:",u);try{const t=await(0,a.Vg)(u,e),s=await t.json();return console.log("Subjects data:",s),s}catch(p){throw console.error("Error fetching subjects:",p),p}},b=async function(e,t){let{active:s=null,search:n=null}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)throw new Error("Course type ID is required");const r=new URLSearchParams;r.append("courseTypeId",t),null!==s&&r.append("active",s),n&&r.append("search",n);const i="/api/admin/subjects/master-subjects/by-course-type?".concat(r.toString());console.log("Fetching master subjects from:",i);try{const t=await(0,a.Vg)(i,e),s=await t.json();return console.log("Master subjects data:",s),s}catch(l){throw console.error("Master subjects endpoint failed:",l),new Error("Failed to fetch master subjects: ".concat(l.message))}},y=async(e,t,s)=>{const n="".concat(a.tE,"/api/admin/master-data/subjects/").concat(t);console.log("Updating subject at endpoint:",n),console.log("Update subject data:",s);const r=await fetch(n,{method:"PUT",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(s)});if(console.log("Update subject response status:",r.status),!r.ok){const e=await r.text();throw console.error("Update subject error response:",e),new Error("Failed to update subject: ".concat(r.status," ").concat(r.statusText," - ").concat(e))}const i=await r.json();return console.log("Update subject data:",i),i},j=async(e,t)=>{const s="".concat(a.tE,"/api/admin/master-data/subjects/").concat(t);console.log("Deleting subject at endpoint:",s);const n=await fetch(s,{method:"DELETE",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(console.log("Delete subject response status:",n.status),!n.ok){const e=await n.text();throw console.error("Delete subject error response:",e),new Error("Failed to delete subject: ".concat(n.status," ").concat(n.statusText," - ").concat(e))}return n.ok},N=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const n=new URLSearchParams;t&&n.append("courseTypeId",t),s&&n.append("courseId",s);const r="".concat(a.tE,"/api/admin/master-data/exams?").concat(n);console.log("Fetching exams from:",r);const i=await fetch(r,{headers:{Authorization:"Bearer ".concat(e)}});if(console.log("Get exams response status:",i.status),!i.ok){const e=await i.text();throw console.error("Get exams error:",e),new Error("Failed to fetch exams: ".concat(i.status," ").concat(i.statusText," - ").concat(e))}return await i.json()},w=async(e,t)=>{console.log("Creating exam with data:",t);const s="".concat(a.tE,"/api/admin/master-data/exams");console.log("Creating exam at endpoint:",s);const n=await fetch(s,{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(t)});if(console.log("Create exam response status:",n.status),!n.ok){const e=await n.text();throw console.error("Create exam error response:",e),new Error("Failed to create exam: ".concat(n.status," ").concat(n.statusText," - ").concat(e))}const r=await n.json();return console.log("Create exam data:",r),r},k=async(e,t,s)=>{const n="".concat(a.tE,"/api/admin/master-data/exams/").concat(t);console.log("Updating exam at endpoint:",n);const r=await fetch(n,{method:"PUT",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(s)});if(console.log("Update exam response status:",r.status),!r.ok){const e=await r.text();throw console.error("Update exam error response:",e),new Error("Failed to update exam: ".concat(r.status," ").concat(r.statusText," - ").concat(e))}const i=await r.json();return console.log("Update exam data:",i),i},S=async(e,t)=>{const s="".concat(a.tE,"/api/admin/master-data/exams/").concat(t);console.log("Deleting exam at endpoint:",s);const n=await fetch(s,{method:"DELETE",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(console.log("Delete exam response status:",n.status),!n.ok){const e=await n.text();throw console.error("Delete exam error response:",e),new Error("Failed to delete exam: ".concat(n.status," ").concat(n.statusText," - ").concat(e))}return n.ok},C=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const s=new URLSearchParams;t&&s.append("classId",t);const n="".concat(a.tE,"/api/admin/master-data/class-subjects?").concat(s);console.log("Fetching class-subjects from:",n);const r=await fetch(n,{headers:{Authorization:"Bearer ".concat(e)}});if(console.log("Get class-subjects response status:",r.status),!r.ok){const e=await r.text();throw console.error("Get class-subjects error:",e),new Error("Failed to fetch class-subjects: ".concat(r.status," ").concat(r.statusText," - ").concat(e))}const i=await r.json();return console.log("Class-subjects data:",i),i},I=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const s=new URLSearchParams;t&&s.append("examId",t);const n="".concat(a.tE,"/api/admin/master-data/exam-subjects?").concat(s);console.log("Fetching exam-subjects from:",n);const r=await fetch(n,{headers:{Authorization:"Bearer ".concat(e)}});if(console.log("Get exam-subjects response status:",r.status),!r.ok){const e=await r.text();throw console.error("Get exam-subjects error:",e),new Error("Failed to fetch exam-subjects: ".concat(r.status," ").concat(r.statusText," - ").concat(e))}const i=await r.json();return console.log("Exam-subjects data:",i),i},A=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;const i=new URLSearchParams;t&&i.append("classSubjectId",t),s&&i.append("examSubjectId",s),n&&i.append("courseSubjectId",n),null!==r&&i.append("active",r);const l="".concat(a.tE,"/api/admin/master-data/topics?").concat(i);console.log("Fetching topics from URL:",l),console.log("Filters - ClassSubject:",t,"ExamSubject:",s,"CourseSubject:",n,"IsActive:",r);const o=await fetch(l,{headers:{Authorization:"Bearer ".concat(e)}});if(console.log("Topics response status:",o.status),!o.ok){const e=await o.text();throw console.error("Topics error response:",e),new Error("Failed to fetch topics: ".concat(o.status," ").concat(o.statusText," - ").concat(e))}const c=await o.json();return console.log("Topics data:",c),c},E=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;const l=new URLSearchParams;null!==t&&l.append("active",t),s&&l.append("name",s),n&&l.append("subjectId",n),r&&l.append("courseTypeId",r),i&&l.append("createdAfter",i);const o="".concat(a.tE,"/api/admin/master-data/topics?").concat(l);console.log("Fetching topics with filters from URL:",o),console.log("Filters - Active:",t,"Name:",s,"SubjectId:",n,"CourseTypeId:",r,"CreatedAfter:",i);const c=await fetch(o,{headers:{Authorization:"Bearer ".concat(e)}});if(console.log("Topics with filters response status:",c.status),!c.ok){const e=await c.text();throw console.error("Topics with filters error response:",e),new Error("Failed to fetch topics with filters: ".concat(c.status," ").concat(c.statusText," - ").concat(e))}const d=await c.json();return console.log("Topics with filters data:",d),console.log("Topics data type:",typeof d),console.log("Topics data structure:",Array.isArray(d)?"Array":"Object"),Array.isArray(d)?console.log("Topics array length:",d.length):d&&"object"===typeof d&&console.log("Topics object keys:",Object.keys(d)),d},T=async function(e,t,s){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!t||!s)throw new Error("Course type ID and relationship ID are required");const r=new URLSearchParams;r.append("courseTypeId",t),r.append("relationshipId",s),null!==n&&r.append("active",n);const i="".concat(a.tE,"/api/admin/master-data/topics/by-linkage?").concat(r);console.log("Fetching topics by linkage from URL:",i),console.log("Filters - CourseType:",t,"RelationshipId:",s,"Active:",n);const l=await fetch(i,{headers:{Authorization:"Bearer ".concat(e)}});if(console.log("Topics by linkage response status:",l.status),!l.ok){const e=await l.text();throw console.error("Topics by linkage error response:",e),new Error("Failed to fetch topics by linkage: ".concat(l.status," ").concat(l.statusText," - ").concat(e))}const o=await l.json();return console.log("Topics by linkage data:",o),o},P=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{courseTypeId:n=null,courseId:r=null,classId:i=null,examId:l=null,subjectId:o=null,active:c=null,search:d=null}=t,u=new URLSearchParams;null!==n&&""!==n&&u.append("courseTypeId",n),null!==r&&""!==r&&u.append("courseId",r),null!==i&&""!==i&&u.append("classId",i),null!==l&&""!==l&&u.append("examId",l),null!==o&&""!==o&&u.append("subjectId",o),null!==c&&""!==c&&u.append("active",c),null!==d&&""!==d&&u.append("search",d);const p="".concat(a.tE,s?"/api/admin/master-data/topics/public/combined-filter":"/api/admin/master-data/topics/combined-filter"),m="".concat(p).concat(u.toString()?"?"+u.toString():"");console.log("Fetching topics with combined filter at endpoint:",m),console.log("Filter parameters:",t),console.log("Using public endpoint:",s);const h={};!s&&e&&(h.Authorization="Bearer ".concat(e));const f=await fetch(m,{method:"GET",headers:h});if(console.log("Combined filter topics response status:",f.status),!f.ok){const e=await f.text();throw console.error("Combined filter topics error response:",e),new Error("Failed to fetch topics with combined filter: ".concat(f.status," ").concat(f.statusText," - ").concat(e))}const x=await f.json();return console.log("Combined filter topics data:",x),Array.isArray(x)?x:x.content&&Array.isArray(x.content)?x.content:x.data&&Array.isArray(x.data)?x.data:(console.warn("Unexpected response structure for combined filter topics:",x),[])},L=async(e,t)=>{const s="".concat(a.tE,"/api/admin/master-data/topics");console.log("Creating topic at endpoint:",s),console.log("Topic data:",t);const n=await fetch(s,{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(t)});if(console.log("Create topic response status:",n.status),console.log("Create topic response headers:",Object.fromEntries(n.headers.entries())),!n.ok){const a=await n.text();throw console.error("Create topic error response:",a),console.error("Request details:",{endpoint:s,method:"POST",headers:{Authorization:"Bearer ".concat(e?"TOKEN_PRESENT":"NO_TOKEN"),"Content-Type":"application/json"},body:t}),new Error("Failed to create topic: ".concat(n.status," ").concat(n.statusText," - ").concat(a))}const r=await n.json();return console.log("Create topic data:",r),r},R=async(e,t,s)=>{const n="".concat(a.tE,"/api/admin/master-data/topics/create/").concat(t);console.log("Updating topic at endpoint:",n);const r=await fetch(n,{method:"PUT",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(s)});if(console.log("Update topic response status:",r.status),!r.ok){const e=await r.text();throw console.error("Update topic error response:",e),new Error("Failed to update topic: ".concat(r.status," ").concat(r.statusText," - ").concat(e))}const i=await r.json();return console.log("Update topic data:",i),i},M=async(e,t)=>{const s="".concat(a.tE,"/api/admin/master-data/topics/create/").concat(t);console.log("Deleting topic at endpoint:",s);const n=await fetch(s,{method:"DELETE",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(console.log("Delete topic response status:",n.status),!n.ok){const e=await n.text();throw console.error("Delete topic error response:",e),new Error("Failed to delete topic: ".concat(n.status," ").concat(n.statusText," - ").concat(e))}return n.ok},D=async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"createdAt",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"desc";const l=new URLSearchParams;t&&l.append("courseId",t),l.append("page",s),l.append("size",n),l.append("sortBy",r),l.append("sortDir",i);const o="".concat(a.tE,"/api/admin/master-data/classes?").concat(l);console.log("Fetching classes by course from:",o);const c=await fetch(o,{headers:{Authorization:"Bearer ".concat(e)}});if(console.log("Get classes by course response status:",c.status),!c.ok){const e=await c.text();throw console.error("Get classes by course error:",e),new Error("Failed to fetch classes: ".concat(c.status," ").concat(c.statusText," - ").concat(e))}const d=await c.json();return console.log("Classes by course data:",d),d},F=async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"createdAt",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"desc";const l=new URLSearchParams;t&&l.append("courseId",t),l.append("page",s),l.append("size",n),l.append("sortBy",r),l.append("sortDir",i);const o="".concat(a.tE,"/api/admin/master-data/exams?").concat(l);console.log("Fetching exams by course from:",o);const c=await fetch(o,{headers:{Authorization:"Bearer ".concat(e)}});if(console.log("Get exams by course response status:",c.status),!c.ok){const e=await c.text();throw console.error("Get exams by course error:",e),new Error("Failed to fetch exams: ".concat(c.status," ").concat(c.statusText," - ").concat(e))}const d=await c.json();return console.log("Exams by course data:",d),d},z=async(e,t)=>{if(!t||!t.subjectId)throw new Error("subjectId is required");const s="".concat(a.tE,"/api/admin/subjects/create-with-auto-link");console.log("Auto-link subject via endpoint:",s,t);const n=await fetch(s,{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const e=await n.text();console.error("Auto-link error response:",e);let t=e;try{const s=JSON.parse(e);t=s.error||s.message||e}catch(r){t=e}throw new Error("Failed to link subject: ".concat(n.status," ").concat(n.statusText," - ").concat(t))}return n.json()},O=async function(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t)throw new Error("Topic ID is required");const n=new URLSearchParams;null!==s&&n.append("active",s);const r="/api/admin/master-data/modules/topic/".concat(t).concat(n.toString()?"?".concat(n.toString()):"");console.log("Fetching modules by topic from endpoint:",r);try{const t=await(0,a.Vg)(r,e),s=await t.json();return console.log("Modules by topic data:",s),s}catch(i){throw console.error("Error fetching modules by topic:",i),i}},_=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;console.log("Fetching modules with filters:",{active:t,subjectId:s,topicId:n});const r=new URLSearchParams;null!==t&&r.append("active",t),s&&r.append("subjectId",s),n&&r.append("topicId",n);const i="".concat(a.tE,"/api/admin/master-data/modules").concat(r.toString()?"?".concat(r.toString()):"");console.log("Fetching modules from endpoint:",i);const l=await fetch(i,{method:"GET",headers:{Authorization:"Bearer ".concat(e)}});if(!l.ok){const e=await l.text();throw console.error("Error response:",e),new Error("Failed to fetch modules: ".concat(l.status," ").concat(l.statusText))}const o=await l.json();return console.log("Modules fetched successfully:",o),console.log("Modules data type:",typeof o),console.log("Modules data structure:",Array.isArray(o)?"Array":"Object"),Array.isArray(o)?console.log("Modules array length:",o.length):o&&"object"===typeof o&&console.log("Modules object keys:",Object.keys(o)),o},q=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{courseTypeId:s=null,courseId:n=null,classId:r=null,examId:i=null,subjectId:l=null,topicId:o=null,active:c=!0,page:d=0,size:u=10,sortBy:p="createdAt",sortDir:m="desc"}=t,h=new URLSearchParams;s&&h.append("courseTypeId",s),n&&h.append("courseId",n),r&&h.append("classId",r),i&&h.append("examId",i),l&&h.append("subjectId",l),o&&h.append("topicId",o),null!==c&&void 0!==c&&h.append("active",c),null!==d&&void 0!==d&&h.append("page",d),null!==u&&void 0!==u&&h.append("size",u),p&&h.append("sortBy",p),m&&h.append("sortDir",m);const f="".concat(a.tE,"/api/admin/master-data/modules/combined-filter").concat(h.toString()?"?"+h.toString():"");console.log("Fetching modules with combined filter at endpoint:",f),console.log("Filter parameters:",t);try{const t=await fetch(f,{method:"GET",headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok){const e=await t.text();throw console.error("Error response:",e),new Error(e||"Failed to fetch modules (combined-filter): ".concat(t.status," ").concat(t.statusText))}const s=await t.json();return console.log("Modules (combined-filter) fetched successfully:",s),s}catch(x){return console.warn("Combined-filter failed, attempting fallback via simpler endpoints:",null===x||void 0===x?void 0:x.message),o?await O(e,o,c):l?await _(e,c,l,null):await _(e,c,null,null)}},B=async(e,t)=>{console.log("Creating module:",t);const s={name:t.name,description:t.description||"",displayOrder:t.displayOrder||0,isActive:t.isActive,topicId:t.topicId},n="".concat(a.tE,"/api/admin/master-data/modules");console.log("Creating module at endpoint:",n),console.log("Request body:",s);const r=await fetch(n,{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(s)});if(!r.ok){const e=await r.text();throw console.error("Error response:",e),new Error("Failed to create module: ".concat(r.status," ").concat(r.statusText))}const i=await r.json();return console.log("Module created successfully:",i),i},U=async(e,t,s)=>{console.log("Updating module:",t,s);const n={name:s.name,description:s.description||"",displayOrder:s.displayOrder||0,isActive:s.isActive,topicId:s.topicId},r="".concat(a.tE,"/api/admin/master-data/modules/").concat(t);console.log("Updating module at endpoint:",r),console.log("Request body:",n);const i=await fetch(r,{method:"PUT",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(n)});if(!i.ok){const e=await i.text();throw console.error("Error response:",e),new Error("Failed to update module: ".concat(i.status," ").concat(i.statusText))}const l=await i.json();return console.log("Module updated successfully:",l),l},W=async(e,t)=>{console.log("Creating chapter with multipart data:",t);const s=new FormData,n={name:t.name,description:t.description||"",moduleId:t.moduleId,displayOrder:t.displayOrder||0,isActive:t.isActive};if(s.append("chapter",JSON.stringify(n)),t.uploadedFiles&&t.uploadedFiles.length>0){const e=t.uploadedFileObjects||{};t.uploadedFiles.forEach(t=>{const a=e[t];a&&(s.append("files",a),console.log("Added file to form data:",t))})}t.uploadedFileTitles&&t.uploadedFileTitles.length>0&&t.uploadedFileTitles.forEach(e=>{s.append("fileTitles",e)}),t.youtubeLinks&&t.youtubeLinks.length>0&&t.youtubeLinks.forEach(e=>{s.append("videoLinks",e)}),t.youtubeTitles&&t.youtubeTitles.length>0&&t.youtubeTitles.forEach(e=>{s.append("videoTitles",e)});const r="".concat(a.tE,"/api/admin/master-data/chapters");console.log("Creating chapter at endpoint:",r),console.log("FormData entries:",Array.from(s.entries()));const i=await fetch(r,{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:s});if(console.log("Create chapter response status:",i.status),!i.ok){const e=await i.text();throw console.error("Create chapter failed:",i.status,i.statusText,e),new Error("Failed to create chapter: ".concat(i.status," ").concat(i.statusText," - ").concat(e))}const l=await i.json();return console.log("Chapter created successfully:",l),l},Q=async(e,t,s)=>{console.log("Updating chapter with multipart data:",t,s);const n=new FormData,r={name:s.name,description:s.description||"",moduleId:s.moduleId,displayOrder:s.displayOrder||0,isActive:s.isActive};if(n.append("chapter",JSON.stringify(r)),s.uploadedFiles&&s.uploadedFiles.length>0){const e=s.uploadedFileObjects||{};s.uploadedFiles.forEach(t=>{const s=e[t];s&&(n.append("files",s),console.log("Added file to form data:",t))})}s.uploadedFileTitles&&s.uploadedFileTitles.length>0&&s.uploadedFileTitles.forEach(e=>{n.append("fileTitles",e)}),s.youtubeLinks&&s.youtubeLinks.length>0&&s.youtubeLinks.forEach(e=>{n.append("videoLinks",e)}),s.youtubeTitles&&s.youtubeTitles.length>0&&s.youtubeTitles.forEach(e=>{n.append("videoTitles",e)});const i="".concat(a.tE,"/api/admin/master-data/chapters/").concat(t,"/multipart");console.log("Updating chapter at endpoint:",i),console.log("FormData entries:",Array.from(n.entries()));const l=await fetch(i,{method:"PUT",headers:{Authorization:"Bearer ".concat(e)},body:n});if(console.log("Update chapter response status:",l.status),!l.ok){const e=await l.text();throw console.error("Update chapter failed:",l.status,l.statusText,e),new Error("Failed to update chapter: ".concat(l.status," ").concat(l.statusText," - ").concat(e))}const o=await l.json();return console.log("Chapter updated successfully:",o),o},H=async(e,t)=>{console.log("Deleting chapter:",t);const s="/api/admin/master-data/chapters/".concat(t);return console.log("Deleting chapter at endpoint:",s),await(0,a.Al)(s,e),console.log("Chapter deleted successfully"),!0},V=async function(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t)throw new Error("Module ID is required");const n=new URLSearchParams;null!==s&&n.append("active",s);const r="/api/admin/master-data/chapters/module/".concat(t).concat(n.toString()?"?".concat(n.toString()):"");console.log("Fetching chapters by module from endpoint:",r);const i=await(0,a.Vg)(r,e),l=await i.json();return console.log("Chapters by module fetched successfully:",l),l},Y=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{courseTypeId:s=null,courseId:n=null,classId:r=null,examId:i=null,subjectId:l=null,topicId:o=null,moduleId:c=null,search:d=null,active:u=!0,page:p=0,size:m=10,sortBy:h="createdAt",sortDir:f="desc"}=t,x=new URLSearchParams;s&&x.append("courseTypeId",s),n&&x.append("courseId",n),r&&x.append("classId",r),i&&x.append("examId",i),l&&x.append("subjectId",l),o&&x.append("topicId",o),c&&x.append("moduleId",c),d&&x.append("search",d),null!==u&&void 0!==u&&x.append("active",u),null!==p&&void 0!==p&&x.append("page",p),null!==m&&void 0!==m&&x.append("size",m),h&&x.append("sortBy",h),f&&x.append("sortDir",f);const g="".concat(a.tE,"/api/admin/master-data/chapters/combined-filter").concat(x.toString()?"?".concat(x.toString()):"");console.log("Fetching chapters with combined filter at endpoint:",g),console.log("Filter parameters:",t);const v=async()=>{if(c)return await V(e,c,u);if(o){const s=await O(e,o,u),a=Array.isArray(s)?s:(null===s||void 0===s?void 0:s.content)||(null===s||void 0===s?void 0:s.data)||[],n=[];for(const r of a)try{const t=await V(e,r.id,u),s=Array.isArray(t)?t:(null===t||void 0===t?void 0:t.content)||(null===t||void 0===t?void 0:t.data)||[];n.push(...s)}catch(t){}return n}return[]};try{const t=await fetch(g,{method:"GET",headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok){const e=await t.text();return console.warn("Chapters combined-filter not supported or failed. Falling back. Response:",e),await v()}const s=await t.json();return console.log("Chapters (combined-filter) fetched successfully:",s),s}catch(b){return console.warn("Chapters combined-filter error, falling back:",null===b||void 0===b?void 0:b.message),await v()}},$=async(e,t)=>{console.log("Deleting module:",t);const s="".concat(a.tE,"/api/admin/master-data/modules/").concat(t);console.log("Deleting module at endpoint:",s);const n=await fetch(s,{method:"DELETE",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!n.ok){const e=await n.text();throw console.error("Error response:",e),new Error("Failed to delete module: ".concat(n.status," ").concat(n.statusText))}return console.log("Module deleted successfully"),!0},J=async e=>{const t="/api/admin/master-data/questions";console.log("Fetching questions from:",t);try{const s=await(0,a.Vg)(t,e),n=await s.json();return console.log("Questions data:",n),n}catch(s){throw console.error("Error fetching questions:",s),s}},K=async(e,t)=>{console.log("Creating question with data:",t),console.log("examSuitabilities structure:",t.examSuitabilities),console.log("examHistories structure:",t.examHistories),console.log("options structure:",t.options);try{const s=await(0,a.$P)("/api/admin/master-data/questions",t,e),n=await s.json();return console.log("Question created:",n),n}catch(s){throw console.error("Error creating question:",s),s}},G=async(e,t,s)=>{const n="/api/admin/master-data/questions/".concat(t);console.log("Updating question:",t,s),console.log("examSuitabilities structure:",s.examSuitabilities),console.log("examHistories structure:",s.examHistories),console.log("options structure:",s.options);try{const t=await(0,a.mu)(n,s,e),r=await t.json();return console.log("Question updated:",r),r}catch(r){throw console.error("Error updating question:",r),r}},X=async(e,t)=>{const s="/api/admin/master-data/questions/".concat(t);console.log("Deleting question:",t);try{const t=await(0,a.Al)(s,e),n=await t.json();return console.log("Question deleted:",n),n}catch(n){throw console.error("Error deleting question:",n),n}},Z=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=new URLSearchParams;void 0!==t.active&&null!==t.active&&s.append("active",t.active),t.masterExamId&&s.append("masterExamId",t.masterExamId),t.status&&s.append("status",t.status),t.search&&s.append("search",t.search);const n="/api/admin/master-data/tests".concat(s.toString()?"?".concat(s.toString()):"");console.log("Fetching tests from endpoint:",n),console.log("Full URL will be: http://localhost:8080"+n);try{const t=await(0,a.Vg)(n,e),s=await t.json();return console.log("Tests data:",s),s}catch(r){throw console.error("Error fetching tests:",r),r}},ee=async(e,t)=>{console.log("Creating test with data:",t);const s="/api/admin/master-data/tests";console.log("Creating test at endpoint:",s);try{const n=await(0,a.$P)(s,t,e),r=await n.json();return console.log("Test created successfully:",r),r}catch(n){throw console.error("Error creating test:",n),n}},te=async(e,t,s)=>{console.log("Updating test:",t,s);const n="/api/admin/master-data/tests/".concat(t);console.log("Updating test at endpoint:",n);try{const t=await(0,a.mu)(n,s,e),r=await t.json();return console.log("Test updated successfully:",r),r}catch(r){throw console.error("Error updating test:",r),r}},se=async(e,t)=>{console.log("Deleting test:",t);const s="/api/admin/master-data/tests/".concat(t);console.log("Deleting test at endpoint:",s);try{const t=await(0,a.Al)(s,e),n=await t.json();return console.log("Test deleted successfully:",n),n}catch(n){throw console.error("Error deleting test:",n),n}},ae=async(e,t)=>{console.log("Fetching test questions for test:",t);const s="/api/admin/master-data/tests/".concat(t,"/questions");console.log("Fetching test questions from:",s);try{const t=await(0,a.Vg)(s,e),n=await t.json();return console.log("Test questions data:",n),n}catch(n){throw console.error("Error fetching test questions:",n),n}},ne=async(e,t,s)=>{console.log("Adding question to test:",t,s);const n="/api/admin/master-data/tests/".concat(t,"/questions");console.log("Adding question to test at endpoint:",n);try{const t=await(0,a.$P)(n,s,e),r=await t.json();return console.log("Question added to test successfully:",r),r}catch(r){throw console.error("Error adding question to test:",r),r}},re=async(e,t,s)=>{console.log("Removing question from test:",t,s);const n="/api/admin/master-data/tests/".concat(t,"/questions/").concat(s);console.log("Removing question from test at endpoint:",n);try{const t=await(0,a.Al)(n,e),s=await t.json();return console.log("Question removed from test successfully:",s),s}catch(r){throw console.error("Error removing question from test:",r),r}},ie=async(e,t,s,n)=>{console.log("Updating test question:",t,s,n);const r="/api/admin/master-data/tests/".concat(t,"/questions/").concat(s);console.log("Updating test question at endpoint:",r);try{const t=await(0,a.mu)(r,n,e),s=await t.json();return console.log("Test question updated successfully:",s),s}catch(i){throw console.error("Error updating test question:",i),i}},le=async(e,t)=>{console.log("Publishing test:",t);const s="/api/admin/master-data/tests/".concat(t,"/publish");console.log("Publishing test at endpoint:",s);try{const t=await(0,a.$P)(s,{},e),n=await t.json();return console.log("Test published successfully:",n),n}catch(n){throw console.error("Error publishing test:",n),n}},oe=async(e,t)=>{console.log("Unpublishing test:",t);const s="/api/admin/master-data/tests/".concat(t,"/unpublish");console.log("Unpublishing test at endpoint:",s);try{const t=await(0,a.$P)(s,{},e),n=await t.json();return console.log("Test unpublished successfully:",n),n}catch(n){throw console.error("Error unpublishing test:",n),n}}},730:(e,t,s)=>{var a=s(43),n=s(853);function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,l={};function o(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(l[e]=t,e=0;e<t.length;e++)i.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},h={};function f(e,t,s,a,n,r,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=a,this.attributeNamespace=n,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=r,this.removeEmptyString=i}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){x[e]=new f(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];x[t]=new f(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){x[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){x[e]=new f(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){x[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){x[e]=new f(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){x[e]=new f(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){x[e]=new f(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){x[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)});var g=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,s,a){var n=x.hasOwnProperty(t)?x[t]:null;(null!==n?0!==n.type:a||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,s,a){if(null===t||"undefined"===typeof t||function(e,t,s,a){if(null!==s&&0===s.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!a&&(null!==s?!s.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,s,a))return!0;if(a)return!1;if(null!==s)switch(s.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,s,n,a)&&(s=null),a||null===n?function(e){return!!u.call(h,e)||!u.call(m,e)&&(p.test(e)?h[e]=!0:(m[e]=!0,!1))}(t)&&(null===s?e.removeAttribute(t):e.setAttribute(t,""+s)):n.mustUseProperty?e[n.propertyName]=null===s?3!==n.type&&"":s:(t=n.attributeName,a=n.attributeNamespace,null===s?e.removeAttribute(t):(s=3===(n=n.type)||4===n&&!0===s?"":""+s,a?e.setAttributeNS(a,t,s):e.setAttribute(t,s))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(g,v);x[t]=new f(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(g,v);x[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(g,v);x[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){x[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)}),x.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){x[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)});var y=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=Symbol.for("react.element"),N=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),I=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),L=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}var F,z=Object.assign;function O(e){if(void 0===F)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var _=!1;function q(e,t){if(!e||_)return"";_=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var a=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){a=c}e.call(t.prototype)}else{try{throw Error()}catch(c){a=c}e()}}catch(c){if(c&&a&&"string"===typeof c.stack){for(var n=c.stack.split("\n"),r=a.stack.split("\n"),i=n.length-1,l=r.length-1;1<=i&&0<=l&&n[i]!==r[l];)l--;for(;1<=i&&0<=l;i--,l--)if(n[i]!==r[l]){if(1!==i||1!==l)do{if(i--,0>--l||n[i]!==r[l]){var o="\n"+n[i].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}}while(1<=i&&0<=l);break}}}finally{_=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?O(e):""}function B(e){switch(e.tag){case 5:return O(e.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return e=q(e.type,!1);case 11:return e=q(e.type.render,!1);case 1:return e=q(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case w:return"Fragment";case N:return"Portal";case S:return"Profiler";case k:return"StrictMode";case E:return"Suspense";case T:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case L:t=e._payload,e=e._init;try{return U(e(t))}catch(s){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function V(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof s&&"function"===typeof s.get&&"function"===typeof s.set){var n=s.get,r=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(e){a=""+e,r.call(this,e)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(e){a=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),a="";return e&&(a=H(e)?e.checked?"true":"false":e.value),(e=a)!==s&&(t.setValue(e),!0)}function $(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var s=t.checked;return z({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=s?s:e._wrapperState.initialChecked})}function K(e,t){var s=null==t.defaultValue?"":t.defaultValue,a=null!=t.checked?t.checked:t.defaultChecked;s=Q(null!=t.value?t.value:s),e._wrapperState={initialChecked:a,initialValue:s,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function G(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){G(e,t);var s=Q(t.value),a=t.type;if(null!=s)"number"===a?(0===s&&""===e.value||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if("submit"===a||"reset"===a)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,s):t.hasOwnProperty("defaultValue")&&ee(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!("submit"!==a&&"reset"!==a||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}""!==(s=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==s&&(e.name=s)}function ee(e,t,s){"number"===t&&$(e.ownerDocument)===e||(null==s?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var te=Array.isArray;function se(e,t,s,a){if(e=e.options,t){t={};for(var n=0;n<s.length;n++)t["$"+s[n]]=!0;for(s=0;s<e.length;s++)n=t.hasOwnProperty("$"+e[s].value),e[s].selected!==n&&(e[s].selected=n),n&&a&&(e[s].defaultSelected=!0)}else{for(s=""+Q(s),t=null,n=0;n<e.length;n++){if(e[n].value===s)return e[n].selected=!0,void(a&&(e[n].defaultSelected=!0));null!==t||e[n].disabled||(t=e[n])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(r(91));return z({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ne(e,t){var s=t.value;if(null==s){if(s=t.children,t=t.defaultValue,null!=s){if(null!=t)throw Error(r(92));if(te(s)){if(1<s.length)throw Error(r(93));s=s[0]}t=s}null==t&&(t=""),s=t}e._wrapperState={initialValue:Q(s)}}function re(e,t){var s=Q(t.value),a=Q(t.defaultValue);null!=s&&((s=""+s)!==e.value&&(e.value=s),null==t.defaultValue&&e.defaultValue!==s&&(e.defaultValue=s)),null!=a&&(e.defaultValue=""+a)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function le(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?le(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,s,a){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function pe(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&3===s.nodeType)return void(s.nodeValue=t)}e.textContent=t}var me={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},he=["Webkit","ms","Moz","O"];function fe(e,t,s){return null==t||"boolean"===typeof t||""===t?"":s||"number"!==typeof t||0===t||me.hasOwnProperty(e)&&me[e]?(""+t).trim():t+"px"}function xe(e,t){for(var s in e=e.style,t)if(t.hasOwnProperty(s)){var a=0===s.indexOf("--"),n=fe(s,t[s],a);"float"===s&&(s="cssFloat"),a?e.setProperty(s,n):e[s]=n}}Object.keys(me).forEach(function(e){he.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),me[t]=me[e]})});var ge=z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(r(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(r(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(r(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(r(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ye=null;function je(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ne=null,we=null,ke=null;function Se(e){if(e=bn(e)){if("function"!==typeof Ne)throw Error(r(280));var t=e.stateNode;t&&(t=jn(t),Ne(e.stateNode,e.type,t))}}function Ce(e){we?ke?ke.push(e):ke=[e]:we=e}function Ie(){if(we){var e=we,t=ke;if(ke=we=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ae(e,t){return e(t)}function Ee(){}var Te=!1;function Pe(e,t,s){if(Te)return e(t,s);Te=!0;try{return Ae(e,t,s)}finally{Te=!1,(null!==we||null!==ke)&&(Ee(),Ie())}}function Le(e,t){var s=e.stateNode;if(null===s)return null;var a=jn(s);if(null===a)return null;s=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(a=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!a;break e;default:e=!1}if(e)return null;if(s&&"function"!==typeof s)throw Error(r(231,t,typeof s));return s}var Re=!1;if(d)try{var Me={};Object.defineProperty(Me,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,Me)}catch(de){Re=!1}function De(e,t,s,a,n,r,i,l,o){var c=Array.prototype.slice.call(arguments,3);try{t.apply(s,c)}catch(d){this.onError(d)}}var Fe=!1,ze=null,Oe=!1,_e=null,qe={onError:function(e){Fe=!0,ze=e}};function Be(e,t,s,a,n,r,i,l,o){Fe=!1,ze=null,De.apply(qe,arguments)}function Ue(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(s=t.return),e=t.return}while(e)}return 3===t.tag?s:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Qe(e){if(Ue(e)!==e)throw Error(r(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(r(188));return t!==e?null:e}for(var s=e,a=t;;){var n=s.return;if(null===n)break;var i=n.alternate;if(null===i){if(null!==(a=n.return)){s=a;continue}break}if(n.child===i.child){for(i=n.child;i;){if(i===s)return Qe(n),e;if(i===a)return Qe(n),t;i=i.sibling}throw Error(r(188))}if(s.return!==a.return)s=n,a=i;else{for(var l=!1,o=n.child;o;){if(o===s){l=!0,s=n,a=i;break}if(o===a){l=!0,a=n,s=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===s){l=!0,s=i,a=n;break}if(o===a){l=!0,a=i,s=n;break}o=o.sibling}if(!l)throw Error(r(189))}}if(s.alternate!==a)throw Error(r(190))}if(3!==s.tag)throw Error(r(188));return s.stateNode.current===s?e:t}(e))?Ve(e):null}function Ve(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ve(e);if(null!==t)return t;e=e.sibling}return null}var Ye=n.unstable_scheduleCallback,$e=n.unstable_cancelCallback,Je=n.unstable_shouldYield,Ke=n.unstable_requestPaint,Ge=n.unstable_now,Xe=n.unstable_getCurrentPriorityLevel,Ze=n.unstable_ImmediatePriority,et=n.unstable_UserBlockingPriority,tt=n.unstable_NormalPriority,st=n.unstable_LowPriority,at=n.unstable_IdlePriority,nt=null,rt=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(lt(e)/ot|0)|0},lt=Math.log,ot=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pt(e,t){var s=e.pendingLanes;if(0===s)return 0;var a=0,n=e.suspendedLanes,r=e.pingedLanes,i=268435455&s;if(0!==i){var l=i&~n;0!==l?a=ut(l):0!==(r&=i)&&(a=ut(r))}else 0!==(i=s&~n)?a=ut(i):0!==r&&(a=ut(r));if(0===a)return 0;if(0!==t&&t!==a&&0===(t&n)&&((n=a&-a)>=(r=t&-t)||16===n&&0!==(4194240&r)))return t;if(0!==(4&a)&&(a|=16&s),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=a;0<t;)n=1<<(s=31-it(t)),a|=e[s],t&=~n;return a}function mt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ht(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function xt(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function gt(e,t,s){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=s}function vt(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var a=31-it(s),n=1<<a;n&t|e[a]&t&&(e[a]|=t),s&=~n}}var bt=0;function yt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var jt,Nt,wt,kt,St,Ct=!1,It=[],At=null,Et=null,Tt=null,Pt=new Map,Lt=new Map,Rt=[],Mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":Et=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lt.delete(t.pointerId)}}function Ft(e,t,s,a,n,r){return null===e||e.nativeEvent!==r?(e={blockedOn:t,domEventName:s,eventSystemFlags:a,nativeEvent:r,targetContainers:[n]},null!==t&&(null!==(t=bn(t))&&Nt(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,null!==n&&-1===t.indexOf(n)&&t.push(n),e)}function zt(e){var t=vn(e.target);if(null!==t){var s=Ue(t);if(null!==s)if(13===(t=s.tag)){if(null!==(t=We(s)))return e.blockedOn=t,void St(e.priority,function(){wt(s)})}else if(3===t&&s.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===s.tag?s.stateNode.containerInfo:null)}e.blockedOn=null}function Ot(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var s=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==s)return null!==(t=bn(s))&&Nt(t),e.blockedOn=s,!1;var a=new(s=e.nativeEvent).constructor(s.type,s);ye=a,s.target.dispatchEvent(a),ye=null,t.shift()}return!0}function _t(e,t,s){Ot(e)&&s.delete(t)}function qt(){Ct=!1,null!==At&&Ot(At)&&(At=null),null!==Et&&Ot(Et)&&(Et=null),null!==Tt&&Ot(Tt)&&(Tt=null),Pt.forEach(_t),Lt.forEach(_t)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,qt)))}function Ut(e){function t(t){return Bt(t,e)}if(0<It.length){Bt(It[0],e);for(var s=1;s<It.length;s++){var a=It[s];a.blockedOn===e&&(a.blockedOn=null)}}for(null!==At&&Bt(At,e),null!==Et&&Bt(Et,e),null!==Tt&&Bt(Tt,e),Pt.forEach(t),Lt.forEach(t),s=0;s<Rt.length;s++)(a=Rt[s]).blockedOn===e&&(a.blockedOn=null);for(;0<Rt.length&&null===(s=Rt[0]).blockedOn;)zt(s),null===s.blockedOn&&Rt.shift()}var Wt=y.ReactCurrentBatchConfig,Qt=!0;function Ht(e,t,s,a){var n=bt,r=Wt.transition;Wt.transition=null;try{bt=1,Yt(e,t,s,a)}finally{bt=n,Wt.transition=r}}function Vt(e,t,s,a){var n=bt,r=Wt.transition;Wt.transition=null;try{bt=4,Yt(e,t,s,a)}finally{bt=n,Wt.transition=r}}function Yt(e,t,s,a){if(Qt){var n=Jt(e,t,s,a);if(null===n)Wa(e,t,a,$t,s),Dt(e,a);else if(function(e,t,s,a,n){switch(t){case"focusin":return At=Ft(At,e,t,s,a,n),!0;case"dragenter":return Et=Ft(Et,e,t,s,a,n),!0;case"mouseover":return Tt=Ft(Tt,e,t,s,a,n),!0;case"pointerover":var r=n.pointerId;return Pt.set(r,Ft(Pt.get(r)||null,e,t,s,a,n)),!0;case"gotpointercapture":return r=n.pointerId,Lt.set(r,Ft(Lt.get(r)||null,e,t,s,a,n)),!0}return!1}(n,e,t,s,a))a.stopPropagation();else if(Dt(e,a),4&t&&-1<Mt.indexOf(e)){for(;null!==n;){var r=bn(n);if(null!==r&&jt(r),null===(r=Jt(e,t,s,a))&&Wa(e,t,a,$t,s),r===n)break;n=r}null!==n&&a.stopPropagation()}else Wa(e,t,a,null,s)}}var $t=null;function Jt(e,t,s,a){if($t=null,null!==(e=vn(e=je(a))))if(null===(t=Ue(e)))e=null;else if(13===(s=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===s){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return $t=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case st:return 16;case at:return 536870912;default:return 16}default:return 16}}var Gt=null,Xt=null,Zt=null;function es(){if(Zt)return Zt;var e,t,s=Xt,a=s.length,n="value"in Gt?Gt.value:Gt.textContent,r=n.length;for(e=0;e<a&&s[e]===n[e];e++);var i=a-e;for(t=1;t<=i&&s[a-t]===n[r-t];t++);return Zt=n.slice(e,1<t?1-t:void 0)}function ts(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function ss(){return!0}function as(){return!1}function ns(e){function t(t,s,a,n,r){for(var i in this._reactName=t,this._targetInst=a,this.type=s,this.nativeEvent=n,this.target=r,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(n):n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?ss:as,this.isPropagationStopped=as,this}return z(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ss)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ss)},persist:function(){},isPersistent:ss}),t}var rs,is,ls,os={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cs=ns(os),ds=z({},os,{view:0,detail:0}),us=ns(ds),ps=z({},ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ks,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ls&&(ls&&"mousemove"===e.type?(rs=e.screenX-ls.screenX,is=e.screenY-ls.screenY):is=rs=0,ls=e),rs)},movementY:function(e){return"movementY"in e?e.movementY:is}}),ms=ns(ps),hs=ns(z({},ps,{dataTransfer:0})),fs=ns(z({},ds,{relatedTarget:0})),xs=ns(z({},os,{animationName:0,elapsedTime:0,pseudoElement:0})),gs=z({},os,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vs=ns(gs),bs=ns(z({},os,{data:0})),ys={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},js={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ns={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ws(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Ns[e])&&!!t[e]}function ks(){return ws}var Ss=z({},ds,{key:function(e){if(e.key){var t=ys[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ts(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?js[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ks,charCode:function(e){return"keypress"===e.type?ts(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ts(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cs=ns(Ss),Is=ns(z({},ps,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),As=ns(z({},ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ks})),Es=ns(z({},os,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ts=z({},ps,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ps=ns(Ts),Ls=[9,13,27,32],Rs=d&&"CompositionEvent"in window,Ms=null;d&&"documentMode"in document&&(Ms=document.documentMode);var Ds=d&&"TextEvent"in window&&!Ms,Fs=d&&(!Rs||Ms&&8<Ms&&11>=Ms),zs=String.fromCharCode(32),Os=!1;function _s(e,t){switch(e){case"keyup":return-1!==Ls.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qs(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bs=!1;var Us={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ws(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Us[e.type]:"textarea"===t}function Qs(e,t,s,a){Ce(a),0<(t=Ha(t,"onChange")).length&&(s=new cs("onChange","change",null,s,a),e.push({event:s,listeners:t}))}var Hs=null,Vs=null;function Ys(e){za(e,0)}function $s(e){if(Y(yn(e)))return e}function Js(e,t){if("change"===e)return t}var Ks=!1;if(d){var Gs;if(d){var Xs="oninput"in document;if(!Xs){var Zs=document.createElement("div");Zs.setAttribute("oninput","return;"),Xs="function"===typeof Zs.oninput}Gs=Xs}else Gs=!1;Ks=Gs&&(!document.documentMode||9<document.documentMode)}function ea(){Hs&&(Hs.detachEvent("onpropertychange",ta),Vs=Hs=null)}function ta(e){if("value"===e.propertyName&&$s(Vs)){var t=[];Qs(t,Vs,e,je(e)),Pe(Ys,t)}}function sa(e,t,s){"focusin"===e?(ea(),Vs=s,(Hs=t).attachEvent("onpropertychange",ta)):"focusout"===e&&ea()}function aa(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $s(Vs)}function na(e,t){if("click"===e)return $s(t)}function ra(e,t){if("input"===e||"change"===e)return $s(t)}var ia="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function la(e,t){if(ia(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var n=s[a];if(!u.call(t,n)||!ia(e[n],t[n]))return!1}return!0}function oa(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ca(e,t){var s,a=oa(e);for(e=0;a;){if(3===a.nodeType){if(s=e+a.textContent.length,e<=t&&s>=t)return{node:a,offset:t-e};e=s}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=oa(a)}}function da(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?da(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ua(){for(var e=window,t=$();t instanceof e.HTMLIFrameElement;){try{var s="string"===typeof t.contentWindow.location.href}catch(a){s=!1}if(!s)break;t=$((e=t.contentWindow).document)}return t}function pa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function ma(e){var t=ua(),s=e.focusedElem,a=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&da(s.ownerDocument.documentElement,s)){if(null!==a&&pa(s))if(t=a.start,void 0===(e=a.end)&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if((e=(t=s.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var n=s.textContent.length,r=Math.min(a.start,n);a=void 0===a.end?r:Math.min(a.end,n),!e.extend&&r>a&&(n=a,a=r,r=n),n=ca(s,r);var i=ca(s,a);n&&i&&(1!==e.rangeCount||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(n.node,n.offset),e.removeAllRanges(),r>a?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=s;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof s.focus&&s.focus(),s=0;s<t.length;s++)(e=t[s]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ha=d&&"documentMode"in document&&11>=document.documentMode,fa=null,xa=null,ga=null,va=!1;function ba(e,t,s){var a=s.window===s?s.document:9===s.nodeType?s:s.ownerDocument;va||null==fa||fa!==$(a)||("selectionStart"in(a=fa)&&pa(a)?a={start:a.selectionStart,end:a.selectionEnd}:a={anchorNode:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset},ga&&la(ga,a)||(ga=a,0<(a=Ha(xa,"onSelect")).length&&(t=new cs("onSelect","select",null,t,s),e.push({event:t,listeners:a}),t.target=fa)))}function ya(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var ja={animationend:ya("Animation","AnimationEnd"),animationiteration:ya("Animation","AnimationIteration"),animationstart:ya("Animation","AnimationStart"),transitionend:ya("Transition","TransitionEnd")},Na={},wa={};function ka(e){if(Na[e])return Na[e];if(!ja[e])return e;var t,s=ja[e];for(t in s)if(s.hasOwnProperty(t)&&t in wa)return Na[e]=s[t];return e}d&&(wa=document.createElement("div").style,"AnimationEvent"in window||(delete ja.animationend.animation,delete ja.animationiteration.animation,delete ja.animationstart.animation),"TransitionEvent"in window||delete ja.transitionend.transition);var Sa=ka("animationend"),Ca=ka("animationiteration"),Ia=ka("animationstart"),Aa=ka("transitionend"),Ea=new Map,Ta="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pa(e,t){Ea.set(e,t),o(t,[e])}for(var La=0;La<Ta.length;La++){var Ra=Ta[La];Pa(Ra.toLowerCase(),"on"+(Ra[0].toUpperCase()+Ra.slice(1)))}Pa(Sa,"onAnimationEnd"),Pa(Ca,"onAnimationIteration"),Pa(Ia,"onAnimationStart"),Pa("dblclick","onDoubleClick"),Pa("focusin","onFocus"),Pa("focusout","onBlur"),Pa(Aa,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ma="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Da=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ma));function Fa(e,t,s){var a=e.type||"unknown-event";e.currentTarget=s,function(e,t,s,a,n,i,l,o,c){if(Be.apply(this,arguments),Fe){if(!Fe)throw Error(r(198));var d=ze;Fe=!1,ze=null,Oe||(Oe=!0,_e=d)}}(a,t,void 0,e),e.currentTarget=null}function za(e,t){t=0!==(4&t);for(var s=0;s<e.length;s++){var a=e[s],n=a.event;a=a.listeners;e:{var r=void 0;if(t)for(var i=a.length-1;0<=i;i--){var l=a[i],o=l.instance,c=l.currentTarget;if(l=l.listener,o!==r&&n.isPropagationStopped())break e;Fa(n,l,c),r=o}else for(i=0;i<a.length;i++){if(o=(l=a[i]).instance,c=l.currentTarget,l=l.listener,o!==r&&n.isPropagationStopped())break e;Fa(n,l,c),r=o}}}if(Oe)throw e=_e,Oe=!1,_e=null,e}function Oa(e,t){var s=t[fn];void 0===s&&(s=t[fn]=new Set);var a=e+"__bubble";s.has(a)||(Ua(t,e,2,!1),s.add(a))}function _a(e,t,s){var a=0;t&&(a|=4),Ua(s,e,a,t)}var qa="_reactListening"+Math.random().toString(36).slice(2);function Ba(e){if(!e[qa]){e[qa]=!0,i.forEach(function(t){"selectionchange"!==t&&(Da.has(t)||_a(t,!1,e),_a(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[qa]||(t[qa]=!0,_a("selectionchange",!1,t))}}function Ua(e,t,s,a){switch(Kt(t)){case 1:var n=Ht;break;case 4:n=Vt;break;default:n=Yt}s=n.bind(null,t,s,e),n=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(n=!0),a?void 0!==n?e.addEventListener(t,s,{capture:!0,passive:n}):e.addEventListener(t,s,!0):void 0!==n?e.addEventListener(t,s,{passive:n}):e.addEventListener(t,s,!1)}function Wa(e,t,s,a,n){var r=a;if(0===(1&t)&&0===(2&t)&&null!==a)e:for(;;){if(null===a)return;var i=a.tag;if(3===i||4===i){var l=a.stateNode.containerInfo;if(l===n||8===l.nodeType&&l.parentNode===n)break;if(4===i)for(i=a.return;null!==i;){var o=i.tag;if((3===o||4===o)&&((o=i.stateNode.containerInfo)===n||8===o.nodeType&&o.parentNode===n))return;i=i.return}for(;null!==l;){if(null===(i=vn(l)))return;if(5===(o=i.tag)||6===o){a=r=i;continue e}l=l.parentNode}}a=a.return}Pe(function(){var a=r,n=je(s),i=[];e:{var l=Ea.get(e);if(void 0!==l){var o=cs,c=e;switch(e){case"keypress":if(0===ts(s))break e;case"keydown":case"keyup":o=Cs;break;case"focusin":c="focus",o=fs;break;case"focusout":c="blur",o=fs;break;case"beforeblur":case"afterblur":o=fs;break;case"click":if(2===s.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":o=ms;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":o=hs;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":o=As;break;case Sa:case Ca:case Ia:o=xs;break;case Aa:o=Es;break;case"scroll":o=us;break;case"wheel":o=Ps;break;case"copy":case"cut":case"paste":o=vs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":o=Is}var d=0!==(4&t),u=!d&&"scroll"===e,p=d?null!==l?l+"Capture":null:l;d=[];for(var m,h=a;null!==h;){var f=(m=h).stateNode;if(5===m.tag&&null!==f&&(m=f,null!==p&&(null!=(f=Le(h,p))&&d.push(Qa(h,f,m)))),u)break;h=h.return}0<d.length&&(l=new o(l,c,null,s,n),i.push({event:l,listeners:d}))}}if(0===(7&t)){if(o="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||s===ye||!(c=s.relatedTarget||s.fromElement)||!vn(c)&&!c[hn])&&(o||l)&&(l=n.window===n?n:(l=n.ownerDocument)?l.defaultView||l.parentWindow:window,o?(o=a,null!==(c=(c=s.relatedTarget||s.toElement)?vn(c):null)&&(c!==(u=Ue(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(o=null,c=a),o!==c)){if(d=ms,f="onMouseLeave",p="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(d=Is,f="onPointerLeave",p="onPointerEnter",h="pointer"),u=null==o?l:yn(o),m=null==c?l:yn(c),(l=new d(f,h+"leave",o,s,n)).target=u,l.relatedTarget=m,f=null,vn(n)===a&&((d=new d(p,h+"enter",c,s,n)).target=m,d.relatedTarget=u,f=d),u=f,o&&c)e:{for(p=c,h=0,m=d=o;m;m=Va(m))h++;for(m=0,f=p;f;f=Va(f))m++;for(;0<h-m;)d=Va(d),h--;for(;0<m-h;)p=Va(p),m--;for(;h--;){if(d===p||null!==p&&d===p.alternate)break e;d=Va(d),p=Va(p)}d=null}else d=null;null!==o&&Ya(i,l,o,d,!1),null!==c&&null!==u&&Ya(i,u,c,d,!0)}if("select"===(o=(l=a?yn(a):window).nodeName&&l.nodeName.toLowerCase())||"input"===o&&"file"===l.type)var x=Js;else if(Ws(l))if(Ks)x=ra;else{x=aa;var g=sa}else(o=l.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===l.type||"radio"===l.type)&&(x=na);switch(x&&(x=x(e,a))?Qs(i,x,s,n):(g&&g(e,l,a),"focusout"===e&&(g=l._wrapperState)&&g.controlled&&"number"===l.type&&ee(l,"number",l.value)),g=a?yn(a):window,e){case"focusin":(Ws(g)||"true"===g.contentEditable)&&(fa=g,xa=a,ga=null);break;case"focusout":ga=xa=fa=null;break;case"mousedown":va=!0;break;case"contextmenu":case"mouseup":case"dragend":va=!1,ba(i,s,n);break;case"selectionchange":if(ha)break;case"keydown":case"keyup":ba(i,s,n)}var v;if(Rs)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bs?_s(e,s)&&(b="onCompositionEnd"):"keydown"===e&&229===s.keyCode&&(b="onCompositionStart");b&&(Fs&&"ko"!==s.locale&&(Bs||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bs&&(v=es()):(Xt="value"in(Gt=n)?Gt.value:Gt.textContent,Bs=!0)),0<(g=Ha(a,b)).length&&(b=new bs(b,e,null,s,n),i.push({event:b,listeners:g}),v?b.data=v:null!==(v=qs(s))&&(b.data=v))),(v=Ds?function(e,t){switch(e){case"compositionend":return qs(t);case"keypress":return 32!==t.which?null:(Os=!0,zs);case"textInput":return(e=t.data)===zs&&Os?null:e;default:return null}}(e,s):function(e,t){if(Bs)return"compositionend"===e||!Rs&&_s(e,t)?(e=es(),Zt=Xt=Gt=null,Bs=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fs&&"ko"!==t.locale?null:t.data}}(e,s))&&(0<(a=Ha(a,"onBeforeInput")).length&&(n=new bs("onBeforeInput","beforeinput",null,s,n),i.push({event:n,listeners:a}),n.data=v))}za(i,t)})}function Qa(e,t,s){return{instance:e,listener:t,currentTarget:s}}function Ha(e,t){for(var s=t+"Capture",a=[];null!==e;){var n=e,r=n.stateNode;5===n.tag&&null!==r&&(n=r,null!=(r=Le(e,s))&&a.unshift(Qa(e,r,n)),null!=(r=Le(e,t))&&a.push(Qa(e,r,n))),e=e.return}return a}function Va(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ya(e,t,s,a,n){for(var r=t._reactName,i=[];null!==s&&s!==a;){var l=s,o=l.alternate,c=l.stateNode;if(null!==o&&o===a)break;5===l.tag&&null!==c&&(l=c,n?null!=(o=Le(s,r))&&i.unshift(Qa(s,o,l)):n||null!=(o=Le(s,r))&&i.push(Qa(s,o,l))),s=s.return}0!==i.length&&e.push({event:t,listeners:i})}var $a=/\r\n?/g,Ja=/\u0000|\uFFFD/g;function Ka(e){return("string"===typeof e?e:""+e).replace($a,"\n").replace(Ja,"")}function Ga(e,t,s){if(t=Ka(t),Ka(e)!==t&&s)throw Error(r(425))}function Xa(){}var Za=null,en=null;function tn(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var sn="function"===typeof setTimeout?setTimeout:void 0,an="function"===typeof clearTimeout?clearTimeout:void 0,nn="function"===typeof Promise?Promise:void 0,rn="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof nn?function(e){return nn.resolve(null).then(e).catch(ln)}:sn;function ln(e){setTimeout(function(){throw e})}function on(e,t){var s=t,a=0;do{var n=s.nextSibling;if(e.removeChild(s),n&&8===n.nodeType)if("/$"===(s=n.data)){if(0===a)return e.removeChild(n),void Ut(t);a--}else"$"!==s&&"$?"!==s&&"$!"!==s||a++;s=n}while(s);Ut(t)}function cn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function dn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var s=e.data;if("$"===s||"$!"===s||"$?"===s){if(0===t)return e;t--}else"/$"===s&&t++}e=e.previousSibling}return null}var un=Math.random().toString(36).slice(2),pn="__reactFiber$"+un,mn="__reactProps$"+un,hn="__reactContainer$"+un,fn="__reactEvents$"+un,xn="__reactListeners$"+un,gn="__reactHandles$"+un;function vn(e){var t=e[pn];if(t)return t;for(var s=e.parentNode;s;){if(t=s[hn]||s[pn]){if(s=t.alternate,null!==t.child||null!==s&&null!==s.child)for(e=dn(e);null!==e;){if(s=e[pn])return s;e=dn(e)}return t}s=(e=s).parentNode}return null}function bn(e){return!(e=e[pn]||e[hn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function yn(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(r(33))}function jn(e){return e[mn]||null}var Nn=[],wn=-1;function kn(e){return{current:e}}function Sn(e){0>wn||(e.current=Nn[wn],Nn[wn]=null,wn--)}function Cn(e,t){wn++,Nn[wn]=e.current,e.current=t}var In={},An=kn(In),En=kn(!1),Tn=In;function Pn(e,t){var s=e.type.contextTypes;if(!s)return In;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var n,r={};for(n in s)r[n]=t[n];return a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function Ln(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Rn(){Sn(En),Sn(An)}function Mn(e,t,s){if(An.current!==In)throw Error(r(168));Cn(An,t),Cn(En,s)}function Dn(e,t,s){var a=e.stateNode;if(t=t.childContextTypes,"function"!==typeof a.getChildContext)return s;for(var n in a=a.getChildContext())if(!(n in t))throw Error(r(108,W(e)||"Unknown",n));return z({},s,a)}function Fn(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||In,Tn=An.current,Cn(An,e),Cn(En,En.current),!0}function zn(e,t,s){var a=e.stateNode;if(!a)throw Error(r(169));s?(e=Dn(e,t,Tn),a.__reactInternalMemoizedMergedChildContext=e,Sn(En),Sn(An),Cn(An,e)):Sn(En),Cn(En,s)}var On=null,_n=!1,qn=!1;function Bn(e){null===On?On=[e]:On.push(e)}function Un(){if(!qn&&null!==On){qn=!0;var e=0,t=bt;try{var s=On;for(bt=1;e<s.length;e++){var a=s[e];do{a=a(!0)}while(null!==a)}On=null,_n=!1}catch(n){throw null!==On&&(On=On.slice(e+1)),Ye(Ze,Un),n}finally{bt=t,qn=!1}}return null}var Wn=[],Qn=0,Hn=null,Vn=0,Yn=[],$n=0,Jn=null,Kn=1,Gn="";function Xn(e,t){Wn[Qn++]=Vn,Wn[Qn++]=Hn,Hn=e,Vn=t}function Zn(e,t,s){Yn[$n++]=Kn,Yn[$n++]=Gn,Yn[$n++]=Jn,Jn=e;var a=Kn;e=Gn;var n=32-it(a)-1;a&=~(1<<n),s+=1;var r=32-it(t)+n;if(30<r){var i=n-n%5;r=(a&(1<<i)-1).toString(32),a>>=i,n-=i,Kn=1<<32-it(t)+n|s<<n|a,Gn=r+e}else Kn=1<<r|s<<n|a,Gn=e}function er(e){null!==e.return&&(Xn(e,1),Zn(e,1,0))}function tr(e){for(;e===Hn;)Hn=Wn[--Qn],Wn[Qn]=null,Vn=Wn[--Qn],Wn[Qn]=null;for(;e===Jn;)Jn=Yn[--$n],Yn[$n]=null,Gn=Yn[--$n],Yn[$n]=null,Kn=Yn[--$n],Yn[$n]=null}var sr=null,ar=null,nr=!1,rr=null;function ir(e,t){var s=Pc(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,null===(t=e.deletions)?(e.deletions=[s],e.flags|=16):t.push(s)}function lr(e,t){switch(e.tag){case 5:var s=e.type;return null!==(t=1!==t.nodeType||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,sr=e,ar=cn(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,sr=e,ar=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(s=null!==Jn?{id:Kn,overflow:Gn}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},(s=Pc(18,null,null,0)).stateNode=t,s.return=e,e.child=s,sr=e,ar=null,!0);default:return!1}}function or(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cr(e){if(nr){var t=ar;if(t){var s=t;if(!lr(e,t)){if(or(e))throw Error(r(418));t=cn(s.nextSibling);var a=sr;t&&lr(e,t)?ir(a,s):(e.flags=-4097&e.flags|2,nr=!1,sr=e)}}else{if(or(e))throw Error(r(418));e.flags=-4097&e.flags|2,nr=!1,sr=e}}}function dr(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;sr=e}function ur(e){if(e!==sr)return!1;if(!nr)return dr(e),nr=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!tn(e.type,e.memoizedProps)),t&&(t=ar)){if(or(e))throw pr(),Error(r(418));for(;t;)ir(e,t),t=cn(t.nextSibling)}if(dr(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var s=e.data;if("/$"===s){if(0===t){ar=cn(e.nextSibling);break e}t--}else"$"!==s&&"$!"!==s&&"$?"!==s||t++}e=e.nextSibling}ar=null}}else ar=sr?cn(e.stateNode.nextSibling):null;return!0}function pr(){for(var e=ar;e;)e=cn(e.nextSibling)}function mr(){ar=sr=null,nr=!1}function hr(e){null===rr?rr=[e]:rr.push(e)}var fr=y.ReactCurrentBatchConfig;function xr(e,t,s){if(null!==(e=s.ref)&&"function"!==typeof e&&"object"!==typeof e){if(s._owner){if(s=s._owner){if(1!==s.tag)throw Error(r(309));var a=s.stateNode}if(!a)throw Error(r(147,e));var n=a,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=n.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(r(284));if(!s._owner)throw Error(r(290,e))}return e}function gr(e,t){throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vr(e){return(0,e._init)(e._payload)}function br(e){function t(t,s){if(e){var a=t.deletions;null===a?(t.deletions=[s],t.flags|=16):a.push(s)}}function s(s,a){if(!e)return null;for(;null!==a;)t(s,a),a=a.sibling;return null}function a(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function n(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function i(t,s,a){return t.index=a,e?null!==(a=t.alternate)?(a=a.index)<s?(t.flags|=2,s):a:(t.flags|=2,s):(t.flags|=1048576,s)}function l(t){return e&&null===t.alternate&&(t.flags|=2),t}function o(e,t,s,a){return null===t||6!==t.tag?((t=zc(s,e.mode,a)).return=e,t):((t=n(t,s)).return=e,t)}function c(e,t,s,a){var r=s.type;return r===w?u(e,t,s.props.children,a,s.key):null!==t&&(t.elementType===r||"object"===typeof r&&null!==r&&r.$$typeof===L&&vr(r)===t.type)?((a=n(t,s.props)).ref=xr(e,t,s),a.return=e,a):((a=Mc(s.type,s.key,s.props,null,e.mode,a)).ref=xr(e,t,s),a.return=e,a)}function d(e,t,s,a){return null===t||4!==t.tag||t.stateNode.containerInfo!==s.containerInfo||t.stateNode.implementation!==s.implementation?((t=Oc(s,e.mode,a)).return=e,t):((t=n(t,s.children||[])).return=e,t)}function u(e,t,s,a,r){return null===t||7!==t.tag?((t=Dc(s,e.mode,a,r)).return=e,t):((t=n(t,s)).return=e,t)}function p(e,t,s){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=zc(""+t,e.mode,s)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case j:return(s=Mc(t.type,t.key,t.props,null,e.mode,s)).ref=xr(e,null,t),s.return=e,s;case N:return(t=Oc(t,e.mode,s)).return=e,t;case L:return p(e,(0,t._init)(t._payload),s)}if(te(t)||D(t))return(t=Dc(t,e.mode,s,null)).return=e,t;gr(e,t)}return null}function m(e,t,s,a){var n=null!==t?t.key:null;if("string"===typeof s&&""!==s||"number"===typeof s)return null!==n?null:o(e,t,""+s,a);if("object"===typeof s&&null!==s){switch(s.$$typeof){case j:return s.key===n?c(e,t,s,a):null;case N:return s.key===n?d(e,t,s,a):null;case L:return m(e,t,(n=s._init)(s._payload),a)}if(te(s)||D(s))return null!==n?null:u(e,t,s,a,null);gr(e,s)}return null}function h(e,t,s,a,n){if("string"===typeof a&&""!==a||"number"===typeof a)return o(t,e=e.get(s)||null,""+a,n);if("object"===typeof a&&null!==a){switch(a.$$typeof){case j:return c(t,e=e.get(null===a.key?s:a.key)||null,a,n);case N:return d(t,e=e.get(null===a.key?s:a.key)||null,a,n);case L:return h(e,t,s,(0,a._init)(a._payload),n)}if(te(a)||D(a))return u(t,e=e.get(s)||null,a,n,null);gr(t,a)}return null}function f(n,r,l,o){for(var c=null,d=null,u=r,f=r=0,x=null;null!==u&&f<l.length;f++){u.index>f?(x=u,u=null):x=u.sibling;var g=m(n,u,l[f],o);if(null===g){null===u&&(u=x);break}e&&u&&null===g.alternate&&t(n,u),r=i(g,r,f),null===d?c=g:d.sibling=g,d=g,u=x}if(f===l.length)return s(n,u),nr&&Xn(n,f),c;if(null===u){for(;f<l.length;f++)null!==(u=p(n,l[f],o))&&(r=i(u,r,f),null===d?c=u:d.sibling=u,d=u);return nr&&Xn(n,f),c}for(u=a(n,u);f<l.length;f++)null!==(x=h(u,n,f,l[f],o))&&(e&&null!==x.alternate&&u.delete(null===x.key?f:x.key),r=i(x,r,f),null===d?c=x:d.sibling=x,d=x);return e&&u.forEach(function(e){return t(n,e)}),nr&&Xn(n,f),c}function x(n,l,o,c){var d=D(o);if("function"!==typeof d)throw Error(r(150));if(null==(o=d.call(o)))throw Error(r(151));for(var u=d=null,f=l,x=l=0,g=null,v=o.next();null!==f&&!v.done;x++,v=o.next()){f.index>x?(g=f,f=null):g=f.sibling;var b=m(n,f,v.value,c);if(null===b){null===f&&(f=g);break}e&&f&&null===b.alternate&&t(n,f),l=i(b,l,x),null===u?d=b:u.sibling=b,u=b,f=g}if(v.done)return s(n,f),nr&&Xn(n,x),d;if(null===f){for(;!v.done;x++,v=o.next())null!==(v=p(n,v.value,c))&&(l=i(v,l,x),null===u?d=v:u.sibling=v,u=v);return nr&&Xn(n,x),d}for(f=a(n,f);!v.done;x++,v=o.next())null!==(v=h(f,n,x,v.value,c))&&(e&&null!==v.alternate&&f.delete(null===v.key?x:v.key),l=i(v,l,x),null===u?d=v:u.sibling=v,u=v);return e&&f.forEach(function(e){return t(n,e)}),nr&&Xn(n,x),d}return function e(a,r,i,o){if("object"===typeof i&&null!==i&&i.type===w&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case j:e:{for(var c=i.key,d=r;null!==d;){if(d.key===c){if((c=i.type)===w){if(7===d.tag){s(a,d.sibling),(r=n(d,i.props.children)).return=a,a=r;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===L&&vr(c)===d.type){s(a,d.sibling),(r=n(d,i.props)).ref=xr(a,d,i),r.return=a,a=r;break e}s(a,d);break}t(a,d),d=d.sibling}i.type===w?((r=Dc(i.props.children,a.mode,o,i.key)).return=a,a=r):((o=Mc(i.type,i.key,i.props,null,a.mode,o)).ref=xr(a,r,i),o.return=a,a=o)}return l(a);case N:e:{for(d=i.key;null!==r;){if(r.key===d){if(4===r.tag&&r.stateNode.containerInfo===i.containerInfo&&r.stateNode.implementation===i.implementation){s(a,r.sibling),(r=n(r,i.children||[])).return=a,a=r;break e}s(a,r);break}t(a,r),r=r.sibling}(r=Oc(i,a.mode,o)).return=a,a=r}return l(a);case L:return e(a,r,(d=i._init)(i._payload),o)}if(te(i))return f(a,r,i,o);if(D(i))return x(a,r,i,o);gr(a,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==r&&6===r.tag?(s(a,r.sibling),(r=n(r,i)).return=a,a=r):(s(a,r),(r=zc(i,a.mode,o)).return=a,a=r),l(a)):s(a,r)}}var yr=br(!0),jr=br(!1),Nr=kn(null),wr=null,kr=null,Sr=null;function Cr(){Sr=kr=wr=null}function Ir(e){var t=Nr.current;Sn(Nr),e._currentValue=t}function Ar(e,t,s){for(;null!==e;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==a&&(a.childLanes|=t)):null!==a&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===s)break;e=e.return}}function Er(e,t){wr=e,Sr=kr=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(vl=!0),e.firstContext=null)}function Tr(e){var t=e._currentValue;if(Sr!==e)if(e={context:e,memoizedValue:t,next:null},null===kr){if(null===wr)throw Error(r(308));kr=e,wr.dependencies={lanes:0,firstContext:e}}else kr=kr.next=e;return t}var Pr=null;function Lr(e){null===Pr?Pr=[e]:Pr.push(e)}function Rr(e,t,s,a){var n=t.interleaved;return null===n?(s.next=s,Lr(t)):(s.next=n.next,n.next=s),t.interleaved=s,Mr(e,a)}function Mr(e,t){e.lanes|=t;var s=e.alternate;for(null!==s&&(s.lanes|=t),s=e,e=e.return;null!==e;)e.childLanes|=t,null!==(s=e.alternate)&&(s.childLanes|=t),s=e,e=e.return;return 3===s.tag?s.stateNode:null}var Dr=!1;function Fr(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zr(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Or(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function _r(e,t,s){var a=e.updateQueue;if(null===a)return null;if(a=a.shared,0!==(2&Ao)){var n=a.pending;return null===n?t.next=t:(t.next=n.next,n.next=t),a.pending=t,Mr(e,s)}return null===(n=a.interleaved)?(t.next=t,Lr(a)):(t.next=n.next,n.next=t),a.interleaved=t,Mr(e,s)}function qr(e,t,s){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&s))){var a=t.lanes;s|=a&=e.pendingLanes,t.lanes=s,vt(e,s)}}function Br(e,t){var s=e.updateQueue,a=e.alternate;if(null!==a&&s===(a=a.updateQueue)){var n=null,r=null;if(null!==(s=s.firstBaseUpdate)){do{var i={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};null===r?n=r=i:r=r.next=i,s=s.next}while(null!==s);null===r?n=r=t:r=r.next=t}else n=r=t;return s={baseState:a.baseState,firstBaseUpdate:n,lastBaseUpdate:r,shared:a.shared,effects:a.effects},void(e.updateQueue=s)}null===(e=s.lastBaseUpdate)?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function Ur(e,t,s,a){var n=e.updateQueue;Dr=!1;var r=n.firstBaseUpdate,i=n.lastBaseUpdate,l=n.shared.pending;if(null!==l){n.shared.pending=null;var o=l,c=o.next;o.next=null,null===i?r=c:i.next=c,i=o;var d=e.alternate;null!==d&&((l=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===l?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=o))}if(null!==r){var u=n.baseState;for(i=0,d=c=o=null,l=r;;){var p=l.lane,m=l.eventTime;if((a&p)===p){null!==d&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var h=e,f=l;switch(p=t,m=s,f.tag){case 1:if("function"===typeof(h=f.payload)){u=h.call(m,u,p);break e}u=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null===(p="function"===typeof(h=f.payload)?h.call(m,u,p):h)||void 0===p)break e;u=z({},u,p);break e;case 2:Dr=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(p=n.effects)?n.effects=[l]:p.push(l))}else m={eventTime:m,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===d?(c=d=m,o=u):d=d.next=m,i|=p;if(null===(l=l.next)){if(null===(l=n.shared.pending))break;l=(p=l).next,p.next=null,n.lastBaseUpdate=p,n.shared.pending=null}}if(null===d&&(o=u),n.baseState=o,n.firstBaseUpdate=c,n.lastBaseUpdate=d,null!==(t=n.shared.interleaved)){n=t;do{i|=n.lane,n=n.next}while(n!==t)}else null===r&&(n.shared.lanes=0);Fo|=i,e.lanes=i,e.memoizedState=u}}function Wr(e,t,s){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var a=e[t],n=a.callback;if(null!==n){if(a.callback=null,a=s,"function"!==typeof n)throw Error(r(191,n));n.call(a)}}}var Qr={},Hr=kn(Qr),Vr=kn(Qr),Yr=kn(Qr);function $r(e){if(e===Qr)throw Error(r(174));return e}function Jr(e,t){switch(Cn(Yr,t),Cn(Vr,e),Cn(Hr,Qr),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:oe(null,"");break;default:t=oe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Sn(Hr),Cn(Hr,t)}function Kr(){Sn(Hr),Sn(Vr),Sn(Yr)}function Gr(e){$r(Yr.current);var t=$r(Hr.current),s=oe(t,e.type);t!==s&&(Cn(Vr,e),Cn(Hr,s))}function Xr(e){Vr.current===e&&(Sn(Hr),Sn(Vr))}var Zr=kn(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var s=t.memoizedState;if(null!==s&&(null===(s=s.dehydrated)||"$?"===s.data||"$!"===s.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function si(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var ai=y.ReactCurrentDispatcher,ni=y.ReactCurrentBatchConfig,ri=0,ii=null,li=null,oi=null,ci=!1,di=!1,ui=0,pi=0;function mi(){throw Error(r(321))}function hi(e,t){if(null===t)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!ia(e[s],t[s]))return!1;return!0}function fi(e,t,s,a,n,i){if(ri=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ai.current=null===e||null===e.memoizedState?Xi:Zi,e=s(a,n),di){i=0;do{if(di=!1,ui=0,25<=i)throw Error(r(301));i+=1,oi=li=null,t.updateQueue=null,ai.current=el,e=s(a,n)}while(di)}if(ai.current=Gi,t=null!==li&&null!==li.next,ri=0,oi=li=ii=null,ci=!1,t)throw Error(r(300));return e}function xi(){var e=0!==ui;return ui=0,e}function gi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===oi?ii.memoizedState=oi=e:oi=oi.next=e,oi}function vi(){if(null===li){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=li.next;var t=null===oi?ii.memoizedState:oi.next;if(null!==t)oi=t,li=e;else{if(null===e)throw Error(r(310));e={memoizedState:(li=e).memoizedState,baseState:li.baseState,baseQueue:li.baseQueue,queue:li.queue,next:null},null===oi?ii.memoizedState=oi=e:oi=oi.next=e}return oi}function bi(e,t){return"function"===typeof t?t(e):t}function yi(e){var t=vi(),s=t.queue;if(null===s)throw Error(r(311));s.lastRenderedReducer=e;var a=li,n=a.baseQueue,i=s.pending;if(null!==i){if(null!==n){var l=n.next;n.next=i.next,i.next=l}a.baseQueue=n=i,s.pending=null}if(null!==n){i=n.next,a=a.baseState;var o=l=null,c=null,d=i;do{var u=d.lane;if((ri&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),a=d.hasEagerState?d.eagerState:e(a,d.action);else{var p={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(o=c=p,l=a):c=c.next=p,ii.lanes|=u,Fo|=u}d=d.next}while(null!==d&&d!==i);null===c?l=a:c.next=o,ia(a,t.memoizedState)||(vl=!0),t.memoizedState=a,t.baseState=l,t.baseQueue=c,s.lastRenderedState=a}if(null!==(e=s.interleaved)){n=e;do{i=n.lane,ii.lanes|=i,Fo|=i,n=n.next}while(n!==e)}else null===n&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function ji(e){var t=vi(),s=t.queue;if(null===s)throw Error(r(311));s.lastRenderedReducer=e;var a=s.dispatch,n=s.pending,i=t.memoizedState;if(null!==n){s.pending=null;var l=n=n.next;do{i=e(i,l.action),l=l.next}while(l!==n);ia(i,t.memoizedState)||(vl=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),s.lastRenderedState=i}return[i,a]}function Ni(){}function wi(e,t){var s=ii,a=vi(),n=t(),i=!ia(a.memoizedState,n);if(i&&(a.memoizedState=n,vl=!0),a=a.queue,Di(Ci.bind(null,s,a,e),[e]),a.getSnapshot!==t||i||null!==oi&&1&oi.memoizedState.tag){if(s.flags|=2048,Ti(9,Si.bind(null,s,a,n,t),void 0,null),null===Eo)throw Error(r(349));0!==(30&ri)||ki(s,t,n)}return n}function ki(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(s=t.stores)?t.stores=[e]:s.push(e)}function Si(e,t,s,a){t.value=s,t.getSnapshot=a,Ii(t)&&Ai(e)}function Ci(e,t,s){return s(function(){Ii(t)&&Ai(e)})}function Ii(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!ia(e,s)}catch(a){return!0}}function Ai(e){var t=Mr(e,1);null!==t&&sc(t,e,1,-1)}function Ei(e){var t=gi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:e},t.queue=e,e=e.dispatch=Yi.bind(null,ii,e),[t.memoizedState,e]}function Ti(e,t,s,a){return e={tag:e,create:t,destroy:s,deps:a,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(s=t.lastEffect)?t.lastEffect=e.next=e:(a=s.next,s.next=e,e.next=a,t.lastEffect=e),e}function Pi(){return vi().memoizedState}function Li(e,t,s,a){var n=gi();ii.flags|=e,n.memoizedState=Ti(1|t,s,void 0,void 0===a?null:a)}function Ri(e,t,s,a){var n=vi();a=void 0===a?null:a;var r=void 0;if(null!==li){var i=li.memoizedState;if(r=i.destroy,null!==a&&hi(a,i.deps))return void(n.memoizedState=Ti(t,s,r,a))}ii.flags|=e,n.memoizedState=Ti(1|t,s,r,a)}function Mi(e,t){return Li(8390656,8,e,t)}function Di(e,t){return Ri(2048,8,e,t)}function Fi(e,t){return Ri(4,2,e,t)}function zi(e,t){return Ri(4,4,e,t)}function Oi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function _i(e,t,s){return s=null!==s&&void 0!==s?s.concat([e]):null,Ri(4,4,Oi.bind(null,t,e),s)}function qi(){}function Bi(e,t){var s=vi();t=void 0===t?null:t;var a=s.memoizedState;return null!==a&&null!==t&&hi(t,a[1])?a[0]:(s.memoizedState=[e,t],e)}function Ui(e,t){var s=vi();t=void 0===t?null:t;var a=s.memoizedState;return null!==a&&null!==t&&hi(t,a[1])?a[0]:(e=e(),s.memoizedState=[e,t],e)}function Wi(e,t,s){return 0===(21&ri)?(e.baseState&&(e.baseState=!1,vl=!0),e.memoizedState=s):(ia(s,t)||(s=ft(),ii.lanes|=s,Fo|=s,e.baseState=!0),t)}function Qi(e,t){var s=bt;bt=0!==s&&4>s?s:4,e(!0);var a=ni.transition;ni.transition={};try{e(!1),t()}finally{bt=s,ni.transition=a}}function Hi(){return vi().memoizedState}function Vi(e,t,s){var a=tc(e);if(s={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null},$i(e))Ji(t,s);else if(null!==(s=Rr(e,t,s,a))){sc(s,e,a,ec()),Ki(s,t,a)}}function Yi(e,t,s){var a=tc(e),n={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null};if($i(e))Ji(t,n);else{var r=e.alternate;if(0===e.lanes&&(null===r||0===r.lanes)&&null!==(r=t.lastRenderedReducer))try{var i=t.lastRenderedState,l=r(i,s);if(n.hasEagerState=!0,n.eagerState=l,ia(l,i)){var o=t.interleaved;return null===o?(n.next=n,Lr(t)):(n.next=o.next,o.next=n),void(t.interleaved=n)}}catch(c){}null!==(s=Rr(e,t,n,a))&&(sc(s,e,a,n=ec()),Ki(s,t,a))}}function $i(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function Ji(e,t){di=ci=!0;var s=e.pending;null===s?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Ki(e,t,s){if(0!==(4194240&s)){var a=t.lanes;s|=a&=e.pendingLanes,t.lanes=s,vt(e,s)}}var Gi={readContext:Tr,useCallback:mi,useContext:mi,useEffect:mi,useImperativeHandle:mi,useInsertionEffect:mi,useLayoutEffect:mi,useMemo:mi,useReducer:mi,useRef:mi,useState:mi,useDebugValue:mi,useDeferredValue:mi,useTransition:mi,useMutableSource:mi,useSyncExternalStore:mi,useId:mi,unstable_isNewReconciler:!1},Xi={readContext:Tr,useCallback:function(e,t){return gi().memoizedState=[e,void 0===t?null:t],e},useContext:Tr,useEffect:Mi,useImperativeHandle:function(e,t,s){return s=null!==s&&void 0!==s?s.concat([e]):null,Li(4194308,4,Oi.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Li(4194308,4,e,t)},useInsertionEffect:function(e,t){return Li(4,2,e,t)},useMemo:function(e,t){var s=gi();return t=void 0===t?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var a=gi();return t=void 0!==s?s(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=Vi.bind(null,ii,e),[a.memoizedState,e]},useRef:function(e){return e={current:e},gi().memoizedState=e},useState:Ei,useDebugValue:qi,useDeferredValue:function(e){return gi().memoizedState=e},useTransition:function(){var e=Ei(!1),t=e[0];return e=Qi.bind(null,e[1]),gi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var a=ii,n=gi();if(nr){if(void 0===s)throw Error(r(407));s=s()}else{if(s=t(),null===Eo)throw Error(r(349));0!==(30&ri)||ki(a,t,s)}n.memoizedState=s;var i={value:s,getSnapshot:t};return n.queue=i,Mi(Ci.bind(null,a,i,e),[e]),a.flags|=2048,Ti(9,Si.bind(null,a,i,s,t),void 0,null),s},useId:function(){var e=gi(),t=Eo.identifierPrefix;if(nr){var s=Gn;t=":"+t+"R"+(s=(Kn&~(1<<32-it(Kn)-1)).toString(32)+s),0<(s=ui++)&&(t+="H"+s.toString(32)),t+=":"}else t=":"+t+"r"+(s=pi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zi={readContext:Tr,useCallback:Bi,useContext:Tr,useEffect:Di,useImperativeHandle:_i,useInsertionEffect:Fi,useLayoutEffect:zi,useMemo:Ui,useReducer:yi,useRef:Pi,useState:function(){return yi(bi)},useDebugValue:qi,useDeferredValue:function(e){return Wi(vi(),li.memoizedState,e)},useTransition:function(){return[yi(bi)[0],vi().memoizedState]},useMutableSource:Ni,useSyncExternalStore:wi,useId:Hi,unstable_isNewReconciler:!1},el={readContext:Tr,useCallback:Bi,useContext:Tr,useEffect:Di,useImperativeHandle:_i,useInsertionEffect:Fi,useLayoutEffect:zi,useMemo:Ui,useReducer:ji,useRef:Pi,useState:function(){return ji(bi)},useDebugValue:qi,useDeferredValue:function(e){var t=vi();return null===li?t.memoizedState=e:Wi(t,li.memoizedState,e)},useTransition:function(){return[ji(bi)[0],vi().memoizedState]},useMutableSource:Ni,useSyncExternalStore:wi,useId:Hi,unstable_isNewReconciler:!1};function tl(e,t){if(e&&e.defaultProps){for(var s in t=z({},t),e=e.defaultProps)void 0===t[s]&&(t[s]=e[s]);return t}return t}function sl(e,t,s,a){s=null===(s=s(a,t=e.memoizedState))||void 0===s?t:z({},t,s),e.memoizedState=s,0===e.lanes&&(e.updateQueue.baseState=s)}var al={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,s){e=e._reactInternals;var a=ec(),n=tc(e),r=Or(a,n);r.payload=t,void 0!==s&&null!==s&&(r.callback=s),null!==(t=_r(e,r,n))&&(sc(t,e,n,a),qr(t,e,n))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var a=ec(),n=tc(e),r=Or(a,n);r.tag=1,r.payload=t,void 0!==s&&null!==s&&(r.callback=s),null!==(t=_r(e,r,n))&&(sc(t,e,n,a),qr(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=ec(),a=tc(e),n=Or(s,a);n.tag=2,void 0!==t&&null!==t&&(n.callback=t),null!==(t=_r(e,n,a))&&(sc(t,e,a,s),qr(t,e,a))}};function nl(e,t,s,a,n,r,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(a,r,i):!t.prototype||!t.prototype.isPureReactComponent||(!la(s,a)||!la(n,r))}function rl(e,t,s){var a=!1,n=In,r=t.contextType;return"object"===typeof r&&null!==r?r=Tr(r):(n=Ln(t)?Tn:An.current,r=(a=null!==(a=t.contextTypes)&&void 0!==a)?Pn(e,n):In),t=new t(s,r),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=al,e.stateNode=t,t._reactInternals=e,a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=r),t}function il(e,t,s,a){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(s,a),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(s,a),t.state!==e&&al.enqueueReplaceState(t,t.state,null)}function ll(e,t,s,a){var n=e.stateNode;n.props=s,n.state=e.memoizedState,n.refs={},Fr(e);var r=t.contextType;"object"===typeof r&&null!==r?n.context=Tr(r):(r=Ln(t)?Tn:An.current,n.context=Pn(e,r)),n.state=e.memoizedState,"function"===typeof(r=t.getDerivedStateFromProps)&&(sl(e,t,r,s),n.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof n.getSnapshotBeforeUpdate||"function"!==typeof n.UNSAFE_componentWillMount&&"function"!==typeof n.componentWillMount||(t=n.state,"function"===typeof n.componentWillMount&&n.componentWillMount(),"function"===typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount(),t!==n.state&&al.enqueueReplaceState(n,n.state,null),Ur(e,s,n,a),n.state=e.memoizedState),"function"===typeof n.componentDidMount&&(e.flags|=4194308)}function ol(e,t){try{var s="",a=t;do{s+=B(a),a=a.return}while(a);var n=s}catch(r){n="\nError generating stack: "+r.message+"\n"+r.stack}return{value:e,source:t,stack:n,digest:null}}function cl(e,t,s){return{value:e,source:null,stack:null!=s?s:null,digest:null!=t?t:null}}function dl(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var ul="function"===typeof WeakMap?WeakMap:Map;function pl(e,t,s){(s=Or(-1,s)).tag=3,s.payload={element:null};var a=t.value;return s.callback=function(){Qo||(Qo=!0,Ho=a),dl(0,t)},s}function ml(e,t,s){(s=Or(-1,s)).tag=3;var a=e.type.getDerivedStateFromError;if("function"===typeof a){var n=t.value;s.payload=function(){return a(n)},s.callback=function(){dl(0,t)}}var r=e.stateNode;return null!==r&&"function"===typeof r.componentDidCatch&&(s.callback=function(){dl(0,t),"function"!==typeof a&&(null===Vo?Vo=new Set([this]):Vo.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),s}function hl(e,t,s){var a=e.pingCache;if(null===a){a=e.pingCache=new ul;var n=new Set;a.set(t,n)}else void 0===(n=a.get(t))&&(n=new Set,a.set(t,n));n.has(s)||(n.add(s),e=Sc.bind(null,e,t,s),t.then(e,e))}function fl(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function xl(e,t,s,a,n){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,1===s.tag&&(null===s.alternate?s.tag=17:((t=Or(-1,1)).tag=2,_r(s,t,1))),s.lanes|=1),e):(e.flags|=65536,e.lanes=n,e)}var gl=y.ReactCurrentOwner,vl=!1;function bl(e,t,s,a){t.child=null===e?jr(t,null,s,a):yr(t,e.child,s,a)}function yl(e,t,s,a,n){s=s.render;var r=t.ref;return Er(t,n),a=fi(e,t,s,a,r,n),s=xi(),null===e||vl?(nr&&s&&er(t),t.flags|=1,bl(e,t,a,n),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Wl(e,t,n))}function jl(e,t,s,a,n){if(null===e){var r=s.type;return"function"!==typeof r||Lc(r)||void 0!==r.defaultProps||null!==s.compare||void 0!==s.defaultProps?((e=Mc(s.type,null,a,t,t.mode,n)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=r,Nl(e,t,r,a,n))}if(r=e.child,0===(e.lanes&n)){var i=r.memoizedProps;if((s=null!==(s=s.compare)?s:la)(i,a)&&e.ref===t.ref)return Wl(e,t,n)}return t.flags|=1,(e=Rc(r,a)).ref=t.ref,e.return=t,t.child=e}function Nl(e,t,s,a,n){if(null!==e){var r=e.memoizedProps;if(la(r,a)&&e.ref===t.ref){if(vl=!1,t.pendingProps=a=r,0===(e.lanes&n))return t.lanes=e.lanes,Wl(e,t,n);0!==(131072&e.flags)&&(vl=!0)}}return Sl(e,t,s,a,n)}function wl(e,t,s){var a=t.pendingProps,n=a.children,r=null!==e?e.memoizedState:null;if("hidden"===a.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cn(Ro,Lo),Lo|=s;else{if(0===(1073741824&s))return e=null!==r?r.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Cn(Ro,Lo),Lo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=null!==r?r.baseLanes:s,Cn(Ro,Lo),Lo|=a}else null!==r?(a=r.baseLanes|s,t.memoizedState=null):a=s,Cn(Ro,Lo),Lo|=a;return bl(e,t,n,s),t.child}function kl(e,t){var s=t.ref;(null===e&&null!==s||null!==e&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function Sl(e,t,s,a,n){var r=Ln(s)?Tn:An.current;return r=Pn(t,r),Er(t,n),s=fi(e,t,s,a,r,n),a=xi(),null===e||vl?(nr&&a&&er(t),t.flags|=1,bl(e,t,s,n),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Wl(e,t,n))}function Cl(e,t,s,a,n){if(Ln(s)){var r=!0;Fn(t)}else r=!1;if(Er(t,n),null===t.stateNode)Ul(e,t),rl(t,s,a),ll(t,s,a,n),a=!0;else if(null===e){var i=t.stateNode,l=t.memoizedProps;i.props=l;var o=i.context,c=s.contextType;"object"===typeof c&&null!==c?c=Tr(c):c=Pn(t,c=Ln(s)?Tn:An.current);var d=s.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate;u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l!==a||o!==c)&&il(t,i,a,c),Dr=!1;var p=t.memoizedState;i.state=p,Ur(t,a,i,n),o=t.memoizedState,l!==a||p!==o||En.current||Dr?("function"===typeof d&&(sl(t,s,d,a),o=t.memoizedState),(l=Dr||nl(t,s,l,a,p,o,c))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=o),i.props=a,i.state=o,i.context=c,a=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),a=!1)}else{i=t.stateNode,zr(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:tl(t.type,l),i.props=c,u=t.pendingProps,p=i.context,"object"===typeof(o=s.contextType)&&null!==o?o=Tr(o):o=Pn(t,o=Ln(s)?Tn:An.current);var m=s.getDerivedStateFromProps;(d="function"===typeof m||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l!==u||p!==o)&&il(t,i,a,o),Dr=!1,p=t.memoizedState,i.state=p,Ur(t,a,i,n);var h=t.memoizedState;l!==u||p!==h||En.current||Dr?("function"===typeof m&&(sl(t,s,m,a),h=t.memoizedState),(c=Dr||nl(t,s,c,a,p,h,o)||!1)?(d||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(a,h,o),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(a,h,o)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=h),i.props=a,i.state=h,i.context=o,a=c):("function"!==typeof i.componentDidUpdate||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),a=!1)}return Il(e,t,s,a,r,n)}function Il(e,t,s,a,n,r){kl(e,t);var i=0!==(128&t.flags);if(!a&&!i)return n&&zn(t,s,!1),Wl(e,t,r);a=t.stateNode,gl.current=t;var l=i&&"function"!==typeof s.getDerivedStateFromError?null:a.render();return t.flags|=1,null!==e&&i?(t.child=yr(t,e.child,null,r),t.child=yr(t,null,l,r)):bl(e,t,l,r),t.memoizedState=a.state,n&&zn(t,s,!0),t.child}function Al(e){var t=e.stateNode;t.pendingContext?Mn(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Mn(0,t.context,!1),Jr(e,t.containerInfo)}function El(e,t,s,a,n){return mr(),hr(n),t.flags|=256,bl(e,t,s,a),t.child}var Tl,Pl,Ll,Rl,Ml={dehydrated:null,treeContext:null,retryLane:0};function Dl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fl(e,t,s){var a,n=t.pendingProps,i=Zr.current,l=!1,o=0!==(128&t.flags);if((a=o)||(a=(null===e||null!==e.memoizedState)&&0!==(2&i)),a?(l=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Cn(Zr,1&i),null===e)return cr(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=n.children,e=n.fallback,l?(n=t.mode,l=t.child,o={mode:"hidden",children:o},0===(1&n)&&null!==l?(l.childLanes=0,l.pendingProps=o):l=Fc(o,n,0,null),e=Dc(e,n,s,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Dl(s),t.memoizedState=Ml,e):zl(t,o));if(null!==(i=e.memoizedState)&&null!==(a=i.dehydrated))return function(e,t,s,a,n,i,l){if(s)return 256&t.flags?(t.flags&=-257,Ol(e,t,l,a=cl(Error(r(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=a.fallback,n=t.mode,a=Fc({mode:"visible",children:a.children},n,0,null),(i=Dc(i,n,l,null)).flags|=2,a.return=t,i.return=t,a.sibling=i,t.child=a,0!==(1&t.mode)&&yr(t,e.child,null,l),t.child.memoizedState=Dl(l),t.memoizedState=Ml,i);if(0===(1&t.mode))return Ol(e,t,l,null);if("$!"===n.data){if(a=n.nextSibling&&n.nextSibling.dataset)var o=a.dgst;return a=o,Ol(e,t,l,a=cl(i=Error(r(419)),a,void 0))}if(o=0!==(l&e.childLanes),vl||o){if(null!==(a=Eo)){switch(l&-l){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}0!==(n=0!==(n&(a.suspendedLanes|l))?0:n)&&n!==i.retryLane&&(i.retryLane=n,Mr(e,n),sc(a,e,n,-1))}return fc(),Ol(e,t,l,a=cl(Error(r(421))))}return"$?"===n.data?(t.flags|=128,t.child=e.child,t=Ic.bind(null,e),n._reactRetry=t,null):(e=i.treeContext,ar=cn(n.nextSibling),sr=t,nr=!0,rr=null,null!==e&&(Yn[$n++]=Kn,Yn[$n++]=Gn,Yn[$n++]=Jn,Kn=e.id,Gn=e.overflow,Jn=t),t=zl(t,a.children),t.flags|=4096,t)}(e,t,o,n,a,i,s);if(l){l=n.fallback,o=t.mode,a=(i=e.child).sibling;var c={mode:"hidden",children:n.children};return 0===(1&o)&&t.child!==i?((n=t.child).childLanes=0,n.pendingProps=c,t.deletions=null):(n=Rc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==a?l=Rc(a,l):(l=Dc(l,o,s,null)).flags|=2,l.return=t,n.return=t,n.sibling=l,t.child=n,n=l,l=t.child,o=null===(o=e.child.memoizedState)?Dl(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=e.childLanes&~s,t.memoizedState=Ml,n}return e=(l=e.child).sibling,n=Rc(l,{mode:"visible",children:n.children}),0===(1&t.mode)&&(n.lanes=s),n.return=t,n.sibling=null,null!==e&&(null===(s=t.deletions)?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n}function zl(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ol(e,t,s,a){return null!==a&&hr(a),yr(t,e.child,null,s),(e=zl(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function _l(e,t,s){e.lanes|=t;var a=e.alternate;null!==a&&(a.lanes|=t),Ar(e.return,t,s)}function ql(e,t,s,a,n){var r=e.memoizedState;null===r?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:n}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=a,r.tail=s,r.tailMode=n)}function Bl(e,t,s){var a=t.pendingProps,n=a.revealOrder,r=a.tail;if(bl(e,t,a.children,s),0!==(2&(a=Zr.current)))a=1&a|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&_l(e,s,t);else if(19===e.tag)_l(e,s,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Cn(Zr,a),0===(1&t.mode))t.memoizedState=null;else switch(n){case"forwards":for(s=t.child,n=null;null!==s;)null!==(e=s.alternate)&&null===ei(e)&&(n=s),s=s.sibling;null===(s=n)?(n=t.child,t.child=null):(n=s.sibling,s.sibling=null),ql(t,!1,n,s,r);break;case"backwards":for(s=null,n=t.child,t.child=null;null!==n;){if(null!==(e=n.alternate)&&null===ei(e)){t.child=n;break}e=n.sibling,n.sibling=s,s=n,n=e}ql(t,!0,s,null,r);break;case"together":ql(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ul(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wl(e,t,s){if(null!==e&&(t.dependencies=e.dependencies),Fo|=t.lanes,0===(s&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(s=Rc(e=t.child,e.pendingProps),t.child=s,s.return=t;null!==e.sibling;)e=e.sibling,(s=s.sibling=Rc(e,e.pendingProps)).return=t;s.sibling=null}return t.child}function Ql(e,t){if(!nr)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;null!==t;)null!==t.alternate&&(s=t),t=t.sibling;null===s?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var a=null;null!==s;)null!==s.alternate&&(a=s),s=s.sibling;null===a?t||null===e.tail?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Hl(e){var t=null!==e.alternate&&e.alternate.child===e.child,s=0,a=0;if(t)for(var n=e.child;null!==n;)s|=n.lanes|n.childLanes,a|=14680064&n.subtreeFlags,a|=14680064&n.flags,n.return=e,n=n.sibling;else for(n=e.child;null!==n;)s|=n.lanes|n.childLanes,a|=n.subtreeFlags,a|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=a,e.childLanes=s,t}function Vl(e,t,s){var a=t.pendingProps;switch(tr(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hl(t),null;case 1:case 17:return Ln(t.type)&&Rn(),Hl(t),null;case 3:return a=t.stateNode,Kr(),Sn(En),Sn(An),si(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),null!==e&&null!==e.child||(ur(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==rr&&(ic(rr),rr=null))),Pl(e,t),Hl(t),null;case 5:Xr(t);var n=$r(Yr.current);if(s=t.type,null!==e&&null!=t.stateNode)Ll(e,t,s,a,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(null===t.stateNode)throw Error(r(166));return Hl(t),null}if(e=$r(Hr.current),ur(t)){a=t.stateNode,s=t.type;var i=t.memoizedProps;switch(a[pn]=t,a[mn]=i,e=0!==(1&t.mode),s){case"dialog":Oa("cancel",a),Oa("close",a);break;case"iframe":case"object":case"embed":Oa("load",a);break;case"video":case"audio":for(n=0;n<Ma.length;n++)Oa(Ma[n],a);break;case"source":Oa("error",a);break;case"img":case"image":case"link":Oa("error",a),Oa("load",a);break;case"details":Oa("toggle",a);break;case"input":K(a,i),Oa("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!i.multiple},Oa("invalid",a);break;case"textarea":ne(a,i),Oa("invalid",a)}for(var o in ve(s,i),n=null,i)if(i.hasOwnProperty(o)){var c=i[o];"children"===o?"string"===typeof c?a.textContent!==c&&(!0!==i.suppressHydrationWarning&&Ga(a.textContent,c,e),n=["children",c]):"number"===typeof c&&a.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Ga(a.textContent,c,e),n=["children",""+c]):l.hasOwnProperty(o)&&null!=c&&"onScroll"===o&&Oa("scroll",a)}switch(s){case"input":V(a),Z(a,i,!0);break;case"textarea":V(a),ie(a);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(a.onclick=Xa)}a=n,t.updateQueue=a,null!==a&&(t.flags|=4)}else{o=9===n.nodeType?n:n.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=le(s)),"http://www.w3.org/1999/xhtml"===e?"script"===s?((e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof a.is?e=o.createElement(s,{is:a.is}):(e=o.createElement(s),"select"===s&&(o=e,a.multiple?o.multiple=!0:a.size&&(o.size=a.size))):e=o.createElementNS(e,s),e[pn]=t,e[mn]=a,Tl(e,t,!1,!1),t.stateNode=e;e:{switch(o=be(s,a),s){case"dialog":Oa("cancel",e),Oa("close",e),n=a;break;case"iframe":case"object":case"embed":Oa("load",e),n=a;break;case"video":case"audio":for(n=0;n<Ma.length;n++)Oa(Ma[n],e);n=a;break;case"source":Oa("error",e),n=a;break;case"img":case"image":case"link":Oa("error",e),Oa("load",e),n=a;break;case"details":Oa("toggle",e),n=a;break;case"input":K(e,a),n=J(e,a),Oa("invalid",e);break;case"option":default:n=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},n=z({},a,{value:void 0}),Oa("invalid",e);break;case"textarea":ne(e,a),n=ae(e,a),Oa("invalid",e)}for(i in ve(s,n),c=n)if(c.hasOwnProperty(i)){var d=c[i];"style"===i?xe(e,d):"dangerouslySetInnerHTML"===i?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===i?"string"===typeof d?("textarea"!==s||""!==d)&&pe(e,d):"number"===typeof d&&pe(e,""+d):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(l.hasOwnProperty(i)?null!=d&&"onScroll"===i&&Oa("scroll",e):null!=d&&b(e,i,d,o))}switch(s){case"input":V(e),Z(e,a,!1);break;case"textarea":V(e),ie(e);break;case"option":null!=a.value&&e.setAttribute("value",""+Q(a.value));break;case"select":e.multiple=!!a.multiple,null!=(i=a.value)?se(e,!!a.multiple,i,!1):null!=a.defaultValue&&se(e,!!a.multiple,a.defaultValue,!0);break;default:"function"===typeof n.onClick&&(e.onclick=Xa)}switch(s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hl(t),null;case 6:if(e&&null!=t.stateNode)Rl(e,t,e.memoizedProps,a);else{if("string"!==typeof a&&null===t.stateNode)throw Error(r(166));if(s=$r(Yr.current),$r(Hr.current),ur(t)){if(a=t.stateNode,s=t.memoizedProps,a[pn]=t,(i=a.nodeValue!==s)&&null!==(e=sr))switch(e.tag){case 3:Ga(a.nodeValue,s,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Ga(a.nodeValue,s,0!==(1&e.mode))}i&&(t.flags|=4)}else(a=(9===s.nodeType?s:s.ownerDocument).createTextNode(a))[pn]=t,t.stateNode=a}return Hl(t),null;case 13:if(Sn(Zr),a=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(nr&&null!==ar&&0!==(1&t.mode)&&0===(128&t.flags))pr(),mr(),t.flags|=98560,i=!1;else if(i=ur(t),null!==a&&null!==a.dehydrated){if(null===e){if(!i)throw Error(r(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(r(317));i[pn]=t}else mr(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hl(t),i=!1}else null!==rr&&(ic(rr),rr=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=s,t):((a=null!==a)!==(null!==e&&null!==e.memoizedState)&&a&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zr.current)?0===Mo&&(Mo=3):fc())),null!==t.updateQueue&&(t.flags|=4),Hl(t),null);case 4:return Kr(),Pl(e,t),null===e&&Ba(t.stateNode.containerInfo),Hl(t),null;case 10:return Ir(t.type._context),Hl(t),null;case 19:if(Sn(Zr),null===(i=t.memoizedState))return Hl(t),null;if(a=0!==(128&t.flags),null===(o=i.rendering))if(a)Ql(i,!1);else{if(0!==Mo||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(o=ei(e))){for(t.flags|=128,Ql(i,!1),null!==(a=o.updateQueue)&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=s,s=t.child;null!==s;)e=a,(i=s).flags&=14680066,null===(o=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Cn(Zr,1&Zr.current|2),t.child}e=e.sibling}null!==i.tail&&Ge()>Uo&&(t.flags|=128,a=!0,Ql(i,!1),t.lanes=4194304)}else{if(!a)if(null!==(e=ei(o))){if(t.flags|=128,a=!0,null!==(s=e.updateQueue)&&(t.updateQueue=s,t.flags|=4),Ql(i,!0),null===i.tail&&"hidden"===i.tailMode&&!o.alternate&&!nr)return Hl(t),null}else 2*Ge()-i.renderingStartTime>Uo&&1073741824!==s&&(t.flags|=128,a=!0,Ql(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(null!==(s=i.last)?s.sibling=o:t.child=o,i.last=o)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ge(),t.sibling=null,s=Zr.current,Cn(Zr,a?1&s|2:1&s),t):(Hl(t),null);case 22:case 23:return uc(),a=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==a&&(t.flags|=8192),a&&0!==(1&t.mode)?0!==(1073741824&Lo)&&(Hl(t),6&t.subtreeFlags&&(t.flags|=8192)):Hl(t),null;case 24:case 25:return null}throw Error(r(156,t.tag))}function Yl(e,t){switch(tr(t),t.tag){case 1:return Ln(t.type)&&Rn(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Kr(),Sn(En),Sn(An),si(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xr(t),null;case 13:if(Sn(Zr),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));mr()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Sn(Zr),null;case 4:return Kr(),null;case 10:return Ir(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Tl=function(e,t){for(var s=t.child;null!==s;){if(5===s.tag||6===s.tag)e.appendChild(s.stateNode);else if(4!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break;for(;null===s.sibling;){if(null===s.return||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},Pl=function(){},Ll=function(e,t,s,a){var n=e.memoizedProps;if(n!==a){e=t.stateNode,$r(Hr.current);var r,i=null;switch(s){case"input":n=J(e,n),a=J(e,a),i=[];break;case"select":n=z({},n,{value:void 0}),a=z({},a,{value:void 0}),i=[];break;case"textarea":n=ae(e,n),a=ae(e,a),i=[];break;default:"function"!==typeof n.onClick&&"function"===typeof a.onClick&&(e.onclick=Xa)}for(d in ve(s,a),s=null,n)if(!a.hasOwnProperty(d)&&n.hasOwnProperty(d)&&null!=n[d])if("style"===d){var o=n[d];for(r in o)o.hasOwnProperty(r)&&(s||(s={}),s[r]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(l.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in a){var c=a[d];if(o=null!=n?n[d]:void 0,a.hasOwnProperty(d)&&c!==o&&(null!=c||null!=o))if("style"===d)if(o){for(r in o)!o.hasOwnProperty(r)||c&&c.hasOwnProperty(r)||(s||(s={}),s[r]="");for(r in c)c.hasOwnProperty(r)&&o[r]!==c[r]&&(s||(s={}),s[r]=c[r])}else s||(i||(i=[]),i.push(d,s)),s=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,o=o?o.__html:void 0,null!=c&&o!==c&&(i=i||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(l.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Oa("scroll",e),i||o===c||(i=[])):(i=i||[]).push(d,c))}s&&(i=i||[]).push("style",s);var d=i;(t.updateQueue=d)&&(t.flags|=4)}},Rl=function(e,t,s,a){s!==a&&(t.flags|=4)};var $l=!1,Jl=!1,Kl="function"===typeof WeakSet?WeakSet:Set,Gl=null;function Xl(e,t){var s=e.ref;if(null!==s)if("function"===typeof s)try{s(null)}catch(a){kc(e,t,a)}else s.current=null}function Zl(e,t,s){try{s()}catch(a){kc(e,t,a)}}var eo=!1;function to(e,t,s){var a=t.updateQueue;if(null!==(a=null!==a?a.lastEffect:null)){var n=a=a.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&Zl(t,s,r)}n=n.next}while(n!==a)}}function so(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var s=t=t.next;do{if((s.tag&e)===e){var a=s.create;s.destroy=a()}s=s.next}while(s!==t)}}function ao(e){var t=e.ref;if(null!==t){var s=e.stateNode;e.tag,e=s,"function"===typeof t?t(e):t.current=e}}function no(e){var t=e.alternate;null!==t&&(e.alternate=null,no(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[pn],delete t[mn],delete t[fn],delete t[xn],delete t[gn])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ro(e){return 5===e.tag||3===e.tag||4===e.tag}function io(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ro(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function lo(e,t,s){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?8===s.nodeType?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(8===s.nodeType?(t=s.parentNode).insertBefore(e,s):(t=s).appendChild(e),null!==(s=s._reactRootContainer)&&void 0!==s||null!==t.onclick||(t.onclick=Xa));else if(4!==a&&null!==(e=e.child))for(lo(e,t,s),e=e.sibling;null!==e;)lo(e,t,s),e=e.sibling}function oo(e,t,s){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(4!==a&&null!==(e=e.child))for(oo(e,t,s),e=e.sibling;null!==e;)oo(e,t,s),e=e.sibling}var co=null,uo=!1;function po(e,t,s){for(s=s.child;null!==s;)mo(e,t,s),s=s.sibling}function mo(e,t,s){if(rt&&"function"===typeof rt.onCommitFiberUnmount)try{rt.onCommitFiberUnmount(nt,s)}catch(l){}switch(s.tag){case 5:Jl||Xl(s,t);case 6:var a=co,n=uo;co=null,po(e,t,s),uo=n,null!==(co=a)&&(uo?(e=co,s=s.stateNode,8===e.nodeType?e.parentNode.removeChild(s):e.removeChild(s)):co.removeChild(s.stateNode));break;case 18:null!==co&&(uo?(e=co,s=s.stateNode,8===e.nodeType?on(e.parentNode,s):1===e.nodeType&&on(e,s),Ut(e)):on(co,s.stateNode));break;case 4:a=co,n=uo,co=s.stateNode.containerInfo,uo=!0,po(e,t,s),co=a,uo=n;break;case 0:case 11:case 14:case 15:if(!Jl&&(null!==(a=s.updateQueue)&&null!==(a=a.lastEffect))){n=a=a.next;do{var r=n,i=r.destroy;r=r.tag,void 0!==i&&(0!==(2&r)||0!==(4&r))&&Zl(s,t,i),n=n.next}while(n!==a)}po(e,t,s);break;case 1:if(!Jl&&(Xl(s,t),"function"===typeof(a=s.stateNode).componentWillUnmount))try{a.props=s.memoizedProps,a.state=s.memoizedState,a.componentWillUnmount()}catch(l){kc(s,t,l)}po(e,t,s);break;case 21:po(e,t,s);break;case 22:1&s.mode?(Jl=(a=Jl)||null!==s.memoizedState,po(e,t,s),Jl=a):po(e,t,s);break;default:po(e,t,s)}}function ho(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var s=e.stateNode;null===s&&(s=e.stateNode=new Kl),t.forEach(function(t){var a=Ac.bind(null,e,t);s.has(t)||(s.add(t),t.then(a,a))})}}function fo(e,t){var s=t.deletions;if(null!==s)for(var a=0;a<s.length;a++){var n=s[a];try{var i=e,l=t,o=l;e:for(;null!==o;){switch(o.tag){case 5:co=o.stateNode,uo=!1;break e;case 3:case 4:co=o.stateNode.containerInfo,uo=!0;break e}o=o.return}if(null===co)throw Error(r(160));mo(i,l,n),co=null,uo=!1;var c=n.alternate;null!==c&&(c.return=null),n.return=null}catch(d){kc(n,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)xo(t,e),t=t.sibling}function xo(e,t){var s=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fo(t,e),go(e),4&a){try{to(3,e,e.return),so(3,e)}catch(x){kc(e,e.return,x)}try{to(5,e,e.return)}catch(x){kc(e,e.return,x)}}break;case 1:fo(t,e),go(e),512&a&&null!==s&&Xl(s,s.return);break;case 5:if(fo(t,e),go(e),512&a&&null!==s&&Xl(s,s.return),32&e.flags){var n=e.stateNode;try{pe(n,"")}catch(x){kc(e,e.return,x)}}if(4&a&&null!=(n=e.stateNode)){var i=e.memoizedProps,l=null!==s?s.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===o&&"radio"===i.type&&null!=i.name&&G(n,i),be(o,l);var d=be(o,i);for(l=0;l<c.length;l+=2){var u=c[l],p=c[l+1];"style"===u?xe(n,p):"dangerouslySetInnerHTML"===u?ue(n,p):"children"===u?pe(n,p):b(n,u,p,d)}switch(o){case"input":X(n,i);break;case"textarea":re(n,i);break;case"select":var m=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!i.multiple;var h=i.value;null!=h?se(n,!!i.multiple,h,!1):m!==!!i.multiple&&(null!=i.defaultValue?se(n,!!i.multiple,i.defaultValue,!0):se(n,!!i.multiple,i.multiple?[]:"",!1))}n[mn]=i}catch(x){kc(e,e.return,x)}}break;case 6:if(fo(t,e),go(e),4&a){if(null===e.stateNode)throw Error(r(162));n=e.stateNode,i=e.memoizedProps;try{n.nodeValue=i}catch(x){kc(e,e.return,x)}}break;case 3:if(fo(t,e),go(e),4&a&&null!==s&&s.memoizedState.isDehydrated)try{Ut(t.containerInfo)}catch(x){kc(e,e.return,x)}break;case 4:default:fo(t,e),go(e);break;case 13:fo(t,e),go(e),8192&(n=e.child).flags&&(i=null!==n.memoizedState,n.stateNode.isHidden=i,!i||null!==n.alternate&&null!==n.alternate.memoizedState||(Bo=Ge())),4&a&&ho(e);break;case 22:if(u=null!==s&&null!==s.memoizedState,1&e.mode?(Jl=(d=Jl)||u,fo(t,e),Jl=d):fo(t,e),go(e),8192&a){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Gl=e,u=e.child;null!==u;){for(p=Gl=u;null!==Gl;){switch(h=(m=Gl).child,m.tag){case 0:case 11:case 14:case 15:to(4,m,m.return);break;case 1:Xl(m,m.return);var f=m.stateNode;if("function"===typeof f.componentWillUnmount){a=m,s=m.return;try{t=a,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(x){kc(a,s,x)}}break;case 5:Xl(m,m.return);break;case 22:if(null!==m.memoizedState){jo(p);continue}}null!==h?(h.return=m,Gl=h):jo(p)}u=u.sibling}e:for(u=null,p=e;;){if(5===p.tag){if(null===u){u=p;try{n=p.stateNode,d?"function"===typeof(i=n.style).setProperty?i.setProperty("display","none","important"):i.display="none":(o=p.stateNode,l=void 0!==(c=p.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,o.style.display=fe("display",l))}catch(x){kc(e,e.return,x)}}}else if(6===p.tag){if(null===u)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(x){kc(e,e.return,x)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===e)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;null===p.sibling;){if(null===p.return||p.return===e)break e;u===p&&(u=null),p=p.return}u===p&&(u=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:fo(t,e),go(e),4&a&&ho(e);case 21:}}function go(e){var t=e.flags;if(2&t){try{e:{for(var s=e.return;null!==s;){if(ro(s)){var a=s;break e}s=s.return}throw Error(r(160))}switch(a.tag){case 5:var n=a.stateNode;32&a.flags&&(pe(n,""),a.flags&=-33),oo(e,io(e),n);break;case 3:case 4:var i=a.stateNode.containerInfo;lo(e,io(e),i);break;default:throw Error(r(161))}}catch(l){kc(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vo(e,t,s){Gl=e,bo(e,t,s)}function bo(e,t,s){for(var a=0!==(1&e.mode);null!==Gl;){var n=Gl,r=n.child;if(22===n.tag&&a){var i=null!==n.memoizedState||$l;if(!i){var l=n.alternate,o=null!==l&&null!==l.memoizedState||Jl;l=$l;var c=Jl;if($l=i,(Jl=o)&&!c)for(Gl=n;null!==Gl;)o=(i=Gl).child,22===i.tag&&null!==i.memoizedState?No(n):null!==o?(o.return=i,Gl=o):No(n);for(;null!==r;)Gl=r,bo(r,t,s),r=r.sibling;Gl=n,$l=l,Jl=c}yo(e)}else 0!==(8772&n.subtreeFlags)&&null!==r?(r.return=n,Gl=r):yo(e)}}function yo(e){for(;null!==Gl;){var t=Gl;if(0!==(8772&t.flags)){var s=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Jl||so(5,t);break;case 1:var a=t.stateNode;if(4&t.flags&&!Jl)if(null===s)a.componentDidMount();else{var n=t.elementType===t.type?s.memoizedProps:tl(t.type,s.memoizedProps);a.componentDidUpdate(n,s.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Wr(t,i,a);break;case 3:var l=t.updateQueue;if(null!==l){if(s=null,null!==t.child)switch(t.child.tag){case 5:case 1:s=t.child.stateNode}Wr(t,l,s)}break;case 5:var o=t.stateNode;if(null===s&&4&t.flags){s=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var p=u.dehydrated;null!==p&&Ut(p)}}}break;default:throw Error(r(163))}Jl||512&t.flags&&ao(t)}catch(m){kc(t,t.return,m)}}if(t===e){Gl=null;break}if(null!==(s=t.sibling)){s.return=t.return,Gl=s;break}Gl=t.return}}function jo(e){for(;null!==Gl;){var t=Gl;if(t===e){Gl=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Gl=s;break}Gl=t.return}}function No(e){for(;null!==Gl;){var t=Gl;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{so(4,t)}catch(o){kc(t,s,o)}break;case 1:var a=t.stateNode;if("function"===typeof a.componentDidMount){var n=t.return;try{a.componentDidMount()}catch(o){kc(t,n,o)}}var r=t.return;try{ao(t)}catch(o){kc(t,r,o)}break;case 5:var i=t.return;try{ao(t)}catch(o){kc(t,i,o)}}}catch(o){kc(t,t.return,o)}if(t===e){Gl=null;break}var l=t.sibling;if(null!==l){l.return=t.return,Gl=l;break}Gl=t.return}}var wo,ko=Math.ceil,So=y.ReactCurrentDispatcher,Co=y.ReactCurrentOwner,Io=y.ReactCurrentBatchConfig,Ao=0,Eo=null,To=null,Po=0,Lo=0,Ro=kn(0),Mo=0,Do=null,Fo=0,zo=0,Oo=0,_o=null,qo=null,Bo=0,Uo=1/0,Wo=null,Qo=!1,Ho=null,Vo=null,Yo=!1,$o=null,Jo=0,Ko=0,Go=null,Xo=-1,Zo=0;function ec(){return 0!==(6&Ao)?Ge():-1!==Xo?Xo:Xo=Ge()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Ao)&&0!==Po?Po&-Po:null!==fr.transition?(0===Zo&&(Zo=ft()),Zo):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Kt(e.type)}function sc(e,t,s,a){if(50<Ko)throw Ko=0,Go=null,Error(r(185));gt(e,s,a),0!==(2&Ao)&&e===Eo||(e===Eo&&(0===(2&Ao)&&(zo|=s),4===Mo&&lc(e,Po)),ac(e,a),1===s&&0===Ao&&0===(1&t.mode)&&(Uo=Ge()+500,_n&&Un()))}function ac(e,t){var s=e.callbackNode;!function(e,t){for(var s=e.suspendedLanes,a=e.pingedLanes,n=e.expirationTimes,r=e.pendingLanes;0<r;){var i=31-it(r),l=1<<i,o=n[i];-1===o?0!==(l&s)&&0===(l&a)||(n[i]=mt(l,t)):o<=t&&(e.expiredLanes|=l),r&=~l}}(e,t);var a=pt(e,e===Eo?Po:0);if(0===a)null!==s&&$e(s),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(null!=s&&$e(s),1===t)0===e.tag?function(e){_n=!0,Bn(e)}(oc.bind(null,e)):Bn(oc.bind(null,e)),rn(function(){0===(6&Ao)&&Un()}),s=null;else{switch(yt(a)){case 1:s=Ze;break;case 4:s=et;break;case 16:default:s=tt;break;case 536870912:s=at}s=Ec(s,nc.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function nc(e,t){if(Xo=-1,Zo=0,0!==(6&Ao))throw Error(r(327));var s=e.callbackNode;if(Nc()&&e.callbackNode!==s)return null;var a=pt(e,e===Eo?Po:0);if(0===a)return null;if(0!==(30&a)||0!==(a&e.expiredLanes)||t)t=xc(e,a);else{t=a;var n=Ao;Ao|=2;var i=hc();for(Eo===e&&Po===t||(Wo=null,Uo=Ge()+500,pc(e,t));;)try{vc();break}catch(o){mc(e,o)}Cr(),So.current=i,Ao=n,null!==To?t=0:(Eo=null,Po=0,t=Mo)}if(0!==t){if(2===t&&(0!==(n=ht(e))&&(a=n,t=rc(e,n))),1===t)throw s=Do,pc(e,0),lc(e,a),ac(e,Ge()),s;if(6===t)lc(e,a);else{if(n=e.current.alternate,0===(30&a)&&!function(e){for(var t=e;;){if(16384&t.flags){var s=t.updateQueue;if(null!==s&&null!==(s=s.stores))for(var a=0;a<s.length;a++){var n=s[a],r=n.getSnapshot;n=n.value;try{if(!ia(r(),n))return!1}catch(l){return!1}}}if(s=t.child,16384&t.subtreeFlags&&null!==s)s.return=t,t=s;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(n)&&(2===(t=xc(e,a))&&(0!==(i=ht(e))&&(a=i,t=rc(e,i))),1===t))throw s=Do,pc(e,0),lc(e,a),ac(e,Ge()),s;switch(e.finishedWork=n,e.finishedLanes=a,t){case 0:case 1:throw Error(r(345));case 2:case 5:jc(e,qo,Wo);break;case 3:if(lc(e,a),(130023424&a)===a&&10<(t=Bo+500-Ge())){if(0!==pt(e,0))break;if(((n=e.suspendedLanes)&a)!==a){ec(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=sn(jc.bind(null,e,qo,Wo),t);break}jc(e,qo,Wo);break;case 4:if(lc(e,a),(4194240&a)===a)break;for(t=e.eventTimes,n=-1;0<a;){var l=31-it(a);i=1<<l,(l=t[l])>n&&(n=l),a&=~i}if(a=n,10<(a=(120>(a=Ge()-a)?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*ko(a/1960))-a)){e.timeoutHandle=sn(jc.bind(null,e,qo,Wo),a);break}jc(e,qo,Wo);break;default:throw Error(r(329))}}}return ac(e,Ge()),e.callbackNode===s?nc.bind(null,e):null}function rc(e,t){var s=_o;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),2!==(e=xc(e,t))&&(t=qo,qo=s,null!==t&&ic(t)),e}function ic(e){null===qo?qo=e:qo.push.apply(qo,e)}function lc(e,t){for(t&=~Oo,t&=~zo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-it(t),a=1<<s;e[s]=-1,t&=~a}}function oc(e){if(0!==(6&Ao))throw Error(r(327));Nc();var t=pt(e,0);if(0===(1&t))return ac(e,Ge()),null;var s=xc(e,t);if(0!==e.tag&&2===s){var a=ht(e);0!==a&&(t=a,s=rc(e,a))}if(1===s)throw s=Do,pc(e,0),lc(e,t),ac(e,Ge()),s;if(6===s)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,jc(e,qo,Wo),ac(e,Ge()),null}function cc(e,t){var s=Ao;Ao|=1;try{return e(t)}finally{0===(Ao=s)&&(Uo=Ge()+500,_n&&Un())}}function dc(e){null!==$o&&0===$o.tag&&0===(6&Ao)&&Nc();var t=Ao;Ao|=1;var s=Io.transition,a=bt;try{if(Io.transition=null,bt=1,e)return e()}finally{bt=a,Io.transition=s,0===(6&(Ao=t))&&Un()}}function uc(){Lo=Ro.current,Sn(Ro)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(-1!==s&&(e.timeoutHandle=-1,an(s)),null!==To)for(s=To.return;null!==s;){var a=s;switch(tr(a),a.tag){case 1:null!==(a=a.type.childContextTypes)&&void 0!==a&&Rn();break;case 3:Kr(),Sn(En),Sn(An),si();break;case 5:Xr(a);break;case 4:Kr();break;case 13:case 19:Sn(Zr);break;case 10:Ir(a.type._context);break;case 22:case 23:uc()}s=s.return}if(Eo=e,To=e=Rc(e.current,null),Po=Lo=t,Mo=0,Do=null,Oo=zo=Fo=0,qo=_o=null,null!==Pr){for(t=0;t<Pr.length;t++)if(null!==(a=(s=Pr[t]).interleaved)){s.interleaved=null;var n=a.next,r=s.pending;if(null!==r){var i=r.next;r.next=n,a.next=i}s.pending=a}Pr=null}return e}function mc(e,t){for(;;){var s=To;try{if(Cr(),ai.current=Gi,ci){for(var a=ii.memoizedState;null!==a;){var n=a.queue;null!==n&&(n.pending=null),a=a.next}ci=!1}if(ri=0,oi=li=ii=null,di=!1,ui=0,Co.current=null,null===s||null===s.return){Mo=1,Do=t,To=null;break}e:{var i=e,l=s.return,o=s,c=t;if(t=Po,o.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=o,p=u.tag;if(0===(1&u.mode)&&(0===p||11===p||15===p)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=fl(l);if(null!==h){h.flags&=-257,xl(h,l,o,0,t),1&h.mode&&hl(i,d,t),c=d;var f=(t=h).updateQueue;if(null===f){var x=new Set;x.add(c),t.updateQueue=x}else f.add(c);break e}if(0===(1&t)){hl(i,d,t),fc();break e}c=Error(r(426))}else if(nr&&1&o.mode){var g=fl(l);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),xl(g,l,o,0,t),hr(ol(c,o));break e}}i=c=ol(c,o),4!==Mo&&(Mo=2),null===_o?_o=[i]:_o.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Br(i,pl(0,c,t));break e;case 1:o=c;var v=i.type,b=i.stateNode;if(0===(128&i.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Vo||!Vo.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t,Br(i,ml(i,o,t));break e}}i=i.return}while(null!==i)}yc(s)}catch(y){t=y,To===s&&null!==s&&(To=s=s.return);continue}break}}function hc(){var e=So.current;return So.current=Gi,null===e?Gi:e}function fc(){0!==Mo&&3!==Mo&&2!==Mo||(Mo=4),null===Eo||0===(268435455&Fo)&&0===(268435455&zo)||lc(Eo,Po)}function xc(e,t){var s=Ao;Ao|=2;var a=hc();for(Eo===e&&Po===t||(Wo=null,pc(e,t));;)try{gc();break}catch(n){mc(e,n)}if(Cr(),Ao=s,So.current=a,null!==To)throw Error(r(261));return Eo=null,Po=0,Mo}function gc(){for(;null!==To;)bc(To)}function vc(){for(;null!==To&&!Je();)bc(To)}function bc(e){var t=wo(e.alternate,e,Lo);e.memoizedProps=e.pendingProps,null===t?yc(e):To=t,Co.current=null}function yc(e){var t=e;do{var s=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(s=Vl(s,t,Lo)))return void(To=s)}else{if(null!==(s=Yl(s,t)))return s.flags&=32767,void(To=s);if(null===e)return Mo=6,void(To=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(To=t);To=t=e}while(null!==t);0===Mo&&(Mo=5)}function jc(e,t,s){var a=bt,n=Io.transition;try{Io.transition=null,bt=1,function(e,t,s,a){do{Nc()}while(null!==$o);if(0!==(6&Ao))throw Error(r(327));s=e.finishedWork;var n=e.finishedLanes;if(null===s)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var i=s.lanes|s.childLanes;if(function(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<s;){var n=31-it(s),r=1<<n;t[n]=0,a[n]=-1,e[n]=-1,s&=~r}}(e,i),e===Eo&&(To=Eo=null,Po=0),0===(2064&s.subtreeFlags)&&0===(2064&s.flags)||Yo||(Yo=!0,Ec(tt,function(){return Nc(),null})),i=0!==(15990&s.flags),0!==(15990&s.subtreeFlags)||i){i=Io.transition,Io.transition=null;var l=bt;bt=1;var o=Ao;Ao|=4,Co.current=null,function(e,t){if(Za=Qt,pa(e=ua())){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{var a=(s=(s=e.ownerDocument)&&s.defaultView||window).getSelection&&s.getSelection();if(a&&0!==a.rangeCount){s=a.anchorNode;var n=a.anchorOffset,i=a.focusNode;a=a.focusOffset;try{s.nodeType,i.nodeType}catch(j){s=null;break e}var l=0,o=-1,c=-1,d=0,u=0,p=e,m=null;t:for(;;){for(var h;p!==s||0!==n&&3!==p.nodeType||(o=l+n),p!==i||0!==a&&3!==p.nodeType||(c=l+a),3===p.nodeType&&(l+=p.nodeValue.length),null!==(h=p.firstChild);)m=p,p=h;for(;;){if(p===e)break t;if(m===s&&++d===n&&(o=l),m===i&&++u===a&&(c=l),null!==(h=p.nextSibling))break;m=(p=m).parentNode}p=h}s=-1===o||-1===c?null:{start:o,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(en={focusedElem:e,selectionRange:s},Qt=!1,Gl=t;null!==Gl;)if(e=(t=Gl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Gl=e;else for(;null!==Gl;){t=Gl;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var x=f.memoizedProps,g=f.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?x:tl(t.type,x),g);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var y=t.stateNode.containerInfo;1===y.nodeType?y.textContent="":9===y.nodeType&&y.documentElement&&y.removeChild(y.documentElement);break;default:throw Error(r(163))}}catch(j){kc(t,t.return,j)}if(null!==(e=t.sibling)){e.return=t.return,Gl=e;break}Gl=t.return}f=eo,eo=!1}(e,s),xo(s,e),ma(en),Qt=!!Za,en=Za=null,e.current=s,vo(s,e,n),Ke(),Ao=o,bt=l,Io.transition=i}else e.current=s;if(Yo&&(Yo=!1,$o=e,Jo=n),i=e.pendingLanes,0===i&&(Vo=null),function(e){if(rt&&"function"===typeof rt.onCommitFiberRoot)try{rt.onCommitFiberRoot(nt,e,void 0,128===(128&e.current.flags))}catch(t){}}(s.stateNode),ac(e,Ge()),null!==t)for(a=e.onRecoverableError,s=0;s<t.length;s++)n=t[s],a(n.value,{componentStack:n.stack,digest:n.digest});if(Qo)throw Qo=!1,e=Ho,Ho=null,e;0!==(1&Jo)&&0!==e.tag&&Nc(),i=e.pendingLanes,0!==(1&i)?e===Go?Ko++:(Ko=0,Go=e):Ko=0,Un()}(e,t,s,a)}finally{Io.transition=n,bt=a}return null}function Nc(){if(null!==$o){var e=yt(Jo),t=Io.transition,s=bt;try{if(Io.transition=null,bt=16>e?16:e,null===$o)var a=!1;else{if(e=$o,$o=null,Jo=0,0!==(6&Ao))throw Error(r(331));var n=Ao;for(Ao|=4,Gl=e.current;null!==Gl;){var i=Gl,l=i.child;if(0!==(16&Gl.flags)){var o=i.deletions;if(null!==o){for(var c=0;c<o.length;c++){var d=o[c];for(Gl=d;null!==Gl;){var u=Gl;switch(u.tag){case 0:case 11:case 15:to(8,u,i)}var p=u.child;if(null!==p)p.return=u,Gl=p;else for(;null!==Gl;){var m=(u=Gl).sibling,h=u.return;if(no(u),u===d){Gl=null;break}if(null!==m){m.return=h,Gl=m;break}Gl=h}}}var f=i.alternate;if(null!==f){var x=f.child;if(null!==x){f.child=null;do{var g=x.sibling;x.sibling=null,x=g}while(null!==x)}}Gl=i}}if(0!==(2064&i.subtreeFlags)&&null!==l)l.return=i,Gl=l;else e:for(;null!==Gl;){if(0!==(2048&(i=Gl).flags))switch(i.tag){case 0:case 11:case 15:to(9,i,i.return)}var v=i.sibling;if(null!==v){v.return=i.return,Gl=v;break e}Gl=i.return}}var b=e.current;for(Gl=b;null!==Gl;){var y=(l=Gl).child;if(0!==(2064&l.subtreeFlags)&&null!==y)y.return=l,Gl=y;else e:for(l=b;null!==Gl;){if(0!==(2048&(o=Gl).flags))try{switch(o.tag){case 0:case 11:case 15:so(9,o)}}catch(N){kc(o,o.return,N)}if(o===l){Gl=null;break e}var j=o.sibling;if(null!==j){j.return=o.return,Gl=j;break e}Gl=o.return}}if(Ao=n,Un(),rt&&"function"===typeof rt.onPostCommitFiberRoot)try{rt.onPostCommitFiberRoot(nt,e)}catch(N){}a=!0}return a}finally{bt=s,Io.transition=t}}return!1}function wc(e,t,s){e=_r(e,t=pl(0,t=ol(s,t),1),1),t=ec(),null!==e&&(gt(e,1,t),ac(e,t))}function kc(e,t,s){if(3===e.tag)wc(e,e,s);else for(;null!==t;){if(3===t.tag){wc(t,e,s);break}if(1===t.tag){var a=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof a.componentDidCatch&&(null===Vo||!Vo.has(a))){t=_r(t,e=ml(t,e=ol(s,e),1),1),e=ec(),null!==t&&(gt(t,1,e),ac(t,e));break}}t=t.return}}function Sc(e,t,s){var a=e.pingCache;null!==a&&a.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&s,Eo===e&&(Po&s)===s&&(4===Mo||3===Mo&&(130023424&Po)===Po&&500>Ge()-Bo?pc(e,0):Oo|=s),ac(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var s=ec();null!==(e=Mr(e,t))&&(gt(e,t,s),ac(e,s))}function Ic(e){var t=e.memoizedState,s=0;null!==t&&(s=t.retryLane),Cc(e,s)}function Ac(e,t){var s=0;switch(e.tag){case 13:var a=e.stateNode,n=e.memoizedState;null!==n&&(s=n.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(r(314))}null!==a&&a.delete(t),Cc(e,s)}function Ec(e,t){return Ye(e,t)}function Tc(e,t,s,a){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,s,a){return new Tc(e,t,s,a)}function Lc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var s=e.alternate;return null===s?((s=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=14680064&e.flags,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Mc(e,t,s,a,n,i){var l=2;if(a=e,"function"===typeof e)Lc(e)&&(l=1);else if("string"===typeof e)l=5;else e:switch(e){case w:return Dc(s.children,n,i,t);case k:l=8,n|=8;break;case S:return(e=Pc(12,s,t,2|n)).elementType=S,e.lanes=i,e;case E:return(e=Pc(13,s,t,n)).elementType=E,e.lanes=i,e;case T:return(e=Pc(19,s,t,n)).elementType=T,e.lanes=i,e;case R:return Fc(s,n,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:l=10;break e;case I:l=9;break e;case A:l=11;break e;case P:l=14;break e;case L:l=16,a=null;break e}throw Error(r(130,null==e?e:typeof e,""))}return(t=Pc(l,s,t,n)).elementType=e,t.type=a,t.lanes=i,t}function Dc(e,t,s,a){return(e=Pc(7,e,a,t)).lanes=s,e}function Fc(e,t,s,a){return(e=Pc(22,e,a,t)).elementType=R,e.lanes=s,e.stateNode={isHidden:!1},e}function zc(e,t,s){return(e=Pc(6,e,null,t)).lanes=s,e}function Oc(e,t,s){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function _c(e,t,s,a,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xt(0),this.expirationTimes=xt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xt(0),this.identifierPrefix=a,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function qc(e,t,s,a,n,r,i,l,o){return e=new _c(e,t,s,l,o),1===t?(t=1,!0===r&&(t|=8)):t=0,r=Pc(3,null,null,t),e.current=r,r.stateNode=e,r.memoizedState={element:a,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fr(r),e}function Bc(e){if(!e)return In;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(r(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ln(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(r(171))}if(1===e.tag){var s=e.type;if(Ln(s))return Dn(e,s,t)}return t}function Uc(e,t,s,a,n,r,i,l,o){return(e=qc(s,a,!0,e,0,r,0,l,o)).context=Bc(null),s=e.current,(r=Or(a=ec(),n=tc(s))).callback=void 0!==t&&null!==t?t:null,_r(s,r,n),e.current.lanes=n,gt(e,n,a),ac(e,a),e}function Wc(e,t,s,a){var n=t.current,r=ec(),i=tc(n);return s=Bc(s),null===t.context?t.context=s:t.pendingContext=s,(t=Or(r,i)).payload={element:e},null!==(a=void 0===a?null:a)&&(t.callback=a),null!==(e=_r(n,t,i))&&(sc(e,n,i,r),qr(e,n,i)),i}function Qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var s=e.retryLane;e.retryLane=0!==s&&s<t?s:t}}function Vc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}wo=function(e,t,s){if(null!==e)if(e.memoizedProps!==t.pendingProps||En.current)vl=!0;else{if(0===(e.lanes&s)&&0===(128&t.flags))return vl=!1,function(e,t,s){switch(t.tag){case 3:Al(t),mr();break;case 5:Gr(t);break;case 1:Ln(t.type)&&Fn(t);break;case 4:Jr(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,n=t.memoizedProps.value;Cn(Nr,a._currentValue),a._currentValue=n;break;case 13:if(null!==(a=t.memoizedState))return null!==a.dehydrated?(Cn(Zr,1&Zr.current),t.flags|=128,null):0!==(s&t.child.childLanes)?Fl(e,t,s):(Cn(Zr,1&Zr.current),null!==(e=Wl(e,t,s))?e.sibling:null);Cn(Zr,1&Zr.current);break;case 19:if(a=0!==(s&t.childLanes),0!==(128&e.flags)){if(a)return Bl(e,t,s);t.flags|=128}if(null!==(n=t.memoizedState)&&(n.rendering=null,n.tail=null,n.lastEffect=null),Cn(Zr,Zr.current),a)break;return null;case 22:case 23:return t.lanes=0,wl(e,t,s)}return Wl(e,t,s)}(e,t,s);vl=0!==(131072&e.flags)}else vl=!1,nr&&0!==(1048576&t.flags)&&Zn(t,Vn,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Ul(e,t),e=t.pendingProps;var n=Pn(t,An.current);Er(t,s),n=fi(null,t,a,e,n,s);var i=xi();return t.flags|=1,"object"===typeof n&&null!==n&&"function"===typeof n.render&&void 0===n.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ln(a)?(i=!0,Fn(t)):i=!1,t.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,Fr(t),n.updater=al,t.stateNode=n,n._reactInternals=t,ll(t,a,e,s),t=Il(null,t,a,!0,i,s)):(t.tag=0,nr&&i&&er(t),bl(null,t,n,s),t=t.child),t;case 16:a=t.elementType;e:{switch(Ul(e,t),e=t.pendingProps,a=(n=a._init)(a._payload),t.type=a,n=t.tag=function(e){if("function"===typeof e)return Lc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===P)return 14}return 2}(a),e=tl(a,e),n){case 0:t=Sl(null,t,a,e,s);break e;case 1:t=Cl(null,t,a,e,s);break e;case 11:t=yl(null,t,a,e,s);break e;case 14:t=jl(null,t,a,tl(a.type,e),s);break e}throw Error(r(306,a,""))}return t;case 0:return a=t.type,n=t.pendingProps,Sl(e,t,a,n=t.elementType===a?n:tl(a,n),s);case 1:return a=t.type,n=t.pendingProps,Cl(e,t,a,n=t.elementType===a?n:tl(a,n),s);case 3:e:{if(Al(t),null===e)throw Error(r(387));a=t.pendingProps,n=(i=t.memoizedState).element,zr(e,t),Ur(t,a,null,s);var l=t.memoizedState;if(a=l.element,i.isDehydrated){if(i={element:a,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=El(e,t,a,s,n=ol(Error(r(423)),t));break e}if(a!==n){t=El(e,t,a,s,n=ol(Error(r(424)),t));break e}for(ar=cn(t.stateNode.containerInfo.firstChild),sr=t,nr=!0,rr=null,s=jr(t,null,a,s),t.child=s;s;)s.flags=-3&s.flags|4096,s=s.sibling}else{if(mr(),a===n){t=Wl(e,t,s);break e}bl(e,t,a,s)}t=t.child}return t;case 5:return Gr(t),null===e&&cr(t),a=t.type,n=t.pendingProps,i=null!==e?e.memoizedProps:null,l=n.children,tn(a,n)?l=null:null!==i&&tn(a,i)&&(t.flags|=32),kl(e,t),bl(e,t,l,s),t.child;case 6:return null===e&&cr(t),null;case 13:return Fl(e,t,s);case 4:return Jr(t,t.stateNode.containerInfo),a=t.pendingProps,null===e?t.child=yr(t,null,a,s):bl(e,t,a,s),t.child;case 11:return a=t.type,n=t.pendingProps,yl(e,t,a,n=t.elementType===a?n:tl(a,n),s);case 7:return bl(e,t,t.pendingProps,s),t.child;case 8:case 12:return bl(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(a=t.type._context,n=t.pendingProps,i=t.memoizedProps,l=n.value,Cn(Nr,a._currentValue),a._currentValue=l,null!==i)if(ia(i.value,l)){if(i.children===n.children&&!En.current){t=Wl(e,t,s);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var o=i.dependencies;if(null!==o){l=i.child;for(var c=o.firstContext;null!==c;){if(c.context===a){if(1===i.tag){(c=Or(-1,s&-s)).tag=2;var d=i.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=s,null!==(c=i.alternate)&&(c.lanes|=s),Ar(i.return,s,t),o.lanes|=s;break}c=c.next}}else if(10===i.tag)l=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(l=i.return))throw Error(r(341));l.lanes|=s,null!==(o=l.alternate)&&(o.lanes|=s),Ar(l,s,t),l=i.sibling}else l=i.child;if(null!==l)l.return=i;else for(l=i;null!==l;){if(l===t){l=null;break}if(null!==(i=l.sibling)){i.return=l.return,l=i;break}l=l.return}i=l}bl(e,t,n.children,s),t=t.child}return t;case 9:return n=t.type,a=t.pendingProps.children,Er(t,s),a=a(n=Tr(n)),t.flags|=1,bl(e,t,a,s),t.child;case 14:return n=tl(a=t.type,t.pendingProps),jl(e,t,a,n=tl(a.type,n),s);case 15:return Nl(e,t,t.type,t.pendingProps,s);case 17:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:tl(a,n),Ul(e,t),t.tag=1,Ln(a)?(e=!0,Fn(t)):e=!1,Er(t,s),rl(t,a,n),ll(t,a,n,s),Il(null,t,a,!0,e,s);case 19:return Bl(e,t,s);case 22:return wl(e,t,s)}throw Error(r(156,t.tag))};var Yc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function Kc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Gc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,s,a,n){var r=s._reactRootContainer;if(r){var i=r;if("function"===typeof n){var l=n;n=function(){var e=Qc(i);l.call(e)}}Wc(t,i,e,n)}else i=function(e,t,s,a,n){if(n){if("function"===typeof a){var r=a;a=function(){var e=Qc(i);r.call(e)}}var i=Uc(t,a,e,0,null,!1,0,"",Xc);return e._reactRootContainer=i,e[hn]=i.current,Ba(8===e.nodeType?e.parentNode:e),dc(),i}for(;n=e.lastChild;)e.removeChild(n);if("function"===typeof a){var l=a;a=function(){var e=Qc(o);l.call(e)}}var o=qc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=o,e[hn]=o.current,Ba(8===e.nodeType?e.parentNode:e),dc(function(){Wc(t,o,s,a)}),o}(s,t,e,n,a);return Qc(i)}Jc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(r(409));Wc(e,t,null,null)},Jc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Wc(null,e,null,null)}),t[hn]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Rt.length&&0!==t&&t<Rt[s].priority;s++);Rt.splice(s,0,e),0===s&&zt(e)}},jt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=ut(t.pendingLanes);0!==s&&(vt(t,1|s),ac(t,Ge()),0===(6&Ao)&&(Uo=Ge()+500,Un()))}break;case 13:dc(function(){var t=Mr(e,1);if(null!==t){var s=ec();sc(t,e,1,s)}}),Vc(e,1)}},Nt=function(e){if(13===e.tag){var t=Mr(e,134217728);if(null!==t)sc(t,e,134217728,ec());Vc(e,134217728)}},wt=function(e){if(13===e.tag){var t=tc(e),s=Mr(e,t);if(null!==s)sc(s,e,t,ec());Vc(e,t)}},kt=function(){return bt},St=function(e,t){var s=bt;try{return bt=e,t()}finally{bt=s}},Ne=function(e,t,s){switch(t){case"input":if(X(e,s),t=s.name,"radio"===s.type&&null!=t){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var a=s[t];if(a!==e&&a.form===e.form){var n=jn(a);if(!n)throw Error(r(90));Y(a),X(a,n)}}}break;case"textarea":re(e,s);break;case"select":null!=(t=s.value)&&se(e,!!s.multiple,t,!1)}},Ae=cc,Ee=dc;var ed={usingClientEntryPoint:!1,Events:[bn,yn,jn,Ce,Ie,cc]},td={findFiberByHostInstance:vn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:y.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ad=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ad.isDisabled&&ad.supportsFiber)try{nt=ad.inject(sd),rt=ad}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Kc(t))throw Error(r(200));return function(e,t,s){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:N,key:null==a?null:""+a,children:e,containerInfo:t,implementation:s}}(e,t,null,s)},t.createRoot=function(e,t){if(!Kc(e))throw Error(r(299));var s=!1,a="",n=Yc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(s=!0),void 0!==t.identifierPrefix&&(a=t.identifierPrefix),void 0!==t.onRecoverableError&&(n=t.onRecoverableError)),t=qc(e,1,!1,null,0,s,0,a,n),e[hn]=t.current,Ba(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,s){if(!Gc(t))throw Error(r(200));return Zc(null,e,t,!0,s)},t.hydrateRoot=function(e,t,s){if(!Kc(e))throw Error(r(405));var a=null!=s&&s.hydratedSources||null,n=!1,i="",l=Yc;if(null!==s&&void 0!==s&&(!0===s.unstable_strictMode&&(n=!0),void 0!==s.identifierPrefix&&(i=s.identifierPrefix),void 0!==s.onRecoverableError&&(l=s.onRecoverableError)),t=Uc(t,null,e,1,null!=s?s:null,n,0,i,l),e[hn]=t.current,Ba(e),a)for(e=0;e<a.length;e++)n=(n=(s=a[e])._getVersion)(s._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[s,n]:t.mutableSourceEagerHydrationData.push(s,n);return new Jc(t)},t.render=function(e,t,s){if(!Gc(t))throw Error(r(200));return Zc(null,e,t,!1,s)},t.unmountComponentAtNode=function(e){if(!Gc(e))throw Error(r(40));return!!e._reactRootContainer&&(dc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[hn]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,s,a){if(!Gc(s))throw Error(r(200));if(null==e||void 0===e._reactInternals)throw Error(r(38));return Zc(e,t,s,!1,a)},t.version="18.3.1-next-f1338f8080-20240426"},821:(e,t,s)=>{s.d(t,{o:()=>l});var a=s(43),n=s(580),r=s(712);const i={data:null,loading:!1,error:null,timestamp:0,promise:null},l=()=>{const{addNotification:e,token:t,isAuthenticated:s}=(0,n.nm)(),[l,o]=(0,a.useState)(i.data),[c,d]=(0,a.useState)(i.loading),[u,p]=(0,a.useState)(i.error),m=(0,a.useCallback)(async()=>{if(!t||!s)return;if(i.loading&&i.promise){try{await i.promise,o(i.data),d(i.loading),p(i.error)}catch(n){p(n)}return}const e=Date.now();if(i.data&&e-i.timestamp<5e3)return o(i.data),d(!1),void p(null);i.loading=!0,d(!0),p(null);const a=(0,r.F3)(t).then(t=>(i.data=t,i.loading=!1,i.error=null,i.timestamp=e,i.promise=null,o(t),d(!1),p(null),t)).catch(e=>{throw i.loading=!1,i.error=e,i.promise=null,d(!1),p(e),e});return i.promise=a,a},[t,s]);(0,a.useEffect)(()=>{s&&t&&m()},[s,t,m]);const[h,f]=(0,a.useState)([]),[x,g]=(0,a.useState)([]),[v,b]=(0,a.useState)([]),[y,j]=(0,a.useState)([]),[N,w]=(0,a.useState)([]),[k,S]=(0,a.useState)([]),[C,I]=(0,a.useState)([]),[A,E]=(0,a.useState)([]),T=(0,a.useRef)(null),P=(0,a.useRef)(new Map),L=(0,a.useRef)(""),R=(0,a.useRef)(0),M=(0,a.useRef)(null),D=(0,a.useRef)(new Map),F=(0,a.useRef)(""),z=(0,a.useRef)(0);(0,a.useEffect)(()=>{if(l){const e=Array.isArray(l)?l:(null===l||void 0===l?void 0:l.content)||(null===l||void 0===l?void 0:l.data)||[];f(e)}},[l]),(0,a.useEffect)(()=>{u&&e({type:"error",message:"Failed to load course types",duration:5e3})},[u,e]);const O=(0,a.useCallback)(async s=>{if(!s)return[];try{const e=String(s),n=Date.now(),i=P.current.get(e);if(i&&n-i.ts<5e3)return g(i.data||[]),i.data||[];if(e===L.current&&n-R.current<1500)return x;if(T.current)try{T.current.abort()}catch(a){}T.current=new AbortController;const l=await(0,r.NJ)(t,s,0,100,T.current.signal),o=Array.isArray(l)?l:(null===l||void 0===l?void 0:l.content)||(null===l||void 0===l?void 0:l.data)||[];return g(o),P.current.set(e,{data:o,ts:n}),L.current=e,R.current=n,o}catch(n){return"AbortError"===(null===n||void 0===n?void 0:n.name)?x:(console.error("Error fetching courses:",n),e({type:"error",message:"Failed to load courses",duration:5e3}),[])}},[e,x,t]),_=(0,a.useCallback)(async(s,a)=>{if(!s||!a)return[];try{const e="".concat(s,"|").concat(a),i=Date.now(),l=D.current.get(e);if(l&&i-l.ts<5e3)return b(l.data||[]),l.data||[];if(e===F.current&&i-z.current<1500)return v;if(M.current)try{M.current.abort()}catch(n){}M.current=new AbortController;const o=await(0,r.lw)(t,s,a,M.current.signal),c=Array.isArray(o)?o:(null===o||void 0===o?void 0:o.content)||(null===o||void 0===o?void 0:o.data)||[];return b(c),D.current.set(e,{data:c,ts:i}),F.current=e,z.current=i,c}catch(i){return"AbortError"===(null===i||void 0===i?void 0:i.name)?v:(console.error("Error fetching classes:",i),e({type:"error",message:"Failed to load classes",duration:5e3}),[])}},[e,v,t]),q=(0,a.useCallback)(async(s,a,n)=>{if(!s||!a)return[];try{const e=await(0,r.Dl)(t,s,a,n),i=Array.isArray(e)?e:(null===e||void 0===e?void 0:e.content)||(null===e||void 0===e?void 0:e.data)||[];return j(i),i}catch(i){return console.error("Error fetching exams:",i),e({type:"error",message:"Failed to load exams",duration:5e3}),[]}},[e,t]),B=(0,a.useCallback)(async(s,a,n,i,l)=>{try{const e=await(0,r.u7)(t,s,a,n,i,l),o=Array.isArray(e)?e:(null===e||void 0===e?void 0:e.content)||(null===e||void 0===e?void 0:e.data)||[];return w(o),o}catch(o){return console.error("Error fetching subjects:",o),e({type:"error",message:"Failed to load subjects",duration:5e3}),[]}},[e,t]),U=(0,a.useCallback)(async s=>{if(!s)return[];try{const e=await(0,r.OA)(t,s),a=Array.isArray(e)?e:(null===e||void 0===e?void 0:e.content)||(null===e||void 0===e?void 0:e.data)||[];return S(a),a}catch(a){return console.error("Error fetching modules:",a),e({type:"error",message:"Failed to load modules",duration:5e3}),[]}},[e,t]),W=(0,a.useCallback)(async function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const e=await(0,r.mR)(t,s),a=Array.isArray(e)?e:(null===e||void 0===e?void 0:e.content)||(null===e||void 0===e?void 0:e.data)||[];return I(a),a}catch(a){return console.error("Error fetching topics:",a),e({type:"error",message:"Failed to load topics",duration:5e3}),[]}},[e,t]),Q=(0,a.useCallback)(async s=>{if(!s)return[];try{const e=await(0,r.CE)(t,s),a=Array.isArray(e)?e:(null===e||void 0===e?void 0:e.content)||(null===e||void 0===e?void 0:e.data)||[];return E(a),a}catch(a){return console.error("Error fetching chapters:",a),e({type:"error",message:"Failed to load chapters",duration:5e3}),[]}},[e,t]),H=(0,a.useCallback)(async(s,a)=>{if(!s||!a)return[];try{const e=await(0,r.Nk)(t,s,a),n=Array.isArray(e)?e:(null===e||void 0===e?void 0:e.content)||(null===e||void 0===e?void 0:e.data)||[];return I(n),n}catch(n){return console.error("Error fetching topics by linkage:",n),e({type:"error",message:"Failed to load topics",duration:5e3}),[]}},[e,t]),V=(0,a.useCallback)(async s=>{if(!s)return[];try{const e=await(0,r.OA)(t,s),a=Array.isArray(e)?e:(null===e||void 0===e?void 0:e.content)||(null===e||void 0===e?void 0:e.data)||[];return S(a),a}catch(a){return console.error("Error fetching modules by topic:",a),e({type:"error",message:"Failed to load modules",duration:5e3}),[]}},[e,t]),Y=(0,a.useCallback)(async s=>{if(!s)return[];try{const e=await(0,r.CE)(t,s),a=Array.isArray(e)?e:(null===e||void 0===e?void 0:e.content)||(null===e||void 0===e?void 0:e.data)||[];return E(a),a}catch(a){return console.error("Error fetching chapters by module:",a),e({type:"error",message:"Failed to load chapters",duration:5e3}),[]}},[e,t]),$=(0,a.useCallback)(e=>{if(!Array.isArray(h))return!1;const t=h.find(t=>t.id===parseInt(e));return t&&t.name&&t.name.toLowerCase().includes("academic")},[h]),J=(0,a.useCallback)(e=>{if(!Array.isArray(h))return!1;const t=h.find(t=>t.id===parseInt(e));return t&&t.name&&t.name.toLowerCase().includes("competitive")},[h]),K=(0,a.useCallback)(e=>{if(!Array.isArray(h))return!1;const t=h.find(t=>t.id===parseInt(e));return t&&t.name&&t.name.toLowerCase().includes("professional")},[h]),G=(0,a.useCallback)(e=>{if(!e)return"Unknown";const t=h.find(t=>t.id===parseInt(e));return t?t.name:"Unknown"},[h]),X=(0,a.useCallback)(e=>{if(!e)return"Unknown";const t=x.find(t=>t.id===parseInt(e));return t?t.name:"Unknown"},[x]);return{courseTypes:h,courses:x,classes:v,exams:y,subjects:N,modules:k,topics:C,chapters:A,courseTypesLoading:c,fetchCourses:O,fetchClasses:_,fetchExams:q,fetchSubjects:B,fetchModules:U,fetchTopics:W,fetchChapters:Q,fetchTopicsByLinkage:H,fetchModulesByTopic:V,fetchChaptersByModule:Y,refetchCourseTypes:m,isAcademicCourseType:$,isCompetitiveCourseType:J,isProfessionalCourseType:K,getCourseTypeName:G,getCourseName:X,isAuthenticated:s}}},853:(e,t,s)=>{e.exports=s(234)},872:(e,t,s)=>{s.d(t,{Ec:()=>c,K1:()=>l,RG:()=>i,bh:()=>o});var a=s(712);const n={data:null,loading:!1,error:null,timestamp:0,promise:null},r={data:null,loading:!1,error:null,timestamp:0,promise:null,params:null},i=async e=>{if(!e)throw new Error("No authentication token provided");if(n.loading&&n.promise)try{return await n.promise,n.data}catch(r){throw r}const t=Date.now();if(n.data&&t-n.timestamp<5e3)return n.data;n.loading=!0,n.error=null;const s=(0,a.F3)(e).then(e=>(n.data=e,n.loading=!1,n.error=null,n.timestamp=t,n.promise=null,e)).catch(e=>{throw n.loading=!1,n.error=e,n.promise=null,e});return n.promise=s,s},l=()=>{n.data=null,n.loading=!1,n.error=null,n.timestamp=0,n.promise=null},o=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"createdAt",l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"desc";if(!e)throw new Error("No authentication token provided");const o=JSON.stringify({courseTypeId:t,page:s,size:n,sortBy:i,sortDir:l});if(r.loading&&r.promise&&r.params===o)try{return await r.promise,r.data}catch(u){throw u}const c=Date.now();if(r.data&&r.params===o&&c-r.timestamp<5e3)return r.data;r.loading=!0,r.error=null,r.params=o;const d=(0,a.NJ)(e,t,s,n,i,l).then(e=>(r.data=e,r.loading=!1,r.error=null,r.timestamp=c,r.promise=null,e)).catch(e=>{throw r.loading=!1,r.error=e,r.promise=null,e});return r.promise=d,d},c=()=>{r.data=null,r.loading=!1,r.error=null,r.timestamp=0,r.promise=null,r.params=null}},935:(e,t,s)=>{s.d(t,{d:()=>r});var a=s(555),n=s(43);const r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[s,r]=(0,n.useState)(e),[i,l]=(0,n.useState)({}),[o,c]=(0,n.useState)({}),d=(0,n.useCallback)((e,t)=>{r(s=>(0,a.A)((0,a.A)({},s),{},{[e]:t})),i[e]&&l(t=>(0,a.A)((0,a.A)({},t),{},{[e]:""}))},[i]),u=(0,n.useCallback)(e=>{if(c(t=>(0,a.A)((0,a.A)({},t),{},{[e]:!0})),t[e]){const n=t[e](s[e],s);n&&l(t=>(0,a.A)((0,a.A)({},t),{},{[e]:n}))}},[s,t]),p=(0,n.useCallback)(()=>{const e={};let a=!0;return Object.keys(t).forEach(n=>{const r=t[n](s[n],s);r&&(e[n]=r,a=!1)}),l(e),a},[s,t]),m=(0,n.useCallback)(()=>{r(e),l({}),c({})},[e]),h=(0,n.useCallback)((e,t)=>{l(s=>(0,a.A)((0,a.A)({},s),{},{[e]:t}))},[]);return{formData:s,errors:i,touched:o,handleInputChange:d,handleBlur:u,validateForm:p,resetForm:m,setFieldError:h,setFormData:r}}},950:(e,t,s)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=s(730)}},t={};function s(a){var n=t[a];if(void 0!==n)return n.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,s),r.exports}s.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;s.t=function(a,n){if(1&n&&(a=this(a)),8&n)return a;if("object"===typeof a&&a){if(4&n&&a.__esModule)return a;if(16&n&&"function"===typeof a.then)return a}var r=Object.create(null);s.r(r);var i={};e=e||[null,t({}),t([]),t(t)];for(var l=2&n&&a;("object"==typeof l||"function"==typeof l)&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach(e=>i[e]=()=>a[e]);return i.default=()=>a,s.d(r,i),r}})(),s.d=(e,t)=>{for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce((t,a)=>(s.f[a](e,t),t),[])),s.u=e=>"static/js/"+e+"."+{53:"114cb151",214:"24040f79",383:"aa262aeb",469:"949447a4",588:"3da3b93d",611:"634aa0ef",716:"1fea9930",972:"fbad331e"}[e]+".chunk.js",s.miniCssF=e=>"static/css/"+e+".8075930e.chunk.css",s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="learning-management-system:";s.l=(a,n,r,i)=>{if(e[a])e[a].push(n);else{var l,o;if(void 0!==r)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==a||u.getAttribute("data-webpack")==t+r){l=u;break}}l||(o=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.setAttribute("data-webpack",t+r),l.src=a),e[a]=[n];var p=(t,s)=>{l.onerror=l.onload=null,clearTimeout(m);var n=e[a];if(delete e[a],l.parentNode&&l.parentNode.removeChild(l),n&&n.forEach(e=>e(s)),t)return t(s)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=p.bind(null,l.onerror),l.onload=p.bind(null,l.onload),o&&document.head.appendChild(l)}}})(),s.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.p="/",(()=>{if("undefined"!==typeof document){var e=e=>new Promise((t,a)=>{var n=s.miniCssF(e),r=s.p+n;if(((e,t)=>{for(var s=document.getElementsByTagName("link"),a=0;a<s.length;a++){var n=(i=s[a]).getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(n===e||n===t))return i}var r=document.getElementsByTagName("style");for(a=0;a<r.length;a++){var i;if((n=(i=r[a]).getAttribute("data-href"))===e||n===t)return i}})(n,r))return t();((e,t,a,n,r)=>{var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",s.nc&&(i.nonce=s.nc),i.onerror=i.onload=s=>{if(i.onerror=i.onload=null,"load"===s.type)n();else{var a=s&&s.type,l=s&&s.target&&s.target.href||t,o=new Error("Loading CSS chunk "+e+" failed.\n("+a+": "+l+")");o.name="ChunkLoadError",o.code="CSS_CHUNK_LOAD_FAILED",o.type=a,o.request=l,i.parentNode&&i.parentNode.removeChild(i),r(o)}},i.href=t,a?a.parentNode.insertBefore(i,a.nextSibling):document.head.appendChild(i)})(e,r,null,t,a)}),t={792:0};s.f.miniCss=(s,a)=>{t[s]?a.push(t[s]):0!==t[s]&&{214:1}[s]&&a.push(t[s]=e(s).then(()=>{t[s]=0},e=>{throw delete t[s],e}))}}})(),(()=>{var e={792:0};s.f.j=(t,a)=>{var n=s.o(e,t)?e[t]:void 0;if(0!==n)if(n)a.push(n[2]);else{var r=new Promise((s,a)=>n=e[t]=[s,a]);a.push(n[2]=r);var i=s.p+s.u(t),l=new Error;s.l(i,a=>{if(s.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var r=a&&("load"===a.type?"missing":a.type),i=a&&a.target&&a.target.src;l.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",l.name="ChunkLoadError",l.type=r,l.request=i,n[1](l)}},"chunk-"+t,t)}};var t=(t,a)=>{var n,r,i=a[0],l=a[1],o=a[2],c=0;if(i.some(t=>0!==e[t])){for(n in l)s.o(l,n)&&(s.m[n]=l[n]);if(o)o(s)}for(t&&t(a);c<i.length;c++)r=i[c],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0},a=self.webpackChunklearning_management_system=self.webpackChunklearning_management_system||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var a,n=s(43),r=s.t(n,2),i=s(391),l=s(950),o=s.t(l,2);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},c.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(a||(a={}));const d="popstate";function u(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function p(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(s){}}}function m(e,t){return{usr:e.state,key:e.key,idx:t}}function h(e,t,s,a){return void 0===s&&(s=null),c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?x(t):t,{state:s,key:t&&t.key||a||Math.random().toString(36).substr(2,8)})}function f(e){let{pathname:t="/",search:s="",hash:a=""}=e;return s&&"?"!==s&&(t+="?"===s.charAt(0)?s:"?"+s),a&&"#"!==a&&(t+="#"===a.charAt(0)?a:"#"+a),t}function x(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substr(s),e=e.substr(0,s));let a=e.indexOf("?");a>=0&&(t.search=e.substr(a),e=e.substr(0,a)),e&&(t.pathname=e)}return t}function g(e,t,s,n){void 0===n&&(n={});let{window:r=document.defaultView,v5Compat:i=!1}=n,l=r.history,o=a.Pop,p=null,x=g();function g(){return(l.state||{idx:null}).idx}function v(){o=a.Pop;let e=g(),t=null==e?null:e-x;x=e,p&&p({action:o,location:y.location,delta:t})}function b(e){let t="null"!==r.location.origin?r.location.origin:r.location.href,s="string"===typeof e?e:f(e);return s=s.replace(/ $/,"%20"),u(t,"No window.location.(origin|href) available to create URL for href: "+s),new URL(s,t)}null==x&&(x=0,l.replaceState(c({},l.state,{idx:x}),""));let y={get action(){return o},get location(){return e(r,l)},listen(e){if(p)throw new Error("A history only accepts one active listener");return r.addEventListener(d,v),p=e,()=>{r.removeEventListener(d,v),p=null}},createHref:e=>t(r,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){o=a.Push;let n=h(y.location,e,t);s&&s(n,e),x=g()+1;let c=m(n,x),d=y.createHref(n);try{l.pushState(c,"",d)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;r.location.assign(d)}i&&p&&p({action:o,location:y.location,delta:1})},replace:function(e,t){o=a.Replace;let n=h(y.location,e,t);s&&s(n,e),x=g();let r=m(n,x),c=y.createHref(n);l.replaceState(r,"",c),i&&p&&p({action:o,location:y.location,delta:0})},go:e=>l.go(e)};return y}var v;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(v||(v={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function b(e,t,s){return void 0===s&&(s="/"),y(e,t,s,!1)}function y(e,t,s,a){let n=M(("string"===typeof t?x(t):t).pathname||"/",s);if(null==n)return null;let r=j(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let s=e.length===t.length&&e.slice(0,-1).every((e,s)=>e===t[s]);return s?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(r);let i=null;for(let l=0;null==i&&l<r.length;++l){let e=R(n);i=P(r[l],e,a)}return i}function j(e,t,s,a){void 0===t&&(t=[]),void 0===s&&(s=[]),void 0===a&&(a="");let n=(e,n,r)=>{let i={relativePath:void 0===r?e.path||"":r,caseSensitive:!0===e.caseSensitive,childrenIndex:n,route:e};i.relativePath.startsWith("/")&&(u(i.relativePath.startsWith(a),'Absolute route path "'+i.relativePath+'" nested under path "'+a+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(a.length));let l=_([a,i.relativePath]),o=s.concat(i);e.children&&e.children.length>0&&(u(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),j(e.children,t,o,l)),(null!=e.path||e.index)&&t.push({path:l,score:T(l,e.index),routesMeta:o})};return e.forEach((e,t)=>{var s;if(""!==e.path&&null!=(s=e.path)&&s.includes("?"))for(let a of N(e.path))n(e,t,a);else n(e,t)}),t}function N(e){let t=e.split("/");if(0===t.length)return[];let[s,...a]=t,n=s.endsWith("?"),r=s.replace(/\?$/,"");if(0===a.length)return n?[r,""]:[r];let i=N(a.join("/")),l=[];return l.push(...i.map(e=>""===e?r:[r,e].join("/"))),n&&l.push(...i),l.map(t=>e.startsWith("/")&&""===t?"/":t)}const w=/^:[\w-]+$/,k=3,S=2,C=1,I=10,A=-2,E=e=>"*"===e;function T(e,t){let s=e.split("/"),a=s.length;return s.some(E)&&(a+=A),t&&(a+=S),s.filter(e=>!E(e)).reduce((e,t)=>e+(w.test(t)?k:""===t?C:I),a)}function P(e,t,s){void 0===s&&(s=!1);let{routesMeta:a}=e,n={},r="/",i=[];for(let l=0;l<a.length;++l){let e=a[l],o=l===a.length-1,c="/"===r?t:t.slice(r.length)||"/",d=L({path:e.relativePath,caseSensitive:e.caseSensitive,end:o},c),u=e.route;if(!d&&o&&s&&!a[a.length-1].route.index&&(d=L({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(n,d.params),i.push({params:n,pathname:_([r,d.pathname]),pathnameBase:q(_([r,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(r=_([r,d.pathnameBase]))}return i}function L(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[s,a]=function(e,t,s){void 0===t&&(t=!1);void 0===s&&(s=!0);p("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let a=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,s)=>(a.push({paramName:t,isOptional:null!=s}),s?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(a.push({paramName:"*"}),n+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?n+="\\/*$":""!==e&&"/"!==e&&(n+="(?:(?=\\/|$))");let r=new RegExp(n,t?void 0:"i");return[r,a]}(e.path,e.caseSensitive,e.end),n=t.match(s);if(!n)return null;let r=n[0],i=r.replace(/(.)\/+$/,"$1"),l=n.slice(1);return{params:a.reduce((e,t,s)=>{let{paramName:a,isOptional:n}=t;if("*"===a){let e=l[s]||"";i=r.slice(0,r.length-e.length).replace(/(.)\/+$/,"$1")}const o=l[s];return e[a]=n&&!o?void 0:(o||"").replace(/%2F/g,"/"),e},{}),pathname:r,pathnameBase:i,pattern:e}}function R(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return p(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function M(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,a=e.charAt(s);return a&&"/"!==a?null:e.slice(s)||"/"}function D(e,t,s,a){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(a)+"].  Please separate it out to the `to."+s+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function F(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function z(e,t){let s=F(e);return t?s.map((e,t)=>t===s.length-1?e.pathname:e.pathnameBase):s.map(e=>e.pathnameBase)}function O(e,t,s,a){let n;void 0===a&&(a=!1),"string"===typeof e?n=x(e):(n=c({},e),u(!n.pathname||!n.pathname.includes("?"),D("?","pathname","search",n)),u(!n.pathname||!n.pathname.includes("#"),D("#","pathname","hash",n)),u(!n.search||!n.search.includes("#"),D("#","search","hash",n)));let r,i=""===e||""===n.pathname,l=i?"/":n.pathname;if(null==l)r=s;else{let e=t.length-1;if(!a&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;n.pathname=t.join("/")}r=e>=0?t[e]:"/"}let o=function(e,t){void 0===t&&(t="/");let{pathname:s,search:a="",hash:n=""}="string"===typeof e?x(e):e,r=s?s.startsWith("/")?s:function(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?s.length>1&&s.pop():"."!==e&&s.push(e)}),s.length>1?s.join("/"):"/"}(s,t):t;return{pathname:r,search:B(a),hash:U(n)}}(n,r),d=l&&"/"!==l&&l.endsWith("/"),p=(i||"."===l)&&s.endsWith("/");return o.pathname.endsWith("/")||!d&&!p||(o.pathname+="/"),o}const _=e=>e.join("/").replace(/\/\/+/g,"/"),q=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),B=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",U=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function W(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const Q=["post","put","patch","delete"],H=(new Set(Q),["get",...Q]);new Set(H),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function V(){return V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},V.apply(this,arguments)}const Y=n.createContext(null);const $=n.createContext(null);const J=n.createContext(null);const K=n.createContext(null);const G=n.createContext({outlet:null,matches:[],isDataRoute:!1});const X=n.createContext(null);function Z(){return null!=n.useContext(K)}function ee(){return Z()||u(!1),n.useContext(K).location}function te(e){n.useContext(J).static||n.useLayoutEffect(e)}function se(){let{isDataRoute:e}=n.useContext(G);return e?function(){let{router:e}=pe(de.UseNavigateStable),t=he(ue.UseNavigateStable),s=n.useRef(!1);return te(()=>{s.current=!0}),n.useCallback(function(a,n){void 0===n&&(n={}),s.current&&("number"===typeof a?e.navigate(a):e.navigate(a,V({fromRouteId:t},n)))},[e,t])}():function(){Z()||u(!1);let e=n.useContext(Y),{basename:t,future:s,navigator:a}=n.useContext(J),{matches:r}=n.useContext(G),{pathname:i}=ee(),l=JSON.stringify(z(r,s.v7_relativeSplatPath)),o=n.useRef(!1);return te(()=>{o.current=!0}),n.useCallback(function(s,n){if(void 0===n&&(n={}),!o.current)return;if("number"===typeof s)return void a.go(s);let r=O(s,JSON.parse(l),i,"path"===n.relative);null==e&&"/"!==t&&(r.pathname="/"===r.pathname?t:_([t,r.pathname])),(n.replace?a.replace:a.push)(r,n.state,n)},[t,a,l,i,e])}()}function ae(e,t){let{relative:s}=void 0===t?{}:t,{future:a}=n.useContext(J),{matches:r}=n.useContext(G),{pathname:i}=ee(),l=JSON.stringify(z(r,a.v7_relativeSplatPath));return n.useMemo(()=>O(e,JSON.parse(l),i,"path"===s),[e,l,i,s])}function ne(e,t,s,r){Z()||u(!1);let{navigator:i}=n.useContext(J),{matches:l}=n.useContext(G),o=l[l.length-1],c=o?o.params:{},d=(o&&o.pathname,o?o.pathnameBase:"/");o&&o.route;let p,m=ee();if(t){var h;let e="string"===typeof t?x(t):t;"/"===d||(null==(h=e.pathname)?void 0:h.startsWith(d))||u(!1),p=e}else p=m;let f=p.pathname||"/",g=f;if("/"!==d){let e=d.replace(/^\//,"").split("/");g="/"+f.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=b(e,{pathname:g});let y=ce(v&&v.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:_([d,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:_([d,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),l,s,r);return t&&y?n.createElement(K.Provider,{value:{location:V({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:a.Pop}},y):y}function re(){let e=function(){var e;let t=n.useContext(X),s=me(ue.UseRouteError),a=he(ue.UseRouteError);if(void 0!==t)return t;return null==(e=s.errors)?void 0:e[a]}(),t=W(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:a};return n.createElement(n.Fragment,null,n.createElement("h2",null,"Unexpected Application Error!"),n.createElement("h3",{style:{fontStyle:"italic"}},t),s?n.createElement("pre",{style:r},s):null,null)}const ie=n.createElement(re,null);class le extends n.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?n.createElement(G.Provider,{value:this.props.routeContext},n.createElement(X.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oe(e){let{routeContext:t,match:s,children:a}=e,r=n.useContext(Y);return r&&r.static&&r.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=s.route.id),n.createElement(G.Provider,{value:t},a)}function ce(e,t,s,a){var r;if(void 0===t&&(t=[]),void 0===s&&(s=null),void 0===a&&(a=null),null==e){var i;if(!s)return null;if(s.errors)e=s.matches;else{if(!(null!=(i=a)&&i.v7_partialHydration&&0===t.length&&!s.initialized&&s.matches.length>0))return null;e=s.matches}}let l=e,o=null==(r=s)?void 0:r.errors;if(null!=o){let e=l.findIndex(e=>e.route.id&&void 0!==(null==o?void 0:o[e.route.id]));e>=0||u(!1),l=l.slice(0,Math.min(l.length,e+1))}let c=!1,d=-1;if(s&&a&&a.v7_partialHydration)for(let n=0;n<l.length;n++){let e=l[n];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=n),e.route.id){let{loaderData:t,errors:a}=s,n=e.route.loader&&void 0===t[e.route.id]&&(!a||void 0===a[e.route.id]);if(e.route.lazy||n){c=!0,l=d>=0?l.slice(0,d+1):[l[0]];break}}}return l.reduceRight((e,a,r)=>{let i,u=!1,p=null,m=null;var h;s&&(i=o&&a.route.id?o[a.route.id]:void 0,p=a.route.errorElement||ie,c&&(d<0&&0===r?(h="route-fallback",!1||fe[h]||(fe[h]=!0),u=!0,m=null):d===r&&(u=!0,m=a.route.hydrateFallbackElement||null)));let f=t.concat(l.slice(0,r+1)),x=()=>{let t;return t=i?p:u?m:a.route.Component?n.createElement(a.route.Component,null):a.route.element?a.route.element:e,n.createElement(oe,{match:a,routeContext:{outlet:e,matches:f,isDataRoute:null!=s},children:t})};return s&&(a.route.ErrorBoundary||a.route.errorElement||0===r)?n.createElement(le,{location:s.location,revalidation:s.revalidation,component:p,error:i,children:x(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):x()},null)}var de=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(de||{}),ue=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ue||{});function pe(e){let t=n.useContext(Y);return t||u(!1),t}function me(e){let t=n.useContext($);return t||u(!1),t}function he(e){let t=function(){let e=n.useContext(G);return e||u(!1),e}(),s=t.matches[t.matches.length-1];return s.route.id||u(!1),s.route.id}const fe={};function xe(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}r.startTransition;function ge(e){u(!1)}function ve(e){let{basename:t="/",children:s=null,location:r,navigationType:i=a.Pop,navigator:l,static:o=!1,future:c}=e;Z()&&u(!1);let d=t.replace(/^\/*/,"/"),p=n.useMemo(()=>({basename:d,navigator:l,static:o,future:V({v7_relativeSplatPath:!1},c)}),[d,c,l,o]);"string"===typeof r&&(r=x(r));let{pathname:m="/",search:h="",hash:f="",state:g=null,key:v="default"}=r,b=n.useMemo(()=>{let e=M(m,d);return null==e?null:{location:{pathname:e,search:h,hash:f,state:g,key:v},navigationType:i}},[d,m,h,f,g,v,i]);return null==b?null:n.createElement(J.Provider,{value:p},n.createElement(K.Provider,{children:s,value:b}))}function be(e){let{children:t,location:s}=e;return ne(ye(t),s)}new Promise(()=>{});n.Component;function ye(e,t){void 0===t&&(t=[]);let s=[];return n.Children.forEach(e,(e,a)=>{if(!n.isValidElement(e))return;let r=[...t,a];if(e.type===n.Fragment)return void s.push.apply(s,ye(e.props.children,r));e.type!==ge&&u(!1),e.props.index&&e.props.children&&u(!1);let i={id:e.props.id||r.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=ye(e.props.children,r)),s.push(i)}),s}function je(){return je=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},je.apply(this,arguments)}function Ne(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const we=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(us){}new Map;const ke=r.startTransition;o.flushSync,r.useId;function Se(e){let{basename:t,children:s,future:a,window:r}=e,i=n.useRef();var l;null==i.current&&(i.current=(void 0===(l={window:r,v5Compat:!0})&&(l={}),g(function(e,t){let{pathname:s,search:a,hash:n}=e.location;return h("",{pathname:s,search:a,hash:n},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:f(t)},null,l)));let o=i.current,[c,d]=n.useState({action:o.action,location:o.location}),{v7_startTransition:u}=a||{},p=n.useCallback(e=>{u&&ke?ke(()=>d(e)):d(e)},[d,u]);return n.useLayoutEffect(()=>o.listen(p),[o,p]),n.useEffect(()=>xe(a),[a]),n.createElement(ve,{basename:t,children:s,location:c.location,navigationType:c.action,navigator:o,future:a})}const Ce="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ie=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ae=n.forwardRef(function(e,t){let s,{onClick:a,relative:r,reloadDocument:i,replace:l,state:o,target:c,to:d,preventScrollReset:p,viewTransition:m}=e,h=Ne(e,we),{basename:x}=n.useContext(J),g=!1;if("string"===typeof d&&Ie.test(d)&&(s=d,Ce))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),s=M(t.pathname,x);t.origin===e.origin&&null!=s?d=s+t.search+t.hash:g=!0}catch(us){}let v=function(e,t){let{relative:s}=void 0===t?{}:t;Z()||u(!1);let{basename:a,navigator:r}=n.useContext(J),{hash:i,pathname:l,search:o}=ae(e,{relative:s}),c=l;return"/"!==a&&(c="/"===l?a:_([a,l])),r.createHref({pathname:c,search:o,hash:i})}(d,{relative:r}),b=function(e,t){let{target:s,replace:a,state:r,preventScrollReset:i,relative:l,viewTransition:o}=void 0===t?{}:t,c=se(),d=ee(),u=ae(e,{relative:l});return n.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,s)){t.preventDefault();let s=void 0!==a?a:f(d)===f(u);c(e,{replace:s,state:r,preventScrollReset:i,relative:l,viewTransition:o})}},[d,c,u,a,r,s,e,i,l,o])}(d,{replace:l,state:o,target:c,preventScrollReset:p,relative:r,viewTransition:m});return n.createElement("a",je({},h,{href:s||v,onClick:g||i?a:function(e){a&&a(e),e.defaultPrevented||b(e)},ref:t,target:c}))});var Ee,Te;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ee||(Ee={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Te||(Te={}));var Pe=s(580),Le=s(579);const Re=(0,n.lazy)(()=>s.e(53).then(s.bind(s,53))),Me=(0,n.lazy)(()=>s.e(469).then(s.bind(s,469))),De=(0,n.lazy)(()=>s.e(716).then(s.bind(s,716))),Fe=(0,n.lazy)(()=>s.e(611).then(s.bind(s,611))),ze=(0,n.lazy)(()=>s.e(588).then(s.bind(s,588))),Oe=(0,n.lazy)(()=>s.e(383).then(s.bind(s,383))),_e=(0,n.lazy)(()=>s.e(972).then(s.bind(s,972))),qe=(0,n.lazy)(()=>s.e(214).then(s.bind(s,214))),Be=e=>{let{onBackToDashboard:t}=e;const{user:s,token:a,addNotification:r}=(0,Pe.nm)(),[i,l]=(0,n.useState)("course-types"),[o,c]=(0,n.useState)(!1);return(0,Le.jsxs)("div",{className:"master-data-management",children:[(0,Le.jsxs)("div",{className:"master-data-header",children:[(0,Le.jsxs)("div",{className:"header-content",children:[(0,Le.jsx)("h1",{children:"Master Data Management"}),(0,Le.jsx)("p",{children:"Manage course structure, classes, subjects, chapters, and topics"})]}),(0,Le.jsxs)("div",{className:"header-actions",children:[t&&(0,Le.jsx)("button",{className:"btn btn-primary",onClick:t,style:{backgroundColor:"#10b981",borderColor:"#10b981",color:"white"},children:"\u2190 Back to Dashboard"}),(0,Le.jsxs)("div",{className:"admin-badge",children:[(0,Le.jsx)("span",{className:"badge-icon",children:"\ud83d\udc51"}),(0,Le.jsx)("span",{children:"Admin Access"})]})]})]}),(0,Le.jsxs)("div",{className:"master-data-content",children:[(0,Le.jsx)("div",{className:"tabs-container",children:(0,Le.jsx)("div",{className:"tabs-nav",children:[{id:"course-types",label:"Course Types",icon:"\ud83d\udcda"},{id:"courses",label:"Courses",icon:"\ud83c\udf93"},{id:"classes",label:"Classes",icon:"\ud83c\udfeb"},{id:"exams",label:"Exams",icon:"\ud83d\udcdd"},{id:"subjects",label:"Subjects",icon:"\ud83d\udcd6"},{id:"topics",label:"Topics",icon:"\ud83d\udcdd"},{id:"modules",label:"Modules",icon:"\ud83d\udce6"},{id:"chapters",label:"Chapters",icon:"\ud83d\udcd1"}].map(e=>(0,Le.jsxs)("button",{className:"tab-button ".concat(i===e.id?"active":""),onClick:()=>l(e.id),children:[(0,Le.jsx)("span",{className:"tab-icon",children:e.icon}),(0,Le.jsx)("span",{className:"tab-label",children:e.label})]},e.id))})}),(0,Le.jsx)("div",{className:"tab-content",children:(()=>{const e=()=>(0,Le.jsxs)("div",{className:"loading-container",children:[(0,Le.jsx)("div",{className:"loading-spinner"}),(0,Le.jsx)("p",{children:"Loading..."})]});switch(i){case"course-types":default:return(0,Le.jsx)(n.Suspense,{fallback:(0,Le.jsx)(e,{}),children:(0,Le.jsx)(Re,{})});case"courses":return(0,Le.jsx)(n.Suspense,{fallback:(0,Le.jsx)(e,{}),children:(0,Le.jsx)(Me,{})});case"classes":return(0,Le.jsx)(n.Suspense,{fallback:(0,Le.jsx)(e,{}),children:(0,Le.jsx)(De,{})});case"exams":return(0,Le.jsx)(n.Suspense,{fallback:(0,Le.jsx)(e,{}),children:(0,Le.jsx)(Fe,{})});case"subjects":return(0,Le.jsx)(n.Suspense,{fallback:(0,Le.jsx)(e,{}),children:(0,Le.jsx)(ze,{})});case"topics":return(0,Le.jsx)(n.Suspense,{fallback:(0,Le.jsx)(e,{}),children:(0,Le.jsx)(Oe,{})});case"modules":return(0,Le.jsx)(n.Suspense,{fallback:(0,Le.jsx)(e,{}),children:(0,Le.jsx)(_e,{})});case"chapters":return(0,Le.jsx)(n.Suspense,{fallback:(0,Le.jsx)(e,{}),children:(0,Le.jsx)(qe,{})})}})()})]})]})};var Ue=s(555);const We="http://localhost:8080",Qe=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const r=new URLSearchParams;t&&r.append("role",t),s&&r.append("search",s),null!==a&&r.append("enabled",a.toString());const i="".concat(We,"/api/admin/users?").concat(r),l=await fetch(i,{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},signal:n});if(!l.ok)throw new Error("Failed to fetch users: ".concat(l.statusText));return l.json()},He=async e=>{const t=await fetch("".concat(We,"/api/admin/users/count"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!t.ok)throw new Error("Failed to fetch user counts: ".concat(t.statusText));return t.json()},Ve=e=>{let{title:t,subtitle:s,onBackToDashboard:a,showAdminBadge:n=!0,actions:r=null}=e;return(0,Le.jsxs)("div",{className:"master-data-header",children:[(0,Le.jsxs)("div",{className:"header-content",children:[(0,Le.jsx)("h1",{children:t}),s?(0,Le.jsx)("p",{children:s}):null]}),(0,Le.jsxs)("div",{className:"header-actions",children:[a&&(0,Le.jsx)("button",{className:"btn btn-primary",onClick:a,style:{backgroundColor:"#10b981",borderColor:"#10b981",color:"white"},children:"\u2190 Back to Dashboard"}),n&&(0,Le.jsxs)("div",{className:"admin-badge",children:[(0,Le.jsx)("span",{className:"badge-icon",children:"\ud83d\udc51"}),(0,Le.jsx)("span",{children:"Admin Access"})]}),r]})]})},Ye=e=>{let{onBackToDashboard:t}=e;const{addNotification:s,isAuthenticated:a,token:r}=(0,Pe.nm)(),[i,l]=(0,n.useState)([]),[o,c]=(0,n.useState)({total:0,admins:0,instructors:0,students:0,active:0,inactive:0}),[d,u]=(0,n.useState)({role:"",search:"",enabled:""}),[p,m]=(0,n.useState)(!1),[h,f]=(0,n.useState)(null),[x,g]=(0,n.useState)(!0),[v,b]=(0,n.useState)(null),y=((e,t)=>{const[s,a]=(0,n.useState)(e);return(0,n.useEffect)(()=>{const s=setTimeout(()=>{a(e)},t);return()=>{clearTimeout(s)}},[e,t]),s})(d,300),j=(0,n.useRef)(!1),N=(0,n.useRef)(!1),w=(0,n.useRef)(!1),k=(0,n.useRef)(""),S=(0,n.useRef)(0),C=(0,n.useRef)(null),I=(0,n.useRef)(new Map),A=(0,n.useCallback)(async()=>{if(a&&r)try{b(null);const e=await He(r),t={total:(null===e||void 0===e?void 0:e.total)||0,admins:(null===e||void 0===e?void 0:e.admins)||0,instructors:(null===e||void 0===e?void 0:e.instructors)||0,students:(null===e||void 0===e?void 0:e.students)||0,active:(null===e||void 0===e?void 0:e.active)||0,inactive:(null===e||void 0===e?void 0:e.inactive)||0};c(t)}catch(e){console.error("Error fetching user statistics:",e),b(e.message),s({type:"error",message:"Failed to fetch user statistics",duration:5e3})}},[a,r,s]),E=(0,n.useCallback)(async()=>{if(!a||!r||w.current)return;const e=""===y.enabled?null:"true"===y.enabled,t="".concat(y.role||"","|").concat(y.search||"","|").concat(null!==e&&void 0!==e?e:""),n=Date.now(),i=I.current.get(t);if(i&&n-i.ts<5e3)l(i.data||[]);else if(!(t===k.current&&n-S.current<1500)){if(C.current)try{C.current.abort()}catch(o){}C.current=new AbortController,w.current=!0;try{b(null);const s=await Qe(r,y.role||null,y.search||null,e,C.current.signal);l(s||[]),k.current=t,S.current=n,I.current.set(t,{data:s||[],ts:n})}catch(c){if("AbortError"===(null===c||void 0===c?void 0:c.name))return;console.error("Error fetching users:",c),b(c.message),s({type:"error",message:"Failed to fetch users",duration:5e3})}finally{w.current=!1}}},[a,r,y.role,y.search,y.enabled,s]),T=(0,n.useCallback)(async()=>{if(a&&r&&!j.current&&!N.current){N.current=!0,j.current=!0,g(!0);try{const e=await He(r),t={total:(null===e||void 0===e?void 0:e.total)||0,admins:(null===e||void 0===e?void 0:e.admins)||0,instructors:(null===e||void 0===e?void 0:e.instructors)||0,students:(null===e||void 0===e?void 0:e.students)||0,active:(null===e||void 0===e?void 0:e.active)||0,inactive:(null===e||void 0===e?void 0:e.inactive)||0};c(t);const s=await Qe(r,null,null,null);l(s||[]);const a="||",n=Date.now();k.current=a,S.current=n,I.current.set(a,{data:s||[],ts:n})}catch(e){console.error("Error fetching data:",e),b(e.message),s({type:"error",message:"Failed to fetch data",duration:5e3})}finally{g(!1),N.current=!1}}},[a,r,s]);(0,n.useEffect)(()=>{a&&!j.current&&T()},[a]),(0,n.useEffect)(()=>{a&&j.current&&E()},[y.role,y.search,y.enabled,a]);const P=(e,t)=>{u(s=>s[e]===t?s:(0,Ue.A)((0,Ue.A)({},s),{},{[e]:t}))},L=async e=>{try{const t=await(async(e,t)=>{const s=await fetch("".concat(We,"/api/admin/users/").concat(t),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!s.ok)throw new Error("Failed to delete user: ".concat(s.statusText));return s.json()})(r,e);l(i.filter(t=>t.id!==e)),m(!1),f(null),await A(),s({type:"success",message:t.message||"User deleted successfully",duration:3e3})}catch(t){console.error("Error deleting user:",t),s({type:"error",message:"Failed to delete user",duration:5e3})}},R=async e=>{try{const t=await(async(e,t)=>{const s=await fetch("".concat(We,"/api/admin/users/").concat(t,"/activate"),{method:"PUT",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!s.ok)throw new Error("Failed to activate user: ".concat(s.statusText));return s.json()})(r,e);l(i.map(t=>t.id===e?(0,Ue.A)((0,Ue.A)({},t),{},{enabled:!0}):t)),await A(),s({type:"success",message:t.message||"User activated successfully",duration:3e3})}catch(t){console.error("Error activating user:",t),s({type:"error",message:"Failed to activate user",duration:5e3})}},M=async e=>{try{const t=await(async(e,t)=>{const s=await fetch("".concat(We,"/api/admin/users/").concat(t,"/deactivate"),{method:"PUT",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!s.ok)throw new Error("Failed to deactivate user: ".concat(s.statusText));return s.json()})(r,e);l(i.map(t=>t.id===e?(0,Ue.A)((0,Ue.A)({},t),{},{enabled:!1}):t)),await A(),s({type:"success",message:t.message||"User deactivated successfully",duration:3e3})}catch(t){console.error("Error deactivating user:",t),s({type:"error",message:"Failed to deactivate user",duration:5e3})}},D=()=>{m(!1),f(null)},F=e=>{switch(e){case"ADMIN":return"role-badge admin";case"INSTRUCTOR":return"role-badge instructor";case"STUDENT":return"role-badge student";default:return"role-badge"}},z=e=>e&&!isNaN(e)?e:0,O=(e,t)=>{const s=((e,t)=>{if(!e||!t||0===t||isNaN(e)||isNaN(t))return 0;const s=Math.round(e/t*100);return isNaN(s)?0:s})(e,t);return s>0?"".concat(s,"% of total"):"0% of total"};return a?(0,Le.jsxs)("div",{className:"user-management-page",children:[(0,Le.jsx)(Ve,{title:"User Management",subtitle:"Manage all users and view system statistics",onBackToDashboard:t,actions:(0,Le.jsx)("button",{onClick:T,className:"btn btn-primary btn-sm",disabled:x,children:x?"Loading...":"Refresh All"})}),(0,Le.jsxs)("div",{className:"stats-section",children:[(0,Le.jsx)("h2",{children:"User Statistics"}),x?(0,Le.jsxs)("div",{className:"loading-container",children:[(0,Le.jsx)("div",{className:"loading-spinner"}),(0,Le.jsx)("p",{children:"Loading statistics..."})]}):v?(0,Le.jsxs)("div",{className:"error-message",children:[(0,Le.jsx)("p",{children:v}),(0,Le.jsx)("button",{onClick:A,className:"btn btn-outline btn-sm",children:"Retry"})]}):(0,Le.jsxs)("div",{className:"stats-grid",children:[(0,Le.jsxs)("div",{className:"stat-card total",children:[(0,Le.jsx)("div",{className:"stat-icon",children:(0,Le.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,Le.jsx)("path",{d:"M16 4c0-1.11.89-2 2-2s2 .89 2 2-.89 2-2 2-2-.89-2-2zm4 18v-6h2.5l-2.54-7.63A1.5 1.5 0 0 0 18.54 8H17c-.8 0-1.54.37-2.01.99L14 10.5l-1.5-2c-.47-.62-1.21-.99-2.01-.99H9.46c-.8 0-1.54.37-2.01.99L5 10.5l-1.5-2C3.03 8.37 2.29 8 1.5 8H.46c-.8 0-1.54.37-2.01.99L-2 10.5v11.5h2v-6h2.5l2.54 7.63A1.5 1.5 0 0 0 5.46 24H7c.8 0 1.54-.37 2.01-.99L10 20.5l1.5 2c.47.62 1.21.99 2.01.99h1.54c.8 0 1.54-.37 2.01-.99L18 20.5l1.5 2c.47.62 1.21.99 2.01.99h1.54c.8 0 1.54-.37 2.01-.99L26 20.5v-6h2v6z"})})}),(0,Le.jsxs)("div",{className:"stat-content",children:[(0,Le.jsx)("div",{className:"stat-number",children:z(o.total)}),(0,Le.jsx)("div",{className:"stat-label",children:"Total Users"})]})]}),(0,Le.jsxs)("div",{className:"stat-card active",children:[(0,Le.jsx)("div",{className:"stat-icon",children:(0,Le.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,Le.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})})}),(0,Le.jsxs)("div",{className:"stat-content",children:[(0,Le.jsx)("div",{className:"stat-number",children:z(o.active)}),(0,Le.jsx)("div",{className:"stat-label",children:"Active Users"}),(0,Le.jsx)("div",{className:"stat-percentage",children:O(o.active,o.total)})]})]}),(0,Le.jsxs)("div",{className:"stat-card inactive",children:[(0,Le.jsx)("div",{className:"stat-icon",children:(0,Le.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,Le.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H7v-2h10v2z"})})}),(0,Le.jsxs)("div",{className:"stat-content",children:[(0,Le.jsx)("div",{className:"stat-number",children:z(o.inactive)}),(0,Le.jsx)("div",{className:"stat-label",children:"Inactive Users"}),(0,Le.jsx)("div",{className:"stat-percentage",children:O(o.inactive,o.total)})]})]}),(0,Le.jsxs)("div",{className:"stat-card admin",children:[(0,Le.jsx)("div",{className:"stat-icon",children:(0,Le.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,Le.jsx)("path",{d:"M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"})})}),(0,Le.jsxs)("div",{className:"stat-content",children:[(0,Le.jsx)("div",{className:"stat-number",children:z(o.admins)}),(0,Le.jsx)("div",{className:"stat-label",children:"Administrators"}),(0,Le.jsx)("div",{className:"stat-percentage",children:O(o.admins,o.total)})]})]}),(0,Le.jsxs)("div",{className:"stat-card instructor",children:[(0,Le.jsx)("div",{className:"stat-icon",children:(0,Le.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,Le.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),(0,Le.jsxs)("div",{className:"stat-content",children:[(0,Le.jsx)("div",{className:"stat-number",children:z(o.instructors)}),(0,Le.jsx)("div",{className:"stat-label",children:"Instructors"}),(0,Le.jsx)("div",{className:"stat-percentage",children:O(o.instructors,o.total)})]})]}),(0,Le.jsxs)("div",{className:"stat-card student",children:[(0,Le.jsx)("div",{className:"stat-icon",children:(0,Le.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,Le.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"})})}),(0,Le.jsxs)("div",{className:"stat-content",children:[(0,Le.jsx)("div",{className:"stat-number",children:z(o.students)}),(0,Le.jsx)("div",{className:"stat-label",children:"Students"}),(0,Le.jsx)("div",{className:"stat-percentage",children:O(o.students,o.total)})]})]})]})]}),(0,Le.jsxs)("div",{className:"management-section",children:[(0,Le.jsx)("h2",{children:"User Management"}),(0,Le.jsxs)("div",{className:"filters-section",children:[(0,Le.jsxs)("div",{className:"filters-header",children:[(0,Le.jsx)("h3",{children:"Filters"}),(d.role||d.search||d.enabled)&&(0,Le.jsxs)("div",{className:"active-filters",children:[(0,Le.jsx)("span",{children:"Active filters:"}),d.role&&(0,Le.jsxs)("span",{className:"filter-tag",children:["Role: ",d.role]}),d.enabled&&(0,Le.jsxs)("span",{className:"filter-tag",children:["Status: ","true"===d.enabled?"Active":"Inactive"]}),d.search&&(0,Le.jsxs)("span",{className:"filter-tag",children:['Search: "',d.search,'"']}),(0,Le.jsx)("button",{className:"btn btn-outline btn-xs",onClick:()=>u({role:"",search:"",enabled:""}),children:"Clear All"})]})]}),(0,Le.jsxs)("div",{className:"filters-row",children:[(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{htmlFor:"role-filter",children:"Filter by Role:"}),(0,Le.jsxs)("select",{id:"role-filter",value:d.role,onChange:e=>P("role",e.target.value),className:"filter-select",children:[(0,Le.jsx)("option",{value:"",children:"All Roles"}),(0,Le.jsx)("option",{value:"ADMIN",children:"Admin"}),(0,Le.jsx)("option",{value:"INSTRUCTOR",children:"Instructor"}),(0,Le.jsx)("option",{value:"STUDENT",children:"Student"})]})]}),(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{htmlFor:"enabled-filter",children:"Filter by Status:"}),(0,Le.jsxs)("select",{id:"enabled-filter",value:d.enabled,onChange:e=>P("enabled",e.target.value),className:"filter-select",children:[(0,Le.jsx)("option",{value:"",children:"All Users"}),(0,Le.jsx)("option",{value:"true",children:"Active Users"}),(0,Le.jsx)("option",{value:"false",children:"Inactive Users"})]})]}),(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{htmlFor:"search-filter",children:"Search:"}),(0,Le.jsx)("input",{id:"search-filter",type:"text",placeholder:"Search by name, email, or username...",value:d.search,onChange:e=>P("search",e.target.value),className:"filter-input"})]}),(0,Le.jsx)("button",{onClick:E,className:"btn btn-primary btn-sm",disabled:x,children:x?"Loading...":"Refresh"})]})]}),v&&(0,Le.jsxs)("div",{className:"error-message",children:[(0,Le.jsx)("p",{children:v}),(0,Le.jsx)("button",{onClick:E,className:"btn btn-outline btn-sm",children:"Try Again"})]}),(0,Le.jsx)("div",{className:"users-table-container",children:(0,Le.jsxs)("table",{className:"users-table",children:[(0,Le.jsx)("thead",{children:(0,Le.jsxs)("tr",{children:[(0,Le.jsx)("th",{children:"User"}),(0,Le.jsx)("th",{children:"Role"}),(0,Le.jsx)("th",{children:"Email"}),(0,Le.jsx)("th",{children:"Joined"}),(0,Le.jsx)("th",{children:"Status"}),(0,Le.jsx)("th",{children:"Actions"})]})}),(0,Le.jsx)("tbody",{children:x&&0===i.length?(0,Le.jsx)("tr",{children:(0,Le.jsxs)("td",{colSpan:"6",className:"loading-row",children:[(0,Le.jsx)("div",{className:"loading-spinner"}),(0,Le.jsx)("span",{children:"Loading users..."})]})}):0===i.length?(0,Le.jsx)("tr",{children:(0,Le.jsx)("td",{colSpan:"6",className:"no-data",children:d.role||d.search||d.enabled?"No users found matching your criteria":"No users found"})}):i.map(e=>{return(0,Le.jsxs)("tr",{className:e.enabled?"":"disabled-user",children:[(0,Le.jsx)("td",{children:(0,Le.jsxs)("div",{className:"user-info",children:[(0,Le.jsx)("div",{className:"user-avatar",children:e.firstName&&e.lastName?"".concat(e.firstName[0]).concat(e.lastName[0]).toUpperCase():e.username[0].toUpperCase()}),(0,Le.jsxs)("div",{className:"user-details",children:[(0,Le.jsx)("div",{className:"user-name",children:e.firstName&&e.lastName?"".concat(e.firstName," ").concat(e.lastName):e.username}),(0,Le.jsxs)("div",{className:"user-username",children:["@",e.username]})]})]})}),(0,Le.jsx)("td",{children:(0,Le.jsx)("span",{className:F(e.role),children:e.role})}),(0,Le.jsx)("td",{children:e.email}),(0,Le.jsx)("td",{children:(t=e.createdAt,new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}))}),(0,Le.jsx)("td",{children:(0,Le.jsx)("span",{className:"status-badge ".concat(e.enabled?"enabled":"disabled"),children:e.enabled?"Active":"Disabled"})}),(0,Le.jsx)("td",{children:(0,Le.jsxs)("div",{className:"action-buttons",children:[e.enabled?(0,Le.jsx)("button",{onClick:()=>M(e.id),className:"btn btn-sm btn-warning",title:"Deactivate User",children:"Deactivate"}):(0,Le.jsx)("button",{onClick:()=>R(e.id),className:"btn btn-sm btn-success",title:"Activate User",children:"Activate"}),(0,Le.jsx)("button",{onClick:()=>(e=>{f(e),m(!0)})(e),className:"btn btn-sm btn-danger",title:"Delete User",children:"Delete"})]})})]},e.id);var t})})]})})]}),p&&h&&(0,Le.jsx)("div",{className:"modal-overlay",children:(0,Le.jsxs)("div",{className:"modal",children:[(0,Le.jsxs)("div",{className:"modal-header",children:[(0,Le.jsx)("h3",{children:"Confirm Delete"}),(0,Le.jsx)("button",{onClick:D,className:"modal-close",children:"\xd7"})]}),(0,Le.jsxs)("div",{className:"modal-body",children:[(0,Le.jsxs)("p",{children:["Are you sure you want to delete user"," ",(0,Le.jsx)("strong",{children:h.firstName&&h.lastName?"".concat(h.firstName," ").concat(h.lastName):h.username}),"?"]}),(0,Le.jsx)("p",{className:"warning-text",children:"This action cannot be undone."})]}),(0,Le.jsxs)("div",{className:"modal-footer",children:[(0,Le.jsx)("button",{onClick:D,className:"btn btn-outline",children:"Cancel"}),(0,Le.jsx)("button",{onClick:()=>L(h.id),className:"btn btn-danger",children:"Delete User"})]})]})})]}):(0,Le.jsx)("div",{className:"user-management-page",children:(0,Le.jsxs)("div",{className:"loading-container",children:[(0,Le.jsx)("div",{className:"loading-spinner"}),(0,Le.jsx)("p",{children:"Loading user management..."})]})})},$e=()=>{const[e,t]=(0,n.useState)(!1),[s,a]=(0,n.useState)(null),r=(0,n.useRef)(null),i=(0,n.useRef)(!1),l=(0,n.useCallback)(async function(e){if(i.current)return console.warn("API call already in progress, skipping..."),null;try{i.current=!0,t(!0),a(null),r.current&&r.current.abort(),r.current=new AbortController;for(var n=arguments.length,l=new Array(n>1?n-1:0),o=1;o<n;o++)l[o-1]=arguments[o];return await e(...l)}catch(s){if("AbortError"!==s.name)throw console.error("API call failed:",s),a(s),s;return null}finally{i.current=!1,t(!1)}},[]);return{loading:e,error:s,executeApiCall:l,cancelRequest:(0,n.useCallback)(()=>{r.current&&r.current.abort()},[]),cleanup:(0,n.useCallback)(()=>{r.current&&r.current.abort()},[])}};var Je=s(935),Ke=s(821),Ge=s(712),Xe=s(305);const Ze=async e=>{try{const t=await(0,Xe.Vg)("/api/public/master-exams/kv",e);return await t.json()}catch(t){throw console.error("Error fetching master exams:",t),t}},et=async e=>{try{const t=await(0,Xe.Vg)("/api/public/years/kv",e);return await t.json()}catch(t){throw console.error("Error fetching years:",t),t}},tt=e=>{let{question:t,onEdit:s,onDelete:a,onViewDetails:n}=e;const{id:r,questionText:i,questionType:l,difficultyLevel:o,marks:c,negativeMarks:d,timeLimitSeconds:u,explanation:p,isActive:m,createdAt:h,updatedAt:f,createdByName:x,updatedByName:g,subjectName:v,topicName:b,moduleName:y,chapterName:j,options:N=[],examSuitabilities:w=[],examHistories:k=[]}=t;return(0,Le.jsxs)("div",{className:"question-list-card",children:[(0,Le.jsxs)("div",{className:"card-header",children:[(0,Le.jsxs)("div",{className:"card-title",children:[(0,Le.jsx)("h4",{className:"question-title",children:(null===i||void 0===i?void 0:i.length)>100?"".concat(i.substring(0,100),"..."):i}),(0,Le.jsxs)("div",{className:"card-badges",children:[(0,Le.jsx)("span",{className:"status-badge ".concat(m?"active":"inactive"),children:m?"Active":"Inactive"}),(0,Le.jsx)("span",{className:"difficulty-badge",style:{backgroundColor:(e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"easy":return"#4CAF50";case"medium":return"#FF9800";case"hard":return"#F44336";default:return"#757575"}})(o)},children:o}),(0,Le.jsxs)("span",{className:"type-badge",children:[(e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"mcq":case"multiple_choice":case"fill_blank":return"\ud83d\udcdd";case"true_false":return"\u2705";case"short_answer":return"\u270d\ufe0f";default:return"\u2753"}})(l)," ",l]}),(0,Le.jsxs)("span",{className:"marks-badge",children:[c," marks"]})]})]}),(0,Le.jsxs)("div",{className:"card-actions",children:[(0,Le.jsx)("button",{className:"btn btn-primary btn-xs",onClick:()=>n(t),title:"View Details",children:"\ud83d\udc41\ufe0f View"}),(0,Le.jsx)("button",{className:"btn btn-outline btn-xs",onClick:()=>s(t),title:"Edit Question",children:"\u270f\ufe0f Edit"}),(0,Le.jsx)("button",{className:"btn btn-danger btn-xs",onClick:()=>a(r),title:"Delete Question",children:"\ud83d\uddd1\ufe0f Delete"})]})]}),(0,Le.jsx)("div",{className:"card-content",children:(0,Le.jsxs)("div",{className:"question-preview",children:[(0,Le.jsx)("p",{className:"question-text-preview",children:(null===i||void 0===i?void 0:i.length)>150?"".concat(i.substring(0,150),"..."):i}),(0,Le.jsxs)("div",{className:"question-details",children:[(0,Le.jsxs)("div",{className:"detail-row",children:[(0,Le.jsx)("span",{className:"detail-label",children:"Subject:"}),(0,Le.jsx)("span",{className:"detail-value",children:v||"N/A"})]}),b&&(0,Le.jsxs)("div",{className:"detail-row",children:[(0,Le.jsx)("span",{className:"detail-label",children:"Topic:"}),(0,Le.jsx)("span",{className:"detail-value",children:b})]}),y&&(0,Le.jsxs)("div",{className:"detail-row",children:[(0,Le.jsx)("span",{className:"detail-label",children:"Module:"}),(0,Le.jsx)("span",{className:"detail-value",children:y})]}),j&&(0,Le.jsxs)("div",{className:"detail-row",children:[(0,Le.jsx)("span",{className:"detail-label",children:"Chapter:"}),(0,Le.jsx)("span",{className:"detail-value",children:j})]}),(0,Le.jsxs)("div",{className:"detail-row",children:[(0,Le.jsx)("span",{className:"detail-label",children:"Time Limit:"}),(0,Le.jsxs)("span",{className:"detail-value",children:[u||60," seconds"]})]}),d>0&&(0,Le.jsxs)("div",{className:"detail-row",children:[(0,Le.jsx)("span",{className:"detail-label",children:"Negative Marks:"}),(0,Le.jsx)("span",{className:"detail-value",children:d})]})]}),"MCQ"===l&&N&&N.length>0&&(0,Le.jsxs)("div",{className:"options-preview",children:[(0,Le.jsx)("h5",{children:"Options:"}),(0,Le.jsxs)("div",{className:"options-list",children:[N.slice(0,2).map((e,t)=>{var s;return(0,Le.jsxs)("div",{className:"option-item ".concat(e.isCorrect?"correct":""),children:[(0,Le.jsxs)("span",{className:"option-label",children:[e.optionLetter,"."]}),(0,Le.jsx)("span",{className:"option-text",children:(null===(s=e.optionText)||void 0===s?void 0:s.length)>40?"".concat(e.optionText.substring(0,40),"..."):e.optionText}),e.isCorrect&&(0,Le.jsx)("span",{className:"correct-indicator",children:"\u2713"})]},t)}),N.length>2&&(0,Le.jsxs)("div",{className:"more-options",children:["+",N.length-2," more options"]})]})]}),((null===w||void 0===w?void 0:w.length)>0||(null===k||void 0===k?void 0:k.length)>0)&&(0,Le.jsxs)("div",{className:"exam-tags-preview",children:[(null===w||void 0===w?void 0:w.length)>0&&(0,Le.jsxs)("div",{className:"tags-group",children:[(0,Le.jsx)("span",{className:"tags-label",children:"Suitable for:"}),(0,Le.jsxs)("div",{className:"tags-list",children:[w.slice(0,2).map((e,t)=>{const s="object"===typeof e?e.masterExamName||"Exam ".concat(e.masterExamId):"Exam ".concat(e);return(0,Le.jsx)("span",{className:"tag suitability-tag",children:s},t)}),w.length>2&&(0,Le.jsxs)("span",{className:"tag-more",children:["+",w.length-2]})]})]}),(null===k||void 0===k?void 0:k.length)>0&&(0,Le.jsxs)("div",{className:"tags-group",children:[(0,Le.jsx)("span",{className:"tags-label",children:"Previously asked:"}),(0,Le.jsxs)("div",{className:"tags-list",children:[k.slice(0,1).map((e,t)=>{const s="object"===typeof e?e.masterExamName||"Exam ".concat(e.masterExamId):"Exam ".concat(e),a="object"===typeof e&&e.appearedYear||(new Date).getFullYear();return(0,Le.jsxs)("span",{className:"tag history-tag",children:[s," - ",a]},t)}),k.length>1&&(0,Le.jsxs)("span",{className:"tag-more",children:["+",k.length-1]})]})]})]})]})}),(0,Le.jsxs)("div",{className:"card-footer",children:[(0,Le.jsx)("div",{className:"footer-info",children:(0,Le.jsxs)("small",{className:"text-muted",children:["Created: ",new Date(h).toLocaleDateString()]})}),(0,Le.jsx)("div",{className:"footer-meta",children:b&&(0,Le.jsxs)("small",{className:"meta-item",children:["\ud83c\udfaf ",b]})})]})]})},st="question_filter_presets",at=10,nt=e=>{let{savedPresets:t,onLoadPreset:s,onSavePreset:a,currentFilters:r,isLoading:i}=e;const[l,o]=(0,n.useState)(!1),[c,d]=(0,n.useState)(""),[u,p]=(0,n.useState)(!1),m=()=>Object.values(r).some(e=>"object"===typeof e&&null!==e&&Object.values(e).some(e=>Array.isArray(e)?e.length>0:"string"===typeof e?""!==e.trim():null!==e&&void 0!==e));return(0,Le.jsxs)("div",{className:"filter-presets",children:[(0,Le.jsxs)("div",{className:"presets-header",children:[(0,Le.jsxs)("h4",{children:[(0,Le.jsx)("span",{className:"section-icon",children:"\ud83d\udcbe"}),"Filter Presets"]}),(0,Le.jsxs)("button",{type:"button",className:"btn btn-outline btn-xs",onClick:()=>p(!u),disabled:i,children:[u?"Hide":"Show"," Presets"]})]}),u&&(0,Le.jsxs)("div",{className:"presets-content",children:[(0,Le.jsx)("div",{className:"save-preset-section",children:(0,Le.jsx)("button",{type:"button",className:"btn btn-primary btn-sm",onClick:()=>o(!0),disabled:i||!m(),title:m()?"Save current filters as preset":"No active filters to save",children:"\ud83d\udcbe Save Current Filters"})}),t.length>0?(0,Le.jsxs)("div",{className:"saved-presets",children:[(0,Le.jsx)("h5",{children:"Saved Presets:"}),(0,Le.jsx)("div",{className:"preset-list",children:t.map(e=>(0,Le.jsxs)("div",{className:"preset-item",children:[(0,Le.jsxs)("div",{className:"preset-info",children:[(0,Le.jsx)("span",{className:"preset-name",children:e.name}),(0,Le.jsxs)("span",{className:"preset-date",children:["Saved: ",new Date(e.createdAt).toLocaleDateString()]})]}),(0,Le.jsxs)("div",{className:"preset-actions",children:[(0,Le.jsx)("button",{type:"button",className:"btn btn-outline btn-xs",onClick:()=>{return t=e.id,s(t),void p(!1);var t},disabled:i,title:"Load this preset",children:"Load"}),(0,Le.jsx)("button",{type:"button",className:"btn btn-outline btn-xs text-red-600",onClick:()=>{return t=e.id,void console.log("Delete preset:",t);var t},disabled:i,title:"Delete this preset",children:"Delete"})]})]},e.id))})]}):(0,Le.jsxs)("div",{className:"no-presets",children:[(0,Le.jsx)("p",{children:"No saved presets yet."}),(0,Le.jsx)("p",{className:"help-text",children:"Save your current filters to create reusable presets."})]})]}),l&&(0,Le.jsx)("div",{className:"modal-overlay",onClick:()=>o(!1),children:(0,Le.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,Le.jsxs)("div",{className:"modal-header",children:[(0,Le.jsx)("h3",{children:"Save Filter Preset"}),(0,Le.jsx)("button",{type:"button",className:"modal-close",onClick:()=>o(!1),children:"\u2715"})]}),(0,Le.jsxs)("div",{className:"modal-body",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"presetName",children:"Preset Name"}),(0,Le.jsx)("input",{type:"text",id:"presetName",value:c,onChange:e=>d(e.target.value),placeholder:"Enter preset name...",className:"form-input",maxLength:50})]}),(0,Le.jsx)("div",{className:"form-help",children:"Choose a descriptive name for your filter preset (max 50 characters)."})]}),(0,Le.jsxs)("div",{className:"modal-footer",children:[(0,Le.jsx)("button",{type:"button",className:"btn btn-outline",onClick:()=>o(!1),children:"Cancel"}),(0,Le.jsx)("button",{type:"button",className:"btn btn-primary",onClick:()=>{c.trim()&&(a(c.trim()),d(""),o(!1))},disabled:!c.trim(),children:"Save Preset"})]})]})})]})},rt=e=>{let{filters:t,onFilterChange:s,isLoading:a}=e;const{token:r}=(0,Pe.nm)(),[i,l]=(0,n.useState)([]),[o,c]=(0,n.useState)([]),[d,u]=(0,n.useState)([]),[p,m]=(0,n.useState)([]),[h,f]=(0,n.useState)([]),[x,g]=(0,n.useState)([]),[v,b]=(0,n.useState)([]),[y,j]=(0,n.useState)([]),[N,w]=(0,n.useState)({courseTypes:!1,courses:!1,classes:!1,exams:!1,subjects:!1,topics:!1,modules:!1,chapters:!1}),k=(0,n.useCallback)(async()=>{if(r){w(e=>(0,Ue.A)((0,Ue.A)({},e),{},{courseTypes:!0}));try{const e=await fetch("/api/admin/master-data/course-types",{headers:{Authorization:"Bearer ".concat(r)}}),t=await e.json();Array.isArray(t)?l(t):t.content?l(t.content):l([{id:1,name:"Academic"},{id:2,name:"Competitive"},{id:3,name:"Professional"}])}catch(e){console.error("Error fetching course types:",e),l([{id:1,name:"Academic"},{id:2,name:"Competitive"},{id:3,name:"Professional"}])}finally{w(e=>(0,Ue.A)((0,Ue.A)({},e),{},{courseTypes:!1}))}}},[r]),S=(0,n.useCallback)(async e=>{if(r&&e){w(e=>(0,Ue.A)((0,Ue.A)({},e),{},{courses:!0}));try{const t=await fetch("/api/admin/master-data/courses?courseTypeId=".concat(e),{headers:{Authorization:"Bearer ".concat(r)}}),s=await t.json();Array.isArray(s)?c(s):s.content&&c(s.content)}catch(t){console.error("Error fetching courses:",t)}finally{w(e=>(0,Ue.A)((0,Ue.A)({},e),{},{courses:!1}))}}},[r]),C=(0,n.useCallback)(async(e,t)=>{if(r&&e&&t){w(e=>(0,Ue.A)((0,Ue.A)({},e),{},{classes:!0}));try{const s=await fetch("/api/admin/master-data/classes?courseTypeId=".concat(e,"&courseId=").concat(t),{headers:{Authorization:"Bearer ".concat(r)}}),a=await s.json();Array.isArray(a)?u(a):a.content&&u(a.content)}catch(s){console.error("Error fetching classes:",s)}finally{w(e=>(0,Ue.A)((0,Ue.A)({},e),{},{classes:!1}))}}},[r]),I=(0,n.useCallback)(async(e,t)=>{if(r&&e&&t){w(e=>(0,Ue.A)((0,Ue.A)({},e),{},{exams:!0}));try{const s=await fetch("/api/admin/master-data/exams?courseTypeId=".concat(e,"&courseId=").concat(t),{headers:{Authorization:"Bearer ".concat(r)}}),a=await s.json();Array.isArray(a)?m(a):a.content&&m(a.content)}catch(s){console.error("Error fetching exams:",s)}finally{w(e=>(0,Ue.A)((0,Ue.A)({},e),{},{exams:!1}))}}},[r]),A=(0,n.useCallback)(async(e,t,s,a)=>{if(r&&e&&t){w(e=>(0,Ue.A)((0,Ue.A)({},e),{},{subjects:!0}));try{let n="/api/admin/subjects/subject-linkages/filter?courseTypeId=".concat(e,"&courseId=").concat(t);s&&(n+="&classId=".concat(s)),a&&(n+="&examId=".concat(a));const i=await fetch(n,{headers:{Authorization:"Bearer ".concat(r)}}),l=await i.json();Array.isArray(l)?f(l):l.content&&f(l.content)}catch(n){console.error("Error fetching subjects:",n)}finally{w(e=>(0,Ue.A)((0,Ue.A)({},e),{},{subjects:!1}))}}},[r]),E=(0,n.useCallback)(async e=>{if(r&&e){w(e=>(0,Ue.A)((0,Ue.A)({},e),{},{topics:!0}));try{const t=await fetch("/api/admin/master-data/topics?subjectId=".concat(e),{headers:{Authorization:"Bearer ".concat(r)}}),s=await t.json();Array.isArray(s)?g(s):s.content&&g(s.content)}catch(t){console.error("Error fetching topics:",t)}finally{w(e=>(0,Ue.A)((0,Ue.A)({},e),{},{topics:!1}))}}},[r]),T=(0,n.useCallback)(async e=>{if(r&&e){w(e=>(0,Ue.A)((0,Ue.A)({},e),{},{modules:!0}));try{const t=await fetch("/api/admin/master-data/modules?topicId=".concat(e),{headers:{Authorization:"Bearer ".concat(r)}}),s=await t.json();Array.isArray(s)?b(s):s.content&&b(s.content)}catch(t){console.error("Error fetching modules:",t)}finally{w(e=>(0,Ue.A)((0,Ue.A)({},e),{},{modules:!1}))}}},[r]),P=(0,n.useCallback)(async e=>{if(r&&e){w(e=>(0,Ue.A)((0,Ue.A)({},e),{},{chapters:!0}));try{const t=await fetch("/api/admin/master-data/chapters?moduleId=".concat(e),{headers:{Authorization:"Bearer ".concat(r)}}),s=await t.json();Array.isArray(s)?j(s):s.content&&j(s.content)}catch(t){console.error("Error fetching chapters:",t)}finally{w(e=>(0,Ue.A)((0,Ue.A)({},e),{},{chapters:!1}))}}},[r]);(0,n.useEffect)(()=>{k()},[k]),(0,n.useEffect)(()=>{console.log("AcademicLevelFilters - courseTypes:",i),console.log("AcademicLevelFilters - loadingStates:",N),console.log("AcademicLevelFilters - filters:",t)},[i,N,t]);const L=e=>{const t={};"courseType"===e?(t.courseId=null,t.relationshipId=null,t.subjectId=null,t.topicId=null,t.moduleId=null,t.chapterId=null):"course"===e?(t.relationshipId=null,t.subjectId=null,t.topicId=null,t.moduleId=null,t.chapterId=null):"subject"===e?(t.topicId=null,t.moduleId=null,t.chapterId=null):"topic"===e?(t.moduleId=null,t.chapterId=null):"module"===e&&(t.chapterId=null),s(t)},R=e=>{L("courseType"),s({courseTypeId:e?parseInt(e):null}),e?S(e):(c([]),u([]),m([]),f([]),g([]),b([]),j([]))},M=(e,a)=>{L("subject");const n={};if(("class"===a||"exam"===a)&&(n.relationshipId=e?parseInt(e):null),s(n),e&&t.courseTypeId&&t.courseId){const s=t.courseTypeId,n=t.courseId;"class"===a?A(s,n,e,null):"exam"===a&&A(s,n,null,e)}else f([]),g([]),b([]),j([])},D=1===t.courseTypeId,F=2===t.courseTypeId;t.courseTypeId;return(0,Le.jsxs)("div",{className:"academic-level-filters",children:[(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{className:"filter-label",children:"Course Type"}),(0,Le.jsx)("div",{className:"radio-group",children:N.courseTypes?(0,Le.jsx)("div",{className:"loading-indicator",children:"Loading course types..."}):i.length>0?i.map(e=>(0,Le.jsxs)("label",{className:"radio-option",children:[(0,Le.jsx)("input",{type:"radio",name:"courseType",value:e.id,checked:t.courseTypeId===e.id,onChange:e=>R(e.target.value),disabled:a||N.courseTypes}),(0,Le.jsx)("span",{className:"radio-label",children:e.name})]},e.id)):(0,Le.jsx)("div",{className:"no-data",children:"No course types available"})})]}),t.courseTypeId&&(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{className:"filter-label",children:"Course"}),(0,Le.jsxs)("select",{className:"filter-select",value:t.courseId||"",onChange:e=>(e=>{if(L("course"),s({courseId:e?parseInt(e):null}),e&&t.courseTypeId){const s=t.courseTypeId;1===s?C(s,e):2===s&&I(s,e),A(s,e,null,null)}else u([]),m([]),f([]),g([]),b([]),j([])})(e.target.value),disabled:a||N.courses,children:[(0,Le.jsx)("option",{value:"",children:"Select Course"}),o.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]}),N.courses&&(0,Le.jsx)("div",{className:"loading-indicator",children:"Loading..."})]}),D&&t.courseId&&(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{className:"filter-label",children:"Class"}),(0,Le.jsxs)("select",{className:"filter-select",value:t.relationshipId||"",onChange:e=>M(e.target.value,"class"),disabled:a||N.classes,children:[(0,Le.jsx)("option",{value:"",children:"Select Class"}),d.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]}),N.classes&&(0,Le.jsx)("div",{className:"loading-indicator",children:"Loading..."})]}),F&&t.courseId&&(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{className:"filter-label",children:"Exam"}),(0,Le.jsxs)("select",{className:"filter-select",value:t.relationshipId||"",onChange:e=>M(e.target.value,"exam"),disabled:a||N.exams,children:[(0,Le.jsx)("option",{value:"",children:"Select Exam"}),p.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]}),N.exams&&(0,Le.jsx)("div",{className:"loading-indicator",children:"Loading..."})]}),t.courseId&&(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{className:"filter-label",children:"Subject"}),(0,Le.jsxs)("select",{className:"filter-select",value:t.subjectId||"",onChange:e=>{return t=e.target.value,L("subject"),s({subjectId:t?parseInt(t):null}),void(t?E(t):(g([]),b([]),j([])));var t},disabled:a||N.subjects,children:[(0,Le.jsx)("option",{value:"",children:"Select Subject"}),h.map(e=>(0,Le.jsx)("option",{value:e.linkageId||e.id,children:e.subjectName||e.name},e.linkageId||e.id))]}),N.subjects&&(0,Le.jsx)("div",{className:"loading-indicator",children:"Loading..."})]}),t.subjectId&&(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{className:"filter-label",children:"Topic"}),(0,Le.jsxs)("select",{className:"filter-select",value:t.topicId||"",onChange:e=>{return t=e.target.value,L("topic"),s({topicId:t?parseInt(t):null}),void(t?T(t):(b([]),j([])));var t},disabled:a||N.topics,children:[(0,Le.jsx)("option",{value:"",children:"Select Topic"}),x.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]}),N.topics&&(0,Le.jsx)("div",{className:"loading-indicator",children:"Loading..."})]}),t.topicId&&(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{className:"filter-label",children:"Module"}),(0,Le.jsxs)("select",{className:"filter-select",value:t.moduleId||"",onChange:e=>{return t=e.target.value,L("module"),s({moduleId:t?parseInt(t):null}),void(t?P(t):j([]));var t},disabled:a||N.modules,children:[(0,Le.jsx)("option",{value:"",children:"Select Module"}),v.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]}),N.modules&&(0,Le.jsx)("div",{className:"loading-indicator",children:"Loading..."})]}),t.moduleId&&(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{className:"filter-label",children:"Chapter"}),(0,Le.jsxs)("select",{className:"filter-select",value:t.chapterId||"",onChange:e=>{return t=e.target.value,void s({chapterId:t?parseInt(t):null});var t},disabled:a||N.chapters,children:[(0,Le.jsx)("option",{value:"",children:"Select Chapter"}),y.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]}),N.chapters&&(0,Le.jsx)("div",{className:"loading-indicator",children:"Loading..."})]}),(t.courseTypeId||t.courseId||t.subjectId||t.topicId||t.moduleId||t.chapterId)&&(0,Le.jsxs)("div",{className:"applied-filters",children:[(0,Le.jsx)("h5",{children:"Applied Academic Filters:"}),(0,Le.jsxs)("div",{className:"filter-tags",children:[t.courseTypeId&&(0,Le.jsxs)("span",{className:"filter-tag",children:["Type: ",(e=>{const t=i.find(t=>t.id===e);return t?t.name:"Unknown"})(t.courseTypeId),(0,Le.jsx)("button",{type:"button",onClick:()=>R(null),className:"remove-tag",children:"\u2715"})]}),(t.subjectId||t.topicId||t.moduleId||t.chapterId)&&(0,Le.jsxs)("span",{className:"filter-tag",children:["Hierarchy: ",[t.chapterId&&"Chapter",t.moduleId&&"Module",t.topicId&&"Topic",t.subjectId&&"Subject"].filter(Boolean).join(" \u2192 "),(0,Le.jsx)("button",{type:"button",onClick:()=>{s({subjectId:null,topicId:null,moduleId:null,chapterId:null})},className:"remove-tag",children:"\u2715"})]})]})]})]})},it=e=>{let{filters:t,onFilterChange:s,isLoading:a}=e;const[r,i]=(0,n.useState)(""),l=(0,n.useCallback)((()=>{let e;return t=>{clearTimeout(e),e=setTimeout(()=>{s({questionTextSearch:t})},300)}})(),[s]),o=e=>{let t;t="all"===e?null:"active"===e,s({isActive:t})},c=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"easy":return"#10b981";case"medium":return"#f59e0b";case"hard":return"#ef4444";default:return"#6b7280"}};return(0,Le.jsxs)("div",{className:"basic-filters",children:[(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{className:"filter-label",children:"Status"}),(0,Le.jsxs)("div",{className:"radio-group",children:[(0,Le.jsxs)("label",{className:"radio-option",children:[(0,Le.jsx)("input",{type:"radio",name:"activeStatus",value:"all",checked:null===t.isActive,onChange:()=>o("all"),disabled:a}),(0,Le.jsx)("span",{className:"radio-label",children:"All"})]}),(0,Le.jsxs)("label",{className:"radio-option",children:[(0,Le.jsx)("input",{type:"radio",name:"activeStatus",value:"active",checked:!0===t.isActive,onChange:()=>o("active"),disabled:a}),(0,Le.jsx)("span",{className:"radio-label active",children:"Active"})]}),(0,Le.jsxs)("label",{className:"radio-option",children:[(0,Le.jsx)("input",{type:"radio",name:"activeStatus",value:"inactive",checked:!1===t.isActive,onChange:()=>o("inactive"),disabled:a}),(0,Le.jsx)("span",{className:"radio-label inactive",children:"Inactive"})]})]})]}),(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{className:"filter-label",children:"Question Type"}),(0,Le.jsxs)("select",{className:"filter-select",value:t.questionType||"",onChange:e=>{return t=e.target.value,void s({questionType:t});var t},disabled:a,children:[(0,Le.jsx)("option",{value:"",children:"All Types"}),(0,Le.jsx)("option",{value:"MULTIPLE_CHOICE",children:"Multiple Choice"}),(0,Le.jsx)("option",{value:"TRUE_FALSE",children:"True/False"}),(0,Le.jsx)("option",{value:"FILL_IN_BLANK",children:"Fill in the Blank"}),(0,Le.jsx)("option",{value:"SHORT_ANSWER",children:"Short Answer"}),(0,Le.jsx)("option",{value:"ESSAY",children:"Essay"})]})]}),(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{className:"filter-label",children:"Difficulty Level"}),(0,Le.jsx)("div",{className:"checkbox-group",children:["EASY","MEDIUM","HARD"].map(e=>{var n,r;return(0,Le.jsxs)("label",{className:"checkbox-option",children:[(0,Le.jsx)("input",{type:"checkbox",checked:(null===(n=t.difficultyLevels)||void 0===n?void 0:n.includes(e))||!1,onChange:()=>(e=>{const a=t.difficultyLevels||[];let n;n=a.includes(e)?a.filter(t=>t!==e):[...a,e],s({difficultyLevels:n})})(e),disabled:a}),(0,Le.jsx)("span",{className:"checkbox-label",style:{color:c(e),fontWeight:null!==(r=t.difficultyLevels)&&void 0!==r&&r.includes(e)?"600":"400"},children:e})]},e)})})]}),(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{className:"filter-label",children:"Quick Search"}),(0,Le.jsxs)("div",{className:"search-input-container",children:[(0,Le.jsx)("input",{type:"text",placeholder:"Search question text...",value:r,onChange:e=>{const t=e.target.value;i(t),l(t)},disabled:a,className:"search-input"}),r&&(0,Le.jsx)("button",{type:"button",className:"clear-search-btn",onClick:()=>{i(""),s({questionTextSearch:""})},title:"Clear search",children:"\u2715"})]})]}),(t.questionType||t.difficultyLevels&&t.difficultyLevels.length>0||1!==t.minMarks||10!==t.maxMarks)&&(0,Le.jsx)("div",{className:"applied-filters",children:(0,Le.jsxs)("div",{className:"filter-tags",children:[t.questionType&&(0,Le.jsxs)("span",{className:"filter-tag",children:[t.questionType.replace("_"," "),(0,Le.jsx)("button",{type:"button",onClick:()=>s({questionType:""}),className:"remove-tag",children:"\xd7"})]}),t.difficultyLevels&&t.difficultyLevels.length>0&&(0,Le.jsxs)("span",{className:"filter-tag",children:[t.difficultyLevels.join(", "),(0,Le.jsx)("button",{type:"button",onClick:()=>s({difficultyLevels:[]}),className:"remove-tag",children:"\xd7"})]}),(1!==t.minMarks||10!==t.maxMarks)&&(0,Le.jsxs)("span",{className:"filter-tag",children:[t.minMarks,"-",t.maxMarks," marks",(0,Le.jsx)("button",{type:"button",onClick:()=>s({minMarks:1,maxMarks:10}),className:"remove-tag",children:"\xd7"})]})]})})]})},lt=e=>{var t,s,a;let{filters:r,onFilterChange:i,isLoading:l}=e;const{token:o}=(0,Pe.nm)(),[c,d]=(0,n.useState)([]),[u,p]=(0,n.useState)({masterExams:!1}),[m,h]=(0,n.useState)({examDropdown:!1}),f=(0,n.useCallback)(async()=>{if(o){p(e=>(0,Ue.A)((0,Ue.A)({},e),{},{masterExams:!0}));try{const e=await fetch("/api/public/master-exams/kv",{headers:{Authorization:"Bearer ".concat(o)}}),t=await e.json();Array.isArray(t)?d(t):t.content&&d(t.content)}catch(e){console.error("Error fetching master exams:",e),d([{id:1,name:"JEE Main",conductingBody:"NTA"},{id:2,name:"NEET",conductingBody:"NTA"},{id:3,name:"GATE",conductingBody:"IIT"},{id:4,name:"UPSC",conductingBody:"UPSC"},{id:5,name:"SSC CGL",conductingBody:"SSC"},{id:6,name:"IBPS PO",conductingBody:"IBPS"},{id:7,name:"CAT",conductingBody:"IIM"},{id:8,name:"XAT",conductingBody:"XLRI"}])}finally{p(e=>(0,Ue.A)((0,Ue.A)({},e),{},{masterExams:!1}))}}},[o]);(0,n.useEffect)(()=>{f()},[f]);const x=e=>{const t=r.examIds||[];let s;s=t.includes(e)?t.filter(t=>t!==e):[...t,e],i({examIds:s})};(0,n.useEffect)(()=>{const e=e=>{e.target.closest(".multi-select-dropdown")||h({examDropdown:!1})};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);return(0,Le.jsxs)("div",{className:"exam-suitability-filters",children:[(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{className:"filter-label",children:"Master Exams"}),(0,Le.jsxs)("div",{className:"multi-select-dropdown",children:[(0,Le.jsxs)("div",{className:"multi-select-trigger",onClick:()=>{return e="examDropdown",void h(t=>(0,Ue.A)((0,Ue.A)({},t),{},{[e]:!t[e]}));var e},children:[(0,Le.jsx)("span",{className:"selected-text",children:(null===(t=r.examIds)||void 0===t?void 0:t.length)>0?"".concat(r.examIds.length," exams selected"):"Select exams..."}),(0,Le.jsx)("span",{className:"dropdown-arrow ".concat(m.examDropdown?"open":""),children:"\u25bc"})]}),m.examDropdown&&(0,Le.jsx)("div",{className:"multi-select-options",children:u.masterExams?(0,Le.jsx)("div",{className:"loading-option",children:"Loading exams..."}):c.map(e=>{var t;return(0,Le.jsxs)("label",{className:"multi-select-option",children:[(0,Le.jsx)("input",{type:"checkbox",checked:(null===(t=r.examIds)||void 0===t?void 0:t.includes(e.id))||!1,onChange:()=>x(e.id),disabled:l}),(0,Le.jsx)("span",{className:"option-text",children:e.name}),(0,Le.jsxs)("span",{className:"option-meta",children:["(",e.conductingBody,")"]})]},e.id)})})]}),(null===(s=r.examIds)||void 0===s?void 0:s.length)>0&&(0,Le.jsx)("div",{className:"selected-items",children:r.examIds.map(e=>{const t=c.find(t=>t.id===e);return t?(0,Le.jsxs)("span",{className:"selected-tag",children:[t.name,(0,Le.jsx)("button",{type:"button",onClick:()=>x(e),className:"remove-tag",disabled:l,children:"\u2715"})]},e):null})})]}),(null===(a=r.examIds)||void 0===a?void 0:a.length)>0&&(0,Le.jsxs)("div",{className:"applied-filters",children:[(0,Le.jsx)("h5",{children:"Applied Exam Suitability Filters:"}),(0,Le.jsx)("div",{className:"filter-tags",children:(0,Le.jsxs)("span",{className:"filter-tag",children:["Exams: ",c.filter(e=>{var t;return null===(t=r.examIds)||void 0===t?void 0:t.includes(e.id)}).map(e=>e.name).join(", "),(0,Le.jsx)("button",{type:"button",onClick:()=>i({examIds:[]}),className:"remove-tag",children:"\u2715"})]})})]})]})},ot=e=>{var t,s,a,r,i,l,o,c;let{filters:d,onFilterChange:u,isLoading:p}=e;const{token:m}=(0,Pe.nm)(),[h,f]=(0,n.useState)([]),[x,g]=(0,n.useState)([]),[v,b]=(0,n.useState)({masterExams:!1,years:!1}),[y,j]=(0,n.useState)({examDropdown:!1,yearDropdown:!1}),N=(0,n.useCallback)(async()=>{if(m){b(e=>(0,Ue.A)((0,Ue.A)({},e),{},{masterExams:!0}));try{const e=await fetch("/api/public/master-exams/kv",{headers:{Authorization:"Bearer ".concat(m)}}),t=await e.json();Array.isArray(t)?f(t):t.content&&f(t.content)}catch(e){console.error("Error fetching master exams:",e),f([{id:1,name:"JEE Main",conductingBody:"NTA"},{id:2,name:"NEET",conductingBody:"NTA"},{id:3,name:"GATE",conductingBody:"IIT"},{id:4,name:"UPSC",conductingBody:"UPSC"},{id:5,name:"SSC CGL",conductingBody:"SSC"},{id:6,name:"IBPS PO",conductingBody:"IBPS"},{id:7,name:"CAT",conductingBody:"IIM"},{id:8,name:"XAT",conductingBody:"XLRI"}])}finally{b(e=>(0,Ue.A)((0,Ue.A)({},e),{},{masterExams:!1}))}}},[m]),w=(0,n.useCallback)(async()=>{if(m){b(e=>(0,Ue.A)((0,Ue.A)({},e),{},{years:!0}));try{const e=await fetch("/api/public/years/kv",{headers:{Authorization:"Bearer ".concat(m)}}),t=await e.json();Array.isArray(t)?g(t):t.content&&g(t.content)}catch(e){console.error("Error fetching years:",e);const t=[];for(let s=(new Date).getFullYear();s>=2010;s--)t.push({id:s,name:s.toString()});g(t)}finally{b(e=>(0,Ue.A)((0,Ue.A)({},e),{},{years:!1}))}}},[m]);(0,n.useEffect)(()=>{N(),w()},[N,w]);const k=e=>{const t=d.examIds||[];let s;s=t.includes(e)?t.filter(t=>t!==e):[...t,e],u({examIds:s})},S=e=>{const t=d.appearedYears||[];let s;s=t.includes(e)?t.filter(t=>t!==e):[...t,e],u({appearedYears:s})},C=e=>{j(t=>(0,Ue.A)((0,Ue.A)({},t),{},{[e]:!t[e]}))};(0,n.useEffect)(()=>{const e=e=>{e.target.closest(".multi-select-dropdown")||j({examDropdown:!1,yearDropdown:!1})};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);return(0,Le.jsxs)("div",{className:"previously-asked-filters",children:[(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{className:"filter-label",children:"Exams"}),(0,Le.jsxs)("div",{className:"multi-select-dropdown",children:[(0,Le.jsxs)("div",{className:"multi-select-trigger",onClick:()=>C("examDropdown"),children:[(0,Le.jsx)("span",{className:"selected-text",children:(null===(t=d.examIds)||void 0===t?void 0:t.length)>0?"".concat(d.examIds.length," exams selected"):"Select exams..."}),(0,Le.jsx)("span",{className:"dropdown-arrow ".concat(y.examDropdown?"open":""),children:"\u25bc"})]}),y.examDropdown&&(0,Le.jsx)("div",{className:"multi-select-options",children:v.masterExams?(0,Le.jsx)("div",{className:"loading-option",children:"Loading exams..."}):h.map(e=>{var t;return(0,Le.jsxs)("label",{className:"multi-select-option",children:[(0,Le.jsx)("input",{type:"checkbox",checked:(null===(t=d.examIds)||void 0===t?void 0:t.includes(e.id))||!1,onChange:()=>k(e.id),disabled:p}),(0,Le.jsx)("span",{className:"option-text",children:e.name}),(0,Le.jsxs)("span",{className:"option-meta",children:["(",e.conductingBody,")"]})]},e.id)})})]}),(null===(s=d.examIds)||void 0===s?void 0:s.length)>0&&(0,Le.jsx)("div",{className:"selected-items",children:d.examIds.map(e=>{const t=h.find(t=>t.id===e);return t?(0,Le.jsxs)("span",{className:"selected-tag",children:[t.name,(0,Le.jsx)("button",{type:"button",onClick:()=>k(e),className:"remove-tag",disabled:p,children:"\u2715"})]},e):null})})]}),(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{className:"filter-label",children:"Years"}),(0,Le.jsxs)("div",{className:"multi-select-dropdown",children:[(0,Le.jsxs)("div",{className:"multi-select-trigger",onClick:()=>C("yearDropdown"),children:[(0,Le.jsx)("span",{className:"selected-text",children:(null===(a=d.appearedYears)||void 0===a?void 0:a.length)>0?"".concat(d.appearedYears.length," years selected"):"Select years..."}),(0,Le.jsx)("span",{className:"dropdown-arrow ".concat(y.yearDropdown?"open":""),children:"\u25bc"})]}),y.yearDropdown&&(0,Le.jsx)("div",{className:"multi-select-options",children:v.years?(0,Le.jsx)("div",{className:"loading-option",children:"Loading years..."}):x.map(e=>{var t;return(0,Le.jsxs)("label",{className:"multi-select-option",children:[(0,Le.jsx)("input",{type:"checkbox",checked:(null===(t=d.appearedYears)||void 0===t?void 0:t.includes(e.id))||!1,onChange:()=>S(e.id),disabled:p}),(0,Le.jsx)("span",{className:"option-text",children:e.name})]},e.id)})})]}),(null===(r=d.appearedYears)||void 0===r?void 0:r.length)>0&&(0,Le.jsx)("div",{className:"selected-items",children:d.appearedYears.map(e=>{const t=x.find(t=>t.id===e);return t?(0,Le.jsxs)("span",{className:"selected-tag",children:[t.name,(0,Le.jsx)("button",{type:"button",onClick:()=>S(e),className:"remove-tag",disabled:p,children:"\u2715"})]},e):null})})]}),((null===(i=d.examIds)||void 0===i?void 0:i.length)>0||(null===(l=d.appearedYears)||void 0===l?void 0:l.length)>0)&&(0,Le.jsxs)("div",{className:"applied-filters",children:[(0,Le.jsx)("h5",{children:"Applied Previously Asked Filters:"}),(0,Le.jsxs)("div",{className:"filter-tags",children:[(null===(o=d.examIds)||void 0===o?void 0:o.length)>0&&(0,Le.jsxs)("span",{className:"filter-tag",children:["Exams: ",h.filter(e=>{var t;return null===(t=d.examIds)||void 0===t?void 0:t.includes(e.id)}).map(e=>e.name).join(", "),(0,Le.jsx)("button",{type:"button",onClick:()=>u({examIds:[]}),className:"remove-tag",children:"\u2715"})]}),(null===(c=d.appearedYears)||void 0===c?void 0:c.length)>0&&(0,Le.jsxs)("span",{className:"filter-tag",children:["Years: ",x.filter(e=>{var t;return null===(t=d.appearedYears)||void 0===t?void 0:t.includes(e.id)}).map(e=>e.name).join(", "),(0,Le.jsx)("button",{type:"button",onClick:()=>u({appearedYears:[]}),className:"remove-tag",children:"\u2715"})]})]})]})]})},ct=e=>{let{filters:t,onFilterChange:s,onResetFilters:a,onLoadPreset:r,onSavePreset:i,savedPresets:l,isLoading:o,isMobile:c,isTablet:d}=e;const[u,p]=(0,n.useState)({basic:!0,academic:!1,examSuitability:!1,previouslyAsked:!1}),m=e=>{p(t=>(0,Ue.A)((0,Ue.A)({},t),{},{[e]:!t[e]}))};return(0,Le.jsxs)("div",{className:"filter-panel ".concat(c?"mobile":""," ").concat(d?"tablet":""),children:[(0,Le.jsxs)("div",{className:"filter-panel-header",children:[(0,Le.jsx)("div",{className:"header-content",children:(0,Le.jsx)("h3",{children:"Question Filters"})}),(0,Le.jsxs)("div",{className:"header-actions",children:[(0,Le.jsx)("button",{type:"button",className:"btn btn-outline btn-xs",onClick:()=>{p({basic:!0,academic:!0,examSuitability:!0,previouslyAsked:!0})},title:"Expand all sections",children:"Expand All"}),(0,Le.jsx)("button",{type:"button",className:"btn btn-outline btn-xs",onClick:()=>{p({basic:!1,academic:!1,examSuitability:!1,previouslyAsked:!1})},title:"Collapse all sections",children:"Collapse All"})]})]}),(0,Le.jsxs)("div",{className:"filter-panel-content",children:[(0,Le.jsx)(nt,{savedPresets:l,onLoadPreset:r,onSavePreset:i,currentFilters:t,isLoading:o}),(0,Le.jsxs)("div",{className:"filter-section",children:[(0,Le.jsxs)("div",{className:"filter-section-header",onClick:()=>m("basic"),children:[(0,Le.jsx)("h4",{children:"Basic Filters"}),(0,Le.jsx)("span",{className:"expand-icon ".concat(u.basic?"expanded":""),children:"\u25bc"})]}),u.basic&&(0,Le.jsx)("div",{className:"filter-section-content",children:(0,Le.jsx)(it,{filters:t.basic,onFilterChange:e=>s("basic",e),isLoading:o})})]}),(0,Le.jsxs)("div",{className:"filter-section",children:[(0,Le.jsxs)("div",{className:"filter-section-header",onClick:()=>m("academic"),children:[(0,Le.jsx)("h4",{children:"Academic Level"}),(0,Le.jsx)("span",{className:"expand-icon ".concat(u.academic?"expanded":""),children:"\u25bc"})]}),u.academic&&(0,Le.jsx)("div",{className:"filter-section-content",children:(0,Le.jsx)(rt,{filters:t.academic,onFilterChange:e=>s("academic",e),isLoading:o})})]}),(0,Le.jsxs)("div",{className:"filter-section",children:[(0,Le.jsxs)("div",{className:"filter-section-header",onClick:()=>m("examSuitability"),children:[(0,Le.jsx)("h4",{children:"Exam Suitability"}),(0,Le.jsx)("span",{className:"expand-icon ".concat(u.examSuitability?"expanded":""),children:"\u25bc"})]}),u.examSuitability&&(0,Le.jsx)("div",{className:"filter-section-content",children:(0,Le.jsx)(lt,{filters:t.examSuitability,onFilterChange:e=>s("examSuitability",e),isLoading:o})})]}),(0,Le.jsxs)("div",{className:"filter-section",children:[(0,Le.jsxs)("div",{className:"filter-section-header",onClick:()=>m("previouslyAsked"),children:[(0,Le.jsx)("h4",{children:"Previously Asked"}),(0,Le.jsx)("span",{className:"expand-icon ".concat(u.previouslyAsked?"expanded":""),children:"\u25bc"})]}),u.previouslyAsked&&(0,Le.jsx)("div",{className:"filter-section-content",children:(0,Le.jsx)(ot,{filters:t.previouslyAsked,onFilterChange:e=>s("previouslyAsked",e),isLoading:o})})]})]})]})},dt=e=>{let{selectedCount:t,totalCount:s,onSelectAll:a,onBulkAction:n,onClearSelection:r}=e;const i=t===s,l=e=>{n(e)};return(0,Le.jsx)("div",{className:"bulk-actions-bar",children:(0,Le.jsxs)("div",{className:"bulk-actions-content",children:[(0,Le.jsxs)("div",{className:"selection-info",children:[(0,Le.jsxs)("span",{className:"selection-count",children:[t," of ",s," questions selected"]}),(0,Le.jsx)("button",{type:"button",className:"select-all-btn",onClick:a,children:i?"Deselect All":"Select All"})]}),(0,Le.jsxs)("div",{className:"bulk-actions-buttons",children:[(0,Le.jsxs)("div",{className:"action-group",children:[(0,Le.jsx)("span",{className:"action-label",children:"Status:"}),(0,Le.jsx)("button",{type:"button",className:"bulk-action-btn status-btn",onClick:()=>l("activate"),title:"Activate selected questions",children:"\u2705 Activate"}),(0,Le.jsx)("button",{type:"button",className:"bulk-action-btn status-btn",onClick:()=>l("deactivate"),title:"Deactivate selected questions",children:"\u274c Deactivate"})]}),(0,Le.jsxs)("div",{className:"action-group",children:[(0,Le.jsx)("span",{className:"action-label",children:"Organization:"}),(0,Le.jsx)("button",{type:"button",className:"bulk-action-btn organization-btn",onClick:()=>l("addTags"),title:"Add tags to selected questions",children:"\ud83c\udff7\ufe0f Add Tags"}),(0,Le.jsx)("button",{type:"button",className:"bulk-action-btn organization-btn",onClick:()=>l("moveToTopic"),title:"Move to different topic",children:"\ud83d\udcc1 Move to Topic"})]}),(0,Le.jsxs)("div",{className:"action-group",children:[(0,Le.jsx)("span",{className:"action-label",children:"Export:"}),(0,Le.jsx)("button",{type:"button",className:"bulk-action-btn export-btn",onClick:()=>l("exportCSV"),title:"Export selected questions as CSV",children:"\ud83d\udcca Export CSV"}),(0,Le.jsx)("button",{type:"button",className:"bulk-action-btn export-btn",onClick:()=>l("exportPDF"),title:"Export selected questions as PDF",children:"\ud83d\udcc4 Export PDF"})]}),(0,Le.jsxs)("div",{className:"action-group",children:[(0,Le.jsx)("span",{className:"action-label",children:"Actions:"}),(0,Le.jsx)("button",{type:"button",className:"bulk-action-btn action-btn",onClick:()=>l("duplicate"),title:"Duplicate selected questions",children:"\ud83d\udccb Duplicate"}),(0,Le.jsx)("button",{type:"button",className:"bulk-action-btn danger-btn",onClick:()=>l("delete"),title:"Delete selected questions",children:"\ud83d\uddd1\ufe0f Delete"})]})]}),(0,Le.jsx)("div",{className:"bulk-actions-close",children:(0,Le.jsx)("button",{type:"button",className:"close-btn",onClick:r,title:"Clear selection",children:"\u2715"})})]})})},ut=e=>{let{questions:t,totalCount:s,isLoading:a,filters:r,onPageChange:i,onPageSizeChange:l,onViewDetails:o,displayMode:c="grid"}=e;const[d,u]=(0,n.useState)([]),[p,m]=(0,n.useState)("table"===c?"table":"grid"),[h,f]=(0,n.useState)("createdAt"),[x,g]=(0,n.useState)("desc"),v=(e,t)=>{u(t?t=>[...t,e]:t=>t.filter(t=>t!==e))},b=n.useMemo(()=>t&&0!==t.length?[...t].sort((e,t)=>{let s,a;switch(h){case"name":s=e.questionText||"",a=t.questionText||"";break;case"marks":s=e.marks||0,a=t.marks||0;break;default:s=new Date(e.createdAt||0),a=new Date(t.createdAt||0)}return"asc"===x?s>a?1:-1:s<a?1:-1}):t,[t,h,x]),y=r.page||0,j=r.size||20,N=Math.ceil(s/j),w=y*j+1,k=Math.min((y+1)*j,s),S=e=>{e>=0&&e<N&&i(e)};return a?(0,Le.jsxs)("div",{className:"question-results",children:[(0,Le.jsx)("div",{className:"results-header",children:(0,Le.jsx)("h3",{children:"Question Results"})}),(0,Le.jsxs)("div",{className:"loading-state",children:[(0,Le.jsx)("div",{className:"loading-spinner"}),(0,Le.jsx)("p",{children:"Loading questions..."})]})]}):(0,Le.jsxs)("div",{className:"question-results",children:[(0,Le.jsxs)("div",{className:"results-header",children:[(0,Le.jsxs)("div",{className:"header-info",children:[(0,Le.jsx)("h3",{children:"Question Results"}),(0,Le.jsxs)("p",{className:"results-count",children:["Showing ",w,"-",k," of ",s," questions"]})]}),(0,Le.jsxs)("div",{className:"header-controls",children:[(0,Le.jsxs)("div",{className:"view-mode-toggle",children:[(0,Le.jsx)("button",{type:"button",className:"view-btn ".concat("grid"===p?"active":""),onClick:()=>m("grid"),title:"Grid view",children:"\u229e"}),(0,Le.jsx)("button",{type:"button",className:"view-btn ".concat("list"===p?"active":""),onClick:()=>m("list"),title:"List view",children:"\u2630"}),(0,Le.jsx)("button",{type:"button",className:"view-btn ".concat("table"===p?"active":""),onClick:()=>m("table"),title:"Table view",children:"\u2261"})]}),(0,Le.jsxs)("div",{className:"sort-controls",children:[(0,Le.jsxs)("select",{className:"sort-select",value:h,onChange:e=>f(e.target.value),children:[(0,Le.jsx)("option",{value:"createdAt",children:"Date Created"}),(0,Le.jsx)("option",{value:"name",children:"Question Text"}),(0,Le.jsx)("option",{value:"marks",children:"Marks"})]}),(0,Le.jsx)("button",{type:"button",className:"sort-order-btn",onClick:()=>g("asc"===x?"desc":"asc"),title:"Sort ".concat("asc"===x?"descending":"ascending"),children:"asc"===x?"\u2191":"\u2193"})]})]})]}),d.length>0&&(0,Le.jsx)(dt,{selectedCount:d.length,totalCount:t.length,onSelectAll:()=>{d.length===t.length?u([]):u(t.map(e=>e.id))},onBulkAction:e=>{console.log("Bulk action: ".concat(e),d)},onClearSelection:()=>u([])}),(0,Le.jsx)("div",{className:"results-content",children:0===t.length?(0,Le.jsxs)("div",{className:"empty-state",children:[(0,Le.jsx)("h4",{children:"No questions found"}),(0,Le.jsx)("p",{children:"Try adjusting your filters or search criteria to find more questions."}),(0,Le.jsx)("div",{className:"empty-actions",children:(0,Le.jsx)("button",{type:"button",className:"btn btn-primary",onClick:()=>{console.log("Reset filters")},children:"Clear All Filters"})})]}):"table"===p?(0,Le.jsx)("div",{className:"questions-table-wrapper",children:(0,Le.jsxs)("table",{className:"questions-table",children:[(0,Le.jsx)("thead",{children:(0,Le.jsxs)("tr",{children:[(0,Le.jsx)("th",{children:"ID"}),(0,Le.jsx)("th",{children:"Question"}),(0,Le.jsx)("th",{children:"Type"}),(0,Le.jsx)("th",{children:"Difficulty"}),(0,Le.jsx)("th",{children:"Marks"}),(0,Le.jsx)("th",{children:"Subject"}),(0,Le.jsx)("th",{children:"Created"}),(0,Le.jsx)("th",{children:"Actions"})]})}),(0,Le.jsx)("tbody",{children:b.map(e=>(0,Le.jsxs)("tr",{children:[(0,Le.jsx)("td",{children:e.id}),(0,Le.jsxs)("td",{title:e.questionText,children:[(e.questionText||"").slice(0,80),(e.questionText||"").length>80?"\u2026":""]}),(0,Le.jsx)("td",{children:e.questionType}),(0,Le.jsx)("td",{children:e.difficultyLevel}),(0,Le.jsx)("td",{children:e.marks}),(0,Le.jsx)("td",{children:e.subjectName||"-"}),(0,Le.jsx)("td",{children:e.createdAt?new Date(e.createdAt).toLocaleDateString():"-"}),(0,Le.jsx)("td",{children:(0,Le.jsx)("button",{type:"button",className:"btn btn-primary btn-xs",onClick:()=>o&&o(e),title:"View Details",children:"View"})})]},e.id))})]})}):(0,Le.jsx)("div",{className:"questions-container ".concat(p),children:b.map(e=>(0,Le.jsxs)("div",{className:"question-item",children:[d.length>0&&(0,Le.jsx)("div",{className:"selection-checkbox",children:(0,Le.jsx)("input",{type:"checkbox",checked:d.includes(e.id),onChange:t=>v(e.id,t.target.checked)})}),(0,Le.jsx)(tt,{question:e,onSelect:v,isSelected:d.includes(e.id),viewMode:p,onViewDetails:o})]},e.id))})}),N>1&&(0,Le.jsxs)("div",{className:"pagination",children:[(0,Le.jsx)("div",{className:"pagination-info",children:(0,Le.jsxs)("span",{children:["Page ",y+1," of ",N]})}),(0,Le.jsxs)("div",{className:"pagination-controls",children:[(0,Le.jsx)("button",{type:"button",className:"pagination-btn",onClick:()=>S(0),disabled:0===y,children:"\u23ee\ufe0f First"}),(0,Le.jsx)("button",{type:"button",className:"pagination-btn",onClick:()=>S(y-1),disabled:0===y,children:"\u25c0\ufe0f Previous"}),(0,Le.jsx)("div",{className:"page-numbers",children:Array.from({length:Math.min(5,N)},(e,t)=>{let s;return s=N<=5||y<=2?t:y>=N-3?N-5+t:y-2+t,(0,Le.jsx)("button",{type:"button",className:"pagination-btn page-number ".concat(y===s?"active":""),onClick:()=>S(s),children:s+1},s)})}),(0,Le.jsx)("button",{type:"button",className:"pagination-btn",onClick:()=>S(y+1),disabled:y>=N-1,children:"Next \u25b6\ufe0f"}),(0,Le.jsx)("button",{type:"button",className:"pagination-btn",onClick:()=>S(N-1),disabled:y>=N-1,children:"Last \u23ed\ufe0f"})]}),(0,Le.jsx)("div",{className:"pagination-size",children:(0,Le.jsxs)("select",{className:"page-size-select",value:j,onChange:e=>{return t=parseInt(e.target.value),void l(t);var t},children:[(0,Le.jsx)("option",{value:10,children:"10 per page"}),(0,Le.jsx)("option",{value:20,children:"20 per page"}),(0,Le.jsx)("option",{value:50,children:"50 per page"}),(0,Le.jsx)("option",{value:100,children:"100 per page"})]})})]}),(0,Le.jsx)("div",{className:"results-summary",children:(0,Le.jsxs)("div",{className:"summary-stats",children:[(0,Le.jsxs)("div",{className:"stat-item",children:[(0,Le.jsx)("span",{className:"stat-label",children:"Total Results:"}),(0,Le.jsx)("span",{className:"stat-value",children:s})]}),(0,Le.jsxs)("div",{className:"stat-item",children:[(0,Le.jsx)("span",{className:"stat-label",children:"Selected:"}),(0,Le.jsx)("span",{className:"stat-value",children:d.length})]}),(0,Le.jsxs)("div",{className:"stat-item",children:[(0,Le.jsx)("span",{className:"stat-label",children:"View Mode:"}),(0,Le.jsx)("span",{className:"stat-value",children:"grid"===p?"Grid":"List"})]}),(0,Le.jsxs)("div",{className:"stat-item",children:[(0,Le.jsx)("span",{className:"stat-label",children:"Sorted By:"}),(0,Le.jsxs)("span",{className:"stat-value",children:["createdAt"===h?"Date Created":"name"===h?"Question Text":"Marks","(","asc"===x?"A-Z":"Z-A",")"]})]})]})})]})},pt={basic:{isActive:null,questionType:"",difficultyLevels:[],minMarks:1,maxMarks:10},academic:{courseTypeId:null,relationshipId:null,subjectId:null,topicId:null,moduleId:null,chapterId:null},examSuitability:{examIds:[],suitabilityLevels:[],examTypes:[],conductingBodies:[]},previouslyAsked:{examIds:[],appearedYears:[],sessions:[],minMarksInExam:null,maxMarksInExam:null,questionNumbers:[]},searchDate:{questionTextSearch:"",explanationSearch:"",dateFrom:null,dateTo:null,page:0,size:20},presets:{saved:[],active:null}},mt=(e,t)=>{switch(t.type){case"UPDATE_BASIC":return(0,Ue.A)((0,Ue.A)({},e),{},{basic:(0,Ue.A)((0,Ue.A)({},e.basic),t.payload)});case"UPDATE_ACADEMIC":return(0,Ue.A)((0,Ue.A)({},e),{},{academic:(0,Ue.A)((0,Ue.A)({},e.academic),t.payload)});case"UPDATE_EXAM_SUITABILITY":return(0,Ue.A)((0,Ue.A)({},e),{},{examSuitability:(0,Ue.A)((0,Ue.A)({},e.examSuitability),t.payload)});case"UPDATE_PREVIOUSLY_ASKED":return(0,Ue.A)((0,Ue.A)({},e),{},{previouslyAsked:(0,Ue.A)((0,Ue.A)({},e.previouslyAsked),t.payload)});case"UPDATE_SEARCH_DATE":return(0,Ue.A)((0,Ue.A)({},e),{},{searchDate:(0,Ue.A)((0,Ue.A)({},e.searchDate),t.payload)});case"RESET_FILTERS":return(0,Ue.A)((0,Ue.A)({},pt),{},{presets:e.presets});case"LOAD_PRESET":return(0,Ue.A)((0,Ue.A)({},t.payload),{},{presets:e.presets});case"UPDATE_PRESETS":return(0,Ue.A)((0,Ue.A)({},e),{},{presets:(0,Ue.A)((0,Ue.A)({},e.presets),t.payload)});default:return e}},ht=e=>{let{onBackToDashboard:t,onViewDetails:s}=e;const{addNotification:a,token:r}=(0,Pe.nm)(),[i,l]=(0,n.useReducer)(mt,pt),[o,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)([]),[p,m]=(0,n.useState)(0),{syncFiltersToURL:h,loadFiltersFromURL:f}=(()=>{const e=ee(),t=se();return{syncFiltersToURL:(0,n.useCallback)(s=>{try{const p=new URLSearchParams;var a,n,r,i,l,o,c,d,u;s.basic&&(null!==s.basic.isActive&&p.set("isActive",s.basic.isActive.toString()),s.basic.questionType&&p.set("questionType",s.basic.questionType),(null===(a=s.basic.difficultyLevels)||void 0===a?void 0:a.length)>0&&p.set("difficultyLevels",s.basic.difficultyLevels.join(",")),1!==s.basic.minMarks&&p.set("minMarks",s.basic.minMarks.toString()),10!==s.basic.maxMarks&&p.set("maxMarks",s.basic.maxMarks.toString())),s.academic&&(s.academic.courseTypeId&&p.set("courseTypeId",s.academic.courseTypeId.toString()),s.academic.courseId&&p.set("courseId",s.academic.courseId.toString()),s.academic.relationshipId&&p.set("relationshipId",s.academic.relationshipId.toString()),s.academic.subjectId&&p.set("subjectId",s.academic.subjectId.toString()),s.academic.topicId&&p.set("topicId",s.academic.topicId.toString()),s.academic.moduleId&&p.set("moduleId",s.academic.moduleId.toString()),s.academic.chapterId&&p.set("chapterId",s.academic.chapterId.toString())),s.examSuitability&&((null===(n=s.examSuitability.examIds)||void 0===n?void 0:n.length)>0&&p.set("examIds",s.examSuitability.examIds.join(",")),(null===(r=s.examSuitability.suitabilityLevels)||void 0===r?void 0:r.length)>0&&p.set("suitabilityLevels",s.examSuitability.suitabilityLevels.join(",")),(null===(i=s.examSuitability.examTypes)||void 0===i?void 0:i.length)>0&&p.set("examTypes",s.examSuitability.examTypes.join(",")),(null===(l=s.examSuitability.conductingBodies)||void 0===l?void 0:l.length)>0&&p.set("conductingBodies",s.examSuitability.conductingBodies.join(","))),s.previouslyAsked&&((null===(o=s.previouslyAsked.examIds)||void 0===o?void 0:o.length)>0&&p.set("prevExamIds",s.previouslyAsked.examIds.join(",")),(null===(c=s.previouslyAsked.appearedYears)||void 0===c?void 0:c.length)>0&&p.set("appearedYears",s.previouslyAsked.appearedYears.join(",")),(null===(d=s.previouslyAsked.sessions)||void 0===d?void 0:d.length)>0&&p.set("sessions",s.previouslyAsked.sessions.join(",")),null!==s.previouslyAsked.minMarksInExam&&p.set("minMarksInExam",s.previouslyAsked.minMarksInExam.toString()),null!==s.previouslyAsked.maxMarksInExam&&p.set("maxMarksInExam",s.previouslyAsked.maxMarksInExam.toString()),(null===(u=s.previouslyAsked.questionNumbers)||void 0===u?void 0:u.length)>0&&p.set("questionNumbers",s.previouslyAsked.questionNumbers.join(","))),s.searchDate&&(s.searchDate.questionTextSearch&&p.set("questionTextSearch",s.searchDate.questionTextSearch),s.searchDate.explanationSearch&&p.set("explanationSearch",s.searchDate.explanationSearch),s.searchDate.dateFrom&&p.set("dateFrom",s.searchDate.dateFrom),s.searchDate.dateTo&&p.set("dateTo",s.searchDate.dateTo),0!==s.searchDate.page&&p.set("page",s.searchDate.page.toString()),20!==s.searchDate.size&&p.set("size",s.searchDate.size.toString()));const m=p.toString(),h="".concat(e.pathname).concat(m?"?".concat(m):"");h!==e.pathname+e.search&&t(h,{replace:!0})}catch(p){console.error("Error syncing filters to URL:",p)}},[e.pathname,e.search,t]),loadFiltersFromURL:(0,n.useCallback)(()=>{try{const t=new URLSearchParams(e.search),s={basic:{},academic:{},examSuitability:{},previouslyAsked:{},searchDate:{}};if(t.has("isActive")){const e=t.get("isActive");s.basic.isActive="true"===e||"false"!==e&&null}return t.has("questionType")&&(s.basic.questionType=t.get("questionType")),t.has("difficultyLevels")&&(s.basic.difficultyLevels=t.get("difficultyLevels").split(",")),t.has("minMarks")&&(s.basic.minMarks=parseInt(t.get("minMarks"))),t.has("maxMarks")&&(s.basic.maxMarks=parseInt(t.get("maxMarks"))),t.has("courseTypeId")&&(s.academic.courseTypeId=parseInt(t.get("courseTypeId"))),t.has("courseId")&&(s.academic.courseId=parseInt(t.get("courseId"))),t.has("relationshipId")&&(s.academic.relationshipId=parseInt(t.get("relationshipId"))),t.has("subjectId")&&(s.academic.subjectId=parseInt(t.get("subjectId"))),t.has("topicId")&&(s.academic.topicId=parseInt(t.get("topicId"))),t.has("moduleId")&&(s.academic.moduleId=parseInt(t.get("moduleId"))),t.has("chapterId")&&(s.academic.chapterId=parseInt(t.get("chapterId"))),t.has("examIds")&&(s.examSuitability.examIds=t.get("examIds").split(",").map(e=>parseInt(e))),t.has("suitabilityLevels")&&(s.examSuitability.suitabilityLevels=t.get("suitabilityLevels").split(",")),t.has("examTypes")&&(s.examSuitability.examTypes=t.get("examTypes").split(",")),t.has("conductingBodies")&&(s.examSuitability.conductingBodies=t.get("conductingBodies").split(",").map(e=>parseInt(e))),t.has("prevExamIds")&&(s.previouslyAsked.examIds=t.get("prevExamIds").split(",").map(e=>parseInt(e))),t.has("appearedYears")&&(s.previouslyAsked.appearedYears=t.get("appearedYears").split(",").map(e=>parseInt(e))),t.has("sessions")&&(s.previouslyAsked.sessions=t.get("sessions").split(",")),t.has("minMarksInExam")&&(s.previouslyAsked.minMarksInExam=parseInt(t.get("minMarksInExam"))),t.has("maxMarksInExam")&&(s.previouslyAsked.maxMarksInExam=parseInt(t.get("maxMarksInExam"))),t.has("questionNumbers")&&(s.previouslyAsked.questionNumbers=t.get("questionNumbers").split(",")),t.has("questionTextSearch")&&(s.searchDate.questionTextSearch=t.get("questionTextSearch")),t.has("explanationSearch")&&(s.searchDate.explanationSearch=t.get("explanationSearch")),t.has("dateFrom")&&(s.searchDate.dateFrom=t.get("dateFrom")),t.has("dateTo")&&(s.searchDate.dateTo=t.get("dateTo")),t.has("page")&&(s.searchDate.page=parseInt(t.get("page"))),t.has("size")&&(s.searchDate.size=parseInt(t.get("size"))),Object.values(s).some(e=>Object.keys(e).length>0)?s:null}catch(t){return console.error("Error loading filters from URL:",t),null}},[e.search]),clearFiltersFromURL:(0,n.useCallback)(()=>{t(e.pathname,{replace:!0})},[e.pathname,t])}})(),{savedPresets:x,savePreset:g,loadPreset:v,deletePreset:b}=(()=>{const[e,t]=(0,n.useState)([]);(0,n.useEffect)(()=>{try{const e=localStorage.getItem(st);if(e){const s=JSON.parse(e);t(Array.isArray(s)?s:[])}}catch(e){console.error("Error loading filter presets:",e),t([])}},[]),(0,n.useEffect)(()=>{try{localStorage.setItem(st,JSON.stringify(e))}catch(t){console.error("Error saving filter presets:",t)}},[e]);const s=(0,n.useCallback)((s,a)=>{try{if(e.find(e=>e.name.toLowerCase()===s.toLowerCase()))return!1;if(e.length>=at)return!1;const n={id:Date.now().toString(),name:s.trim(),filters:JSON.parse(JSON.stringify(a)),createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};return t(e=>[...e,n]),!0}catch(n){return console.error("Error saving preset:",n),!1}},[e]),a=(0,n.useCallback)(t=>{try{const s=e.find(e=>e.id===t);return s?s.filters:null}catch(s){return console.error("Error loading preset:",s),null}},[e]),r=(0,n.useCallback)((e,s)=>{try{return t(t=>t.map(t=>t.id===e?(0,Ue.A)((0,Ue.A)({},t),{},{filters:JSON.parse(JSON.stringify(s)),updatedAt:(new Date).toISOString()}):t)),!0}catch(a){return console.error("Error updating preset:",a),!1}},[]),i=(0,n.useCallback)(e=>{try{return t(t=>t.filter(t=>t.id!==e)),!0}catch(s){return console.error("Error deleting preset:",s),!1}},[]),l=(0,n.useCallback)((s,a)=>{try{const n=e.find(e=>e.id===s);if(!n)return!1;if(e.find(e=>e.name.toLowerCase()===a.toLowerCase()))return!1;if(e.length>=at)return!1;const r={id:Date.now().toString(),name:a.trim(),filters:JSON.parse(JSON.stringify(n.filters)),createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};return t(e=>[...e,r]),!0}catch(n){return console.error("Error duplicating preset:",n),!1}},[e]),o=(0,n.useCallback)((s,a)=>{try{return!e.find(e=>e.name.toLowerCase()===a.toLowerCase()&&e.id!==s)&&(t(e=>e.map(e=>e.id===s?(0,Ue.A)((0,Ue.A)({},e),{},{name:a.trim(),updatedAt:(new Date).toISOString()}):e)),!0)}catch(n){return console.error("Error renaming preset:",n),!1}},[e]),c=(0,n.useCallback)(()=>{try{return t([]),!0}catch(e){return console.error("Error clearing presets:",e),!1}},[]),d=(0,n.useCallback)(()=>{try{const t=JSON.stringify(e,null,2),s=new Blob([t],{type:"application/json"}),a=URL.createObjectURL(s),n=document.createElement("a");return n.href=a,n.download="question-filter-presets-".concat((new Date).toISOString().split("T")[0],".json"),document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(a),!0}catch(t){return console.error("Error exporting presets:",t),!1}},[e]),u=(0,n.useCallback)(s=>new Promise((a,n)=>{try{const r=new FileReader;r.onload=s=>{try{const r=JSON.parse(s.target.result);if(!Array.isArray(r))return void n(new Error("Invalid preset file format"));const i=r.filter(e=>e.id&&e.name&&e.filters&&e.createdAt);if(0===i.length)return void n(new Error("No valid presets found in file"));if(e.length+i.length>at)return void n(new Error("Import would exceed maximum of ".concat(at," presets")));const l=i.map(e=>(0,Ue.A)((0,Ue.A)({},e),{},{id:Date.now().toString()+Math.random().toString(36).substr(2,9),updatedAt:(new Date).toISOString()}));t(e=>[...e,...l]),a(i.length)}catch(r){n(new Error("Invalid JSON in preset file"))}},r.onerror=()=>{n(new Error("Error reading file"))},r.readAsText(s)}catch(r){n(r)}}),[e]),p=(0,n.useCallback)(()=>({total:e.length,maxAllowed:at,canAddMore:e.length<at,oldestPreset:e.length>0?Math.min(...e.map(e=>new Date(e.createdAt).getTime())):null,newestPreset:e.length>0?Math.max(...e.map(e=>new Date(e.createdAt).getTime())):null}),[e]);return{savedPresets:e,savePreset:s,loadPreset:a,updatePreset:r,deletePreset:i,duplicatePreset:l,renamePreset:o,clearAllPresets:c,exportPresets:d,importPresets:u,getPresetStats:p}})();(0,n.useEffect)(()=>{l({type:"UPDATE_PRESETS",payload:{saved:x,active:i.presets.active}})},[x]),(0,n.useEffect)(()=>{const e=f();e&&Object.keys(e).forEach(t=>{e[t]&&l({type:"UPDATE_".concat(t.toUpperCase()),payload:e[t]})})},[f]),(0,n.useEffect)(()=>{h(i)},[i,h]);const y=(0,n.useCallback)((e,t)=>{l({type:"UPDATE_".concat(e.toUpperCase()),payload:t})},[]),j=(0,n.useCallback)(()=>{l({type:"RESET_FILTERS"})},[]),N=(0,n.useCallback)(e=>{const t=v(e);t&&l({type:"LOAD_PRESET",payload:t})},[v]),w=(0,n.useCallback)(e=>{const t=g(e,i);a(t?{type:"success",message:'Filter preset "'.concat(e,'" saved successfully'),duration:3e3}:{type:"error",message:"Failed to save filter preset",duration:3e3})},[i,g,a]),k=(0,n.useCallback)(async()=>{if(r){c(!0);try{var e,t,s,n,l,o,d,p,h,f,x,g,v,b,y,j,N,w;const a=e=>"string"===typeof e?e.toUpperCase():e,c={isActive:null===(e=i.basic)||void 0===e?void 0:e.isActive,questionType:a((null===(t=i.basic)||void 0===t?void 0:t.questionType)||null),difficultyLevel:Array.isArray(null===(s=i.basic)||void 0===s?void 0:s.difficultyLevels)&&i.basic.difficultyLevels.length>0?a(i.basic.difficultyLevels[0]):null,minMarks:"number"===typeof(null===(n=i.basic)||void 0===n?void 0:n.minMarks)?i.basic.minMarks:null,maxMarks:"number"===typeof(null===(l=i.basic)||void 0===l?void 0:l.maxMarks)?i.basic.maxMarks:null,questionTextSearch:(null===(o=i.basic)||void 0===o?void 0:o.questionTextSearch)||null,explanationSearch:null,courseTypeId:(null===(d=i.academic)||void 0===d?void 0:d.courseTypeId)||null,relationshipId:(null===(p=i.academic)||void 0===p?void 0:p.relationshipId)||null,subjectId:(null===(h=i.academic)||void 0===h?void 0:h.subjectId)||null,topicId:(null===(f=i.academic)||void 0===f?void 0:f.topicId)||null,moduleId:(null===(x=i.academic)||void 0===x?void 0:x.moduleId)||null,chapterId:(null===(g=i.academic)||void 0===g?void 0:g.chapterId)||null,examIds:(null===(v=i.examSuitability)||void 0===v?void 0:v.examIds)||(null===(b=i.previouslyAsked)||void 0===b?void 0:b.examIds)||[],suitabilityLevels:((null===(y=i.examSuitability)||void 0===y?void 0:y.suitabilityLevels)||[]).map(a),appearedYears:(null===(j=i.previouslyAsked)||void 0===j?void 0:j.appearedYears)||[],page:"number"===typeof(null===(N=i.searchDate)||void 0===N?void 0:N.page)?i.searchDate.page:0,size:"number"===typeof(null===(w=i.searchDate)||void 0===w?void 0:w.size)?i.searchDate.size:20};Object.keys(c).forEach(e=>{(null===c[e]||""===c[e]||Array.isArray(c[e])&&0===c[e].length)&&delete c[e]}),console.log("Applying filters:",c);const k=await(0,Xe.$P)("/api/admin/master-data/questions/filter",c,r);if(!k.ok)throw new Error("HTTP error! status: ".concat(k.status));const S=await k.json();Array.isArray(S)?(u(S),m(S.length)):S.content&&Array.isArray(S.content)?(u(S.content),m(S.totalElements||S.content.length)):S.data&&Array.isArray(S.data)?(u(S.data),m(S.total||S.data.length)):(u([]),m(0))}catch(k){console.error("Error applying filters:",k),a({type:"error",message:"Failed to apply filters. Using fallback method.",duration:5e3});try{const e=await(0,Xe.Vg)("/api/admin/master-data/questions",r),t=await e.json();u(Array.isArray(t)?t:t.content||t.data||[]),m(Array.isArray(t)?t.length:t.totalElements||t.total||0)}catch(S){console.error("Fallback also failed:",S),u([]),m(0)}}finally{c(!1)}}},[i,r,a]);(0,n.useEffect)(()=>{const e=setTimeout(()=>{k()},300);return()=>clearTimeout(e)},[k]);const S=window.innerWidth<=768,C=window.innerWidth<=1024;return(0,Le.jsxs)("div",{className:"question-filters-container",children:[(0,Le.jsx)("div",{className:"section-header",style:{display:"flex",justifyContent:"flex-end",borderBottom:"none",marginBottom:0,paddingBottom:8},children:(0,Le.jsxs)("div",{className:"section-actions",style:{display:"flex",gap:8},children:[(0,Le.jsx)("button",{className:"btn btn-outline btn-sm",onClick:j,disabled:o,title:"Reset all filters",children:"Reset"}),(0,Le.jsx)("button",{className:"btn btn-primary btn-sm",onClick:k,disabled:o,title:"Apply filters",children:"Apply"})]})}),(0,Le.jsxs)("div",{className:"filters-layout",style:{paddingTop:8},children:[(0,Le.jsx)(ct,{isOpen:!0,filters:i,onFilterChange:y,onResetFilters:j,onLoadPreset:N,onSavePreset:w,savedPresets:x,isLoading:o,isMobile:S,isTablet:C}),(0,Le.jsx)("div",{className:"results-area",children:(0,Le.jsx)(ut,{questions:d,totalCount:p,isLoading:o,filters:i,onPageChange:e=>{y("searchDate",{page:e})},onPageSizeChange:e=>{y("searchDate",{size:e,page:0})},onViewDetails:s||(e=>console.log("View details clicked:",e)),displayMode:"table"})})]})]})},ft=e=>{let{onBackToDashboard:t}=e;const{addNotification:s,token:a}=(0,Pe.nm)(),{executeApiCall:r}=$e(),{courseTypes:i,fetchCourses:l,fetchClasses:o,fetchExams:c,fetchSubjects:d,fetchTopicsByLinkage:u,fetchModulesByTopic:p,fetchChaptersByModule:m,isAcademicCourseType:h,isCompetitiveCourseType:f,isProfessionalCourseType:x,isAuthenticated:g}=(0,Ke.o)(),v=g,b={questionText:"",questionType:"MCQ",difficultyLevel:"EASY",marks:1,negativeMarks:0,timeLimitSeconds:60,explanation:"",courseTypeId:"",relationshipId:1,courseId:"",classId:"",examId:"",subjectId:"",topicId:"",moduleId:"",chapterId:"",isActive:!0,examSuitabilities:[],examHistories:[],options:[{optionLetter:"A",optionText:"",isCorrect:!0,displayOrder:1},{optionLetter:"B",optionText:"",isCorrect:!1,displayOrder:2},{optionLetter:"C",optionText:"",isCorrect:!1,displayOrder:3},{optionLetter:"D",optionText:"",isCorrect:!1,displayOrder:4}]},{formData:y,errors:j,touched:N,handleInputChange:w,handleBlur:k,validateForm:S,resetForm:C,setFormData:I}=(0,Je.d)(b,{questionText:e=>e?"":"Question text is required",questionType:e=>e?"":"Question type is required",difficultyLevel:e=>e?"":"Difficulty level is required",marks:e=>!e||e<1?"Marks must be at least 1":"",courseTypeId:e=>e?"":"Course Type is required",courseId:e=>e?"":"Course is required",subjectId:e=>e?"":"Subject is required",topicId:e=>e?"":"Topic is required",moduleId:e=>e?"":"Module is required",chapterId:e=>e?"":"Chapter is required"}),[A,E]=(0,n.useState)(!1),[T,P]=(0,n.useState)(null),[L,R]=(0,n.useState)(!1),[M,D]=(0,n.useState)(!1),[F,z]=(0,n.useState)(!1),[O,_]=(0,n.useState)(!1),[q,B]=(0,n.useState)(null),[U,W]=(0,n.useState)(""),[Q,H]=(0,n.useState)(""),[V,Y]=(0,n.useState)(""),[$,J]=(0,n.useState)(""),[K,G]=(0,n.useState)(""),[X,Z]=(0,n.useState)(""),[ee,te]=(0,n.useState)(""),[se,ae]=(0,n.useState)(""),[ne,re]=(0,n.useState)(!0),[ie,le]=(0,n.useState)([]),[oe,ce]=(0,n.useState)([]),[de,ue]=(0,n.useState)([]),[pe,me]=(0,n.useState)([]),[he,fe]=(0,n.useState)([]),[xe,ge]=(0,n.useState)([]),[ve,be]=(0,n.useState)([]),[ye,je]=(0,n.useState)([]),[Ne,we]=(0,n.useState)([]),[ke,Se]=(0,n.useState)([]),[Ce,Ie]=(0,n.useState)([]),[Ae,Ee]=(0,n.useState)([]),[Te,Re]=(0,n.useState)([]),[Me,De]=(0,n.useState)([]),[Fe,ze]=(0,n.useState)([]),[Oe,_e]=(0,n.useState)(!1),[qe,Be]=(0,n.useState)([]),[We,Qe]=(0,n.useState)([]),[He,Ve]=(0,n.useState)(!1),[Ye,Xe]=(0,n.useState)(""),[st,at]=(0,n.useState)(""),[nt,rt]=(0,n.useState)("");(0,n.useEffect)(()=>{at("")},[Ye]),(0,n.useEffect)(()=>{A||(Be([]),Qe([]),Xe(""),at(""),rt(""))},[A]),(0,n.useEffect)(()=>{U&&v?l(U).then(le):le([])},[U,v,l]),(0,n.useEffect)(()=>{Q&&U?h(U)?Promise.all([o(U,Q),c(U,Q)]).then(e=>{let[t,s]=e;ce(t),ue(s)}):f(U)?(c(U,Q).then(ue),ce([])):x(U)&&(ce([]),ue([])):(ce([]),ue([]))},[Q,U,h,f,x,o,c]),(0,n.useEffect)(()=>{if(!U||!Q)return void me([]);(async()=>{try{let e=[];h(U)&&V?e=await d(U,Q,V,null,!0):f(U)&&$?e=await d(U,Q,null,$,!0):x(U)&&(e=await d(U,Q,null,null,!0)),me(e||[])}catch(e){console.error("Error fetching subjects for filters:",e),me([])}})()},[U,Q,V,$,h,f,x,d]),(0,n.useEffect)(()=>{K&&U?u(U,K,!0).then(fe):fe([])},[K,U,u]),(0,n.useEffect)(()=>{X?p(X,ne).then(e=>{ge(e)}):ge([])},[X,ne,p]),(0,n.useEffect)(()=>{ee?m(ee,ne).then(e=>{be(e)}):be([])},[ee,ne,m]),(0,n.useEffect)(()=>{y.courseTypeId&&v?l(y.courseTypeId).then(je):je([])},[y.courseTypeId,v,l]),(0,n.useEffect)(()=>{y.courseId&&y.courseTypeId?h(y.courseTypeId)?Promise.all([o(y.courseTypeId,y.courseId),c(y.courseTypeId,y.courseId)]).then(e=>{let[t,s]=e;we(t),Se(s)}):f(y.courseTypeId)?(c(y.courseTypeId,y.courseId).then(Se),we([])):x(y.courseTypeId)&&(we([]),Se([])):(we([]),Se([]))},[y.courseId,y.courseTypeId,h,f,x,o,c]),(0,n.useEffect)(()=>{if(!y.courseTypeId||!y.courseId)return void Ie([]);(async()=>{try{let e=[];h(y.courseTypeId)&&y.classId?e=await d(y.courseTypeId,y.courseId,y.classId,null,!0):f(y.courseTypeId)&&y.examId?e=await d(y.courseTypeId,y.courseId,null,y.examId,!0):x(y.courseTypeId)&&(e=await d(y.courseTypeId,y.courseId,null,null,!0)),Ie(e||[])}catch(e){console.error("Error fetching subjects for form:",e),Ie([])}})()},[y.courseTypeId,y.courseId,y.classId,y.examId,h,f,x,d]),(0,n.useEffect)(()=>{y.subjectId&&y.courseTypeId?u(y.courseTypeId,y.subjectId,!0).then(Ee):Ee([])},[y.subjectId,y.courseTypeId,u]),(0,n.useEffect)(()=>{y.topicId?p(y.topicId,ne).then(e=>{Re(e)}):Re([])},[y.topicId,ne,p]),(0,n.useEffect)(()=>{y.moduleId?m(y.moduleId,ne).then(e=>{De(e)}):De([])},[y.moduleId,ne,m]);const it=(0,n.useCallback)(async()=>{if(a&&!Oe){_e(!0);try{const e=await r(Ge.yS,a);console.log("Questions API response:",e),e?Array.isArray(e)?ze(e):e.data&&Array.isArray(e.data)?ze(e.data):(console.warn("Unexpected questions response structure:",e),ze([])):ze([])}catch(e){console.error("Error fetching questions:",e),s({type:"error",message:"Failed to fetch questions",duration:5e3})}finally{_e(!1)}}},[a,r,s,Oe]),lt=e=>{var t,s,a,n,r,i,l,o;I({questionText:e.questionText||"",questionType:"MULTIPLE_CHOICE"===e.questionType?"MCQ":e.questionType||"MCQ",difficultyLevel:e.difficultyLevel||"EASY",marks:e.marks||1,negativeMarks:e.negativeMarks||0,timeLimitSeconds:e.timeLimitSeconds||60,explanation:e.explanation||"",courseTypeId:(null===(t=e.courseTypeId)||void 0===t?void 0:t.toString())||"",courseId:(null===(s=e.courseId)||void 0===s?void 0:s.toString())||"",classId:(null===(a=e.classId)||void 0===a?void 0:a.toString())||"",examId:(null===(n=e.examId)||void 0===n?void 0:n.toString())||"",subjectId:(null===(r=e.subjectId)||void 0===r?void 0:r.toString())||"",topicId:(null===(i=e.topicId)||void 0===i?void 0:i.toString())||"",moduleId:(null===(l=e.moduleId)||void 0===l?void 0:l.toString())||"",chapterId:(null===(o=e.chapterId)||void 0===o?void 0:o.toString())||"",isActive:void 0===e.isActive||e.isActive,examSuitabilities:e.examSuitabilities&&Array.isArray(e.examSuitabilities)?e.examSuitabilities.map(e=>"object"===typeof e&&e.examId?e.examId:e):[],examHistories:e.examHistories&&Array.isArray(e.examHistories)?e.examHistories.map(e=>({examId:e.masterExamId||e.examId,yearId:e.appearedYear||e.yearId})):[],relationshipId:e.relationshipId||1,options:e.options||b.options}),P(e.id),E(!0)},ot=(0,n.useCallback)(async e=>{if(window.confirm("Are you sure you want to delete this question?"))try{R(!0),await r(Ge.ul,a,e),s({type:"success",message:"Question deleted successfully",duration:3e3}),await it()}catch(t){console.error("Error deleting question:",t),s({type:"error",message:"Failed to delete question",duration:5e3})}finally{R(!1)}},[r,s,a,it]),ct=(0,n.useCallback)(e=>{B(e),_(!0)},[]),dt=(0,n.useCallback)(()=>{_(!1),B(null)},[]),ut=(e,t,s)=>{const a=y.options.map(a=>a.optionLetter===e?"isCorrect"===t?(0,Ue.A)((0,Ue.A)({},a),{},{isCorrect:!0}):(0,Ue.A)((0,Ue.A)({},a),{},{[t]:s}):"isCorrect"===t&&a.isCorrect?(0,Ue.A)((0,Ue.A)({},a),{},{isCorrect:!1}):a);w("options",a)},pt=(0,n.useCallback)((e,t)=>{const s=e.subjectName||e.name||"Unknown Subject";return h(t)?"".concat(s," (Class-Subject)"):f(t)?"".concat(s," (Exam-Subject)"):x(t)?"".concat(s," (Course-Subject)"):s},[h,f,x]),mt=(0,n.useCallback)(()=>{if(!Ye||!st)return void s({type:"error",message:"Please select both exam and year",duration:3e3});const e=parseInt(Ye),t=parseInt(st),a={examId:e,yearId:t};y.examHistories.some(s=>s.examId===e&&s.yearId===t)?s({type:"error",message:"This exam-year combination already exists",duration:3e3}):(I(e=>(0,Ue.A)((0,Ue.A)({},e),{},{examHistories:[...e.examHistories,a]})),Xe(""),at(""),s({type:"success",message:"Exam history tag added successfully",duration:2e3}))},[Ye,st,y.examHistories,s]),ft=(0,n.useCallback)((e,t)=>{I(s=>(0,Ue.A)((0,Ue.A)({},s),{},{examHistories:s.examHistories.filter(s=>!(s.examId===e&&s.yearId===t))}))},[]),xt=(0,n.useCallback)(e=>{if(!Array.isArray(qe))return"Unknown Exam";let t=qe.find(t=>t.id===e);return t||(t=qe.find(t=>t.id===String(e))),t||(t=qe.find(t=>t.id===Number(e))),t?t.exam:"Unknown Exam"},[qe]),gt=(0,n.useCallback)(e=>{if(!Array.isArray(We))return"Unknown Year";const t=We.find(t=>t.id===e);return t?t.year:"Unknown Year"},[We]),vt=[{symbol:"\xb1",name:"Plus-minus",description:"\xb1"},{symbol:"\xd7",name:"Multiply",description:"\xd7"},{symbol:"\xf7",name:"Divide",description:"\xf7"},{symbol:"\xb2",name:"Squared",description:"\xb2"},{symbol:"\xb3",name:"Cubed",description:"\xb3"},{symbol:"\u221a",name:"Square root",description:"\u221a"},{symbol:"\u03c0",name:"Pi",description:"\u03c0"},{symbol:"\u221e",name:"Infinity",description:"\u221e"},{symbol:"\u2211",name:"Sum",description:"\u2211"},{symbol:"\u222b",name:"Integral",description:"\u222b"},{symbol:"\u2264",name:"Less than or equal",description:"\u2264"},{symbol:"\u2265",name:"Greater than or equal",description:"\u2265"},{symbol:"\u2260",name:"Not equal",description:"\u2260"},{symbol:"\u2248",name:"Approximately equal",description:"\u2248"},{symbol:"\u03b1",name:"Alpha",description:"\u03b1"},{symbol:"\u03b2",name:"Beta",description:"\u03b2"},{symbol:"\u03b3",name:"Gamma",description:"\u03b3"},{symbol:"\u03b4",name:"Delta",description:"\u03b4"},{symbol:"\u03b8",name:"Theta",description:"\u03b8"},{symbol:"\u03bb",name:"Lambda",description:"\u03bb"},{symbol:"\u03bc",name:"Mu",description:"\u03bc"},{symbol:"\u03c3",name:"Sigma",description:"\u03c3"},{symbol:"\u03c6",name:"Phi",description:"\u03c6"},{symbol:"\u03c9",name:"Omega",description:"\u03c9"},{symbol:"\u2081",name:"Subscript 1",description:"\u2081"},{symbol:"\u2082",name:"Subscript 2",description:"\u2082"},{symbol:"\u2083",name:"Subscript 3",description:"\u2083"},{symbol:"\u2084",name:"Subscript 4",description:"\u2084"},{symbol:"\u2085",name:"Subscript 5",description:"\u2085"}],bt=(0,n.useCallback)(e=>{const t=document.getElementById("explanation");if(t){const s=t.selectionStart,a=t.selectionEnd,n=y.explanation,r=n.substring(0,s),i=n.substring(a,n.length);w("explanation",r+e+i),setTimeout(()=>{t.focus(),t.setSelectionRange(s+e.length,s+e.length)},0)}},[y.explanation,w]),yt=(0,n.useCallback)(e=>{const t=document.getElementById("questionText");if(t){const s=t.selectionStart,a=t.selectionEnd,n=y.questionText,r=n.substring(0,s),i=n.substring(a,n.length);w("questionText",r+e+i),setTimeout(()=>{t.focus(),t.setSelectionRange(s+e.length,s+e.length)},0)}},[y.questionText,w]),jt=(0,n.useCallback)((e,t)=>{const s=document.getElementById("option-".concat(t));if(s){const a=s.selectionStart||0,n=s.selectionEnd||0,r=y.options.find(e=>e.optionLetter===t);if(r){const i=r.optionText||"",l=i.substring(0,a),o=i.substring(n,i.length),c=l+e+o;I(e=>(0,Ue.A)((0,Ue.A)({},e),{},{options:e.options.map(e=>e.optionLetter===t?(0,Ue.A)((0,Ue.A)({},e),{},{optionText:c}):e)})),requestAnimationFrame(()=>{s.focus(),s.setSelectionRange(a+e.length,a+e.length)})}}},[y.options,I]);return(0,n.useEffect)(()=>{y.courseTypeId!==b.courseTypeId&&I(e=>(0,Ue.A)((0,Ue.A)({},e),{},{courseId:"",classId:"",examId:"",subjectId:"",topicId:"",moduleId:"",chapterId:""}))},[y.courseTypeId]),(0,n.useEffect)(()=>{y.courseId!==b.courseId&&I(e=>(0,Ue.A)((0,Ue.A)({},e),{},{classId:"",examId:"",subjectId:"",topicId:"",moduleId:"",chapterId:""}))},[y.courseId]),(0,n.useEffect)(()=>{y.classId===b.classId&&y.examId===b.examId||I(e=>(0,Ue.A)((0,Ue.A)({},e),{},{subjectId:"",topicId:"",moduleId:"",chapterId:""}))},[y.classId,y.examId]),(0,n.useEffect)(()=>{y.subjectId!==b.subjectId&&I(e=>(0,Ue.A)((0,Ue.A)({},e),{},{topicId:"",moduleId:"",chapterId:""}))},[y.subjectId]),(0,n.useEffect)(()=>{y.topicId!==b.topicId&&I(e=>(0,Ue.A)((0,Ue.A)({},e),{},{moduleId:"",chapterId:""}))},[y.topicId]),(0,n.useEffect)(()=>{y.moduleId!==b.moduleId&&I(e=>(0,Ue.A)((0,Ue.A)({},e),{},{chapterId:""}))},[y.moduleId]),(0,n.useEffect)(()=>{v&&a&&it()},[v,a]),(0,n.useEffect)(()=>{(async()=>{if(console.log("fetchExamTaggingData called:",{showForm:A,isInitialized:v,hasToken:!!a}),A&&v&&a){console.log("Starting to fetch exam tagging data..."),console.log("Current masterExams state:",qe),console.log("Current years state:",We),Ve(!0);try{console.log("Fetching exam tagging data with token:",!!a),console.log("Making API calls to:",{examsEndpoint:"/api/public/master-exams/kv",yearsEndpoint:"/api/public/years/kv"});const[e,t]=await Promise.all([Ze(a).then(e=>(console.log("\u2705 Master exams API success:",e),e)).catch(e=>{var t;return console.error("\u274c Failed to fetch master exams:",e),console.error("Master exams error details:",(null===(t=e.response)||void 0===t?void 0:t.data)||e.message),null}),et(a).then(e=>(console.log("\u2705 Years API success:",e),e)).catch(e=>{var t,s;return console.error("\u274c Failed to fetch years:",e),console.error("Years error details:",(null===(t=e.response)||void 0===t?void 0:t.data)||e.message),console.error("Years error status:",null===(s=e.response)||void 0===s?void 0:s.status),console.error("Years error full:",e),null})]);console.log("Raw API responses:",{examsData:e,yearsData:t,examsIsArray:Array.isArray(e),yearsIsArray:Array.isArray(t),examsDataType:typeof e,yearsDataType:typeof t}),console.log("Detailed API response analysis:",{examsDataRaw:e,yearsDataRaw:t,examsDataStringified:JSON.stringify(e),yearsDataStringified:JSON.stringify(t)});let s=Array.isArray(e)?e.map(e=>({id:Number(e.id),exam:e.exam||e.name||e.title||""})):[],n=Array.isArray(t)?t.map(e=>({id:Number(e.id),year:Number(e.year||e.value||e.name)})):[];0!==s.length&&0!==n.length||(console.log("\u26a0\ufe0f Some data is missing, using fallback data"),0===s.length&&(s=[{exam:"JEE Main",id:1},{exam:"NEET UG",id:2},{exam:"GATE",id:3},{exam:"UPSC CSE",id:4},{exam:"CAT",id:5}].map(e=>({id:Number(e.id),exam:e.exam||e.name||e.title||""}))),0===n.length&&(n=[{year:2023,id:3},{year:2022,id:2},{year:2021,id:1}].map(e=>({id:Number(e.id),year:Number(e.year||e.value||e.name)})))),console.log("Normalized data:",{normalizedExams:s,normalizedYears:n,examsLength:s.length,yearsLength:n.length,firstExam:s[0],firstYear:n[0]}),Be(s),Qe(n),console.log("Exam tagging data loaded successfully:",{examsCount:s.length,yearsCount:n.length,showForm:A,normalizedExams:s,normalizedYears:n}),console.log("Setting masterExams state with:",s),console.log("Setting years state with:",n)}catch(e){console.error("Error fetching exam tagging data:",e),console.error("Full error object:",e),console.log("Using fallback sample data due to API error");const t=[{year:2023,id:3},{year:2022,id:2},{year:2021,id:1}],s=[{exam:"JEE Main",id:1},{exam:"NEET UG",id:2},{exam:"GATE",id:3},{exam:"UPSC CSE",id:4},{exam:"CAT",id:5}].map(e=>({id:Number(e.id),exam:e.exam||e.name||e.title||""})),a=t.map(e=>({id:Number(e.id),year:Number(e.year||e.value||e.name)}));Be(s),Qe(a)}finally{Ve(!1)}}else console.log("Skipping exam tagging data fetch:",{showForm:A,isInitialized:v,hasToken:!!a})})()},[A,v,a]),g?(0,Le.jsxs)("div",{className:"master-data-component",children:[(0,Le.jsxs)("div",{className:"component-header",children:[(0,Le.jsxs)("div",{className:"header-info",children:[(0,Le.jsx)("h2",{children:"Question Management"}),(0,Le.jsx)("p",{children:"Create and manage questions with exam tagging and hierarchical organization"})]}),(0,Le.jsxs)("div",{className:"header-actions",children:[(0,Le.jsx)("button",{className:"btn btn-secondary",onClick:t,disabled:L,children:"\u2190 Back to Dashboard"}),!M&&(0,Le.jsx)("button",{className:"btn btn-secondary",onClick:()=>D(!0),disabled:L,title:"Switch to Advanced Filter",children:"Advanced Filter"}),(0,Le.jsx)("button",{className:"btn btn-primary",onClick:()=>{D(!1),C(),E(!0)},disabled:L,children:"Add Question"})]})]}),M?(0,Le.jsx)(ht,{onBackToDashboard:t,onViewDetails:ct}):(0,Le.jsxs)("div",{className:"standard-filters-wrapper",children:[(0,Le.jsxs)("div",{className:"filter-section",children:[(0,Le.jsxs)("div",{className:"filter-header",children:[(0,Le.jsx)("h4",{children:"Filter Questions"}),(0,Le.jsxs)("div",{className:"filter-header-controls",children:[(0,Le.jsxs)("label",{className:"filter-checkbox",children:[(0,Le.jsx)("input",{type:"checkbox",checked:ne,onChange:e=>re(e.target.checked)}),(0,Le.jsx)("span",{children:"Active Only"})]}),(0,Le.jsx)("button",{className:"btn btn-outline btn-xs",onClick:()=>{W(""),H(""),Y(""),J(""),G(""),Z(""),te(""),ae("")},children:"Clear All Filters"})]})]}),(0,Le.jsxs)("div",{className:"filter-row",children:[(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{htmlFor:"course-type-filter",children:"1. Course Type:"}),(0,Le.jsxs)("select",{id:"course-type-filter",value:U,onChange:e=>W(e.target.value),className:"filter-select",children:[(0,Le.jsx)("option",{value:"",children:"All Course Types"}),i.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{htmlFor:"course-filter",children:"2. Course:"}),(0,Le.jsxs)("select",{id:"course-filter",value:Q,onChange:e=>H(e.target.value),disabled:!U,className:"filter-select",children:[(0,Le.jsx)("option",{value:"",children:"All Courses"}),ie.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),h(U)&&(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{htmlFor:"class-filter",children:"3. Class:"}),(0,Le.jsxs)("select",{id:"class-filter",value:V,onChange:e=>Y(e.target.value),disabled:!Q,className:"filter-select",children:[(0,Le.jsx)("option",{value:"",children:"All Classes"}),oe.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),f(U)&&(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{htmlFor:"exam-filter",children:"3. Exam:"}),(0,Le.jsxs)("select",{id:"exam-filter",value:$,onChange:e=>J(e.target.value),disabled:!Q,className:"filter-select",children:[(0,Le.jsx)("option",{value:"",children:"All Exams"}),de.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{htmlFor:"subject-filter",children:"4. Subject:"}),(0,Le.jsxs)("select",{id:"subject-filter",value:K,onChange:e=>G(e.target.value),disabled:!Q,className:"filter-select",children:[(0,Le.jsx)("option",{value:"",children:"All Subjects"}),pe.map(e=>(0,Le.jsx)("option",{value:e.id,children:pt(e,U)},e.id))]})]}),(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{htmlFor:"topic-filter",children:"5. Topic:"}),(0,Le.jsxs)("select",{id:"topic-filter",value:X,onChange:e=>Z(e.target.value),disabled:!K,className:"filter-select",children:[(0,Le.jsx)("option",{value:"",children:"All Topics"}),he.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{htmlFor:"module-filter",children:"6. Module:"}),(0,Le.jsxs)("select",{id:"module-filter",value:ee,onChange:e=>te(e.target.value),disabled:!X,className:"filter-select",children:[(0,Le.jsx)("option",{value:"",children:"All Modules"}),xe.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{htmlFor:"chapter-filter",children:"7. Chapter:"}),(0,Le.jsxs)("select",{id:"chapter-filter",value:se,onChange:e=>ae(e.target.value),disabled:!ee,className:"filter-select",children:[(0,Le.jsx)("option",{value:"",children:"All Chapters"}),ve.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]})]}),A&&(0,Le.jsxs)("div",{className:"form-section",children:[(0,Le.jsxs)("div",{className:"form-header",children:[(0,Le.jsx)("h3",{children:T?"Edit Question":"Add New Question"}),(0,Le.jsx)("button",{className:"btn btn-outline btn-sm",onClick:()=>{C(),E(!1),P(null)},disabled:L,children:"\u2715 Cancel"})]}),(0,Le.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!y.courseTypeId||!y.courseId)return void s({type:"error",message:"Please select course type and course first",duration:3e3});if(h(y.courseTypeId)&&!y.classId)return void s({type:"error",message:"Please select a class for Academic courses",duration:3e3});if(f(y.courseTypeId)&&!y.examId)return void s({type:"error",message:"Please select an exam for Competitive courses",duration:3e3});if(0===Ce.length)return void s({type:"error",message:"Please wait for subjects to load or check your selections",duration:3e3});if(!S())return void s({type:"error",message:"Please fix form errors",duration:3e3});const t=(0,Ue.A)((0,Ue.A)({},y),{},{questionType:"MCQ"===y.questionType?"MULTIPLE_CHOICE":y.questionType,examSuitabilities:y.examSuitabilities.map(e=>"object"===typeof e&&e.examId?e.examId:e),examHistories:y.examHistories.map(e=>({masterExamId:"object"===typeof e?e.examId||e.masterExamId:e,appearedYear:"object"===typeof e?e.yearId||e.appearedYear:(new Date).getFullYear()})),relationshipId:y.relationshipId||1});if(""===t.examId&&delete t.examId,""===t.courseId&&delete t.courseId,""===t.classId&&delete t.classId,t.courseTypeId=parseInt(t.courseTypeId),t.courseId&&(t.courseId=parseInt(t.courseId)),t.classId&&(t.classId=parseInt(t.classId)),t.subjectId=parseInt(t.subjectId),t.topicId=parseInt(t.topicId),t.moduleId=parseInt(t.moduleId),t.chapterId=parseInt(t.chapterId),t.relationshipId=parseInt(t.relationshipId),"MCQ"===y.questionType){if(y.options.filter(e=>!e.optionText.trim()).length>0)return void s({type:"error",message:"Please fill all options",duration:3e3});if(0===y.options.filter(e=>e.isCorrect).length)return void s({type:"error",message:"Please select at least one correct answer",duration:3e3})}try{R(!0),console.log("Form data being submitted:",t),console.log("examSuitabilities in form data:",t.examSuitabilities),console.log("examHistories in form data:",t.examHistories),console.log("options in form data:",t.options),T?(await r(Ge.sr,a,T,t),s({type:"success",message:"Question updated successfully",duration:3e3})):(await r(Ge.hG,a,t),s({type:"success",message:"Question created successfully",duration:3e3})),await it(),C(),E(!1),P(null)}catch(n){console.error("Error saving question:",n),s({type:"error",message:"Failed to save question",duration:5e3})}finally{R(!1)}},className:"master-data-form",children:[(0,Le.jsx)("div",{className:"form-row",children:(0,Le.jsxs)("div",{className:"form-group full-width",children:[(0,Le.jsx)("label",{htmlFor:"questionText",children:"Question Text *"}),(0,Le.jsxs)("div",{className:"math-symbols-toolbar",style:{marginBottom:"8px",padding:"8px",border:"1px solid #ddd",borderRadius:"4px",backgroundColor:"#f8f9fa"},children:[(0,Le.jsx)("div",{style:{marginBottom:"4px",fontSize:"12px",fontWeight:"bold",color:"#666"},children:"Math Symbols (Click to insert):"}),(0,Le.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"4px"},children:vt.map((e,t)=>(0,Le.jsx)("button",{type:"button",onClick:()=>yt(e.symbol),className:"math-symbol-btn",title:e.name,style:{padding:"4px 8px",border:"1px solid #ccc",borderRadius:"3px",backgroundColor:"#fff",cursor:"pointer",fontSize:"14px",minWidth:"32px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center"},onMouseOver:e=>{e.target.style.backgroundColor="#e9ecef"},onMouseOut:e=>{e.target.style.backgroundColor="#fff"},children:e.symbol},t))})]}),(0,Le.jsx)("textarea",{id:"questionText",name:"questionText",value:y.questionText,onChange:e=>w("questionText",e.target.value),onBlur:()=>k("questionText"),className:"form-input ".concat(j.questionText&&N.questionText?"error":""),rows:4,required:!0,placeholder:"Enter your question here... Use the math symbols above to add mathematical expressions."}),j.questionText&&N.questionText&&(0,Le.jsx)("span",{className:"error-message",children:j.questionText})]})}),(0,Le.jsxs)("div",{className:"form-row",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"questionType",children:"Question Type *"}),(0,Le.jsxs)("select",{id:"questionType",name:"questionType",value:y.questionType,onChange:e=>w("questionType",e.target.value),onBlur:()=>k("questionType"),className:"form-input ".concat(j.questionType&&N.questionType?"error":""),required:!0,children:[(0,Le.jsx)("option",{value:"MCQ",children:"Multiple Choice (MCQ)"}),(0,Le.jsx)("option",{value:"TRUE_FALSE",children:"True/False"}),(0,Le.jsx)("option",{value:"FILL_BLANK",children:"Fill in the Blank"}),(0,Le.jsx)("option",{value:"SHORT_ANSWER",children:"Short Answer"})]}),j.questionType&&N.questionType&&(0,Le.jsx)("span",{className:"error-message",children:j.questionType})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"difficultyLevel",children:"Difficulty Level *"}),(0,Le.jsxs)("select",{id:"difficultyLevel",name:"difficultyLevel",value:y.difficultyLevel,onChange:e=>w("difficultyLevel",e.target.value),onBlur:()=>k("difficultyLevel"),className:"form-input ".concat(j.difficultyLevel&&N.difficultyLevel?"error":""),required:!0,children:[(0,Le.jsx)("option",{value:"EASY",children:"Easy"}),(0,Le.jsx)("option",{value:"MEDIUM",children:"Medium"}),(0,Le.jsx)("option",{value:"HARD",children:"Hard"})]}),j.difficultyLevel&&N.difficultyLevel&&(0,Le.jsx)("span",{className:"error-message",children:j.difficultyLevel})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"marks",children:"Marks *"}),(0,Le.jsx)("input",{type:"number",id:"marks",name:"marks",value:y.marks,onChange:e=>w("marks",e.target.value),onBlur:()=>k("marks"),className:"form-input ".concat(j.marks&&N.marks?"error":""),min:"1",required:!0}),j.marks&&N.marks&&(0,Le.jsx)("span",{className:"error-message",children:j.marks})]})]}),(0,Le.jsxs)("div",{className:"form-row",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"negativeMarks",children:"Negative Marks"}),(0,Le.jsx)("input",{type:"number",id:"negativeMarks",name:"negativeMarks",value:y.negativeMarks,onChange:e=>w("negativeMarks",e.target.value),min:"0",step:"0.25",className:"form-input"})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"timeLimitSeconds",children:"Time Limit (seconds)"}),(0,Le.jsx)("input",{type:"number",id:"timeLimitSeconds",name:"timeLimitSeconds",value:y.timeLimitSeconds,onChange:e=>w("timeLimitSeconds",e.target.value),min:"30",className:"form-input"})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"isActive",children:"Status"}),(0,Le.jsxs)("select",{id:"isActive",name:"isActive",value:y.isActive,onChange:e=>w("isActive","true"===e.target.value),className:"form-input",children:[(0,Le.jsx)("option",{value:!0,children:"Active"}),(0,Le.jsx)("option",{value:!1,children:"Inactive"})]})]})]}),(0,Le.jsxs)("div",{className:"form-row",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"courseTypeId",children:"Course Type *"}),(0,Le.jsxs)("select",{id:"courseTypeId",name:"courseTypeId",value:y.courseTypeId,onChange:e=>w("courseTypeId",e.target.value),onBlur:()=>k("courseTypeId"),className:"form-input ".concat(j.courseTypeId&&N.courseTypeId?"error":""),required:!0,children:[(0,Le.jsx)("option",{value:"",children:"Select Course Type"}),i.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]}),j.courseTypeId&&N.courseTypeId&&(0,Le.jsx)("span",{className:"error-message",children:j.courseTypeId})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"courseId",children:"Course *"}),(0,Le.jsxs)("select",{id:"courseId",name:"courseId",value:y.courseId,onChange:e=>w("courseId",e.target.value),onBlur:()=>k("courseId"),className:"form-input ".concat(j.courseId&&N.courseId?"error":""),required:!0,disabled:!y.courseTypeId,children:[(0,Le.jsx)("option",{value:"",children:"Select Course"}),ye.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]}),j.courseId&&N.courseId&&(0,Le.jsx)("span",{className:"error-message",children:j.courseId})]})]}),(h(y.courseTypeId)||f(y.courseTypeId))&&(0,Le.jsxs)("div",{className:"form-row",children:[h(y.courseTypeId)&&(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"classId",children:"Class *"}),(0,Le.jsxs)("select",{id:"classId",name:"classId",value:y.classId||"",onChange:e=>w("classId",e.target.value),onBlur:()=>k("classId"),className:"form-input ".concat(j.classId&&N.classId?"error":""),required:!0,disabled:!y.courseId,children:[(0,Le.jsx)("option",{value:"",children:"Select Class"}),Ne.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]}),j.classId&&N.classId&&(0,Le.jsx)("span",{className:"error-message",children:j.classId})]}),f(y.courseTypeId)&&(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"examId",children:"Exam *"}),(0,Le.jsxs)("select",{id:"examId",name:"examId",value:y.examId||"",onChange:e=>w("examId",e.target.value),onBlur:()=>k("examId"),className:"form-input ".concat(j.examId&&N.examId?"error":""),required:!0,disabled:!y.courseId,children:[(0,Le.jsx)("option",{value:"",children:"Select Exam"}),ke.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]}),j.examId&&N.examId&&(0,Le.jsx)("span",{className:"error-message",children:j.examId})]})]}),(0,Le.jsx)("div",{className:"form-row",children:(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"subjectId",children:"Subject *"}),(0,Le.jsxs)("select",{id:"subjectId",name:"subjectId",value:y.subjectId,onChange:e=>w("subjectId",e.target.value),onBlur:()=>k("subjectId"),className:"form-input ".concat(j.subjectId&&N.subjectId?"error":""),required:!0,disabled:!y.courseId,children:[(0,Le.jsx)("option",{value:"",children:"Select Subject"}),Ce.map(e=>(0,Le.jsx)("option",{value:e.linkageId||e.id,children:pt(e,y.courseTypeId)},e.id))]}),j.subjectId&&N.subjectId&&(0,Le.jsx)("span",{className:"error-message",children:j.subjectId})]})}),(0,Le.jsx)("div",{className:"form-row",children:(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"topicId",children:"Topic *"}),(0,Le.jsxs)("select",{id:"topicId",name:"topicId",value:y.topicId,onChange:e=>w("topicId",e.target.value),onBlur:()=>k("topicId"),className:"form-input ".concat(j.topicId&&N.topicId?"error":""),required:!0,disabled:!y.subjectId,children:[(0,Le.jsx)("option",{value:"",children:"Select Topic"}),Ae.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]}),j.topicId&&N.topicId&&(0,Le.jsx)("span",{className:"error-message",children:j.topicId})]})}),(0,Le.jsx)("div",{className:"form-row",children:(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"moduleId",children:"Module *"}),(0,Le.jsxs)("select",{id:"moduleId",name:"moduleId",value:y.moduleId,onChange:e=>w("moduleId",e.target.value),onBlur:()=>k("moduleId"),className:"form-input ".concat(j.moduleId&&N.moduleId?"error":""),required:!0,disabled:!y.topicId,children:[(0,Le.jsx)("option",{value:"",children:"Select Module"}),Te.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]}),j.moduleId&&N.moduleId&&(0,Le.jsx)("span",{className:"error-message",children:j.moduleId})]})}),(0,Le.jsx)("div",{className:"form-row",children:(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"chapterId",children:"Chapter *"}),(0,Le.jsxs)("select",{id:"chapterId",name:"chapterId",value:y.chapterId,onChange:e=>w("chapterId",e.target.value),onBlur:()=>k("chapterId"),className:"form-input ".concat(j.chapterId&&N.chapterId?"error":""),required:!0,disabled:!y.moduleId,children:[(0,Le.jsx)("option",{value:"",children:"Select Chapter"}),Me.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]}),j.chapterId&&N.chapterId&&(0,Le.jsx)("span",{className:"error-message",children:j.chapterId})]})}),"MCQ"===y.questionType&&(0,Le.jsx)("div",{className:"form-row",children:(0,Le.jsxs)("div",{className:"form-group full-width",children:[(0,Le.jsx)("label",{children:"Answer Options *"}),(0,Le.jsxs)("div",{style:{marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[(0,Le.jsx)("button",{type:"button",onClick:()=>z(!F),style:{padding:"6px 12px",backgroundColor:F?"#28a745":"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"bold"},children:F?"Hide Math Symbols":"Show Math Symbols"}),(0,Le.jsx)("span",{style:{fontSize:"12px",color:"#666"},children:"Toggle math symbol toolbars for each option"})]}),y.options.map(e=>(0,Le.jsxs)("div",{className:"option-row",children:[(0,Le.jsx)("div",{className:"option-label",children:(0,Le.jsx)("strong",{children:e.optionLetter})}),(0,Le.jsxs)("div",{className:"option-input",style:{display:"flex",flexDirection:"column",gap:"4px"},children:[(0,Le.jsx)("input",{id:"option-".concat(e.optionLetter),type:"text",value:e.optionText,onChange:t=>ut(e.optionLetter,"optionText",t.target.value),placeholder:"Enter option ".concat(e.optionLetter),className:"form-input",required:!0}),F&&(0,Le.jsxs)("div",{style:{padding:"6px",border:"1px solid #e0e0e0",borderRadius:"3px",backgroundColor:"#f8f9fa",fontSize:"11px"},children:[(0,Le.jsxs)("div",{style:{marginBottom:"4px",fontWeight:"bold",color:"#555"},children:["Math Symbols for Option ",e.optionLetter,":"]}),(0,Le.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"2px"},children:vt.slice(0,15).map((t,s)=>(0,Le.jsx)("button",{type:"button",onClick:()=>jt(t.symbol,e.optionLetter),title:t.name,style:{padding:"2px 6px",border:"1px solid #ccc",borderRadius:"2px",backgroundColor:"#fff",cursor:"pointer",fontSize:"12px",minWidth:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center"},onMouseOver:e=>{e.target.style.backgroundColor="#e9ecef"},onMouseOut:e=>{e.target.style.backgroundColor="#fff"},children:t.symbol},s))})]})]}),(0,Le.jsx)("div",{className:"option-correct",children:(0,Le.jsxs)("label",{className:"option-radio",children:[(0,Le.jsx)("input",{type:"radio",name:"correctAnswer",checked:e.isCorrect,onChange:()=>ut(e.optionLetter,"isCorrect",!0)}),(0,Le.jsx)("span",{children:"Correct"})]})})]},e.optionLetter))]})}),(0,Le.jsx)("div",{className:"form-row",children:(0,Le.jsxs)("div",{className:"form-group full-width",children:[(0,Le.jsx)("label",{htmlFor:"explanation",children:"Explanation"}),(0,Le.jsxs)("div",{className:"math-symbols-toolbar",style:{marginBottom:"8px",padding:"8px",border:"1px solid #ddd",borderRadius:"4px",backgroundColor:"#f8f9fa"},children:[(0,Le.jsx)("div",{style:{marginBottom:"4px",fontSize:"12px",fontWeight:"bold",color:"#666"},children:"Math Symbols (Click to insert):"}),(0,Le.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"4px"},children:vt.map((e,t)=>(0,Le.jsx)("button",{type:"button",onClick:()=>bt(e.symbol),className:"math-symbol-btn",title:e.name,style:{padding:"4px 8px",border:"1px solid #ccc",borderRadius:"3px",backgroundColor:"#fff",cursor:"pointer",fontSize:"14px",minWidth:"32px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center"},onMouseOver:e=>{e.target.style.backgroundColor="#e9ecef"},onMouseOut:e=>{e.target.style.backgroundColor="#fff"},children:e.symbol},t))})]}),(0,Le.jsx)("textarea",{id:"explanation",name:"explanation",value:y.explanation,onChange:e=>w("explanation",e.target.value),className:"form-input",rows:3,placeholder:"Explain why this is the correct answer... Use the math symbols above to add mathematical expressions."})]})}),(0,Le.jsx)("div",{className:"form-row",children:(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{className:"form-label",children:"Exam Suitability Tags"}),(0,Le.jsxs)("div",{className:"tag-selection",children:[(0,Le.jsxs)("div",{className:"single-select-group",children:[(0,Le.jsx)("label",{className:"single-select-label",children:"Select exams this question is suitable for:"}),He?(0,Le.jsxs)("div",{className:"loading-state",children:[(0,Le.jsx)("div",{className:"spinner-small"}),(0,Le.jsx)("span",{children:"Loading exams..."})]}):Array.isArray(qe)&&qe.length>0?(0,Le.jsx)("div",{className:"single-select-container",children:(0,Le.jsxs)("div",{className:"dropdown-add-group",children:[(0,Le.jsxs)("select",{className:"single-select-dropdown",value:nt||"",onChange:e=>rt(e.target.value),disabled:He,children:[(0,Le.jsx)("option",{value:"",children:He?"Loading exams...":"Select Exam..."}),qe.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.exam},e.id))]}),(0,Le.jsx)("button",{type:"button",className:"btn btn-primary btn-sm add-exam-btn",onClick:()=>{if(nt){const e=parseInt(nt);y.examSuitabilities.some(t=>t.examId===e)?s({type:"error",message:"This exam is already selected",duration:3e3}):(I(t=>(0,Ue.A)((0,Ue.A)({},t),{},{examSuitabilities:[...t.examSuitabilities,{examId:e}]})),rt(""),s({type:"success",message:"Exam added successfully",duration:2e3}))}},disabled:!nt||He,children:"Add"})]})}):(0,Le.jsx)("div",{className:"no-data-message",children:(0,Le.jsx)("span",{children:"No exams available"})})]}),(0,Le.jsx)("div",{className:"exam-history-tags",children:Array.isArray(y.examSuitabilities)&&y.examSuitabilities.length>0?(0,Le.jsxs)("div",{children:[(0,Le.jsxs)("div",{className:"selected-tags-header",children:[(0,Le.jsx)("span",{className:"selected-tags-label",children:"Selected Exams:"}),(0,Le.jsx)("button",{type:"button",className:"btn btn-outline btn-xs",onClick:()=>{I(e=>(0,Ue.A)((0,Ue.A)({},e),{},{examSuitabilities:[]}))},style:{marginLeft:"8px",fontSize:"11px",padding:"2px 6px"},children:"Clear All"})]}),(0,Le.jsx)("div",{className:"tags-container",children:y.examSuitabilities.map(e=>{const t=Array.isArray(qe)?qe.find(t=>t.id===e.examId):null;return(0,Le.jsxs)("div",{className:"history-tag-item",children:[(0,Le.jsx)("span",{className:"tag-content",children:(0,Le.jsx)("span",{className:"tag-exam",children:t?t.exam:"Unknown (".concat(e.examId,")")})}),(0,Le.jsx)("button",{type:"button",className:"tag-remove-btn",onClick:()=>{const e=y.examSuitabilities.filter(e=>e.examId!==t.id);I(t=>(0,Ue.A)((0,Ue.A)({},t),{},{examSuitabilities:e}))},title:"Remove this exam",children:(0,Le.jsx)("span",{children:"\xd7"})})]},e.examId)})})]}):(0,Le.jsxs)("div",{className:"no-tags-message",children:[(0,Le.jsx)("span",{className:"no-tags-icon",children:"\ud83c\udff7\ufe0f"}),(0,Le.jsx)("span",{children:"No exam suitability tags added yet"})]})})]}),(0,Le.jsxs)("small",{className:"form-help",children:['Select one exam at a time from the dropdown and click "Add" to include it in the suitability list',He&&(0,Le.jsx)("span",{className:"loading-text",children:" (Loading data...)"})]})]})}),(0,Le.jsx)("div",{className:"form-row",children:(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{className:"form-label",children:"Exam History Tags"}),(0,Le.jsxs)("div",{className:"exam-history-section",children:[(0,Le.jsxs)("div",{className:"exam-history-inputs",children:[(0,Le.jsxs)("div",{className:"dropdown-group",children:[(0,Le.jsx)("label",{htmlFor:"exam-history-select",children:"Exam"}),(0,Le.jsxs)("select",{id:"exam-history-select",className:"form-select",value:Ye,onChange:e=>{const t=e.target.value;console.log("Exam selection changed:",t),Xe(t),at(""),console.log("Year selection cleared due to exam change")},disabled:He,children:[(0,Le.jsx)("option",{value:"",children:He?"Loading exams...":"Select Exam..."}),Array.isArray(qe)&&qe.length>0?qe.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.exam},e.id)):!He&&(0,Le.jsx)("option",{value:"",disabled:!0,children:"No exams available"})]})]}),(0,Le.jsxs)("div",{className:"dropdown-group",children:[(0,Le.jsxs)("label",{htmlFor:"year-history-select",children:["Year",!Ye&&(0,Le.jsx)("span",{className:"required-hint",children:" (Select exam first)"})]}),(0,Le.jsxs)("select",{id:"year-history-select",className:"form-select",value:st,onChange:e=>{console.log("Year selection changed:",e.target.value),at(e.target.value)},disabled:He||!Ye,children:[(0,Le.jsx)("option",{value:"",children:Ye?He?"Loading years...":"Select Year...":"Select exam first..."}),Ye&&Array.isArray(We)&&We.length>0?(console.log("Rendering years dropdown with years:",We),We.map((e,t)=>(console.log("Rendering year ".concat(t,":"),e),(0,Le.jsx)("option",{value:e.id,children:e.year},e.id)))):Ye&&!He&&(0,Le.jsx)("option",{value:"",disabled:!0,children:"No years available"})]},"year-select-".concat(Ye))]}),(0,Le.jsx)("button",{type:"button",className:"btn btn-primary btn-sm add-tag-btn",onClick:mt,disabled:!Ye||!st||He,children:"Add Tag"})]}),(0,Le.jsx)("div",{className:"exam-history-tags",children:Array.isArray(y.examHistories)&&y.examHistories.length>0?(0,Le.jsx)("div",{className:"tags-container",children:y.examHistories.map((e,t)=>(0,Le.jsxs)("div",{className:"history-tag-item",children:[(0,Le.jsxs)("span",{className:"tag-content",children:[(0,Le.jsx)("span",{className:"tag-exam",children:xt(e.examId)}),(0,Le.jsx)("span",{className:"tag-separator",children:"-"}),(0,Le.jsx)("span",{className:"tag-year",children:gt(e.yearId)})]}),(0,Le.jsx)("button",{type:"button",className:"tag-remove-btn",onClick:()=>ft(e.examId,e.yearId),title:"Remove this tag",children:(0,Le.jsx)("span",{children:"\xd7"})})]},t))}):(0,Le.jsxs)("div",{className:"no-tags-message",children:[(0,Le.jsx)("span",{className:"no-tags-icon",children:"\ud83c\udff7\ufe0f"}),(0,Le.jsx)("span",{children:"No exam history tags added yet"})]})})]}),(0,Le.jsxs)("small",{className:"form-help",children:["Select which exams this question was asked in previously",He&&(0,Le.jsx)("span",{className:"loading-text",children:" (Loading data...)"})]})]})}),(0,Le.jsxs)("div",{className:"form-actions",children:[(0,Le.jsx)("button",{type:"button",className:"btn btn-outline",onClick:()=>{C(),E(!1),P(null)},disabled:L,children:"Cancel"}),(0,Le.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:L,children:L?"Saving...":T?"Update Question":"Create Question"})]})]})]}),!M&&(0,Le.jsxs)("div",{className:"data-section",children:[(0,Le.jsxs)("div",{className:"data-header",children:[(0,Le.jsxs)("h3",{children:["Questions (",Fe.length,")"]}),(0,Le.jsx)("div",{className:"data-actions",children:(0,Le.jsx)("button",{className:"btn btn-outline btn-sm",onClick:()=>{it()},disabled:L,children:"Refresh"})})]}),Oe?(0,Le.jsxs)("div",{className:"loading-state",children:[(0,Le.jsx)("div",{className:"spinner"}),(0,Le.jsx)("p",{children:"Loading questions..."})]}):0===Fe.length?(0,Le.jsxs)("div",{className:"empty-state",children:[(0,Le.jsx)("div",{className:"empty-state-icon",children:"\ud83d\udcdd"}),(0,Le.jsx)("h4",{children:"No Questions Found"}),(0,Le.jsx)("p",{children:"No questions match your current filters. Try adjusting your filter criteria or create a new question."})]}):(0,Le.jsx)("div",{className:"data-grid",children:Fe.map(e=>(0,Le.jsx)(tt,{question:e,onEdit:lt,onDelete:ot,onViewDetails:ct},e.id))})]})]}),O&&q&&(0,Le.jsx)("div",{className:"modal-overlay",onClick:dt,children:(0,Le.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,Le.jsxs)("div",{className:"modal-header",children:[(0,Le.jsx)("h3",{children:"Question Details"}),(0,Le.jsx)("button",{className:"modal-close",onClick:dt,children:"\u2715"})]}),(0,Le.jsxs)("div",{className:"modal-body",children:[(0,Le.jsxs)("div",{className:"detail-section",children:[(0,Le.jsx)("h4",{children:"Question Text"}),(0,Le.jsx)("div",{className:"detail-content",children:q.questionText})]}),(0,Le.jsxs)("div",{className:"detail-section",children:[(0,Le.jsx)("h4",{children:"Question Information"}),(0,Le.jsxs)("div",{className:"detail-grid",children:[(0,Le.jsxs)("div",{className:"detail-item",children:[(0,Le.jsx)("span",{className:"detail-label",children:"Type:"}),(0,Le.jsx)("span",{className:"detail-value",children:q.questionType})]}),(0,Le.jsxs)("div",{className:"detail-item",children:[(0,Le.jsx)("span",{className:"detail-label",children:"Difficulty:"}),(0,Le.jsx)("span",{className:"detail-value",children:q.difficultyLevel})]}),(0,Le.jsxs)("div",{className:"detail-item",children:[(0,Le.jsx)("span",{className:"detail-label",children:"Marks:"}),(0,Le.jsx)("span",{className:"detail-value",children:q.marks})]}),(0,Le.jsxs)("div",{className:"detail-item",children:[(0,Le.jsx)("span",{className:"detail-label",children:"Time Limit:"}),(0,Le.jsxs)("span",{className:"detail-value",children:[q.timeLimitSeconds,"s"]})]}),(0,Le.jsxs)("div",{className:"detail-item",children:[(0,Le.jsx)("span",{className:"detail-label",children:"Negative Marks:"}),(0,Le.jsx)("span",{className:"detail-value",children:q.negativeMarks})]}),(0,Le.jsxs)("div",{className:"detail-item",children:[(0,Le.jsx)("span",{className:"detail-label",children:"Status:"}),(0,Le.jsx)("span",{className:"detail-value ".concat(q.isActive?"active":"inactive"),children:q.isActive?"Active":"Inactive"})]})]})]}),q.options&&q.options.length>0&&(0,Le.jsxs)("div",{className:"detail-section",children:[(0,Le.jsx)("h4",{children:"Answer Options"}),(0,Le.jsx)("div",{className:"options-list",children:q.options.map((e,t)=>(0,Le.jsxs)("div",{className:"option-detail ".concat(e.isCorrect?"correct":""),children:[(0,Le.jsxs)("div",{className:"option-header",children:[(0,Le.jsx)("span",{className:"option-letter",children:e.optionLetter||String.fromCharCode(65+t)}),e.isCorrect&&(0,Le.jsx)("span",{className:"correct-badge",children:"\u2713 Correct"})]}),(0,Le.jsx)("div",{className:"option-text",children:e.optionText||e.text})]},t))})]}),q.explanation&&(0,Le.jsxs)("div",{className:"detail-section",children:[(0,Le.jsx)("h4",{children:"Explanation"}),(0,Le.jsx)("div",{className:"detail-content",children:q.explanation})]}),(0,Le.jsxs)("div",{className:"detail-section",children:[(0,Le.jsx)("h4",{children:"Subject Information"}),(0,Le.jsxs)("div",{className:"detail-grid",children:[q.subjectName&&(0,Le.jsxs)("div",{className:"detail-item",children:[(0,Le.jsx)("span",{className:"detail-label",children:"Subject:"}),(0,Le.jsx)("span",{className:"detail-value",children:q.subjectName})]}),q.topicName&&(0,Le.jsxs)("div",{className:"detail-item",children:[(0,Le.jsx)("span",{className:"detail-label",children:"Topic:"}),(0,Le.jsx)("span",{className:"detail-value",children:q.topicName})]}),q.moduleName&&(0,Le.jsxs)("div",{className:"detail-item",children:[(0,Le.jsx)("span",{className:"detail-label",children:"Module:"}),(0,Le.jsx)("span",{className:"detail-value",children:q.moduleName})]}),q.chapterName&&(0,Le.jsxs)("div",{className:"detail-item",children:[(0,Le.jsx)("span",{className:"detail-label",children:"Chapter:"}),(0,Le.jsx)("span",{className:"detail-value",children:q.chapterName})]}),q.courseTypeName&&(0,Le.jsxs)("div",{className:"detail-item",children:[(0,Le.jsx)("span",{className:"detail-label",children:"Course Type:"}),(0,Le.jsx)("span",{className:"detail-value",children:q.courseTypeName})]})]})]}),q.examSuitabilities&&q.examSuitabilities.length>0||q.examHistories&&q.examHistories.length>0?(0,Le.jsxs)("div",{className:"detail-section",children:[(0,Le.jsx)("h4",{children:"Exam Information"}),q.examSuitabilities&&q.examSuitabilities.length>0&&(0,Le.jsxs)("div",{className:"exam-tags-group",children:[(0,Le.jsx)("span",{className:"detail-label",children:"Suitable for:"}),(0,Le.jsx)("div",{className:"exam-suitability-list",children:q.examSuitabilities.map((e,t)=>{var s;return(0,Le.jsxs)("div",{className:"exam-suitability-item",children:[(0,Le.jsxs)("div",{className:"exam-suitability-header",children:[(0,Le.jsx)("span",{className:"exam-name",children:e.masterExamName||"Exam ".concat(e.masterExamId)}),(0,Le.jsx)("span",{className:"suitability-level ".concat(null===(s=e.suitabilityLevel)||void 0===s?void 0:s.toLowerCase()),children:e.suitabilityLevel||"MEDIUM"})]}),e.notes&&(0,Le.jsx)("div",{className:"exam-notes",children:(0,Le.jsxs)("small",{children:["Notes: ",e.notes]})})]},t)})})]}),q.examHistories&&q.examHistories.length>0&&(0,Le.jsxs)("div",{className:"exam-tags-group",children:[(0,Le.jsx)("span",{className:"detail-label",children:"Previously asked in:"}),(0,Le.jsx)("div",{className:"exam-history-list",children:q.examHistories.map((e,t)=>(0,Le.jsxs)("div",{className:"exam-history-item",children:[(0,Le.jsxs)("div",{className:"exam-history-header",children:[(0,Le.jsx)("span",{className:"exam-name",children:e.masterExamName||"Exam ".concat(e.masterExamId)}),(0,Le.jsx)("span",{className:"exam-year",children:e.appearedYear})]}),(0,Le.jsxs)("div",{className:"exam-history-details",children:[e.appearedSession&&(0,Le.jsxs)("span",{className:"exam-session",children:["Session: ",e.appearedSession]}),e.marksInExam&&(0,Le.jsxs)("span",{className:"exam-marks",children:["Marks: ",e.marksInExam]}),e.questionNumberInExam&&(0,Le.jsxs)("span",{className:"exam-question-number",children:["Q#",e.questionNumberInExam]}),e.difficultyInExam&&(0,Le.jsxs)("span",{className:"exam-difficulty",children:["Difficulty: ",e.difficultyInExam]})]}),e.notes&&(0,Le.jsx)("div",{className:"exam-notes",children:(0,Le.jsxs)("small",{children:["Notes: ",e.notes]})})]},t))})]})]}):null,(0,Le.jsxs)("div",{className:"detail-section",children:[(0,Le.jsx)("h4",{children:"Timestamps"}),(0,Le.jsxs)("div",{className:"detail-grid",children:[(0,Le.jsxs)("div",{className:"detail-item",children:[(0,Le.jsx)("span",{className:"detail-label",children:"Created:"}),(0,Le.jsxs)("span",{className:"detail-value",children:[new Date(q.createdAt).toLocaleString(),q.createdByName&&" by ".concat(q.createdByName)]})]}),q.updatedAt&&(0,Le.jsxs)("div",{className:"detail-item",children:[(0,Le.jsx)("span",{className:"detail-label",children:"Updated:"}),(0,Le.jsxs)("span",{className:"detail-value",children:[new Date(q.updatedAt).toLocaleString(),q.updatedByName&&" by ".concat(q.updatedByName)]})]})]})]})]}),(0,Le.jsxs)("div",{className:"modal-footer",children:[(0,Le.jsx)("button",{className:"btn btn-outline",onClick:dt,children:"Close"}),(0,Le.jsx)("button",{className:"btn btn-primary",onClick:()=>{dt(),lt(q)},children:"Edit Question"})]})]})})]}):(0,Le.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,Le.jsxs)("div",{className:"text-center",children:[(0,Le.jsx)("div",{className:"loading mb-4"}),(0,Le.jsx)("p",{className:"text-gray-600",children:"Waiting for authentication..."})]})})};var xt=s(872);s(595);const gt=e=>{let{test:t,onClose:s,onComplete:a}=e;const{token:r,addNotification:i}=(0,Pe.nm)(),{executeApiCall:l}=$e(),[o,c]=(0,n.useState)([]),[d,u]=(0,n.useState)([]),[p,m]=(0,n.useState)(!1),[h,f]=(0,n.useState)(0),[x,g]=(0,n.useState)(!0),[v,b]=(0,n.useState)({searchTerm:"",difficultyLevel:"",questionType:"",topicId:"",subjectId:"",courseTypeId:"",moduleId:"",chapterId:"",examSuitability:"",hasExplanation:"",marksRange:{min:"",max:""}}),[y,j]=(0,n.useState)([]),[N,w]=(0,n.useState)([]),[k,S]=(0,n.useState)([]),[C,I]=(0,n.useState)([]),[A,E]=(0,n.useState)([]),[T,P]=(0,n.useState)([]),[L,R]=(0,n.useState)(null),[M,D]=(0,n.useState)(!1),[F,z]=(0,n.useState)(!1),[O,_]=(0,n.useState)("createdAt"),[q]=(0,n.useState)("desc"),[B,U]=(0,n.useState)("grid"),[W,Q]=(0,n.useState)(!1);(0,n.useEffect)(()=>{if(t&&"CONTENT_BASED"===t.testCreationMode&&!W){const e=(0,Ue.A)({},v);t.chapterId?e.chapterId=t.chapterId:t.moduleId?e.moduleId=t.moduleId:t.topicId?e.topicId=t.topicId:t.subjectLinkageId?e.subjectId=t.subjectLinkageId:t.courseTypeId&&(e.courseTypeId=t.courseTypeId),b(e),Q(!0),z(!0),i("Filtering questions for ".concat(t.testLevel," level test"),"info")}else t&&"EXAM_BASED"===t.testCreationMode&&!W&&t.masterExamId&&(b(e=>(0,Ue.A)((0,Ue.A)({},e),{},{examSuitability:t.masterExamId})),Q(!0),z(!0),i("Filtering questions by exam suitability","info"))},[t,W]),(0,n.useEffect)(()=>{H(),V()},[h,v,O,q]);const H=(0,n.useCallback)(async()=>{m(!0);try{const e=(0,Ue.A)({page:h,size:20,sortBy:O,sortDir:q},v);Object.keys(e).forEach(t=>{(""===e[t]||"object"===typeof e[t]&&Object.values(e[t]).every(e=>""===e))&&delete e[t]});const t=await l(Ge.yS,r,e);if(t){const e=Array.isArray(t)?t:t.content||t.data||[];c(0===h?e:t=>[...t,...e]),g(20===e.length)}}catch(e){console.error("Error fetching questions:",e),i("Failed to fetch questions","error")}finally{m(!1)}},[h,v,O,q,r]),V=(0,n.useCallback)(async()=>{try{j([]),w([]),S([]),P([])}catch(e){console.error("Error fetching master data:",e)}},[]),[Y,$]=(0,n.useState)(""),J=n.useRef(null),K=(e,t)=>{b(s=>(0,Ue.A)((0,Ue.A)({},s),{},{[e]:t})),f(0)},G=e=>{let t=(0,Ue.A)({},v);switch(e){case"easy":t.difficultyLevel="EASY",t.marksRange={min:"1",max:"2"};break;case"medium":t.difficultyLevel="MEDIUM",t.marksRange={min:"3",max:"4"};break;case"hard":t.difficultyLevel="HARD",t.marksRange={min:"5",max:""};break;case"withExplanation":t.hasExplanation="true";break;case"mcq":t.questionType="MULTIPLE_CHOICE"}b(t),f(0),i("Filter preset applied: ".concat(e),"success")},X=e=>{const t=o.filter(t=>t.difficultyLevel===e).filter(e=>!d.some(t=>t.id===e.id));u(e=>[...e,...t]),i("Selected ".concat(t.length," ").concat(e," questions"),"success")},Z=e=>{u(t=>t.some(t=>t.id===e.id)?t.filter(t=>t.id!==e.id):[...t,e])},ee=()=>{b({searchTerm:"",difficultyLevel:"",questionType:"",topicId:"",subjectId:"",courseTypeId:"",examSuitability:"",hasExplanation:"",marksRange:{min:"",max:""}}),f(0)},te=(0,n.useMemo)(()=>o.length,[o]),se=(0,n.useMemo)(()=>{const e={EASY:{count:0,marks:0},MEDIUM:{count:0,marks:0},HARD:{count:0,marks:0}};return d.forEach(t=>{var s;const a=(null===(s=t.difficultyLevel)||void 0===s?void 0:s.toUpperCase())||"MEDIUM";e[a]&&(e[a].count++,e[a].marks+=t.marks||0)}),e},[d]),ae=(0,n.useMemo)(()=>{const e=[];if(v.difficultyLevel&&e.push({key:"difficultyLevel",label:"Difficulty: ".concat(v.difficultyLevel),value:v.difficultyLevel}),v.questionType&&e.push({key:"questionType",label:"Type: ".concat(v.questionType),value:v.questionType}),v.courseTypeId){const t=k.find(e=>e.id===parseInt(v.courseTypeId));e.push({key:"courseTypeId",label:"Course Type: ".concat((null===t||void 0===t?void 0:t.name)||v.courseTypeId),value:v.courseTypeId})}if(v.subjectId){const t=N.find(e=>e.id===parseInt(v.subjectId));e.push({key:"subjectId",label:"Subject: ".concat((null===t||void 0===t?void 0:t.name)||v.subjectId),value:v.subjectId})}if(v.topicId){const t=y.find(e=>e.id===parseInt(v.topicId));e.push({key:"topicId",label:"Topic: ".concat((null===t||void 0===t?void 0:t.name)||v.topicId),value:v.topicId})}if(v.moduleId){const t=C.find(e=>e.id===parseInt(v.moduleId));e.push({key:"moduleId",label:"Module: ".concat((null===t||void 0===t?void 0:t.name)||v.moduleId),value:v.moduleId})}if(v.chapterId){const t=A.find(e=>e.id===parseInt(v.chapterId));e.push({key:"chapterId",label:"Chapter: ".concat((null===t||void 0===t?void 0:t.name)||v.chapterId),value:v.chapterId})}return v.hasExplanation&&e.push({key:"hasExplanation",label:"Has Explanation: ".concat("true"===v.hasExplanation?"Yes":"No"),value:v.hasExplanation}),(v.marksRange.min||v.marksRange.max)&&e.push({key:"marksRange",label:"Marks: ".concat(v.marksRange.min||"0","-").concat(v.marksRange.max||"\u221e"),value:v.marksRange}),e},[v,k,N,y,C,A]),ne=e=>{switch(null===e||void 0===e?void 0:e.toUpperCase()){case"EASY":return"#22c55e";case"MEDIUM":return"#f59e0b";case"HARD":return"#ef4444";default:return"#6b7280"}};return(0,Le.jsxs)("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(4px)"},children:[(0,Le.jsxs)("div",{className:"modal-content question-selection-modal",style:{width:"100vw",height:"100vh",maxWidth:"100vw",maxHeight:"100vh",margin:0,borderRadius:0,display:"flex",flexDirection:"column",background:"#f8fafc"},children:[(0,Le.jsx)("div",{className:"modal-header",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"24px 32px",flexShrink:0,boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:(0,Le.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,Le.jsxs)("div",{className:"modal-title",style:{flex:1},children:[(0,Le.jsx)("h2",{style:{margin:0,fontSize:"28px",fontWeight:"700",marginBottom:"8px"},children:"\ud83d\udccb Select Questions for Test"}),(0,Le.jsx)("p",{style:{margin:0,opacity:.95,fontSize:"16px",fontWeight:"500"},children:null===t||void 0===t?void 0:t.testName}),t&&"CONTENT_BASED"===t.testCreationMode&&(0,Le.jsxs)("div",{className:"info-alert",style:{marginTop:"16px",background:"rgba(255,255,255,0.15)",padding:"12px 16px",borderRadius:"8px",display:"flex",gap:"12px",alignItems:"center",border:"1px solid rgba(255,255,255,0.2)"},children:[(0,Le.jsx)("span",{style:{fontSize:"20px"},children:"\u2139\ufe0f"}),(0,Le.jsxs)("div",{children:[(0,Le.jsxs)("strong",{style:{fontSize:"14px"},children:["Pre-filtered for ",t.testLevel," level:"]})," ",(0,Le.jsxs)("span",{style:{fontSize:"14px",opacity:.9},children:[t.chapterName&&"Chapter: ".concat(t.chapterName),t.moduleName&&!t.chapterName&&"Module: ".concat(t.moduleName),t.topicName&&!t.moduleName&&!t.chapterName&&"Topic: ".concat(t.topicName),t.subjectName&&!t.topicName&&!t.moduleName&&!t.chapterName&&"Subject: ".concat(t.subjectName),t.courseTypeName&&!t.subjectName&&!t.topicName&&!t.moduleName&&!t.chapterName&&"Course Type: ".concat(t.courseTypeName)]})]})]}),t&&"EXAM_BASED"===t.testCreationMode&&(0,Le.jsxs)("div",{className:"info-alert",style:{marginTop:"16px",background:"rgba(255,255,255,0.15)",padding:"12px 16px",borderRadius:"8px",display:"flex",gap:"12px",alignItems:"center",border:"1px solid rgba(255,255,255,0.2)"},children:[(0,Le.jsx)("span",{style:{fontSize:"20px"},children:"\u2139\ufe0f"}),(0,Le.jsxs)("div",{children:[(0,Le.jsx)("strong",{style:{fontSize:"14px"},children:"Exam-Based Test:"})," ",(0,Le.jsx)("span",{style:{fontSize:"14px",opacity:.9},children:"Questions filtered by exam suitability tags"})]})]})]}),(0,Le.jsx)("button",{className:"modal-close",onClick:s,style:{background:"rgba(255,255,255,0.2)",color:"white",border:"none",borderRadius:"8px",width:"40px",height:"40px",fontSize:"24px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",marginLeft:"24px",flexShrink:0},children:"\u2715"})]})}),(0,Le.jsxs)("div",{className:"modal-body",style:{flex:1,overflow:"auto",padding:"24px 32px",display:"flex",flexDirection:"column",gap:"20px"},children:[(0,Le.jsxs)("div",{className:"selection-summary",style:{background:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",position:"sticky",top:0,zIndex:100},children:[(0,Le.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:d.length>0?"16px":"0"},children:[(0,Le.jsxs)("div",{style:{display:"flex",gap:"32px",alignItems:"center"},children:[(0,Le.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,Le.jsx)("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",width:"48px",height:"48px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",fontWeight:"bold"},children:d.length}),(0,Le.jsxs)("div",{children:[(0,Le.jsx)("div",{style:{fontSize:"24px",fontWeight:"700",color:"#1e293b"},children:"Questions Selected"}),(0,Le.jsxs)("div",{style:{fontSize:"14px",color:"#64748b"},children:[te," available to choose from"]})]})]}),(0,Le.jsxs)("div",{style:{padding:"12px 20px",background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",borderRadius:"10px",color:"white"},children:[(0,Le.jsx)("div",{style:{fontSize:"14px",opacity:.9},children:"Total Marks"}),(0,Le.jsx)("div",{style:{fontSize:"28px",fontWeight:"bold",marginTop:"4px"},children:d.reduce((e,t)=>e+(t.marks||0),0)})]})]}),(0,Le.jsxs)("div",{style:{display:"flex",gap:"12px"},children:[(0,Le.jsx)("button",{className:"btn btn-outline btn-sm",onClick:()=>{const e=o.map(e=>e.id);if(e.every(e=>d.some(t=>t.id===e)))u(t=>t.filter(t=>!e.includes(t.id)));else{const e=o.filter(e=>!d.some(t=>t.id===e.id));u(t=>[...t,...e])}},style:{padding:"10px 20px",borderRadius:"8px",border:"2px solid #cbd5e1",background:"white",color:"#475569",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:o.every(e=>d.some(t=>t.id===e.id))?"\u274c Deselect All":"\u2713 Select All Visible"}),(0,Le.jsx)("button",{className:"btn btn-outline btn-sm",onClick:()=>u([]),style:{padding:"10px 20px",borderRadius:"8px",border:"2px solid #fecaca",background:"white",color:"#dc2626",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:"\ud83d\uddd1\ufe0f Clear Selection"})]})]}),d.length>0&&(0,Le.jsxs)("div",{style:{paddingTop:"16px",borderTop:"1px solid #e2e8f0",display:"flex",gap:"20px",alignItems:"center"},children:[(0,Le.jsx)("span",{style:{fontWeight:"600",color:"#475569",fontSize:"14px"},children:"Difficulty Breakdown:"}),(0,Le.jsxs)("div",{style:{display:"flex",gap:"24px"},children:[(0,Le.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,Le.jsx)("div",{style:{background:"#22c55e",color:"white",padding:"4px 12px",borderRadius:"6px",fontSize:"13px",fontWeight:"600"},children:"\ud83d\udfe2 Easy"}),(0,Le.jsxs)("span",{style:{color:"#64748b",fontSize:"14px"},children:[(0,Le.jsx)("strong",{children:se.EASY.count})," (",se.EASY.marks,"m)"]})]}),(0,Le.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,Le.jsx)("div",{style:{background:"#f59e0b",color:"white",padding:"4px 12px",borderRadius:"6px",fontSize:"13px",fontWeight:"600"},children:"\ud83d\udfe1 Medium"}),(0,Le.jsxs)("span",{style:{color:"#64748b",fontSize:"14px"},children:[(0,Le.jsx)("strong",{children:se.MEDIUM.count})," (",se.MEDIUM.marks,"m)"]})]}),(0,Le.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,Le.jsx)("div",{style:{background:"#ef4444",color:"white",padding:"4px 12px",borderRadius:"6px",fontSize:"13px",fontWeight:"600"},children:"\ud83d\udd34 Hard"}),(0,Le.jsxs)("span",{style:{color:"#64748b",fontSize:"14px"},children:[(0,Le.jsx)("strong",{children:se.HARD.count})," (",se.HARD.marks,"m)"]})]})]})]})]}),(0,Le.jsxs)("div",{style:{background:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[(0,Le.jsx)("div",{style:{marginBottom:"16px",fontWeight:"600",color:"#1e293b",fontSize:"16px"},children:"\u26a1 Quick Filters"}),(0,Le.jsxs)("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[(0,Le.jsxs)("button",{className:"preset-btn easy",onClick:()=>G("easy"),style:{padding:"10px 20px",borderRadius:"8px",border:"none",background:"#dcfce7",color:"#166534",fontSize:"14px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[(0,Le.jsx)("span",{children:"\ud83d\udfe2"})," Easy (1-2m)"]}),(0,Le.jsxs)("button",{className:"preset-btn medium",onClick:()=>G("medium"),style:{padding:"10px 20px",borderRadius:"8px",border:"none",background:"#fef3c7",color:"#92400e",fontSize:"14px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[(0,Le.jsx)("span",{children:"\ud83d\udfe1"})," Medium (3-4m)"]}),(0,Le.jsxs)("button",{className:"preset-btn hard",onClick:()=>G("hard"),style:{padding:"10px 20px",borderRadius:"8px",border:"none",background:"#fee2e2",color:"#991b1b",fontSize:"14px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[(0,Le.jsx)("span",{children:"\ud83d\udd34"})," Hard (5+m)"]}),(0,Le.jsxs)("button",{className:"preset-btn explanation",onClick:()=>G("withExplanation"),style:{padding:"10px 20px",borderRadius:"8px",border:"none",background:"#dbeafe",color:"#1e40af",fontSize:"14px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[(0,Le.jsx)("span",{children:"\ud83d\udcdd"})," With Explanation"]}),(0,Le.jsxs)("button",{className:"preset-btn mcq",onClick:()=>G("mcq"),style:{padding:"10px 20px",borderRadius:"8px",border:"none",background:"#e0e7ff",color:"#3730a3",fontSize:"14px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[(0,Le.jsx)("span",{children:"\ud83c\udfaf"})," MCQ Only"]})]})]}),ae.length>0&&(0,Le.jsxs)("div",{className:"active-filters-bar",children:[(0,Le.jsx)("div",{className:"active-filters-label",children:(0,Le.jsxs)("strong",{children:["Active Filters (",ae.length,"):"]})}),(0,Le.jsxs)("div",{className:"filter-chips",children:[ae.map((e,t)=>(0,Le.jsxs)("div",{className:"filter-chip",children:[(0,Le.jsx)("span",{children:e.label}),(0,Le.jsx)("button",{className:"chip-remove",onClick:()=>{return t=e.key,b("marksRange"===t?e=>(0,Ue.A)((0,Ue.A)({},e),{},{marksRange:{min:"",max:""}}):e=>(0,Ue.A)((0,Ue.A)({},e),{},{[t]:""})),void f(0);var t},title:"Remove filter",children:"\u2715"})]},t)),(0,Le.jsx)("button",{className:"clear-all-filters-btn",onClick:ee,children:"Clear All"})]})]}),(0,Le.jsxs)("div",{className:"quick-selection-toolbar",children:[(0,Le.jsx)("div",{className:"toolbar-label",children:"Quick Select:"}),(0,Le.jsx)("button",{className:"quick-btn",onClick:()=>X("EASY"),children:"All Easy"}),(0,Le.jsx)("button",{className:"quick-btn",onClick:()=>X("MEDIUM"),children:"All Medium"}),(0,Le.jsx)("button",{className:"quick-btn",onClick:()=>X("HARD"),children:"All Hard"}),(0,Le.jsx)("button",{className:"quick-btn",onClick:()=>(e=>{const t=[...o.filter(e=>!d.some(t=>t.id===e.id))].sort(()=>Math.random()-.5).slice(0,e);u(e=>[...e,...t]),i("Randomly selected ".concat(t.length," questions"),"success")})(10),children:"Random 10"}),(0,Le.jsx)("button",{className:"quick-btn",onClick:()=>(e=>{const t=o.slice(0,e).filter(e=>!d.some(t=>t.id===e.id));u(e=>[...e,...t]),i("Selected first ".concat(t.length," questions"),"success")})(20),children:"First 20"})]}),(0,Le.jsxs)("div",{className:"filters-section",children:[(0,Le.jsxs)("div",{className:"filters-header",children:[(0,Le.jsx)("h4",{children:"Advanced Filters"}),(0,Le.jsx)("button",{className:"btn btn-link btn-sm",onClick:()=>z(!F),children:F?"Hide Filters":"Show Filters"})]}),F&&(0,Le.jsxs)("div",{className:"filters-content",children:[(0,Le.jsxs)("div",{className:"filter-row hierarchy-filters",children:[(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{children:"Chapter"}),(0,Le.jsxs)("select",{value:v.chapterId,onChange:e=>K("chapterId",e.target.value),className:"form-control",children:[(0,Le.jsx)("option",{value:"",children:"All Chapters"}),A.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name||e.chapterName},e.id))]})]}),(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{children:"Module"}),(0,Le.jsxs)("select",{value:v.moduleId,onChange:e=>K("moduleId",e.target.value),className:"form-control",children:[(0,Le.jsx)("option",{value:"",children:"All Modules"}),C.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name||e.moduleName},e.id))]})]}),(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{children:"Topic"}),(0,Le.jsxs)("select",{value:v.topicId,onChange:e=>K("topicId",e.target.value),className:"form-control",children:[(0,Le.jsx)("option",{value:"",children:"All Topics"}),y.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name||e.topicName},e.id))]})]}),(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{children:"Subject"}),(0,Le.jsxs)("select",{value:v.subjectId,onChange:e=>K("subjectId",e.target.value),className:"form-control",children:[(0,Le.jsx)("option",{value:"",children:"All Subjects"}),N.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name||e.subjectName},e.id))]})]})]}),(0,Le.jsxs)("div",{className:"filter-row",children:[(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{children:"Search"}),(0,Le.jsx)("input",{type:"text",value:Y,onChange:e=>{return t=e.target.value,$(t),J.current&&clearTimeout(J.current),void(J.current=setTimeout(()=>{b(e=>(0,Ue.A)((0,Ue.A)({},e),{},{searchTerm:t})),f(0)},500));var t},placeholder:"Search questions... (debounced)",className:"form-control"})]}),(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{children:"Difficulty"}),(0,Le.jsxs)("select",{value:v.difficultyLevel,onChange:e=>K("difficultyLevel",e.target.value),className:"form-control",children:[(0,Le.jsx)("option",{value:"",children:"All Difficulties"}),(0,Le.jsx)("option",{value:"EASY",children:"Easy"}),(0,Le.jsx)("option",{value:"MEDIUM",children:"Medium"}),(0,Le.jsx)("option",{value:"HARD",children:"Hard"})]})]}),(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{children:"Question Type"}),(0,Le.jsxs)("select",{value:v.questionType,onChange:e=>K("questionType",e.target.value),className:"form-control",children:[(0,Le.jsx)("option",{value:"",children:"All Types"}),(0,Le.jsx)("option",{value:"MULTIPLE_CHOICE",children:"Multiple Choice"}),(0,Le.jsx)("option",{value:"TRUE_FALSE",children:"True/False"}),(0,Le.jsx)("option",{value:"SHORT_ANSWER",children:"Short Answer"})]})]})]}),(0,Le.jsxs)("div",{className:"filter-row",children:[(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{children:"Marks Range"}),(0,Le.jsxs)("div",{className:"marks-range",children:[(0,Le.jsx)("input",{type:"number",value:v.marksRange.min,onChange:e=>K("marksRange",(0,Ue.A)((0,Ue.A)({},v.marksRange),{},{min:e.target.value})),placeholder:"Min",className:"form-control",min:"1"}),(0,Le.jsx)("span",{children:"to"}),(0,Le.jsx)("input",{type:"number",value:v.marksRange.max,onChange:e=>K("marksRange",(0,Ue.A)((0,Ue.A)({},v.marksRange),{},{max:e.target.value})),placeholder:"Max",className:"form-control",min:"1"})]})]}),(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{children:"Has Explanation"}),(0,Le.jsxs)("select",{value:v.hasExplanation,onChange:e=>K("hasExplanation",e.target.value),className:"form-control",children:[(0,Le.jsx)("option",{value:"",children:"All"}),(0,Le.jsx)("option",{value:"true",children:"Yes"}),(0,Le.jsx)("option",{value:"false",children:"No"})]})]}),(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{children:"Sort By"}),(0,Le.jsxs)("select",{value:O,onChange:e=>_(e.target.value),className:"form-control",children:[(0,Le.jsx)("option",{value:"createdAt",children:"Created Date"}),(0,Le.jsx)("option",{value:"marks",children:"Marks"}),(0,Le.jsx)("option",{value:"difficultyLevel",children:"Difficulty"}),(0,Le.jsx)("option",{value:"questionText",children:"Question Text"})]})]})]}),(0,Le.jsxs)("div",{className:"filter-actions",children:[(0,Le.jsx)("button",{className:"btn btn-outline",onClick:ee,children:"\ud83d\udd04 Clear Filters"}),(0,Le.jsxs)("div",{className:"view-controls",children:[(0,Le.jsx)("button",{className:"btn btn-sm ".concat("grid"===B?"btn-primary":"btn-outline"),onClick:()=>U("grid"),children:"\u229e Grid"}),(0,Le.jsx)("button",{className:"btn btn-sm ".concat("list"===B?"btn-primary":"btn-outline"),onClick:()=>U("list"),children:"\u2630 List"})]})]})]})]}),(0,Le.jsxs)("div",{className:"questions-section",children:[(0,Le.jsxs)("div",{className:"section-header",children:[(0,Le.jsx)("h4",{children:"\ud83d\udccb Available Questions"}),(0,Le.jsx)("div",{className:"view-controls",children:(0,Le.jsxs)("span",{className:"sort-indicator",children:["Sorted by: ",O," (","asc"===q?"\u2191":"\u2193",")"]})})]}),p&&0===o.length?(0,Le.jsx)("div",{className:"loading-state",children:(0,Le.jsx)("div",{className:"loading-spinner",children:"Loading questions..."})}):0===o.length?(0,Le.jsxs)("div",{className:"empty-state",children:[(0,Le.jsx)("div",{className:"empty-icon",children:"No Questions"}),(0,Le.jsx)("h4",{children:"No questions found"}),(0,Le.jsx)("p",{children:"Try adjusting your filters or create new questions"})]}):(0,Le.jsx)("div",{className:"questions-container ".concat(B),children:o.map(e=>{const t=d.some(t=>t.id===e.id),s=ne(e.difficultyLevel);return(0,Le.jsxs)("div",{className:"question-card enhanced ".concat(t?"selected":""),style:{borderLeftColor:s,position:"relative",background:"white",borderRadius:"12px",padding:"20px",border:"1px solid ".concat(t?"#667eea":"#e2e8f0"),boxShadow:t?"0 4px 12px rgba(102,126,234,0.2)":"0 2px 4px rgba(0,0,0,0.05)",transition:"all 0.2s ease",display:"flex",gap:"16px"},children:[(0,Le.jsx)("div",{className:"card-selection",style:{display:"flex",alignItems:"flex-start",paddingTop:"4px"},children:(0,Le.jsx)("input",{type:"checkbox",className:"question-checkbox",checked:t,onChange:t=>{t.stopPropagation(),Z(e)},style:{width:"20px",height:"20px",cursor:"pointer",accentColor:"#667eea"}})}),(0,Le.jsxs)("div",{className:"card-main",onClick:()=>Z(e),style:{flex:1,cursor:"pointer",paddingRight:"100px"},children:[(e.chapterName||e.moduleName||e.topicName||e.subjectName)&&(0,Le.jsxs)("div",{className:"question-breadcrumb",children:[e.className&&(0,Le.jsx)("span",{children:e.className}),e.className&&e.subjectName&&(0,Le.jsx)("span",{className:"separator",children:"\u203a"}),e.subjectName&&(0,Le.jsx)("span",{children:e.subjectName}),e.subjectName&&e.topicName&&(0,Le.jsx)("span",{className:"separator",children:"\u203a"}),e.topicName&&(0,Le.jsx)("span",{children:e.topicName}),e.topicName&&e.moduleName&&(0,Le.jsx)("span",{className:"separator",children:"\u203a"}),e.moduleName&&(0,Le.jsx)("span",{children:e.moduleName}),e.moduleName&&e.chapterName&&(0,Le.jsx)("span",{className:"separator",children:"\u203a"}),e.chapterName&&(0,Le.jsx)("span",{children:e.chapterName})]}),(0,Le.jsx)("div",{className:"question-text",children:(a=e.questionText,a?a.length>100?a.substring(0,100)+"...":a:"No question text")}),e.options&&e.options.length>0&&(0,Le.jsxs)("div",{className:"question-options",children:[e.options.slice(0,2).map((e,t)=>{var s,a;return(0,Le.jsxs)("div",{className:"option-preview",children:[(0,Le.jsx)("span",{className:"option-letter",children:e.optionLetter||String.fromCharCode(65+t)}),(0,Le.jsxs)("span",{className:"option-text",children:[(null===(s=e.optionText)||void 0===s?void 0:s.substring(0,50))||"No text",(null===(a=e.optionText)||void 0===a?void 0:a.length)>50?"...":""]})]},t)}),e.options.length>2&&(0,Le.jsxs)("div",{className:"more-options",children:["+",e.options.length-2," more options"]})]}),(0,Le.jsxs)("div",{className:"question-badges",children:[(0,Le.jsx)("span",{className:"difficulty-badge",style:{backgroundColor:s},children:e.difficultyLevel||"UNKNOWN"}),(0,Le.jsxs)("span",{className:"marks-badge",children:[e.marks||0," marks"]}),(0,Le.jsx)("span",{className:"type-badge",children:e.questionType||"MCQ"}),e.explanation&&(0,Le.jsx)("span",{className:"has-explanation-badge",children:"\ud83d\udcdd"})]})]}),(0,Le.jsx)("div",{className:"card-actions",style:{position:"absolute",top:"12px",right:"12px",display:"flex",gap:"8px"},children:(0,Le.jsxs)("button",{className:"action-btn preview-btn",onClick:t=>{t.stopPropagation(),R(e),D(!0)},title:"Preview Question",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"8px",padding:"8px 16px",fontSize:"16px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",fontWeight:"500",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"transform 0.2s ease"},onMouseOver:e=>e.currentTarget.style.transform="scale(1.05)",onMouseOut:e=>e.currentTarget.style.transform="scale(1)",children:[(0,Le.jsx)("span",{style:{fontSize:"18px"},children:"\ud83d\udc41\ufe0f"}),(0,Le.jsx)("span",{style:{fontSize:"13px"},children:"View"})]})})]},e.id);var a})}),x&&(0,Le.jsx)("div",{className:"load-more-section",children:(0,Le.jsx)("button",{className:"btn btn-outline",onClick:()=>{!p&&x&&f(e=>e+1)},disabled:p,children:p?"Loading...":"Load More Questions"})})]})]}),(0,Le.jsxs)("div",{className:"modal-footer",style:{background:"white",padding:"20px 32px",borderTop:"2px solid #e2e8f0",boxShadow:"0 -4px 6px rgba(0,0,0,0.05)",display:"flex",justifyContent:"space-between",alignItems:"center",flexShrink:0},children:[(0,Le.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[(0,Le.jsxs)("div",{style:{fontSize:"18px",fontWeight:"600",color:"#1e293b"},children:[d.length," Question",1!==d.length?"s":""," Selected"]}),(0,Le.jsxs)("div",{style:{fontSize:"14px",color:"#64748b"},children:["Total marks: ",(0,Le.jsx)("strong",{style:{color:"#667eea"},children:d.reduce((e,t)=>e+(t.marks||0),0)})]})]}),(0,Le.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[(0,Le.jsx)("button",{className:"btn btn-secondary",onClick:s,style:{padding:"12px 32px",borderRadius:"8px",border:"2px solid #cbd5e1",background:"white",color:"#475569",fontSize:"16px",fontWeight:"500",cursor:"pointer"},children:"Cancel"}),(0,Le.jsxs)("button",{className:"btn btn-primary",onClick:()=>{0!==d.length?a(d):i("Please select at least one question","warning")},disabled:0===d.length,style:{padding:"12px 32px",borderRadius:"8px",background:0===d.length?"#cbd5e1":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",fontSize:"16px",fontWeight:"600",cursor:0===d.length?"not-allowed":"pointer",opacity:0===d.length?.6:1},children:["\u2795 Add ",d.length," Question",1!==d.length?"s":""," to Test"]})]})]})]}),M&&L&&(0,Le.jsx)("div",{className:"modal-overlay preview-overlay",onClick:()=>D(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(4px)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:(0,Le.jsxs)("div",{className:"modal-content preview-modal-content",onClick:e=>e.stopPropagation(),style:{background:"white",borderRadius:"16px",maxWidth:"900px",width:"100%",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[(0,Le.jsxs)("div",{className:"preview-modal-header",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"24px",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",display:"flex",justifyContent:"space-between",alignItems:"center",flexShrink:0},children:[(0,Le.jsx)("h3",{style:{margin:0,fontSize:"24px",fontWeight:"600"},children:"\ud83d\udccb Question Preview"}),(0,Le.jsx)("button",{className:"modal-close",onClick:()=>D(!1),style:{background:"rgba(255,255,255,0.2)",color:"white",border:"none",borderRadius:"8px",width:"36px",height:"36px",fontSize:"20px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"\u2715"})]}),(0,Le.jsxs)("div",{className:"preview-modal-body",style:{padding:"24px",overflowY:"auto",flex:1},children:[(0,Le.jsxs)("div",{className:"preview-metadata",style:{display:"flex",gap:"16px",marginBottom:"24px",flexWrap:"wrap"},children:[(0,Le.jsxs)("div",{className:"metadata-item",style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,Le.jsx)("span",{style:{fontSize:"14px",color:"#64748b",fontWeight:"500"},children:"Difficulty:"}),(0,Le.jsx)("span",{className:"meta-value difficulty-badge",style:{backgroundColor:ne(L.difficultyLevel),color:"white",padding:"4px 12px",borderRadius:"6px",fontSize:"13px",fontWeight:"600"},children:L.difficultyLevel||"UNKNOWN"})]}),(0,Le.jsxs)("div",{className:"metadata-item",style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,Le.jsx)("span",{style:{fontSize:"14px",color:"#64748b",fontWeight:"500"},children:"Marks:"}),(0,Le.jsx)("span",{style:{background:"#dbeafe",color:"#1e40af",padding:"4px 12px",borderRadius:"6px",fontSize:"13px",fontWeight:"600"},children:L.marks||0})]}),(0,Le.jsxs)("div",{className:"metadata-item",style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,Le.jsx)("span",{style:{fontSize:"14px",color:"#64748b",fontWeight:"500"},children:"Type:"}),(0,Le.jsx)("span",{style:{background:"#e0e7ff",color:"#3730a3",padding:"4px 12px",borderRadius:"6px",fontSize:"13px",fontWeight:"600"},children:L.questionType||"MCQ"})]})]}),(L.chapterName||L.moduleName||L.topicName)&&(0,Le.jsxs)("div",{style:{background:"#f8fafc",padding:"16px",borderRadius:"8px",marginBottom:"24px"},children:[(0,Le.jsx)("strong",{style:{fontSize:"14px",color:"#475569",marginBottom:"8px",display:"block"},children:"\ud83d\udccd Content Path:"}),(0,Le.jsxs)("div",{style:{display:"flex",gap:"8px",alignItems:"center",fontSize:"14px",color:"#667eea",flexWrap:"wrap"},children:[L.className&&(0,Le.jsx)("span",{style:{fontWeight:"500"},children:L.className}),L.className&&L.subjectName&&(0,Le.jsx)("span",{style:{color:"#94a3b8"},children:"\u203a"}),L.subjectName&&(0,Le.jsx)("span",{style:{fontWeight:"500"},children:L.subjectName}),L.subjectName&&L.topicName&&(0,Le.jsx)("span",{style:{color:"#94a3b8"},children:"\u203a"}),L.topicName&&(0,Le.jsx)("span",{style:{fontWeight:"500"},children:L.topicName}),L.topicName&&L.moduleName&&(0,Le.jsx)("span",{style:{color:"#94a3b8"},children:"\u203a"}),L.moduleName&&(0,Le.jsx)("span",{style:{fontWeight:"500"},children:L.moduleName}),L.moduleName&&L.chapterName&&(0,Le.jsx)("span",{style:{color:"#94a3b8"},children:"\u203a"}),L.chapterName&&(0,Le.jsx)("span",{style:{fontWeight:"500"},children:L.chapterName})]})]}),(0,Le.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,Le.jsx)("h4",{style:{margin:"0 0 12px 0",fontSize:"16px",fontWeight:"600",color:"#1e293b"},children:"\u2753 Question:"}),(0,Le.jsx)("div",{style:{fontSize:"16px",lineHeight:"1.7",color:"#334155",background:"#f8fafc",padding:"16px",borderRadius:"8px",borderLeft:"4px solid #667eea"},children:L.questionText})]}),L.options&&L.options.length>0&&(0,Le.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,Le.jsx)("h4",{style:{margin:"0 0 16px 0",fontSize:"16px",fontWeight:"600",color:"#1e293b"},children:"\ud83d\udcdd Options:"}),(0,Le.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:L.options.map((e,t)=>{const s=e.isCorrect||e.optionLetter===L.correctAnswer;return(0,Le.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px 16px",background:s?"#dcfce7":"white",border:"2px solid ".concat(s?"#86efac":"#e2e8f0"),borderRadius:"8px"},children:[(0,Le.jsx)("span",{style:{background:s?"#22c55e":"#94a3b8",color:"white",width:"32px",height:"32px",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:"bold",flexShrink:0},children:e.optionLetter||String.fromCharCode(65+t)}),(0,Le.jsx)("span",{style:{flex:1,color:"#334155",fontSize:"15px",lineHeight:"1.5"},children:e.optionText}),s&&(0,Le.jsx)("span",{style:{background:"#22c55e",color:"white",padding:"4px 12px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px"},children:"\u2713 Correct"})]},t)})})]}),L.explanation&&(0,Le.jsxs)("div",{style:{marginBottom:"24px",background:"linear-gradient(135deg, #dbeafe 0%, #e0e7ff 100%)",padding:"20px",borderRadius:"12px"},children:[(0,Le.jsx)("h4",{style:{margin:"0 0 12px 0",fontSize:"16px",fontWeight:"600",color:"#1e40af",display:"flex",alignItems:"center",gap:"8px"},children:"\ud83d\udca1 Explanation:"}),(0,Le.jsx)("div",{style:{fontSize:"15px",lineHeight:"1.7",color:"#1e3a8a"},children:L.explanation})]}),L.examSuitabilities&&L.examSuitabilities.length>0&&(0,Le.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,Le.jsx)("h4",{style:{margin:"0 0 12px 0",fontSize:"16px",fontWeight:"600",color:"#1e293b"},children:"\ud83c\udfaf Suitable for Exams:"}),(0,Le.jsx)("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:L.examSuitabilities.map((e,t)=>(0,Le.jsx)("span",{style:{background:"#e0e7ff",color:"#3730a3",padding:"6px 14px",borderRadius:"6px",fontSize:"13px",fontWeight:"500"},children:e.examName||e.name||e},t))})]})]}),(0,Le.jsxs)("div",{className:"preview-modal-footer",style:{background:"#f8fafc",padding:"20px 24px",borderTop:"1px solid #e2e8f0",borderBottomLeftRadius:"16px",borderBottomRightRadius:"16px",display:"flex",justifyContent:"flex-end",gap:"12px",flexShrink:0},children:[(0,Le.jsx)("button",{className:"btn btn-secondary",onClick:()=>D(!1),style:{padding:"10px 24px",borderRadius:"8px",border:"2px solid #cbd5e1",background:"white",color:"#475569",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:"Close"}),(0,Le.jsx)("button",{className:"btn btn-primary",onClick:()=>{Z(L),D(!1)},style:{padding:"10px 24px",borderRadius:"8px",background:d.some(e=>e.id===L.id)?"#dc2626":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:d.some(e=>e.id===L.id)?"\u274c Remove from Selection":"\u2713 Add to Selection"})]})]})})]})},vt=e=>{let{tests:t,onClose:s}=e;const{addNotification:a}=(0,Pe.nm)(),[r,i]=(0,n.useState)("30"),[l,o]=(0,n.useState)("overview"),c=(0,n.useMemo)(()=>{if(!t||0===t.length)return{overview:{totalTests:0,publishedTests:0,draftTests:0,totalQuestions:0,averageQuestionsPerTest:0,totalMarks:0,averageMarksPerTest:0},testTypes:{},difficultyDistribution:{},timeDistribution:{},recentActivity:[]};const e=new Date,s=24*parseInt(r)*60*60*1e3,a=t.filter(t=>new Date(t.createdAt)>=new Date(e.getTime()-s)),n={totalTests:a.length,publishedTests:a.filter(e=>e.isPublished).length,draftTests:a.filter(e=>!e.isPublished).length,totalQuestions:a.reduce((e,t)=>e+(t.questionCount||0),0),averageQuestionsPerTest:a.length>0?Math.round(a.reduce((e,t)=>e+(t.questionCount||0),0)/a.length):0,totalMarks:a.reduce((e,t)=>e+(t.totalMarks||0),0),averageMarksPerTest:a.length>0?Math.round(a.reduce((e,t)=>e+(t.totalMarks||0),0)/a.length):0},i=a.reduce((e,t)=>{const s=t.testType||"PRACTICE";return e[s]=(e[s]||0)+1,e},{}),l={};a.forEach(e=>{const t=new Date(e.createdAt).toLocaleDateString();l[t]=(l[t]||0)+1});const o=a.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)).slice(0,10).map(e=>({id:e.id,name:e.testName,type:e.testType||"PRACTICE",status:e.isPublished?"Published":"Draft",createdAt:e.createdAt,questions:e.questionCount||0,marks:e.totalMarks||0}));return{overview:n,testTypes:i,difficultyDistribution:{},timeDistribution:l,recentActivity:o}},[t,r]),d=e=>{switch(e){case"Published":return"#22c55e";case"Draft":return"#f59e0b";default:return"#6b7280"}},u=e=>{switch(e){case"PRACTICE":return"#3b82f6";case"MOCK":return"#8b5cf6";case"FINAL":return"#ef4444";case"QUIZ":return"#10b981";default:return"#6b7280"}},p=e=>e.toLocaleString(),m=(e,t)=>0===t?0:Math.round(e/t*100);return(0,Le.jsx)("div",{className:"modal-overlay",children:(0,Le.jsxs)("div",{className:"modal-content test-analytics-modal",children:[(0,Le.jsxs)("div",{className:"modal-header",children:[(0,Le.jsxs)("div",{className:"modal-title",children:[(0,Le.jsx)("h3",{children:"\ud83d\udcca Test Analytics Dashboard"}),(0,Le.jsx)("p",{children:"Comprehensive insights into your test management"})]}),(0,Le.jsx)("button",{className:"modal-close",onClick:s,children:"\u2715"})]}),(0,Le.jsxs)("div",{className:"modal-body",children:[(0,Le.jsxs)("div",{className:"analytics-controls",children:[(0,Le.jsxs)("div",{className:"control-group",children:[(0,Le.jsx)("label",{children:"Time Range"}),(0,Le.jsxs)("select",{value:r,onChange:e=>i(e.target.value),className:"form-control",children:[(0,Le.jsx)("option",{value:"7",children:"Last 7 days"}),(0,Le.jsx)("option",{value:"30",children:"Last 30 days"}),(0,Le.jsx)("option",{value:"90",children:"Last 90 days"}),(0,Le.jsx)("option",{value:"365",children:"Last year"}),(0,Le.jsx)("option",{value:"all",children:"All time"})]})]}),(0,Le.jsxs)("div",{className:"control-group",children:[(0,Le.jsx)("label",{children:"View"}),(0,Le.jsxs)("select",{value:l,onChange:e=>o(e.target.value),className:"form-control",children:[(0,Le.jsx)("option",{value:"overview",children:"Overview"}),(0,Le.jsx)("option",{value:"types",children:"Test Types"}),(0,Le.jsx)("option",{value:"timeline",children:"Timeline"}),(0,Le.jsx)("option",{value:"activity",children:"Recent Activity"})]})]})]}),"overview"===l&&(0,Le.jsxs)("div",{className:"analytics-section",children:[(0,Le.jsxs)("div",{className:"section-header",children:[(0,Le.jsx)("h4",{children:"\ud83d\udcc8 Overview Metrics"}),(0,Le.jsxs)("span",{className:"time-range",children:["Last ","all"===r?"all time":"".concat(r," days")]})]}),(0,Le.jsxs)("div",{className:"metrics-grid",children:[(0,Le.jsxs)("div",{className:"metric-card",children:[(0,Le.jsx)("div",{className:"metric-icon",children:"\ud83d\udcdd"}),(0,Le.jsxs)("div",{className:"metric-content",children:[(0,Le.jsx)("div",{className:"metric-value",children:p(c.overview.totalTests)}),(0,Le.jsx)("div",{className:"metric-label",children:"Total Tests"})]})]}),(0,Le.jsxs)("div",{className:"metric-card",children:[(0,Le.jsx)("div",{className:"metric-icon",children:"\u2705"}),(0,Le.jsxs)("div",{className:"metric-content",children:[(0,Le.jsx)("div",{className:"metric-value",children:p(c.overview.publishedTests)}),(0,Le.jsx)("div",{className:"metric-label",children:"Published"})]})]}),(0,Le.jsxs)("div",{className:"metric-card",children:[(0,Le.jsx)("div",{className:"metric-icon",children:"\ud83d\udccb"}),(0,Le.jsxs)("div",{className:"metric-content",children:[(0,Le.jsx)("div",{className:"metric-value",children:p(c.overview.draftTests)}),(0,Le.jsx)("div",{className:"metric-label",children:"Drafts"})]})]}),(0,Le.jsxs)("div",{className:"metric-card",children:[(0,Le.jsx)("div",{className:"metric-icon",children:"\u2753"}),(0,Le.jsxs)("div",{className:"metric-content",children:[(0,Le.jsx)("div",{className:"metric-value",children:p(c.overview.totalQuestions)}),(0,Le.jsx)("div",{className:"metric-label",children:"Total Questions"})]})]}),(0,Le.jsxs)("div",{className:"metric-card",children:[(0,Le.jsx)("div",{className:"metric-icon",children:"\ud83d\udcca"}),(0,Le.jsxs)("div",{className:"metric-content",children:[(0,Le.jsx)("div",{className:"metric-value",children:c.overview.averageQuestionsPerTest}),(0,Le.jsx)("div",{className:"metric-label",children:"Avg Questions/Test"})]})]}),(0,Le.jsxs)("div",{className:"metric-card",children:[(0,Le.jsx)("div",{className:"metric-icon",children:"\ud83c\udfaf"}),(0,Le.jsxs)("div",{className:"metric-content",children:[(0,Le.jsx)("div",{className:"metric-value",children:p(c.overview.totalMarks)}),(0,Le.jsx)("div",{className:"metric-label",children:"Total Marks"})]})]})]}),(0,Le.jsxs)("div",{className:"progress-section",children:[(0,Le.jsx)("h5",{children:"Test Status Distribution"}),(0,Le.jsxs)("div",{className:"progress-item",children:[(0,Le.jsxs)("div",{className:"progress-label",children:[(0,Le.jsx)("span",{children:"Published Tests"}),(0,Le.jsxs)("span",{children:[c.overview.publishedTests," (",m(c.overview.publishedTests,c.overview.totalTests),"%)"]})]}),(0,Le.jsx)("div",{className:"progress-bar",children:(0,Le.jsx)("div",{className:"progress-fill published",style:{width:"".concat(m(c.overview.publishedTests,c.overview.totalTests),"%")}})})]}),(0,Le.jsxs)("div",{className:"progress-item",children:[(0,Le.jsxs)("div",{className:"progress-label",children:[(0,Le.jsx)("span",{children:"Draft Tests"}),(0,Le.jsxs)("span",{children:[c.overview.draftTests," (",m(c.overview.draftTests,c.overview.totalTests),"%)"]})]}),(0,Le.jsx)("div",{className:"progress-bar",children:(0,Le.jsx)("div",{className:"progress-fill draft",style:{width:"".concat(m(c.overview.draftTests,c.overview.totalTests),"%")}})})]})]})]}),"types"===l&&(0,Le.jsxs)("div",{className:"analytics-section",children:[(0,Le.jsx)("div",{className:"section-header",children:(0,Le.jsx)("h4",{children:"\ud83d\udcca Test Types Distribution"})}),(0,Le.jsx)("div",{className:"types-grid",children:Object.entries(c.testTypes).map(e=>{let[t,s]=e;return(0,Le.jsxs)("div",{className:"type-card",children:[(0,Le.jsxs)("div",{className:"type-header",children:[(0,Le.jsx)("div",{className:"type-icon",style:{backgroundColor:u(t)},children:t.charAt(0)}),(0,Le.jsxs)("div",{className:"type-info",children:[(0,Le.jsx)("div",{className:"type-name",children:t}),(0,Le.jsxs)("div",{className:"type-count",children:[s," tests"]})]})]}),(0,Le.jsxs)("div",{className:"type-percentage",children:[m(s,c.overview.totalTests),"%"]})]},t)})})]}),"timeline"===l&&(0,Le.jsxs)("div",{className:"analytics-section",children:[(0,Le.jsx)("div",{className:"section-header",children:(0,Le.jsx)("h4",{children:"\ud83d\udcc5 Creation Timeline"})}),(0,Le.jsx)("div",{className:"timeline-chart",children:Object.entries(c.timeDistribution).sort((e,t)=>{let[s]=e,[a]=t;return new Date(s)-new Date(a)}).map(e=>{let[t,s]=e;return(0,Le.jsxs)("div",{className:"timeline-item",children:[(0,Le.jsx)("div",{className:"timeline-date",children:t}),(0,Le.jsx)("div",{className:"timeline-bar",children:(0,Le.jsx)("div",{className:"timeline-fill",style:{width:"".concat(Math.max(10,s/Math.max(...Object.values(c.timeDistribution))*100),"%")}})}),(0,Le.jsx)("div",{className:"timeline-count",children:s})]},t)})})]}),"activity"===l&&(0,Le.jsxs)("div",{className:"analytics-section",children:[(0,Le.jsx)("div",{className:"section-header",children:(0,Le.jsx)("h4",{children:"\ud83d\udd52 Recent Activity"})}),(0,Le.jsx)("div",{className:"activity-list",children:c.recentActivity.map((e,t)=>(0,Le.jsxs)("div",{className:"activity-item",children:[(0,Le.jsxs)("div",{className:"activity-number",children:["#",t+1]}),(0,Le.jsxs)("div",{className:"activity-content",children:[(0,Le.jsx)("div",{className:"activity-title",children:e.name}),(0,Le.jsxs)("div",{className:"activity-meta",children:[(0,Le.jsx)("span",{className:"activity-type",style:{backgroundColor:u(e.type)},children:e.type}),(0,Le.jsx)("span",{className:"activity-status",style:{backgroundColor:d(e.status)},children:e.status}),(0,Le.jsxs)("span",{className:"activity-stats",children:[e.questions," questions \u2022 ",e.marks," marks"]})]})]}),(0,Le.jsx)("div",{className:"activity-date",children:new Date(e.createdAt).toLocaleDateString()})]},e.id))})]})]}),(0,Le.jsxs)("div",{className:"modal-footer",children:[(0,Le.jsx)("div",{className:"footer-info",children:(0,Le.jsxs)("span",{children:["Analytics for ",c.overview.totalTests," tests"]})}),(0,Le.jsxs)("div",{className:"footer-actions",children:[(0,Le.jsx)("button",{className:"btn btn-secondary",onClick:s,children:"Close"}),(0,Le.jsx)("button",{className:"btn btn-primary",onClick:()=>a("Export feature coming soon!","info"),children:"\ud83d\udcca Export Data"})]})]})]})})},bt=e=>{let{test:t,onEdit:s,onDelete:a,onPublishToggle:n,onManageQuestions:r,onSelect:i,isSelected:l}=e;const{id:o,testName:c,description:d,instructions:u,timeLimitMinutes:p,totalMarks:m,passingMarks:h,negativeMarking:f,negativeMarkPercentage:x,maxAttempts:g,isPublished:v,status:b,startDate:y,endDate:j,masterExamId:N,masterExam:w,createdAt:k,updatedAt:S,createdBy:C,updatedBy:I,questionCount:A=0,testCreationMode:E,testLevel:T,courseTypeName:P,courseName:L,className:R,examName:M,subjectName:D,topicName:F,moduleName:z,chapterName:O}=t,_=()=>{if(!y&&!j)return"Always Available";const e=new Date,t=y?new Date(y):null,s=j?new Date(j):null;return t&&e<t?"Not Started":s&&e>s?"Expired":"Available"};return(0,Le.jsxs)("div",{className:"test-list-card ".concat(l?"selected":""),children:[i&&(0,Le.jsx)("div",{className:"selection-checkbox",children:(0,Le.jsx)("input",{type:"checkbox",checked:l||!1,onChange:e=>i&&i(e.target.checked),className:"test-checkbox"})}),(0,Le.jsxs)("div",{className:"card-header",children:[(0,Le.jsxs)("div",{className:"test-title-section",children:[(0,Le.jsx)("h3",{className:"test-title",children:c||"Untitled Test"}),(0,Le.jsxs)("div",{className:"test-badges",children:[(()=>{if("EXAM_BASED"===E)return(0,Le.jsx)("span",{className:"test-level-badge exam-based",children:"\ud83d\udcdd Exam-Based"});if(T){const e=T.toLowerCase().replace("_","-"),t=T.replace("_","-");return(0,Le.jsxs)("span",{className:"test-level-badge ".concat(e),children:["CHAPTER"===T&&"\ud83d\udcd6","MODULE"===T&&"\ud83c\udfaf","SUBJECT"===T&&"\ud83d\udcda","CLASS_EXAM"===T&&"\ud83c\udf93","GENERAL"===T&&"\ud83d\udcd1"," ",t]})}return null})(),(0,Le.jsxs)("span",{className:((e,t)=>t?"badge badge-success":"DRAFT"===e?"badge badge-warning":"badge badge-secondary")(b,v),children:[((e,t)=>t?"\ud83d\udce2":"DRAFT"===e?"\ud83d\udcdd":"\u23f8\ufe0f")(b,v)," ",((e,t)=>t?"Published":"DRAFT"===e?"Draft":"Inactive")(b,v)]}),(0,Le.jsx)("span",{className:"availability-badge ".concat((()=>{switch(_()){case"Available":return"availability-available";case"Not Started":return"availability-pending";case"Expired":return"availability-expired";default:return"availability-neutral"}})()),children:_()})]})]}),(0,Le.jsxs)("div",{className:"card-actions",children:[(0,Le.jsxs)("button",{className:"btn btn-sm btn-outline",onClick:()=>r&&r(t),title:"Manage Questions",children:["\ud83d\udccb (",A,")"]}),(0,Le.jsx)("button",{className:"btn btn-sm btn-outline",onClick:()=>s&&s(t),title:"Edit Test",children:"\u270f\ufe0f"}),(0,Le.jsx)("button",{className:"btn btn-sm ".concat(v?"btn-warning":"btn-success"),onClick:()=>n&&n(t),title:v?"Unpublish Test":"Publish Test",children:v?"\ud83d\udd12":"\ud83d\udce2"}),(0,Le.jsx)("button",{className:"btn btn-sm btn-danger",onClick:()=>a&&a(o),title:"Delete Test",children:"\ud83d\uddd1\ufe0f"})]})]}),(0,Le.jsxs)("div",{className:"card-content",children:[d&&(0,Le.jsx)("div",{className:"test-description",children:(0,Le.jsx)("p",{children:d})}),(0,Le.jsxs)("div",{className:"test-config",children:[(0,Le.jsxs)("div",{className:"config-row",children:[(0,Le.jsxs)("div",{className:"config-item",children:[(0,Le.jsx)("span",{className:"config-icon",children:"\ud83d\udcda"}),(0,Le.jsx)("span",{className:"config-label",children:"Exam:"}),(0,Le.jsx)("span",{className:"config-value",children:null!==w&&void 0!==w&&w.exam?w.exam:null!==w&&void 0!==w&&w.examName?w.examName:null!==w&&void 0!==w&&w.name?w.name:"Exam ".concat(N)})]}),(0,Le.jsxs)("div",{className:"config-item",children:[(0,Le.jsx)("span",{className:"config-icon",children:"\u23f1\ufe0f"}),(0,Le.jsx)("span",{className:"config-label",children:"Duration:"}),(0,Le.jsx)("span",{className:"config-value",children:(e=>{const t=Math.floor(e/60),s=e%60;return t>0?"".concat(t,"h ").concat(s,"m"):"".concat(s,"m")})(p)})]}),(0,Le.jsxs)("div",{className:"config-item",children:[(0,Le.jsx)("span",{className:"config-icon",children:"\ud83d\udcca"}),(0,Le.jsx)("span",{className:"config-label",children:"Marks:"}),(0,Le.jsxs)("span",{className:"config-value",children:[m," (",h," passing)"]})]})]}),(0,Le.jsxs)("div",{className:"config-row",children:[(0,Le.jsxs)("div",{className:"config-item",children:[(0,Le.jsx)("span",{className:"config-icon",children:"\ud83d\udd04"}),(0,Le.jsx)("span",{className:"config-label",children:"Max Attempts:"}),(0,Le.jsx)("span",{className:"config-value",children:g})]}),f&&(0,Le.jsxs)("div",{className:"config-item",children:[(0,Le.jsx)("span",{className:"config-icon",children:"\u2796"}),(0,Le.jsx)("span",{className:"config-label",children:"Negative Marking:"}),(0,Le.jsxs)("span",{className:"config-value",children:[x,"%"]})]})]})]}),"CONTENT_BASED"===E&&(P||L||R||M||D||F||z||O)&&(0,Le.jsxs)("div",{className:"test-content-linkage",children:[P&&(0,Le.jsxs)("div",{className:"linkage-item",children:[(0,Le.jsx)("span",{className:"linkage-item-icon",children:"\ud83d\udcda"}),(0,Le.jsx)("span",{className:"linkage-item-label",children:"Type:"}),(0,Le.jsx)("span",{className:"linkage-item-value",children:P})]}),L&&(0,Le.jsxs)("div",{className:"linkage-item",children:[(0,Le.jsx)("span",{className:"linkage-item-icon",children:"\ud83d\udcd8"}),(0,Le.jsx)("span",{className:"linkage-item-label",children:"Course:"}),(0,Le.jsx)("span",{className:"linkage-item-value",children:L})]}),R&&(0,Le.jsxs)("div",{className:"linkage-item",children:[(0,Le.jsx)("span",{className:"linkage-item-icon",children:"\ud83c\udf93"}),(0,Le.jsx)("span",{className:"linkage-item-label",children:"Class:"}),(0,Le.jsx)("span",{className:"linkage-item-value",children:R})]}),M&&(0,Le.jsxs)("div",{className:"linkage-item",children:[(0,Le.jsx)("span",{className:"linkage-item-icon",children:"\ud83d\udcdd"}),(0,Le.jsx)("span",{className:"linkage-item-label",children:"Exam:"}),(0,Le.jsx)("span",{className:"linkage-item-value",children:M})]}),D&&(0,Le.jsxs)("div",{className:"linkage-item",children:[(0,Le.jsx)("span",{className:"linkage-item-icon",children:"\ud83d\udcd6"}),(0,Le.jsx)("span",{className:"linkage-item-label",children:"Subject:"}),(0,Le.jsx)("span",{className:"linkage-item-value",children:D})]}),F&&(0,Le.jsxs)("div",{className:"linkage-item",children:[(0,Le.jsx)("span",{className:"linkage-item-icon",children:"\ud83c\udfaf"}),(0,Le.jsx)("span",{className:"linkage-item-label",children:"Topic:"}),(0,Le.jsx)("span",{className:"linkage-item-value",children:F})]}),z&&(0,Le.jsxs)("div",{className:"linkage-item",children:[(0,Le.jsx)("span",{className:"linkage-item-icon",children:"\ud83d\udce6"}),(0,Le.jsx)("span",{className:"linkage-item-label",children:"Module:"}),(0,Le.jsx)("span",{className:"linkage-item-value",children:z})]}),O&&(0,Le.jsxs)("div",{className:"linkage-item",children:[(0,Le.jsx)("span",{className:"linkage-item-icon",children:"\ud83d\udcc4"}),(0,Le.jsx)("span",{className:"linkage-item-label",children:"Chapter:"}),(0,Le.jsx)("span",{className:"linkage-item-value",children:O})]})]}),(y||j)&&(0,Le.jsxs)("div",{className:"test-availability",children:[(0,Le.jsx)("h5",{children:"\ud83d\udd50 Availability Window"}),(0,Le.jsxs)("div",{className:"availability-dates",children:[y&&(0,Le.jsxs)("div",{className:"date-item",children:[(0,Le.jsx)("span",{className:"date-label",children:"Starts:"}),(0,Le.jsx)("span",{className:"date-value",children:new Date(y).toLocaleDateString()})]}),j&&(0,Le.jsxs)("div",{className:"date-item",children:[(0,Le.jsx)("span",{className:"date-label",children:"Ends:"}),(0,Le.jsx)("span",{className:"date-value",children:new Date(j).toLocaleDateString()})]})]})]})]}),(0,Le.jsxs)("div",{className:"card-footer",children:[(0,Le.jsxs)("div",{className:"footer-info",children:[(0,Le.jsxs)("small",{className:"text-muted",children:["Created: ",new Date(k).toLocaleDateString(),C&&" by ".concat(C.firstName||C.name)]}),S&&S!==k&&(0,Le.jsxs)("small",{className:"text-muted",children:["\u2022 Updated: ",new Date(S).toLocaleDateString(),I&&" by ".concat(I.firstName||I.name)]})]}),(0,Le.jsx)("div",{className:"footer-stats",children:(0,Le.jsxs)("small",{className:"stat-item",children:["ID: ",o]})})]})]})},yt=e=>{let{test:t,onClose:s}=e;const{token:a,addNotification:r}=(0,Pe.nm)(),{executeApiCall:i}=$e(),[l,o]=(0,n.useState)([]),[c,d]=(0,n.useState)(!1),[u,p]=(0,n.useState)(null),[m,h]=(0,n.useState)(!1);(0,n.useEffect)(()=>{null!==t&&void 0!==t&&t.id&&f()},[null===t||void 0===t?void 0:t.id]);const f=(0,n.useCallback)(async()=>{d(!0);try{const e=await i(Ge.KO,a,t.id);if(e){const t=(Array.isArray(e)?e:e.data||[]).sort((e,t)=>(e.questionOrder||0)-(t.questionOrder||0));o(t)}}catch(e){console.error("Error fetching test questions:",e),r("Failed to fetch test questions","error")}finally{d(!1)}},[null===t||void 0===t?void 0:t.id,a]),x=l.reduce((e,t)=>e+(t.marks||0),0),g=e=>{switch(null===e||void 0===e?void 0:e.toUpperCase()){case"EASY":return"#22c55e";case"MEDIUM":return"#f59e0b";case"HARD":return"#ef4444";default:return"#6b7280"}};return(0,Le.jsxs)("div",{className:"modal-overlay",children:[(0,Le.jsxs)("div",{className:"modal-content test-question-manager",style:{maxWidth:"1200px",width:"95%"},children:[(0,Le.jsxs)("div",{className:"modal-header",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"24px"},children:[(0,Le.jsxs)("div",{className:"modal-title",children:[(0,Le.jsx)("h3",{style:{margin:0,fontSize:"24px",fontWeight:"600"},children:"\ud83d\udccb Test Questions Manager"}),(0,Le.jsxs)("p",{style:{margin:"8px 0 0 0",opacity:.9,fontSize:"14px"},children:[null===t||void 0===t?void 0:t.testName," | Organize questions, set marks, and configure test structure"]})]}),(0,Le.jsx)("button",{className:"modal-close",onClick:s,style:{background:"rgba(255,255,255,0.2)",color:"white",border:"none",borderRadius:"50%",width:"36px",height:"36px",fontSize:"20px"},children:"\u2715"})]}),(0,Le.jsxs)("div",{className:"modal-body",style:{padding:"24px"},children:[(0,Le.jsxs)("div",{className:"test-summary",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"24px"},children:[(0,Le.jsxs)("div",{className:"summary-card",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"20px",borderRadius:"12px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:[(0,Le.jsx)("div",{style:{fontSize:"32px",fontWeight:"bold",marginBottom:"8px"},children:l.length}),(0,Le.jsx)("div",{style:{opacity:.9,fontSize:"14px"},children:"Total Questions"})]}),(0,Le.jsxs)("div",{className:"summary-card",style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white",padding:"20px",borderRadius:"12px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:[(0,Le.jsxs)("div",{style:{fontSize:"32px",fontWeight:"bold",marginBottom:"8px"},children:[x," / ",null===t||void 0===t?void 0:t.totalMarks]}),(0,Le.jsxs)("div",{style:{opacity:.9,fontSize:"14px"},children:["Total Marks ",x!==(null===t||void 0===t?void 0:t.totalMarks)&&"\u26a0\ufe0f"]})]}),(0,Le.jsxs)("div",{className:"summary-card",style:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",color:"white",padding:"20px",borderRadius:"12px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:[(0,Le.jsx)("div",{style:{fontSize:"32px",fontWeight:"bold",marginBottom:"8px"},children:null===t||void 0===t?void 0:t.timeLimitMinutes}),(0,Le.jsx)("div",{style:{opacity:.9,fontSize:"14px"},children:"Minutes Duration"})]}),(0,Le.jsxs)("div",{className:"summary-card",style:{background:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)",color:"white",padding:"20px",borderRadius:"12px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:[(0,Le.jsx)("div",{style:{fontSize:"32px",fontWeight:"bold",marginBottom:"8px"},children:l.length>0?Math.round((null===t||void 0===t?void 0:t.timeLimitMinutes)/l.length):0}),(0,Le.jsx)("div",{style:{opacity:.9,fontSize:"14px"},children:"Min/Question"})]})]}),(0,Le.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",background:"#f8fafc",borderRadius:"8px",marginBottom:"20px"},children:[(0,Le.jsxs)("div",{children:[(0,Le.jsxs)("h4",{style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#1e293b"},children:["\ud83d\udcdd Questions List (",l.length,")"]}),(0,Le.jsx)("p",{style:{margin:"4px 0 0 0",fontSize:"13px",color:"#64748b"},children:"Click on a question to edit marks, order, or remove it from the test"})]}),(0,Le.jsxs)("div",{style:{display:"flex",gap:"12px"},children:[(0,Le.jsx)("button",{className:"btn btn-outline btn-sm",onClick:f,disabled:c,style:{borderRadius:"6px",padding:"8px 16px"},children:"\ud83d\udd04 Refresh"}),(0,Le.jsx)("button",{className:"btn btn-primary btn-sm",onClick:()=>h(!0),style:{borderRadius:"6px",padding:"8px 16px"},children:"\u2795 Add Questions"})]})]}),(0,Le.jsx)("div",{className:"questions-section",children:c&&0===l.length?(0,Le.jsx)("div",{className:"loading-state",style:{padding:"60px",textAlign:"center",background:"#f8fafc",borderRadius:"12px"},children:(0,Le.jsx)("div",{className:"loading-spinner",style:{fontSize:"18px",color:"#667eea"},children:"\u23f3 Loading questions..."})}):0===l.length?(0,Le.jsxs)("div",{className:"empty-state",style:{padding:"80px 40px",textAlign:"center",background:"linear-gradient(135deg, #667eea15 0%, #764ba215 100%)",borderRadius:"12px",border:"2px dashed #667eea50"},children:[(0,Le.jsx)("div",{className:"empty-icon",style:{fontSize:"64px",marginBottom:"16px"},children:"\ud83d\udcdd"}),(0,Le.jsx)("h4",{style:{margin:"0 0 12px 0",fontSize:"20px",color:"#1e293b"},children:"No Questions Added Yet"}),(0,Le.jsx)("p",{style:{margin:"0 0 24px 0",color:"#64748b",fontSize:"14px"},children:"Get started by adding questions to build your test"}),(0,Le.jsx)("button",{className:"btn btn-primary",onClick:()=>h(!0),style:{padding:"12px 32px",fontSize:"16px",borderRadius:"8px"},children:"\u2795 Add Your First Questions"})]}):(0,Le.jsx)("div",{className:"questions-list",style:{display:"flex",flexDirection:"column",gap:"16px"},children:l.map((e,s)=>{return(0,Le.jsxs)("div",{className:"test-question-card",style:{background:"white",border:"1px solid #e2e8f0",borderRadius:"12px",padding:"20px",transition:"all 0.2s ease",boxShadow:u===e.id?"0 8px 16px rgba(102,126,234,0.15)":"0 2px 4px rgba(0,0,0,0.05)"},children:[(0,Le.jsxs)("div",{className:"question-header",style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[(0,Le.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[(0,Le.jsx)("div",{className:"question-number",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",width:"40px",height:"40px",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",fontSize:"16px"},children:s+1}),(0,Le.jsxs)("div",{className:"question-meta",style:{display:"flex",gap:"8px"},children:[(0,Le.jsx)("span",{className:"difficulty-badge",style:{backgroundColor:g(e.difficultyLevel),color:"white",padding:"4px 12px",borderRadius:"6px",fontSize:"12px",fontWeight:"600"},children:e.difficultyLevel||"UNKNOWN"}),(0,Le.jsx)("span",{className:"type-badge",style:{background:"#f1f5f9",color:"#475569",padding:"4px 12px",borderRadius:"6px",fontSize:"12px",fontWeight:"600"},children:e.questionType||"MCQ"})]})]}),(0,Le.jsxs)("div",{className:"question-actions",style:{display:"flex",gap:"8px"},children:[(0,Le.jsx)("button",{className:"btn btn-link btn-sm",onClick:()=>p(u===e.id?null:e.id),style:{background:u===e.id?"#667eea":"#e0e7ff",color:u===e.id?"white":"#667eea",border:"none",padding:"8px 16px",borderRadius:"6px",fontSize:"13px",fontWeight:"500",cursor:"pointer"},children:u===e.id?"\u2715 Cancel":"\u270f\ufe0f Edit"}),(0,Le.jsx)("button",{className:"btn btn-danger btn-sm",onClick:()=>(async e=>{var s;const n=l.find(t=>t.id===e);if(!n)return;const o='Are you sure you want to remove this question from the test?\n\n"'.concat(null===(s=n.questionText)||void 0===s?void 0:s.substring(0,50),'..."');if(window.confirm(o))try{await i(Ge.$d,a,t.id,e)&&(r("Question removed from test successfully","success"),f())}catch(c){console.error("Error removing question from test:",c),r("Failed to remove question from test","error")}})(e.id),style:{background:"#fee2e2",color:"#dc2626",border:"none",padding:"8px 16px",borderRadius:"6px",fontSize:"13px",fontWeight:"500",cursor:"pointer"},children:"\ud83d\uddd1\ufe0f Remove"})]})]}),(0,Le.jsxs)("div",{className:"question-content",style:{marginBottom:u===e.id?"20px":"16px"},children:[(0,Le.jsx)("div",{className:"question-text",style:{fontSize:"15px",lineHeight:"1.6",color:"#1e293b",marginBottom:"12px",fontWeight:"500"},children:(n=e.questionText,n?n.length>80?n.substring(0,80)+"...":n:"No question text")}),e.options&&e.options.length>0&&(0,Le.jsx)("div",{className:"question-options",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"8px",marginTop:"12px"},children:e.options.slice(0,4).map((e,t)=>{var s,a;return(0,Le.jsxs)("div",{className:"option-preview",style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px",background:e.isCorrect?"#dcfce7":"#f8fafc",border:"1px solid ".concat(e.isCorrect?"#86efac":"#e2e8f0"),borderRadius:"6px",fontSize:"13px"},children:[(0,Le.jsx)("span",{className:"option-letter",style:{background:e.isCorrect?"#22c55e":"#94a3b8",color:"white",width:"24px",height:"24px",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold",flexShrink:0},children:e.optionLetter||String.fromCharCode(65+t)}),(0,Le.jsxs)("span",{className:"option-text",style:{color:"#475569",flex:1},children:[(null===(s=e.optionText)||void 0===s?void 0:s.substring(0,35))||"No text",(null===(a=e.optionText)||void 0===a?void 0:a.length)>35?"...":""]})]},t)})})]}),u===e.id&&(0,Le.jsxs)("div",{className:"question-editor",style:{background:"linear-gradient(135deg, #667eea10 0%, #764ba210 100%)",padding:"20px",borderRadius:"8px",marginBottom:"16px"},children:[(0,Le.jsx)("div",{className:"editor-header",style:{marginBottom:"16px"},children:(0,Le.jsx)("h5",{style:{margin:0,fontSize:"14px",color:"#667eea",fontWeight:"600"},children:"\u2699\ufe0f Configure Question Settings"})}),(0,Le.jsxs)("div",{className:"editor-row",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{style:{display:"block",marginBottom:"6px",fontSize:"13px",fontWeight:"600",color:"#475569"},children:"\ud83c\udfaf Question Order"}),(0,Le.jsx)("input",{type:"number",value:e.questionOrder||s+1,onChange:s=>(async(e,s)=>{try{const n=l.find(t=>t.id===e);if(!n)return;const o=(0,Ue.A)((0,Ue.A)({},n),{},{questionOrder:parseInt(s)});await i(Ge.EH,a,t.id,e,o)&&(r("Question order updated successfully","success"),f())}catch(n){console.error("Error updating question order:",n),r("Failed to update question order","error")}})(e.id,s.target.value),className:"form-control",min:"1",style:{padding:"10px 12px",border:"1px solid #cbd5e1",borderRadius:"6px",fontSize:"14px",width:"100%"}})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{style:{display:"block",marginBottom:"6px",fontSize:"13px",fontWeight:"600",color:"#475569"},children:"\ud83d\udcdd Marks"}),(0,Le.jsx)("input",{type:"number",value:e.marks||0,onChange:s=>(async(e,s)=>{try{const n=l.find(t=>t.id===e);if(!n)return;const o=(0,Ue.A)((0,Ue.A)({},n),{},{marks:parseInt(s)});await i(Ge.EH,a,t.id,e,o)&&(r("Question marks updated successfully","success"),f())}catch(n){console.error("Error updating question marks:",n),r("Failed to update question marks","error")}})(e.id,s.target.value),className:"form-control",min:"1",style:{padding:"10px 12px",border:"1px solid #cbd5e1",borderRadius:"6px",fontSize:"14px",width:"100%"}})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{style:{display:"block",marginBottom:"6px",fontSize:"13px",fontWeight:"600",color:"#475569"},children:"\u26a0\ufe0f Negative Marks"}),(0,Le.jsx)("input",{type:"number",value:e.negativeMarks||0,onChange:s=>(async(e,s)=>{try{const n=l.find(t=>t.id===e);if(!n)return;const o=(0,Ue.A)((0,Ue.A)({},n),{},{negativeMarks:parseFloat(s)});await i(Ge.EH,a,t.id,e,o)&&(r("Negative marks updated successfully","success"),f())}catch(n){console.error("Error updating negative marks:",n),r("Failed to update negative marks","error")}})(e.id,s.target.value),className:"form-control",min:"0",step:"0.1",style:{padding:"10px 12px",border:"1px solid #cbd5e1",borderRadius:"6px",fontSize:"14px",width:"100%"}})]})]})]}),(0,Le.jsxs)("div",{className:"question-footer",style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"16px",borderTop:"1px solid #e2e8f0"},children:[(0,Le.jsxs)("div",{className:"question-stats",style:{display:"flex",gap:"16px",alignItems:"center"},children:[(0,Le.jsxs)("span",{className:"stat",style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"13px",color:"#475569",fontWeight:"500"},children:["\ud83d\udcdd ",(0,Le.jsx)("strong",{style:{color:"#1e293b"},children:e.marks||0})," marks"]}),e.negativeMarks>0&&(0,Le.jsxs)("span",{className:"stat",style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"13px",color:"#dc2626",fontWeight:"500"},children:["\u26a0\ufe0f ",(0,Le.jsxs)("strong",{children:["-",e.negativeMarks]})," for wrong answer"]}),(0,Le.jsxs)("span",{className:"stat",style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"13px",color:"#64748b",fontWeight:"500"},children:["\ud83c\udfaf Position: ",(0,Le.jsxs)("strong",{style:{color:"#1e293b"},children:["#",e.questionOrder||s+1]})]})]}),(0,Le.jsxs)("div",{className:"question-date",style:{fontSize:"12px",color:"#94a3b8"},children:["Added: ",new Date(e.createdAt).toLocaleDateString()]})]})]},e.id);var n})})})]}),(0,Le.jsxs)("div",{className:"modal-footer",style:{background:"#f8fafc",padding:"20px 24px",borderTop:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Le.jsxs)("div",{className:"footer-info",style:{display:"flex",flexDirection:"column",gap:"4px"},children:[(0,Le.jsxs)("span",{style:{fontSize:"15px",fontWeight:"600",color:"#1e293b"},children:[l.length," Question",1!==l.length?"s":""," | ",x," Total Marks"]}),x!==(null===t||void 0===t?void 0:t.totalMarks)&&(0,Le.jsxs)("span",{className:"marks-warning",style:{fontSize:"13px",color:"#dc2626",display:"flex",alignItems:"center",gap:"4px"},children:["\u26a0\ufe0f Marks mismatch: Current ",x," vs Target ",null===t||void 0===t?void 0:t.totalMarks]}),x===(null===t||void 0===t?void 0:t.totalMarks)&&l.length>0&&(0,Le.jsx)("span",{style:{fontSize:"13px",color:"#22c55e",display:"flex",alignItems:"center",gap:"4px"},children:"\u2713 Test configuration is complete"})]}),(0,Le.jsxs)("div",{className:"footer-actions",style:{display:"flex",gap:"12px"},children:[(0,Le.jsx)("button",{className:"btn btn-secondary",onClick:s,style:{padding:"10px 24px",borderRadius:"8px",border:"1px solid #cbd5e1",background:"white",color:"#475569",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:"Close"}),(0,Le.jsx)("button",{className:"btn btn-primary",onClick:()=>h(!0),style:{padding:"10px 24px",borderRadius:"8px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:"\u2795 Add More Questions"})]})]})]}),m&&(0,Le.jsx)(gt,{test:t,onClose:()=>h(!1),onComplete:async e=>{try{d(!0);for(const s of e){const e={questionId:s.id,questionOrder:l.length+1,marks:s.marks||1,negativeMarks:s.negativeMarks||0};await i(Ge.Ng,a,t.id,e)}r("".concat(e.length," question(s) added to test successfully"),"success"),h(!1),f()}catch(s){console.error("Error adding questions to test:",s),r("Failed to add questions to test","error")}finally{d(!1)}}})]})},jt=e=>{let{onClose:t,onCreateFromTemplate:s}=e;const{addNotification:a}=(0,Pe.nm)(),[r,i]=(0,n.useState)(null),[l,o]=(0,n.useState)(!1),[c,d]=(0,n.useState)({}),u=(e,t)=>{d(s=>(0,Ue.A)((0,Ue.A)({},s),{},{[e]:t}))},p=e=>({"practice-basic":"This is a practice test. Take your time to understand each question. You can review your answers before submitting.","mock-exam":"This is a mock exam simulating real exam conditions. No review allowed. Answer all questions within the time limit.","quiz-short":"This is a quick quiz. Answer all questions within the time limit. You can review your answers.","final-exam":"This is a final examination. Follow all instructions carefully. No external help allowed.","diagnostic-test":"This diagnostic test will help identify your strengths and areas for improvement. Answer honestly.","speed-test":"This is a speed test. Focus on accuracy while maintaining speed. Negative marking applies for wrong answers."}[e]||"Please read all questions carefully and answer to the best of your ability.");return(0,Le.jsx)("div",{className:"modal-overlay",children:(0,Le.jsxs)("div",{className:"modal-content test-templates-modal",children:[(0,Le.jsxs)("div",{className:"modal-header",children:[(0,Le.jsxs)("div",{className:"modal-title",children:[(0,Le.jsx)("h3",{children:"\ud83d\udccb Test Templates"}),(0,Le.jsx)("p",{children:"Choose from pre-configured test templates or customize your own"})]}),(0,Le.jsx)("button",{className:"modal-close",onClick:t,children:"\u2715"})]}),(0,Le.jsx)("div",{className:"modal-body",children:l?(0,Le.jsxs)("div",{className:"customization-section",children:[(0,Le.jsxs)("div",{className:"customization-header",children:[(0,Le.jsx)("h4",{children:"\u2699\ufe0f Customize Template"}),(0,Le.jsx)("p",{children:"Adjust the template configuration to match your needs"})]}),(0,Le.jsxs)("div",{className:"customization-form",children:[(0,Le.jsxs)("div",{className:"form-section",children:[(0,Le.jsx)("h5",{children:"Basic Configuration"}),(0,Le.jsxs)("div",{className:"form-row",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Time Limit (Minutes)"}),(0,Le.jsx)("input",{type:"number",value:c.timeLimitMinutes||"",onChange:e=>u("timeLimitMinutes",parseInt(e.target.value)),className:"form-control",min:"1",max:"480"})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Total Marks"}),(0,Le.jsx)("input",{type:"number",value:c.totalMarks||"",onChange:e=>u("totalMarks",parseInt(e.target.value)),className:"form-control",min:"1",max:"1000"})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Passing Marks"}),(0,Le.jsx)("input",{type:"number",value:c.passingMarks||"",onChange:e=>u("passingMarks",parseInt(e.target.value)),className:"form-control",min:"1",max:c.totalMarks||1e3})]})]}),(0,Le.jsxs)("div",{className:"form-row",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Max Attempts"}),(0,Le.jsx)("input",{type:"number",value:c.maxAttempts||"",onChange:e=>u("maxAttempts",parseInt(e.target.value)),className:"form-control",min:"1",max:"10"})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Time per Question (Seconds)"}),(0,Le.jsx)("input",{type:"number",value:c.timePerQuestion||"",onChange:e=>u("timePerQuestion",parseInt(e.target.value)),className:"form-control",min:"0"})]})]})]}),(0,Le.jsxs)("div",{className:"form-section",children:[(0,Le.jsx)("h5",{children:"Advanced Settings"}),(0,Le.jsxs)("div",{className:"checkbox-group",children:[(0,Le.jsxs)("label",{className:"checkbox-label",children:[(0,Le.jsx)("input",{type:"checkbox",checked:c.negativeMarking||!1,onChange:e=>u("negativeMarking",e.target.checked)}),"Enable Negative Marking"]}),(0,Le.jsxs)("label",{className:"checkbox-label",children:[(0,Le.jsx)("input",{type:"checkbox",checked:c.allowReview||!1,onChange:e=>u("allowReview",e.target.checked)}),"Allow Review"]}),(0,Le.jsxs)("label",{className:"checkbox-label",children:[(0,Le.jsx)("input",{type:"checkbox",checked:c.showCorrectAnswers||!1,onChange:e=>u("showCorrectAnswers",e.target.checked)}),"Show Correct Answers"]}),(0,Le.jsxs)("label",{className:"checkbox-label",children:[(0,Le.jsx)("input",{type:"checkbox",checked:c.shuffleQuestions||!1,onChange:e=>u("shuffleQuestions",e.target.checked)}),"Shuffle Questions"]}),(0,Le.jsxs)("label",{className:"checkbox-label",children:[(0,Le.jsx)("input",{type:"checkbox",checked:c.shuffleOptions||!1,onChange:e=>u("shuffleOptions",e.target.checked)}),"Shuffle Options"]}),(0,Le.jsxs)("label",{className:"checkbox-label",children:[(0,Le.jsx)("input",{type:"checkbox",checked:c.allowSkip||!1,onChange:e=>u("allowSkip",e.target.checked)}),"Allow Skip Questions"]})]})]})]})]}):(0,Le.jsxs)("div",{className:"templates-section",children:[(0,Le.jsx)("div",{className:"templates-grid",children:[{id:"practice-basic",name:"Basic Practice Test",description:"Standard practice test with basic configuration",icon:"\ud83d\udcdd",category:"Practice",difficulty:"Beginner",config:{testType:"PRACTICE",timeLimitMinutes:60,totalMarks:100,passingMarks:40,negativeMarking:!1,maxAttempts:3,allowReview:!0,showCorrectAnswers:!0,shuffleQuestions:!1,shuffleOptions:!1,allowSkip:!0,timePerQuestion:0},recommendedQuestions:25,estimatedDuration:"60 minutes"},{id:"mock-exam",name:"Mock Exam",description:"Full-length mock exam with strict timing",icon:"\ud83c\udfaf",category:"Mock",difficulty:"Advanced",config:{testType:"MOCK",timeLimitMinutes:180,totalMarks:300,passingMarks:120,negativeMarking:!0,negativeMarkPercentage:25,maxAttempts:1,allowReview:!1,showCorrectAnswers:!1,shuffleQuestions:!0,shuffleOptions:!0,allowSkip:!1,timePerQuestion:0},recommendedQuestions:100,estimatedDuration:"3 hours"},{id:"quiz-short",name:"Quick Quiz",description:"Short quiz for quick assessment",icon:"\u26a1",category:"Quiz",difficulty:"Beginner",config:{testType:"QUIZ",timeLimitMinutes:15,totalMarks:20,passingMarks:10,negativeMarking:!1,maxAttempts:2,allowReview:!0,showCorrectAnswers:!0,shuffleQuestions:!1,shuffleOptions:!1,allowSkip:!0,timePerQuestion:30},recommendedQuestions:10,estimatedDuration:"15 minutes"},{id:"final-exam",name:"Final Examination",description:"Comprehensive final exam with all features",icon:"\ud83c\udf93",category:"Final",difficulty:"Expert",config:{testType:"FINAL",timeLimitMinutes:240,totalMarks:400,passingMarks:160,negativeMarking:!0,negativeMarkPercentage:33,maxAttempts:1,allowReview:!1,showCorrectAnswers:!1,shuffleQuestions:!0,shuffleOptions:!0,allowSkip:!1,timePerQuestion:0},recommendedQuestions:100,estimatedDuration:"4 hours"},{id:"diagnostic-test",name:"Diagnostic Test",description:"Assessment test to identify knowledge gaps",icon:"\ud83d\udd0d",category:"Assessment",difficulty:"Intermediate",config:{testType:"PRACTICE",timeLimitMinutes:90,totalMarks:150,passingMarks:60,negativeMarking:!1,maxAttempts:2,allowReview:!0,showCorrectAnswers:!0,shuffleQuestions:!1,shuffleOptions:!1,allowSkip:!0,timePerQuestion:0},recommendedQuestions:50,estimatedDuration:"90 minutes"},{id:"speed-test",name:"Speed Test",description:"Fast-paced test to improve speed and accuracy",icon:"\ud83c\udfc3",category:"Speed",difficulty:"Advanced",config:{testType:"PRACTICE",timeLimitMinutes:30,totalMarks:60,passingMarks:30,negativeMarking:!0,negativeMarkPercentage:50,maxAttempts:5,allowReview:!1,showCorrectAnswers:!1,shuffleQuestions:!0,shuffleOptions:!0,allowSkip:!1,timePerQuestion:30},recommendedQuestions:30,estimatedDuration:"30 minutes"}].map(e=>{return(0,Le.jsxs)("div",{className:"template-card ".concat((null===r||void 0===r?void 0:r.id)===e.id?"selected":""),onClick:()=>(e=>{i(e),d((0,Ue.A)({},e.config))})(e),children:[(0,Le.jsxs)("div",{className:"template-header",children:[(0,Le.jsx)("div",{className:"template-icon",children:e.icon}),(0,Le.jsxs)("div",{className:"template-info",children:[(0,Le.jsx)("h4",{children:e.name}),(0,Le.jsx)("p",{children:e.description})]})]}),(0,Le.jsx)("div",{className:"template-meta",children:(0,Le.jsxs)("div",{className:"template-tags",children:[(0,Le.jsx)("span",{className:"category-tag",style:{backgroundColor:(s=e.category,{Practice:"#3b82f6",Mock:"#8b5cf6",Quiz:"#10b981",Final:"#ef4444",Assessment:"#f59e0b",Speed:"#ec4899"}[s]||"#6b7280")},children:e.category}),(0,Le.jsx)("span",{className:"difficulty-tag",style:{backgroundColor:(t=e.difficulty,{Beginner:"#22c55e",Intermediate:"#f59e0b",Advanced:"#ef4444",Expert:"#8b5cf6"}[t]||"#6b7280")},children:e.difficulty})]})}),(0,Le.jsxs)("div",{className:"template-details",children:[(0,Le.jsxs)("div",{className:"detail-item",children:[(0,Le.jsx)("span",{className:"detail-label",children:"Duration:"}),(0,Le.jsx)("span",{className:"detail-value",children:e.estimatedDuration})]}),(0,Le.jsxs)("div",{className:"detail-item",children:[(0,Le.jsx)("span",{className:"detail-label",children:"Questions:"}),(0,Le.jsx)("span",{className:"detail-value",children:e.recommendedQuestions})]}),(0,Le.jsxs)("div",{className:"detail-item",children:[(0,Le.jsx)("span",{className:"detail-label",children:"Marks:"}),(0,Le.jsx)("span",{className:"detail-value",children:e.config.totalMarks})]}),(0,Le.jsxs)("div",{className:"detail-item",children:[(0,Le.jsx)("span",{className:"detail-label",children:"Attempts:"}),(0,Le.jsx)("span",{className:"detail-value",children:e.config.maxAttempts})]})]}),(null===r||void 0===r?void 0:r.id)===e.id&&(0,Le.jsx)("div",{className:"template-selection",children:(0,Le.jsx)("div",{className:"selection-indicator",children:"\u2713 Selected"})})]},e.id);var t,s})}),r&&(0,Le.jsxs)("div",{className:"template-preview",children:[(0,Le.jsxs)("div",{className:"preview-header",children:[(0,Le.jsx)("h4",{children:"\ud83d\udccb Template Preview"}),(0,Le.jsx)("span",{className:"template-name",children:r.name})]}),(0,Le.jsxs)("div",{className:"preview-content",children:[(0,Le.jsxs)("div",{className:"preview-section",children:[(0,Le.jsx)("h5",{children:"Configuration"}),(0,Le.jsxs)("div",{className:"config-grid",children:[(0,Le.jsxs)("div",{className:"config-item",children:[(0,Le.jsx)("span",{className:"config-label",children:"Time Limit:"}),(0,Le.jsxs)("span",{className:"config-value",children:[r.config.timeLimitMinutes," minutes"]})]}),(0,Le.jsxs)("div",{className:"config-item",children:[(0,Le.jsx)("span",{className:"config-label",children:"Total Marks:"}),(0,Le.jsx)("span",{className:"config-value",children:r.config.totalMarks})]}),(0,Le.jsxs)("div",{className:"config-item",children:[(0,Le.jsx)("span",{className:"config-label",children:"Passing Marks:"}),(0,Le.jsx)("span",{className:"config-value",children:r.config.passingMarks})]}),(0,Le.jsxs)("div",{className:"config-item",children:[(0,Le.jsx)("span",{className:"config-label",children:"Negative Marking:"}),(0,Le.jsx)("span",{className:"config-value",children:r.config.negativeMarking?"Yes":"No"})]}),(0,Le.jsxs)("div",{className:"config-item",children:[(0,Le.jsx)("span",{className:"config-label",children:"Max Attempts:"}),(0,Le.jsx)("span",{className:"config-value",children:r.config.maxAttempts})]}),(0,Le.jsxs)("div",{className:"config-item",children:[(0,Le.jsx)("span",{className:"config-label",children:"Shuffle Questions:"}),(0,Le.jsx)("span",{className:"config-value",children:r.config.shuffleQuestions?"Yes":"No"})]})]})]}),(0,Le.jsxs)("div",{className:"preview-section",children:[(0,Le.jsx)("h5",{children:"Features"}),(0,Le.jsxs)("div",{className:"features-list",children:[r.config.allowReview&&(0,Le.jsx)("span",{className:"feature",children:"\u2713 Review Allowed"}),r.config.showCorrectAnswers&&(0,Le.jsx)("span",{className:"feature",children:"\u2713 Show Answers"}),r.config.shuffleOptions&&(0,Le.jsx)("span",{className:"feature",children:"\u2713 Shuffle Options"}),r.config.allowSkip&&(0,Le.jsx)("span",{className:"feature",children:"\u2713 Skip Questions"}),r.config.timePerQuestion>0&&(0,Le.jsx)("span",{className:"feature",children:"\u2713 Per-Question Timing"})]})]})]})]})]})}),(0,Le.jsxs)("div",{className:"modal-footer",children:[(0,Le.jsx)("div",{className:"footer-info",children:r&&(0,Le.jsxs)("span",{children:["Template: ",r.name]})}),(0,Le.jsxs)("div",{className:"footer-actions",children:[(0,Le.jsx)("button",{className:"btn btn-secondary",onClick:t,children:"Cancel"}),r&&!l&&(0,Le.jsx)("button",{className:"btn btn-outline",onClick:()=>o(!0),children:"\u2699\ufe0f Customize"}),l&&(0,Le.jsx)("button",{className:"btn btn-outline",onClick:()=>o(!1),children:"\u2190 Back to Selection"}),r&&(0,Le.jsx)("button",{className:"btn btn-primary",onClick:()=>{if(!r)return void a("Please select a template first","warning");const e=(0,Ue.A)({testName:"",description:r.description,instructions:p(r.id)},c);s(e),a('Template "'.concat(r.name,'" applied successfully!'),"success")},children:l?"Create Custom Test":"Use Template"})]})]})]})})},Nt=e=>{var t,s,a,r,i;let{onBackToDashboard:l}=e;console.log("=== TestManagement component rendering ===");const{token:o,addNotification:c}=(0,Pe.nm)();console.log("Token available:",!!o),console.log("Token length:",o?o.length:0);const{executeApiCall:d}=$e();console.log("executeApiCall function:",typeof d);const[u,p]=(0,n.useState)([]),[m,h]=(0,n.useState)([]),[f,x]=(0,n.useState)([]),[g,v]=(0,n.useState)([]),[b,y]=(0,n.useState)([]),[j,N]=(0,n.useState)([]),[w,k]=(0,n.useState)([]),[S,C]=(0,n.useState)([]),[I,A]=(0,n.useState)([]),E={testName:e=>e?e.length<5?"Test name must be at least 5 characters":e.length>100?"Test name must be less than 100 characters":"":"Test name is required",timeLimitMinutes:e=>e?e<1?"Time limit must be at least 1 minute":e>480?"Time limit cannot exceed 8 hours":"":"Time limit is required",totalMarks:e=>e?e<1?"Total marks must be at least 1":e>1e3?"Total marks cannot exceed 1000":"":"Total marks is required",passingMarks:(e,t)=>e?e<1?"Passing marks must be at least 1":t.totalMarks&&e>t.totalMarks?"Passing marks cannot exceed total marks":"":"Passing marks is required",masterExamId:(e,t)=>"EXAM_BASED"!==t.testCreationMode||e?"":"Master exam is required for exam-based tests",maxAttempts:e=>e<1?"Max attempts must be at least 1":e>10?"Max attempts cannot exceed 10":"",courseTypeId:(e,t)=>"CONTENT_BASED"!==t.testCreationMode||e?"":"Course type is required for content-based tests",courseId:(e,t)=>"CONTENT_BASED"!==t.testCreationMode||e?"":"Course is required for content-based tests",classId:(e,t)=>"CONTENT_BASED"!==t.testCreationMode||1!==parseInt(t.courseTypeId)||e?"":"Class is required for academic courses",examId:(e,t)=>"CONTENT_BASED"!==t.testCreationMode||2!==parseInt(t.courseTypeId)||e?"":"Exam is required for competitive courses",subjectLinkageId:(e,t)=>"CONTENT_BASED"!==t.testCreationMode||"SUBJECT"!==t.testLevel&&"MODULE"!==t.testLevel&&"CHAPTER"!==t.testLevel||e?"":"Subject is required for this test level",topicId:(e,t)=>"CONTENT_BASED"!==t.testCreationMode||"MODULE"!==t.testLevel&&"CHAPTER"!==t.testLevel||e?"":"Topic is required for this test level",moduleId:(e,t)=>"CONTENT_BASED"!==t.testCreationMode||"MODULE"!==t.testLevel&&"CHAPTER"!==t.testLevel||e?"":"Module is required for this test level",chapterId:(e,t)=>"CONTENT_BASED"!==t.testCreationMode||"CHAPTER"!==t.testLevel||e?"":"Chapter is required for chapter-level tests"},{formData:T,errors:P,touched:L,handleInputChange:R,handleBlur:M,validateForm:D,resetForm:F,setFormData:z}=(0,Je.d)({testName:"",description:"",instructions:"",timeLimitMinutes:"",totalMarks:"",passingMarks:"",negativeMarking:!1,negativeMarkPercentage:0,maxAttempts:1,isPublished:!1,startDate:"",endDate:"",masterExamId:"",testType:"PRACTICE",allowReview:!0,showCorrectAnswers:!1,shuffleQuestions:!1,shuffleOptions:!1,allowSkip:!0,timePerQuestion:0,testCreationMode:"EXAM_BASED",testLevel:"CLASS_EXAM",courseTypeId:"",courseId:"",classId:"",examId:"",subjectLinkageId:"",topicId:"",moduleId:"",chapterId:""},E),O=(0,n.useCallback)(e=>{const{name:t,value:s,type:a,checked:n}=e.target,r="checkbox"===a?n:s;"testCreationMode"===t?(R("courseTypeId",""),R("courseId",""),R("classId",""),R("examId",""),R("subjectLinkageId",""),R("topicId",""),R("moduleId",""),R("chapterId","")):"courseTypeId"===t?(R("courseId",""),R("classId",""),R("examId",""),R("subjectLinkageId",""),R("topicId",""),R("moduleId",""),R("chapterId","")):"courseId"===t?(R("classId",""),R("examId",""),R("subjectLinkageId",""),R("topicId",""),R("moduleId",""),R("chapterId","")):"classId"===t||"examId"===t?(R("subjectLinkageId",""),R("topicId",""),R("moduleId",""),R("chapterId","")):"subjectLinkageId"===t?(R("topicId",""),R("moduleId",""),R("chapterId","")):"topicId"===t?(R("moduleId",""),R("chapterId","")):"moduleId"===t&&R("chapterId",""),R(t,r)},[R]),_=(0,n.useCallback)(e=>{const{name:t}=e.target;M(t)},[M]),[q,B]=(0,n.useState)(!1),[U,W]=(0,n.useState)(null),[Q,H]=(0,n.useState)(!1),[V,Y]=(0,n.useState)([]),[$,J]=(0,n.useState)(null),[K,G]=(0,n.useState)("tests"),[X,Z]=(0,n.useState)(!1),[ee,te]=(0,n.useState)(!1),[se,ae]=(0,n.useState)(!1),[ne,re]=(0,n.useState)(!1),[ie,le]=(0,n.useState)(""),[oe,ce]=(0,n.useState)(""),[de,ue]=(0,n.useState)(""),[pe,me]=(0,n.useState)(""),[he,fe]=(0,n.useState)(!0),[xe,ge]=(0,n.useState)({start:"",end:""}),[ve,be]=(0,n.useState)([]),[ye,je]=(0,n.useState)(!1),Ne=(0,n.useCallback)(async()=>{try{const e=await d(Ze,o);e&&p(Array.isArray(e)?e:[])}catch(e){console.error("Error fetching master exams:",e),c("Failed to fetch master exams","error")}},[o]),we=(0,n.useCallback)(async()=>{if(o)try{const e=await(0,xt.RG)(o);console.log("Raw courseTypes API response:",e),console.log("CourseTypes data type:",typeof e),console.log("CourseTypes is array:",Array.isArray(e));let t=[];Array.isArray(e)?t=e:e&&Array.isArray(e.content)?t=e.content:e&&Array.isArray(e.data)?t=e.data:e&&e.courseTypes&&Array.isArray(e.courseTypes)?t=e.courseTypes:(console.warn("Unexpected courseTypes data format:",e),t=[]),console.log("Processed courseTypes array:",t),h(t)}catch(e){console.error("Error loading course types:",e),c("Failed to load course types","error")}},[o]),ke=(0,n.useCallback)(async e=>{if(e&&o)try{const t=await(0,Ge.NJ)(o,e);console.log("Courses API response:",t);let s=[];Array.isArray(t)?s=t:t&&Array.isArray(t.content)?s=t.content:t&&Array.isArray(t.data)&&(s=t.data),console.log("Processed courses array:",s),x(s)}catch(t){console.error("Error loading courses:",t),c("Failed to load courses","error")}else x([])},[o,c]),Se=(0,n.useCallback)(async(e,t)=>{if(t&&1===parseInt(e)&&o)try{const s=await(0,Ge.lw)(o,e,t);console.log("Classes API response:",s);let a=[];Array.isArray(s)?a=s:s&&Array.isArray(s.content)?a=s.content:s&&Array.isArray(s.data)&&(a=s.data),console.log("Processed classes array:",a),v(a)}catch(s){console.error("Error loading classes:",s),c("Failed to load classes","error")}else v([])},[o,c]),Ce=(0,n.useCallback)(async(e,t)=>{if(t&&2===parseInt(e)&&o)try{const s=await(0,Ge.Dl)(o,e,t);console.log("Exams API response:",s);let a=[];Array.isArray(s)?a=s:s&&Array.isArray(s.content)?a=s.content:s&&Array.isArray(s.data)&&(a=s.data),console.log("Processed exams array:",a),y(a)}catch(s){console.error("Error loading exams:",s),c("Failed to load exams","error")}else y([])},[o,c]),Ie=(0,n.useCallback)(async(e,t,s,a)=>{if(e&&t&&o)try{const n=await(0,Ge.u7)(o,e,t,s,a,!0);console.log("Subjects API response:",n);let r=[];Array.isArray(n)?r=n:n&&Array.isArray(n.content)?r=n.content:n&&Array.isArray(n.data)&&(r=n.data),console.log("Processed subjects array:",r),N(r)}catch(n){console.error("Error loading subjects:",n),c("Failed to load subjects","error")}else N([])},[o,c]),Ae=(0,n.useCallback)(async(e,t)=>{if(e&&t&&o)try{const s=await(0,Ge.Nk)(o,t,e);console.log("Topics API response:",s);let a=[];Array.isArray(s)?a=s:s&&Array.isArray(s.content)?a=s.content:s&&Array.isArray(s.data)&&(a=s.data);const n=a.map(e=>(0,Ue.A)((0,Ue.A)({},e),{},{id:e.id||e.topicId,name:e.name||e.topicName}));console.log("Processed topics array:",n),k(n)}catch(s){console.error("Error loading topics:",s),c("Failed to load topics","error")}else k([])},[o,c]),Ee=(0,n.useCallback)(async e=>{if(e&&o)try{const t=await(0,Ge.OA)(o,e);console.log("Modules API response:",t);let s=[];Array.isArray(t)?s=t:t&&Array.isArray(t.content)?s=t.content:t&&Array.isArray(t.data)&&(s=t.data);const a=s.map(e=>(0,Ue.A)((0,Ue.A)({},e),{},{id:e.id||e.moduleId,name:e.name||e.moduleName}));console.log("Processed modules array:",a),C(a)}catch(t){console.error("Error loading modules:",t),c("Failed to load modules","error")}else C([])},[o,c]),Te=(0,n.useCallback)(async e=>{if(e&&o)try{const t=await(0,Ge.CE)(o,e);console.log("Chapters API response:",t);let s=[];Array.isArray(t)?s=t:t&&Array.isArray(t.content)?s=t.content:t&&Array.isArray(t.data)&&(s=t.data);const a=s.map(e=>(0,Ue.A)((0,Ue.A)({},e),{},{id:e.id||e.chapterId,name:e.name||e.chapterName}));console.log("Processed chapters array:",a),A(a)}catch(t){console.error("Error loading chapters:",t),c("Failed to load chapters","error")}else A([])},[o,c]);(0,n.useEffect)(()=>{o&&(Ne(),we())},[o]),(0,n.useEffect)(()=>{T.courseTypeId&&"CONTENT_BASED"===T.testCreationMode&&ke(T.courseTypeId)},[T.courseTypeId,T.testCreationMode,ke]),(0,n.useEffect)(()=>{T.courseId&&"CONTENT_BASED"===T.testCreationMode&&(1===parseInt(T.courseTypeId)?Se(T.courseTypeId,T.courseId):2===parseInt(T.courseTypeId)&&Ce(T.courseTypeId,T.courseId))},[T.courseId,T.courseTypeId,T.testCreationMode,Se,Ce]),(0,n.useEffect)(()=>{"CONTENT_BASED"===T.testCreationMode&&T.courseTypeId&&T.courseId&&(T.classId||T.examId)&&Ie(T.courseTypeId,T.courseId,T.classId,T.examId)},[T.classId,T.examId,T.courseTypeId,T.courseId,T.testCreationMode,Ie]),(0,n.useEffect)(()=>{T.subjectLinkageId&&T.courseTypeId&&"CONTENT_BASED"===T.testCreationMode&&Ae(T.subjectLinkageId,T.courseTypeId)},[T.subjectLinkageId,T.courseTypeId,T.testCreationMode,Ae]),(0,n.useEffect)(()=>{T.topicId&&"CONTENT_BASED"===T.testCreationMode&&Ee(T.topicId)},[T.topicId,T.testCreationMode,Ee]),(0,n.useEffect)(()=>{T.moduleId&&"CONTENT_BASED"===T.testCreationMode&&Te(T.moduleId)},[T.moduleId,T.testCreationMode,Te]),(0,n.useEffect)(()=>{if(console.log("=== useEffect for fetchTestsData triggered ==="),console.log("Token available:",!!o),console.log("Token value:",o),console.log("Current filter values:",{selectedMasterExam:ie,selectedStatus:oe,searchTerm:pe,showActiveOnly:he}),console.log("executeApiCall available:",!!d),console.log("addNotification available:",!!c),!o)return void console.log("No token available, skipping fetchTestsData");console.log("Token is available, proceeding with API call...");(async()=>{H(!0);try{const e={active:he,masterExamId:ie||void 0,status:oe||void 0,search:pe||void 0};console.log("About to call getTests API with:",{token:!!o,filters:e}),console.log("API endpoint will be: /api/admin/master-data/tests");const t=await d(Ge.eQ,o,e);if(console.log("Tests API result:",t),t){const e=Array.isArray(t)?t:t.data||[];console.log("Setting tests array:",e),Y(e)}}catch(e){console.error("Error fetching tests:",e),c("Failed to fetch tests","error")}finally{H(!1)}})()},[o,ie,oe,pe,he]);const Re=(0,n.useCallback)(async()=>{if(console.log("Manually refreshing tests..."),o){H(!0);try{const e={active:he,masterExamId:ie||void 0,status:oe||void 0,search:pe||void 0};console.log("Manually fetching tests with filters:",e);const t=await d(Ge.eQ,o,e);if(t){const e=Array.isArray(t)?t:t.data||[];Y(e)}}catch(e){console.error("Error refreshing tests:",e),c("Failed to refresh tests","error")}finally{H(!1)}}},[o,ie,oe,pe,he]),Me=e=>{W(e.id),z({testName:e.testName||"",description:e.description||"",instructions:e.instructions||"",timeLimitMinutes:e.timeLimitMinutes||"",totalMarks:e.totalMarks||"",passingMarks:e.passingMarks||"",negativeMarking:e.negativeMarking||!1,negativeMarkPercentage:e.negativeMarkPercentage||0,maxAttempts:e.maxAttempts||1,isPublished:e.isPublished||!1,startDate:e.startDate||"",endDate:e.endDate||"",masterExamId:e.masterExamId||"",testType:e.testType||"PRACTICE",allowReview:void 0===e.allowReview||e.allowReview,showCorrectAnswers:e.showCorrectAnswers||!1,shuffleQuestions:e.shuffleQuestions||!1,shuffleOptions:e.shuffleOptions||!1,allowSkip:void 0===e.allowSkip||e.allowSkip,timePerQuestion:e.timePerQuestion||0,testCreationMode:e.testCreationMode||"EXAM_BASED",testLevel:e.testLevel||"CLASS_EXAM",courseTypeId:e.courseTypeId||"",courseId:e.courseId||"",classId:e.classId||"",examId:e.examId||"",subjectLinkageId:e.subjectLinkageId||"",topicId:e.topicId||"",moduleId:e.moduleId||"",chapterId:e.chapterId||""}),B(!0)},De=async e=>{if(window.confirm("Are you sure you want to delete this test?")){H(!0);try{await d(Ge.u3,o,e)&&(c("Test deleted successfully","success"),Re())}catch(t){console.error("Error deleting test:",t),c("Failed to delete test","error")}finally{H(!1)}}},Fe=async e=>{H(!0);try{(e.isPublished?await d(Ge.JK,o,e.id):await d(Ge.Yt,o,e.id))&&(c(e.isPublished?"Test unpublished successfully":"Test published successfully","success"),Re())}catch(t){console.error("Error toggling test status:",t),c("Failed to update test status","error")}finally{H(!1)}},ze=async e=>{J(e),te(!0)},Oe=async e=>{if(0===ve.length)return void c("Please select tests to perform bulk operation","warning");const t="Are you sure you want to ".concat(e.toLowerCase()," ").concat(ve.length," test(s)?");if(window.confirm(t)){H(!0);try{const t=ve.map(t=>{switch(e){case"PUBLISH":return(0,Ge.Yt)(o,t);case"UNPUBLISH":return(0,Ge.JK)(o,t);case"DELETE":return(0,Ge.u3)(o,t);default:return Promise.resolve()}});await Promise.all(t),c("Bulk ".concat(e.toLowerCase()," completed successfully"),"success"),be([]),je(!1),Re()}catch(s){console.error("Error in bulk operation:",s),c("Bulk operation failed","error")}finally{H(!1)}}},_e=()=>{B(!1),W(null),F()},qe=()=>{W(null),F(),B(!0)},Be=e=>e?e.exam||e.examName||e.name||"Exam ".concat(e.id):"Unknown Exam",We=(0,n.useMemo)(()=>{let e=V;if(ie&&(e=e.filter(e=>e.masterExamId===parseInt(ie))),oe&&(e="PUBLISHED"===oe?e.filter(e=>e.isPublished):"DRAFT"===oe?e.filter(e=>!e.isPublished&&"DRAFT"===e.status):e.filter(e=>e.status===oe)),de&&(e=e.filter(e=>e.testType===de)),pe){const t=pe.toLowerCase();e=e.filter(e=>{var s,a;return(null===(s=e.testName)||void 0===s?void 0:s.toLowerCase().includes(t))||(null===(a=e.description)||void 0===a?void 0:a.toLowerCase().includes(t))||Be(e.masterExam).toLowerCase().includes(t)})}return xe.start&&(e=e.filter(e=>new Date(e.createdAt)>=new Date(xe.start))),xe.end&&(e=e.filter(e=>new Date(e.createdAt)<=new Date(xe.end))),e},[V,ie,oe,de,pe,xe]);return(0,Le.jsxs)("div",{className:"master-data-management advanced-test-management",children:[(0,Le.jsx)(Ve,{title:"\ud83d\ude80 Advanced Test Management",subtitle:"Enterprise-grade test creation and management system",onBackToDashboard:l}),(0,Le.jsxs)("div",{className:"tab-navigation",children:[(0,Le.jsxs)("button",{className:"tab-button ".concat("tests"===K?"active":""),onClick:()=>G("tests"),children:["\ud83d\udcdd Tests (",We.length,")"]}),(0,Le.jsx)("button",{className:"tab-button ".concat("analytics"===K?"active":""),onClick:()=>G("analytics"),children:"\ud83d\udcca Analytics"}),(0,Le.jsx)("button",{className:"tab-button ".concat("templates"===K?"active":""),onClick:()=>G("templates"),children:"\ud83d\udccb Templates"})]}),"tests"===K&&(0,Le.jsxs)("div",{className:"filters-section",children:[(0,Le.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",margin:"8px 0"},children:(0,Le.jsx)("button",{className:"btn btn-primary",onClick:qe,disabled:Q,children:"\u2795 Create Test"})}),(0,Le.jsxs)("div",{className:"section-title",children:[(0,Le.jsx)("span",{className:"icon",children:"\ud83d\udd0d"}),(0,Le.jsx)("span",{children:"Filter Tests"})]}),(0,Le.jsxs)("div",{className:"filter-row",children:[(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{children:"Master Exam"}),(0,Le.jsxs)("select",{value:ie,onChange:e=>le(e.target.value),className:"form-input",children:[(0,Le.jsx)("option",{value:"",children:"All Exams"}),null===u||void 0===u?void 0:u.map(e=>(0,Le.jsx)("option",{value:e.id,children:Be(e)},e.id))]})]}),(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{children:"Status"}),(0,Le.jsxs)("select",{value:oe,onChange:e=>ce(e.target.value),className:"form-input",children:[(0,Le.jsx)("option",{value:"",children:"All Status"}),(0,Le.jsx)("option",{value:"PUBLISHED",children:"Published"}),(0,Le.jsx)("option",{value:"DRAFT",children:"Draft"}),(0,Le.jsx)("option",{value:"INACTIVE",children:"Inactive"})]})]}),(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{children:"Test Type"}),(0,Le.jsxs)("select",{value:de,onChange:e=>ue(e.target.value),className:"form-input",children:[(0,Le.jsx)("option",{value:"",children:"All Types"}),(0,Le.jsx)("option",{value:"PRACTICE",children:"Practice"}),(0,Le.jsx)("option",{value:"MOCK",children:"Mock Test"}),(0,Le.jsx)("option",{value:"FINAL",children:"Final Exam"}),(0,Le.jsx)("option",{value:"QUIZ",children:"Quiz"})]})]}),(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{children:"Search"}),(0,Le.jsx)("input",{type:"text",value:pe,onChange:e=>me(e.target.value),placeholder:"Search tests...",className:"form-input"})]}),(0,Le.jsx)("div",{className:"filter-group",children:(0,Le.jsxs)("label",{className:"checkbox-label",children:[(0,Le.jsx)("input",{type:"checkbox",checked:he,onChange:e=>fe(e.target.checked)}),"Active Only"]})})]}),(0,Le.jsxs)("div",{className:"filter-row",children:[(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{children:"Start Date"}),(0,Le.jsx)("input",{type:"date",value:xe.start,onChange:e=>ge(t=>(0,Ue.A)((0,Ue.A)({},t),{},{start:e.target.value})),className:"form-input"})]}),(0,Le.jsxs)("div",{className:"filter-group",children:[(0,Le.jsx)("label",{children:"End Date"}),(0,Le.jsx)("input",{type:"date",value:xe.end,onChange:e=>ge(t=>(0,Ue.A)((0,Ue.A)({},t),{},{end:e.target.value})),className:"form-input"})]}),(0,Le.jsx)("div",{className:"filter-group",children:(0,Le.jsxs)("label",{className:"checkbox-label",children:[(0,Le.jsx)("input",{type:"checkbox",checked:he,onChange:e=>fe(e.target.checked)}),"Active Only"]})}),(0,Le.jsx)("div",{className:"filter-group",children:(0,Le.jsx)("button",{className:"btn btn-outline",onClick:()=>{le(""),ce(""),ue(""),me(""),fe(!0),ge({start:"",end:""})},children:"\ud83d\udd04 Clear All"})})]}),ve.length>0&&(0,Le.jsxs)("div",{className:"bulk-actions",children:[(0,Le.jsx)("div",{className:"bulk-info",children:(0,Le.jsxs)("span",{children:[ve.length," test(s) selected"]})}),(0,Le.jsxs)("div",{className:"bulk-buttons",children:[(0,Le.jsx)("button",{className:"btn btn-success btn-sm",onClick:()=>Oe("PUBLISH"),children:"\ud83d\udce2 Publish"}),(0,Le.jsx)("button",{className:"btn btn-warning btn-sm",onClick:()=>Oe("UNPUBLISH"),children:"\ud83d\udd12 Unpublish"}),(0,Le.jsx)("button",{className:"btn btn-danger btn-sm",onClick:()=>Oe("DELETE"),children:"\ud83d\uddd1\ufe0f Delete"}),(0,Le.jsx)("button",{className:"btn btn-outline btn-sm",onClick:()=>be([]),children:"\u2715 Clear"})]})]}),(0,Le.jsxs)("div",{className:"filter-actions",children:[(0,Le.jsx)("button",{className:"btn btn-primary",onClick:Re,disabled:Q,children:"Apply Filters"}),(0,Le.jsx)("button",{className:"btn btn-outline",onClick:()=>{console.log("Manual test API call triggered"),Re()},disabled:Q,children:"\ud83d\udd04 Test API Call"})]})]}),"analytics"===K&&(0,Le.jsx)("div",{className:"analytics-section",children:(0,Le.jsx)(vt,{onClose:()=>G("tests")})}),"templates"===K&&(0,Le.jsx)("div",{className:"templates-section",children:(0,Le.jsx)(jt,{onClose:()=>G("tests")})}),q&&(0,Le.jsxs)("div",{className:"form-section",children:[(0,Le.jsxs)("div",{className:"form-header",children:[(0,Le.jsx)("h3",{children:U?"Edit Test":"Add New Test"}),(0,Le.jsx)("button",{className:"btn btn-link",onClick:_e,children:"\u2715 Cancel"})]}),(0,Le.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),D()){H(!0);try{const e={testName:T.testName,description:T.description,instructions:T.instructions,timeLimitMinutes:parseInt(T.timeLimitMinutes),totalMarks:parseInt(T.totalMarks),passingMarks:parseInt(T.passingMarks),negativeMarking:T.negativeMarking,negativeMarkPercentage:T.negativeMarking?parseFloat(T.negativeMarkPercentage):0,maxAttempts:parseInt(T.maxAttempts),isPublished:T.isPublished,startDate:T.startDate,endDate:T.endDate,testType:T.testType,allowReview:T.allowReview,showCorrectAnswers:T.showCorrectAnswers,shuffleQuestions:T.shuffleQuestions,shuffleOptions:T.shuffleOptions,allowSkip:T.allowSkip,timePerQuestion:parseInt(T.timePerQuestion)||0,testCreationMode:T.testCreationMode};if("EXAM_BASED"===T.testCreationMode?(e.masterExamId=parseInt(T.masterExamId),e.testLevel=null,e.courseTypeId=null,e.courseId=null,e.classId=null,e.examId=null,e.subjectLinkageId=null,e.topicId=null,e.moduleId=null,e.chapterId=null):"CONTENT_BASED"===T.testCreationMode&&(e.testLevel=T.testLevel,e.masterExamId=T.masterExamId?parseInt(T.masterExamId):null,e.courseTypeId=parseInt(T.courseTypeId),e.courseId=parseInt(T.courseId),1===parseInt(T.courseTypeId)&&T.classId?(e.classId=parseInt(T.classId),e.examId=null):2===parseInt(T.courseTypeId)&&T.examId&&(e.examId=parseInt(T.examId),e.classId=null),"SUBJECT"===T.testLevel||"MODULE"===T.testLevel||"CHAPTER"===T.testLevel?e.subjectLinkageId=T.subjectLinkageId?parseInt(T.subjectLinkageId):null:e.subjectLinkageId=null,"MODULE"===T.testLevel||"CHAPTER"===T.testLevel?(e.topicId=T.topicId?parseInt(T.topicId):null,e.moduleId=T.moduleId?parseInt(T.moduleId):null):(e.topicId=null,e.moduleId=null),"CHAPTER"===T.testLevel?e.chapterId=T.chapterId?parseInt(T.chapterId):null:e.chapterId=null),console.log("Submitting test payload:",e),U){await d(Ge.Ou,o,U,e)&&(c("Test updated successfully","success"),_e(),Re())}else{await d(Ge.Z2,o,e)&&(c("Test created successfully","success"),_e(),Re())}}catch(t){console.error("Error saving test:",t),c("Failed to save test","error")}finally{H(!1)}}else c("Please fix the validation errors","error")},className:"test-form",children:[(0,Le.jsxs)("div",{className:"form-section",children:[(0,Le.jsxs)("div",{className:"section-title",children:[(0,Le.jsx)("span",{className:"icon",children:"\ud83d\udccb"}),(0,Le.jsx)("span",{children:"Basic Information"})]}),(0,Le.jsxs)("div",{className:"form-row",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{className:"required",children:"Test Name"}),(0,Le.jsx)("input",{type:"text",name:"testName",value:T.testName,onChange:O,onBlur:_,className:"form-control ".concat(P.testName&&L.testName?"error":""),placeholder:"Enter test name"}),P.testName&&L.testName&&(0,Le.jsx)("span",{className:"error-message",children:P.testName})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Test Type"}),(0,Le.jsxs)("select",{name:"testType",value:T.testType,onChange:O,onBlur:_,className:"form-input",children:[(0,Le.jsx)("option",{value:"PRACTICE",children:"Practice Test"}),(0,Le.jsx)("option",{value:"MOCK",children:"Mock Test"}),(0,Le.jsx)("option",{value:"FINAL",children:"Final Exam"}),(0,Le.jsx)("option",{value:"QUIZ",children:"Quiz"})]})]})]}),(0,Le.jsxs)("div",{className:"form-group full-width",children:[(0,Le.jsx)("label",{children:"Description"}),(0,Le.jsx)("textarea",{name:"description",value:T.description,onChange:O,onBlur:_,className:"form-input",rows:"3",placeholder:"Enter test description"})]}),(0,Le.jsxs)("div",{className:"form-group full-width",children:[(0,Le.jsx)("label",{children:"Instructions"}),(0,Le.jsx)("textarea",{name:"instructions",value:T.instructions,onChange:O,onBlur:_,className:"form-input",rows:"4",placeholder:"Enter test instructions for students"})]})]}),(0,Le.jsxs)("div",{className:"form-section",children:[(0,Le.jsxs)("div",{className:"section-title",children:[(0,Le.jsx)("span",{className:"icon",children:"\ud83c\udfaf"}),(0,Le.jsx)("span",{children:"Test Scope & Content Linkage"})]}),(0,Le.jsx)("div",{className:"form-row",children:(0,Le.jsxs)("div",{className:"form-group full-width",children:[(0,Le.jsx)("label",{className:"required",children:"Test Creation Mode"}),(0,Le.jsxs)("div",{className:"mode-toggle-group",children:[(0,Le.jsxs)("label",{className:"mode-toggle ".concat("EXAM_BASED"===T.testCreationMode?"active":""),children:[(0,Le.jsx)("input",{type:"radio",name:"testCreationMode",value:"EXAM_BASED",checked:"EXAM_BASED"===T.testCreationMode,onChange:O}),(0,Le.jsxs)("div",{className:"mode-content",children:[(0,Le.jsx)("span",{className:"mode-icon",children:"\ud83d\udcdd"}),(0,Le.jsxs)("div",{children:[(0,Le.jsx)("strong",{children:"Exam-Based Test"}),(0,Le.jsx)("p",{children:"General competitive exam test (SSC, UPSC, etc.) - uses question examSuitabilities"})]})]})]}),(0,Le.jsxs)("label",{className:"mode-toggle ".concat("CONTENT_BASED"===T.testCreationMode?"active":""),children:[(0,Le.jsx)("input",{type:"radio",name:"testCreationMode",value:"CONTENT_BASED",checked:"CONTENT_BASED"===T.testCreationMode,onChange:O}),(0,Le.jsxs)("div",{className:"mode-content",children:[(0,Le.jsx)("span",{className:"mode-icon",children:"\ud83d\udcda"}),(0,Le.jsxs)("div",{children:[(0,Le.jsx)("strong",{children:"Content-Based Test"}),(0,Le.jsx)("p",{children:"Linked to specific course content (Class, Subject, Chapter, etc.)"})]})]})]})]})]})}),"EXAM_BASED"===T.testCreationMode&&(0,Le.jsx)("div",{className:"form-row",children:(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{className:"required",children:"Master Exam"}),(0,Le.jsxs)("select",{name:"masterExamId",value:T.masterExamId,onChange:O,onBlur:_,className:"form-input ".concat(P.masterExamId&&L.masterExamId?"error":""),children:[(0,Le.jsx)("option",{value:"",children:"Select Master Exam"}),null===u||void 0===u?void 0:u.map(e=>(0,Le.jsx)("option",{value:e.id,children:Be(e)},e.id))]}),P.masterExamId&&L.masterExamId&&(0,Le.jsx)("span",{className:"error-message",children:P.masterExamId})]})}),"CONTENT_BASED"===T.testCreationMode&&(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)("div",{className:"form-row",children:(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{className:"required",children:"Test Level"}),(0,Le.jsxs)("select",{name:"testLevel",value:T.testLevel,onChange:O,className:"form-input",children:[(0,Le.jsx)("option",{value:"CLASS_EXAM",children:"Class/Exam Level"}),(0,Le.jsx)("option",{value:"SUBJECT",children:"Subject Level"}),(0,Le.jsx)("option",{value:"MODULE",children:"Module Level"}),(0,Le.jsx)("option",{value:"CHAPTER",children:"Chapter Level"})]}),(0,Le.jsxs)("small",{className:"form-help",children:["CLASS_EXAM"===T.testLevel&&"Test covering entire class/exam syllabus","SUBJECT"===T.testLevel&&"Test for specific subject","MODULE"===T.testLevel&&"Test for specific module","CHAPTER"===T.testLevel&&"Test for specific chapter"]})]})}),(0,Le.jsxs)("div",{className:"form-row",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{className:"required",children:"Course Type"}),(0,Le.jsxs)("select",{name:"courseTypeId",value:T.courseTypeId,onChange:O,className:"form-input",children:[(0,Le.jsx)("option",{value:"",children:"Select Course Type"}),m.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{className:"required",children:"Course"}),(0,Le.jsxs)("select",{name:"courseId",value:T.courseId,onChange:O,className:"form-input",disabled:!T.courseTypeId,children:[(0,Le.jsx)("option",{value:"",children:"Select Course"}),f.filter(e=>e.courseTypeId===parseInt(T.courseTypeId)).map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),T.courseTypeId&&(0,Le.jsxs)("div",{className:"form-row",children:[1===parseInt(T.courseTypeId)&&(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{className:"required",children:"Class"}),(0,Le.jsxs)("select",{name:"classId",value:T.classId,onChange:O,className:"form-input",disabled:!T.courseId,children:[(0,Le.jsx)("option",{value:"",children:"Select Class"}),g.filter(e=>e.courseId===parseInt(T.courseId)).map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),2===parseInt(T.courseTypeId)&&(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{className:"required",children:"Exam"}),(0,Le.jsxs)("select",{name:"examId",value:T.examId,onChange:O,className:"form-input",disabled:!T.courseId,children:[(0,Le.jsx)("option",{value:"",children:"Select Exam"}),b.filter(e=>e.courseId===parseInt(T.courseId)).map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),("SUBJECT"===T.testLevel||"MODULE"===T.testLevel||"CHAPTER"===T.testLevel)&&(0,Le.jsx)("div",{className:"form-row",children:(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{className:"required",children:"Subject"}),(0,Le.jsxs)("select",{name:"subjectLinkageId",value:T.subjectLinkageId,onChange:O,className:"form-input",disabled:!T.classId&&!T.examId,children:[(0,Le.jsx)("option",{value:"",children:"Select Subject"}),j.map(e=>(0,Le.jsx)("option",{value:e.linkageId||e.id,children:e.subjectName||e.name},e.linkageId||e.id))]})]})}),("MODULE"===T.testLevel||"CHAPTER"===T.testLevel)&&(0,Le.jsxs)("div",{className:"form-row",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{className:"required",children:"Topic"}),(0,Le.jsxs)("select",{name:"topicId",value:T.topicId,onChange:O,className:"form-input",disabled:!T.subjectLinkageId,children:[(0,Le.jsx)("option",{value:"",children:"Select Topic"}),w.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{className:"required",children:"Module"}),(0,Le.jsxs)("select",{name:"moduleId",value:T.moduleId,onChange:O,className:"form-input",disabled:!T.topicId,children:[(0,Le.jsx)("option",{value:"",children:"Select Module"}),S.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),"CHAPTER"===T.testLevel&&(0,Le.jsx)("div",{className:"form-row",children:(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{className:"required",children:"Chapter"}),(0,Le.jsxs)("select",{name:"chapterId",value:T.chapterId,onChange:O,className:"form-input",disabled:!T.moduleId,children:[(0,Le.jsx)("option",{value:"",children:"Select Chapter"}),I.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]})]})}),T.testLevel&&T.courseTypeId&&(0,Le.jsxs)("div",{className:"info-alert",children:[(0,Le.jsx)("span",{className:"info-icon",children:"\u2139\ufe0f"}),(0,Le.jsxs)("div",{children:[(0,Le.jsx)("strong",{children:"Test Scope:"}),"CLASS_EXAM"===T.testLevel&&T.classId&&" This test will be available for all subjects in ".concat(null===(t=g.find(e=>e.id===parseInt(T.classId)))||void 0===t?void 0:t.name,"."),"CLASS_EXAM"===T.testLevel&&T.examId&&" This test will be available for all subjects in ".concat(null===(s=b.find(e=>e.id===parseInt(T.examId)))||void 0===s?void 0:s.name,"."),"SUBJECT"===T.testLevel&&T.subjectLinkageId&&" This test will be available for ".concat(null===(a=j.find(e=>e.linkageId===parseInt(T.subjectLinkageId)))||void 0===a?void 0:a.name," subject."),"MODULE"===T.testLevel&&T.moduleId&&" This test will be available for ".concat(null===(r=S.find(e=>e.id===parseInt(T.moduleId)))||void 0===r?void 0:r.name," module."),"CHAPTER"===T.testLevel&&T.chapterId&&" This test will be available for ".concat(null===(i=I.find(e=>e.id===parseInt(T.chapterId)))||void 0===i?void 0:i.name," chapter.")]})]})]}),"EXAM_BASED"===T.testCreationMode&&T.masterExamId&&(0,Le.jsxs)("div",{className:"info-alert",children:[(0,Le.jsx)("span",{className:"info-icon",children:"\u2139\ufe0f"}),(0,Le.jsxs)("div",{children:[(0,Le.jsx)("strong",{children:"Exam-Based Test:"})," Questions will be filtered using the selected Master Exam's examSuitabilities. No course content linkage needed - perfect for general competitive exam practice!"]})]})]}),(0,Le.jsxs)("div",{className:"form-section",children:[(0,Le.jsxs)("div",{className:"section-title",children:[(0,Le.jsx)("span",{className:"icon",children:"\u2699\ufe0f"}),(0,Le.jsx)("span",{children:"Test Configuration"})]}),(0,Le.jsxs)("div",{className:"form-row",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{className:"required",children:"Time Limit (Minutes)"}),(0,Le.jsx)("input",{type:"number",name:"timeLimitMinutes",value:T.timeLimitMinutes,onChange:O,onBlur:_,className:"form-input ".concat(P.timeLimitMinutes&&L.timeLimitMinutes?"error":""),placeholder:"180",min:"1"}),P.timeLimitMinutes&&L.timeLimitMinutes&&(0,Le.jsx)("span",{className:"error-message",children:P.timeLimitMinutes})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{className:"required",children:"Total Marks"}),(0,Le.jsx)("input",{type:"number",name:"totalMarks",value:T.totalMarks,onChange:O,onBlur:_,className:"form-input ".concat(P.totalMarks&&L.totalMarks?"error":""),placeholder:"300",min:"1"}),P.totalMarks&&L.totalMarks&&(0,Le.jsx)("span",{className:"error-message",children:P.totalMarks})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{className:"required",children:"Passing Marks"}),(0,Le.jsx)("input",{type:"number",name:"passingMarks",value:T.passingMarks,onChange:O,onBlur:_,className:"form-input ".concat(P.passingMarks&&L.passingMarks?"error":""),placeholder:"120",min:"1"}),P.passingMarks&&L.passingMarks&&(0,Le.jsx)("span",{className:"error-message",children:P.passingMarks})]})]}),(0,Le.jsxs)("div",{className:"form-row",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Max Attempts"}),(0,Le.jsx)("input",{type:"number",name:"maxAttempts",value:T.maxAttempts,onChange:O,onBlur:_,className:"form-input",placeholder:"1",min:"1"})]}),(0,Le.jsx)("div",{className:"form-group",children:(0,Le.jsx)("div",{className:"checkbox-group",children:(0,Le.jsxs)("label",{className:"checkbox-label",children:[(0,Le.jsx)("input",{type:"checkbox",name:"negativeMarking",checked:T.negativeMarking,onChange:O}),"Enable Negative Marking"]})})}),T.negativeMarking&&(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Negative Mark Percentage"}),(0,Le.jsx)("input",{type:"number",name:"negativeMarkPercentage",value:T.negativeMarkPercentage,onChange:O,onBlur:_,className:"form-input",placeholder:"25",min:"0",max:"100",step:"0.1"})]})]}),(0,Le.jsxs)("div",{className:"form-row",children:[(0,Le.jsx)("div",{className:"form-group",children:(0,Le.jsx)("div",{className:"checkbox-group",children:(0,Le.jsxs)("label",{className:"checkbox-label",children:[(0,Le.jsx)("input",{type:"checkbox",name:"allowReview",checked:T.allowReview,onChange:O}),"Allow Review"]})})}),(0,Le.jsx)("div",{className:"form-group",children:(0,Le.jsx)("div",{className:"checkbox-group",children:(0,Le.jsxs)("label",{className:"checkbox-label",children:[(0,Le.jsx)("input",{type:"checkbox",name:"showCorrectAnswers",checked:T.showCorrectAnswers,onChange:O}),"Show Correct Answers"]})})}),(0,Le.jsx)("div",{className:"form-group",children:(0,Le.jsx)("div",{className:"checkbox-group",children:(0,Le.jsxs)("label",{className:"checkbox-label",children:[(0,Le.jsx)("input",{type:"checkbox",name:"shuffleQuestions",checked:T.shuffleQuestions,onChange:O}),"Shuffle Questions"]})})})]}),(0,Le.jsxs)("div",{className:"form-row",children:[(0,Le.jsx)("div",{className:"form-group",children:(0,Le.jsx)("div",{className:"checkbox-group",children:(0,Le.jsxs)("label",{className:"checkbox-label",children:[(0,Le.jsx)("input",{type:"checkbox",name:"shuffleOptions",checked:T.shuffleOptions,onChange:O}),"Shuffle Options"]})})}),(0,Le.jsx)("div",{className:"form-group",children:(0,Le.jsx)("div",{className:"checkbox-group",children:(0,Le.jsxs)("label",{className:"checkbox-label",children:[(0,Le.jsx)("input",{type:"checkbox",name:"allowSkip",checked:T.allowSkip,onChange:O}),"Allow Skip"]})})}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Time Per Question (seconds)"}),(0,Le.jsx)("input",{type:"number",name:"timePerQuestion",value:T.timePerQuestion,onChange:O,onBlur:_,className:"form-input",placeholder:"0 (use total time limit)",min:"0"}),(0,Le.jsx)("small",{className:"form-text",children:"0 = use total time limit"})]})]})]}),(0,Le.jsxs)("div",{className:"form-section",children:[(0,Le.jsxs)("div",{className:"section-title",children:[(0,Le.jsx)("span",{className:"icon",children:"\ud83d\udd50"}),(0,Le.jsx)("span",{children:"Availability"})]}),(0,Le.jsxs)("div",{className:"form-row",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"Start Date"}),(0,Le.jsx)("input",{type:"date",name:"startDate",value:T.startDate,onChange:O,onBlur:_,className:"form-input"})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{children:"End Date"}),(0,Le.jsx)("input",{type:"date",name:"endDate",value:T.endDate,onChange:O,onBlur:_,className:"form-input"})]}),(0,Le.jsx)("div",{className:"form-group",children:(0,Le.jsx)("div",{className:"checkbox-group",children:(0,Le.jsxs)("label",{className:"checkbox-label",children:[(0,Le.jsx)("input",{type:"checkbox",name:"isPublished",checked:T.isPublished,onChange:O}),"Publish Test"]})})})]})]}),(0,Le.jsxs)("div",{className:"form-actions",children:[(0,Le.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:_e,disabled:Q,children:"Cancel"}),(0,Le.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:Q,children:Q?"Saving...":U?"Update Test":"Create Test"})]})]})]}),"tests"===K&&(0,Le.jsx)("div",{className:"tests-list",children:Q?(0,Le.jsxs)("div",{className:"loading-state",children:[(0,Le.jsx)("div",{className:"spinner"}),(0,Le.jsx)("p",{children:"Loading tests..."})]}):0===We.length?(0,Le.jsxs)("div",{className:"empty-state",children:[(0,Le.jsx)("div",{className:"empty-icon",children:"No Tests"}),(0,Le.jsx)("h3",{children:"No tests found"}),(0,Le.jsx)("p",{children:"Create your first test to get started with the advanced test management system."}),(0,Le.jsx)("button",{className:"btn btn-primary",onClick:qe,children:"Create Test"})]}):Q?(0,Le.jsxs)("div",{className:"loading-container",children:[(0,Le.jsx)("div",{className:"loading-spinner"}),(0,Le.jsx)("p",{children:"Loading tests..."})]}):(0,Le.jsx)("div",{className:"tests-grid",children:0===We.length?(0,Le.jsxs)("div",{className:"no-data-message",children:[(0,Le.jsx)("div",{className:"no-data-icon",children:"\ud83d\udcdd"}),(0,Le.jsx)("h3",{children:"No Tests Found"}),(0,Le.jsx)("p",{children:"Create your first test to get started with test management."}),(0,Le.jsx)("button",{className:"btn btn-primary",onClick:qe,children:"Create Test"})]}):We.map(e=>(0,Le.jsx)(bt,{test:e,onEdit:Me,onDelete:De,onPublishToggle:Fe,onManageQuestions:ze,onSelect:e=>{be(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},isSelected:ve.includes(e.id)},e.id))})}),X&&(0,Le.jsx)(gt,{isOpen:X,onClose:()=>Z(!1),onSelectQuestions:async e=>{if($){H(!0);try{for(let t=0;t<e.length;t++){const s=e[t],a={questionId:s.id,questionOrder:t+1,marks:s.marks||4,negativeMarks:0};await(0,Ge.Ng)(o,$.id,a)}c("Added ".concat(e.length," questions to test"),"success"),Z(!1),J(null),Re()}catch(t){console.error("Error adding questions to test:",t),c("Failed to add questions to test","error")}finally{H(!1)}}}}),ee&&$&&(0,Le.jsx)(yt,{test:$,onClose:()=>{te(!1),J(null)}}),se&&(0,Le.jsx)(vt,{onClose:()=>ae(!1)}),ne&&(0,Le.jsx)(jt,{onClose:()=>re(!1)})]})},wt=()=>{const{token:e,addNotification:t}=(0,Pe.nm)(),[s,a]=(0,n.useState)([]),[r,i]=(0,n.useState)(""),[l,o]=(0,n.useState)("COURSE"),[c,d]=(0,n.useState)(!1),[u,p]=(0,n.useState)(0),[m,h]=(0,n.useState)(0),[f,x]=(0,n.useState)(0),[g,v]=(0,n.useState)(!1),[b,y]=(0,n.useState)(""),[j,N]=(0,n.useState)(""),[w,k]=(0,n.useState)("");(0,n.useEffect)(()=>{let s=!1;return(async()=>{try{d(!0);const t=await(0,Ge.F3)(e),n=Array.isArray(t)?t:(null===t||void 0===t?void 0:t.content)||(null===t||void 0===t?void 0:t.data)||[];s||a(n)}catch(us){t({type:"error",message:"Failed to load course types: ".concat(us.message),duration:6e3})}finally{s||d(!1)}})(),()=>{s=!0}},[e,t]);const S=(0,n.useMemo)(()=>!!r&&((0!==u||0!==m||0!==f)&&!!(!g||b&&j)),[r,u,m,f,g,b,j]),C=()=>{p(0),h(0),x(0),v(!1),y(""),N(""),k("")};return(0,Le.jsxs)("div",{className:"card",children:[(0,Le.jsxs)("div",{className:"card-header",children:[(0,Le.jsx)("h3",{children:"Global Offer Management"}),(0,Le.jsxs)("p",{children:["Apply discount globally to all ","COURSE"===l?"Courses":"CLASS"===l?"Classes":"Exams"," of a Course Type"]})]}),(0,Le.jsxs)("div",{className:"card-body",children:[(0,Le.jsx)("div",{className:"form-row",children:(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{className:"form-label",children:"Course Type *"}),(0,Le.jsxs)("select",{className:"form-select",value:r,onChange:e=>i(e.target.value),disabled:c,children:[(0,Le.jsx)("option",{value:"",children:"Select Course Type"}),s.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]})]})}),(0,Le.jsx)("div",{className:"form-row mt-4",children:(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{className:"form-label",children:"Apply To Level *"}),(0,Le.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,Le.jsxs)("label",{className:"flex items-center gap-2",children:[(0,Le.jsx)("input",{type:"radio",value:"COURSE",checked:"COURSE"===l,onChange:e=>o(e.target.value)}),(0,Le.jsx)("span",{children:"Course"})]}),(0,Le.jsxs)("label",{className:"flex items-center gap-2",children:[(0,Le.jsx)("input",{type:"radio",value:"CLASS",checked:"CLASS"===l,onChange:e=>o(e.target.value)}),(0,Le.jsx)("span",{children:"Class"})]}),(0,Le.jsxs)("label",{className:"flex items-center gap-2",children:[(0,Le.jsx)("input",{type:"radio",value:"EXAM",checked:"EXAM"===l,onChange:e=>o(e.target.value)}),(0,Le.jsx)("span",{children:"Exam"})]})]}),(0,Le.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:(()=>{switch(l){case"COURSE":return"Update all courses of this course type";case"CLASS":return"Update all classes whose course has this course type";case"EXAM":return"Update all exams related to this course type";default:return""}})()})]})}),(0,Le.jsxs)("div",{className:"form-section mt-6",children:[(0,Le.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"Discount Settings"}),(0,Le.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{className:"form-label",children:"Monthly Discount % *"}),(0,Le.jsx)("input",{className:"form-input",type:"number",placeholder:"0-100",value:u,onChange:e=>p(Math.min(100,Math.max(0,Number(e.target.value||0))))})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{className:"form-label",children:"Quarterly Discount % *"}),(0,Le.jsx)("input",{className:"form-input",type:"number",placeholder:"0-100",value:m,onChange:e=>h(Math.min(100,Math.max(0,Number(e.target.value||0))))})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{className:"form-label",children:"Yearly Discount % *"}),(0,Le.jsx)("input",{className:"form-input",type:"number",placeholder:"0-100",value:f,onChange:e=>x(Math.min(100,Math.max(0,Number(e.target.value||0))))})]})]}),(0,Le.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"At least one discount must be greater than 0"})]}),(0,Le.jsx)("div",{className:"form-row mt-6",children:(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{className:"form-label",children:"Effective Date"}),(0,Le.jsx)("input",{className:"form-input",type:"date",value:w,onChange:e=>k(e.target.value)}),(0,Le.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"When should this offer take effect? (defaults to today)"})]})}),(0,Le.jsx)("div",{className:"form-row mt-6",children:(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{className:"form-label",children:"Schedule Offer (Optional)"}),(0,Le.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Le.jsx)("input",{type:"checkbox",checked:g,onChange:e=>v(e.target.checked)}),(0,Le.jsx)("span",{className:"text-sm",children:"Enable offer validity dates"})]})]})}),g&&(0,Le.jsxs)("div",{className:"grid grid-cols-2 gap-6 mt-4",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{className:"form-label",children:"Offer Valid From *"}),(0,Le.jsx)("input",{className:"form-input",type:"date",value:b,onChange:e=>y(e.target.value)})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{className:"form-label",children:"Offer Valid To *"}),(0,Le.jsx)("input",{className:"form-input",type:"date",value:j,onChange:e=>N(e.target.value)})]})]})]}),(0,Le.jsxs)("div",{className:"card-footer",style:{display:"flex",gap:8,justifyContent:"flex-end"},children:[(0,Le.jsx)("button",{className:"btn btn-outline",onClick:C,children:"Reset"}),(0,Le.jsx)("button",{className:"btn btn-primary",disabled:!S,onClick:async()=>{if(S)try{const a=s.find(e=>e.id===parseInt(r)),n=e=>e?"".concat(e,"T00:00:00"):null,i={courseTypeId:parseInt(r),level:l,monthlyDiscountPercent:u,quarterlyDiscountPercent:m,yearlyDiscountPercent:f,offerValidFrom:g?n(b):null,offerValidTo:g?n(j):null,effectiveDate:n(w||(new Date).toISOString().split("T")[0])};await(async(e,t)=>{const s="".concat(Xe.tE,"/api/admin/pricing/bulk-update-discount-by-course-type");console.log("Bulk updating discount by course type:",t);const a={"Content-Type":"application/json",accept:"*/*"};e&&(a.Authorization="Bearer ".concat(e));const n=await fetch(s,{method:"PUT",headers:a,body:JSON.stringify(t)});if(console.log("Bulk update discount response status:",n.status),!n.ok){const e=await n.text();throw console.error("Bulk update discount error:",e),new Error("Failed to bulk update discount: ".concat(n.status," ").concat(n.statusText," - ").concat(e))}const r=await n.json();return console.log("Bulk discount update successful:",r),r})(e,i),t({type:"success",message:"Global offer applied to all ".concat(l.toLowerCase(),"s under ").concat(null===a||void 0===a?void 0:a.name),duration:4e3}),C()}catch(a){console.error("Error applying global offer:",a),t({type:"error",message:"Failed to apply global offer: ".concat(a.message),duration:6e3})}else t({type:"error",message:"Please fill all required fields",duration:4e3})},children:"Apply Global Offer"})]})]})},kt=()=>{const{token:e,addNotification:t}=(0,Pe.nm)(),[s,a]=(0,n.useState)(""),[r,i]=(0,n.useState)([]),[l,o]=(0,n.useState)(""),[c,d]=(0,n.useState)([]),[u,p]=(0,n.useState)(""),[m,h]=(0,n.useState)([]),[f,x]=(0,n.useState)(""),[g,v]=(0,n.useState)(""),[b,y]=(0,n.useState)(""),[j,N]=(0,n.useState)(""),[w,k]=(0,n.useState)(!1),[S,C]=(0,n.useState)(!1),[I,A]=(0,n.useState)(!1),[E,T]=(0,n.useState)(!1),[P,L]=(0,n.useState)([]);(0,n.useEffect)(()=>{let s=!1;return(async()=>{try{k(!0);const t=await(0,Ge.F3)(e),a=Array.isArray(t)?t:(null===t||void 0===t?void 0:t.content)||(null===t||void 0===t?void 0:t.data)||[];s||i(a)}catch(us){t({type:"error",message:"Failed to load course types: "+us.message,duration:6e3})}finally{s||k(!1)}})(),()=>{s=!0}},[e,t]),(0,n.useEffect)(()=>{d([]),p(""),h([]),x(""),l&&(async()=>{try{C(!0);const t=await(0,Ge.V7)(e,l),s=Array.isArray(t)?t:(null===t||void 0===t?void 0:t.content)||(null===t||void 0===t?void 0:t.data)||[];d(s)}catch(us){t({type:"error",message:"Failed to load courses: "+us.message,duration:6e3})}finally{C(!1)}})()},[l,e,t]),(0,n.useEffect)(()=>{h([]),x(""),u&&s&&"COURSE"!==s&&(async()=>{try{if(A(!0),"CLASS"===s){const t=await(0,Ge.tW)(e,u,0,100,"createdAt","desc"),s=Array.isArray(t)?t:(null===t||void 0===t?void 0:t.content)||(null===t||void 0===t?void 0:t.data)||[];h(s)}else if("EXAM"===s){const t=await(0,Ge.rJ)(e,u,0,100,"createdAt","desc"),s=Array.isArray(t)?t:(null===t||void 0===t?void 0:t.content)||(null===t||void 0===t?void 0:t.data)||[];h(s)}}catch(us){t({type:"error",message:"Failed to load "+s.toLowerCase()+"s: "+us.message,duration:6e3})}finally{A(!1)}})()},[u,s,e,t]);const R=e=>e?new Date(e).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"}):"-";return(0,Le.jsxs)("div",{className:"card",children:[(0,Le.jsxs)("div",{className:"card-header",children:[(0,Le.jsx)("h3",{children:"View Pricing & Offers"}),(0,Le.jsx)("p",{children:"Filter and view existing pricing configurations"})]}),(0,Le.jsxs)("div",{className:"card-body",children:[(0,Le.jsxs)("div",{className:"form-section",children:[(0,Le.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"Filters"}),(0,Le.jsxs)("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{className:"form-label",children:"Level"}),(0,Le.jsxs)("select",{className:"form-select",value:s,onChange:e=>a(e.target.value),children:[(0,Le.jsx)("option",{value:"",children:"All Levels"}),(0,Le.jsx)("option",{value:"COURSE",children:"Course"}),(0,Le.jsx)("option",{value:"CLASS",children:"Class"}),(0,Le.jsx)("option",{value:"EXAM",children:"Exam"})]})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{className:"form-label",children:"Course Type"}),(0,Le.jsxs)("select",{className:"form-select",value:l,onChange:e=>o(e.target.value),disabled:w,children:[(0,Le.jsx)("option",{value:"",children:"All Course Types"}),r.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{className:"form-label",children:"Course"}),(0,Le.jsxs)("select",{className:"form-select",value:u,onChange:e=>p(e.target.value),disabled:!l||S,children:[(0,Le.jsx)("option",{value:"",children:"All Courses"}),c.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{className:"form-label",children:"Status"}),(0,Le.jsxs)("select",{className:"form-select",value:b,onChange:e=>y(e.target.value),children:[(0,Le.jsx)("option",{value:"",children:"All Status"}),(0,Le.jsx)("option",{value:"true",children:"Active"}),(0,Le.jsx)("option",{value:"false",children:"Inactive"})]})]})]}),s&&"COURSE"!==s&&(0,Le.jsxs)("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{className:"form-label",children:"CLASS"===s?"Class":"Exam"}),(0,Le.jsxs)("select",{className:"form-select",value:f,onChange:e=>x(e.target.value),disabled:!u||I,children:[(0,Le.jsxs)("option",{value:"",children:["All ","CLASS"===s?"Classes":"Exams"]}),m.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{className:"form-label",children:"Search"}),(0,Le.jsx)("input",{type:"text",className:"form-input",placeholder:"Search by name...",value:j,onChange:e=>N(e.target.value)})]})]}),(!s||"COURSE"===s)&&(0,Le.jsx)("div",{className:"grid grid-cols-4 gap-4 mb-4",children:(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{className:"form-label",children:"Search"}),(0,Le.jsx)("input",{type:"text",className:"form-input",placeholder:"Search by name...",value:j,onChange:e=>N(e.target.value)})]})}),(0,Le.jsxs)("div",{className:"flex gap-3",children:[(0,Le.jsx)("button",{className:"btn btn-primary",onClick:async()=>{try{T(!0);const a={};l&&(a.courseTypeId=l),s&&(a.entityType=s),u&&(a.courseId=u),f&&(a.entityId=f),b&&(a.isActive="true"===b),j&&(a.search=j);const n=await(async(e,t)=>{const s=new URLSearchParams;t.courseTypeId&&s.append("courseTypeId",t.courseTypeId),t.entityType&&s.append("entityType",t.entityType),t.courseId&&s.append("courseId",t.courseId),t.entityId&&s.append("entityId",t.entityId),null!==t.isActive&&void 0!==t.isActive&&""!==t.isActive&&s.append("isActive",t.isActive),t.search&&s.append("search",t.search);const a="".concat(Xe.tE,"/api/admin/pricing/filter?").concat(s.toString());console.log("Filtering pricing:",a);const n={accept:"*/*"};e&&(n.Authorization="Bearer ".concat(e));const r=await fetch(a,{headers:n});if(console.log("Filter pricing response status:",r.status),!r.ok){const e=await r.text();throw console.error("Filter pricing error:",e),new Error("Failed to filter pricing: ".concat(r.status," ").concat(r.statusText," - ").concat(e))}const i=await r.json();return console.log("Pricing filtered successfully:",i),i})(e,a);n.success&&n.data?(L(n.data),t({type:"success",message:n.message||"Pricing data loaded successfully",duration:3e3})):(L([]),t({type:"info",message:"No pricing data found",duration:3e3}))}catch(a){console.error("Error fetching pricing:",a),t({type:"error",message:"Failed to fetch pricing: "+a.message,duration:6e3})}finally{T(!1)}},disabled:E,children:E?"Searching...":"Search"}),(0,Le.jsx)("button",{className:"btn btn-outline",onClick:()=>{a(""),o(""),p(""),x(""),v(""),y(""),N(""),L([])},children:"Reset Filters"})]})]}),P.length>0&&(0,Le.jsxs)("div",{className:"form-section mt-6",children:[(0,Le.jsxs)("h4",{className:"text-lg font-semibold mb-4",children:["Pricing Results (",P.length," items)"]}),(0,Le.jsx)("div",{className:"overflow-x-auto",children:P.map(e=>{var t,s,a,n,r,i;return(0,Le.jsxs)("div",{className:"pricing-group-card mb-6",children:[(0,Le.jsxs)("div",{className:"pricing-group-header",children:[(0,Le.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Le.jsx)("span",{className:"px-3 py-1 text-sm font-semibold rounded-full bg-blue-600 text-white",children:e.entityType}),(0,Le.jsx)("h5",{className:"text-lg font-bold text-gray-800",children:e.entityName}),(0,Le.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded bg-gray-100 text-gray-600",children:e.courseTypeName}),e.isActive?(0,Le.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded bg-green-100 text-green-700",children:"Active"}):(0,Le.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded bg-red-100 text-red-700",children:"Inactive"})]}),(0,Le.jsxs)("div",{className:"flex gap-2",children:[(0,Le.jsx)("button",{className:"btn btn-outline btn-sm",children:"Edit All"}),(0,Le.jsx)("button",{className:"btn btn-danger btn-sm",children:"Delete"})]})]}),(0,Le.jsxs)("table",{className:"pricing-detail-table",children:[(0,Le.jsx)("thead",{children:(0,Le.jsxs)("tr",{children:[(0,Le.jsx)("th",{style:{width:"120px"},children:"Plan Type"}),(0,Le.jsx)("th",{style:{width:"140px",textAlign:"right"},children:"Base Price"}),(0,Le.jsx)("th",{style:{width:"120px",textAlign:"center"},children:"Discount"}),(0,Le.jsx)("th",{style:{width:"140px",textAlign:"right"},children:"Final Price"}),(0,Le.jsx)("th",{style:{width:"180px"},children:"Offer Valid From"}),(0,Le.jsx)("th",{style:{width:"180px"},children:"Offer Valid To"}),(0,Le.jsx)("th",{style:{width:"100px",textAlign:"center"},children:"Actions"})]})}),(0,Le.jsxs)("tbody",{children:[e.monthlyPrice>0&&(0,Le.jsxs)("tr",{className:"plan-row-monthly",children:[(0,Le.jsx)("td",{children:(0,Le.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Le.jsx)("span",{className:"plan-icon",children:"\ud83d\udcc5"}),(0,Le.jsx)("span",{className:"font-semibold text-purple-700",children:"Monthly"})]})}),(0,Le.jsx)("td",{style:{textAlign:"right"},className:"text-gray-700",children:null===(t=e.monthlyPrice)||void 0===t?void 0:t.toFixed(2)}),(0,Le.jsx)("td",{style:{textAlign:"center"},children:(0,Le.jsxs)("span",{className:"discount-badge",children:[e.monthlyDiscountPercent||0,"%"]})}),(0,Le.jsx)("td",{style:{textAlign:"right"},className:"font-bold text-green-600 text-lg",children:null===(s=e.monthlyFinalPrice)||void 0===s?void 0:s.toFixed(2)}),(0,Le.jsx)("td",{className:"text-sm text-gray-600",children:R(e.monthlyOfferValidFrom)}),(0,Le.jsx)("td",{className:"text-sm text-gray-600",children:R(e.monthlyOfferValidTo)}),(0,Le.jsx)("td",{style:{textAlign:"center"},children:(0,Le.jsx)("button",{className:"btn btn-outline btn-xs",children:"Edit"})})]}),e.quarterlyPrice>0&&(0,Le.jsxs)("tr",{className:"plan-row-quarterly",children:[(0,Le.jsx)("td",{children:(0,Le.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Le.jsx)("span",{className:"plan-icon",children:"\ud83d\udcca"}),(0,Le.jsx)("span",{className:"font-semibold text-blue-700",children:"Quarterly"})]})}),(0,Le.jsx)("td",{style:{textAlign:"right"},className:"text-gray-700",children:null===(a=e.quarterlyPrice)||void 0===a?void 0:a.toFixed(2)}),(0,Le.jsx)("td",{style:{textAlign:"center"},children:(0,Le.jsxs)("span",{className:"discount-badge",children:[e.quarterlyDiscountPercent||0,"%"]})}),(0,Le.jsx)("td",{style:{textAlign:"right"},className:"font-bold text-green-600 text-lg",children:null===(n=e.quarterlyFinalPrice)||void 0===n?void 0:n.toFixed(2)}),(0,Le.jsx)("td",{className:"text-sm text-gray-600",children:R(e.quarterlyOfferValidFrom)}),(0,Le.jsx)("td",{className:"text-sm text-gray-600",children:R(e.quarterlyOfferValidTo)}),(0,Le.jsx)("td",{style:{textAlign:"center"},children:(0,Le.jsx)("button",{className:"btn btn-outline btn-xs",children:"Edit"})})]}),e.yearlyPrice>0&&(0,Le.jsxs)("tr",{className:"plan-row-yearly",children:[(0,Le.jsx)("td",{children:(0,Le.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Le.jsx)("span",{className:"plan-icon",children:"\ud83c\udfaf"}),(0,Le.jsx)("span",{className:"font-semibold text-orange-700",children:"Yearly"})]})}),(0,Le.jsx)("td",{style:{textAlign:"right"},className:"text-gray-700",children:null===(r=e.yearlyPrice)||void 0===r?void 0:r.toFixed(2)}),(0,Le.jsx)("td",{style:{textAlign:"center"},children:(0,Le.jsxs)("span",{className:"discount-badge",children:[e.yearlyDiscountPercent||0,"%"]})}),(0,Le.jsx)("td",{style:{textAlign:"right"},className:"font-bold text-green-600 text-lg",children:null===(i=e.yearlyFinalPrice)||void 0===i?void 0:i.toFixed(2)}),(0,Le.jsx)("td",{className:"text-sm text-gray-600",children:R(e.yearlyOfferValidFrom)}),(0,Le.jsx)("td",{className:"text-sm text-gray-600",children:R(e.yearlyOfferValidTo)}),(0,Le.jsx)("td",{style:{textAlign:"center"},children:(0,Le.jsx)("button",{className:"btn btn-outline btn-xs",children:"Edit"})})]})]})]})]},e.id)})})]}),!E&&0===P.length&&(0,Le.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,Le.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udcca"}),(0,Le.jsx)("p",{className:"text-lg font-medium",children:"No pricing data found"}),(0,Le.jsx)("p",{className:"text-sm mt-2",children:"Use filters and click Search to view pricing configurations"})]})]})]})},St=e=>{let{label:t,values:s,onChange:a}=e;const{basePrice:n,discountPercent:r,effectiveFrom:i,effectiveTo:l,active:o}=s||{},c=n?Math.round(n*(1-(r||0)/100)):0;return(0,Le.jsxs)("div",{className:"plan-row grid grid-cols-6 gap-4 items-center",children:[(0,Le.jsx)("div",{className:"plan-label text-sm font-medium",children:t}),(0,Le.jsx)("input",{className:"form-input",type:"number",placeholder:"Base Price",value:null!==n&&void 0!==n?n:"",onChange:e=>a({basePrice:Number(e.target.value||0)})}),(0,Le.jsx)("input",{className:"form-input",type:"number",placeholder:"Discount %",value:null!==r&&void 0!==r?r:"",onChange:e=>a({discountPercent:Math.min(100,Math.max(0,Number(e.target.value||0)))})}),(0,Le.jsx)("input",{className:"form-input",type:"date",value:i||"",onChange:e=>a({effectiveFrom:e.target.value})}),(0,Le.jsx)("input",{className:"form-input",type:"date",value:l||"",onChange:e=>a({effectiveTo:e.target.value})}),(0,Le.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Le.jsxs)("div",{className:"final-price text-sm font-semibold",children:["\u20b9",c]}),(0,Le.jsxs)("label",{className:"flex items-center gap-2",children:[(0,Le.jsx)("input",{type:"checkbox",checked:!!o,onChange:e=>a({active:e.target.checked})}),(0,Le.jsx)("span",{className:"text-sm",children:"Active"})]})]})]})},Ct=()=>{const{token:e,addNotification:t}=(0,Pe.nm)(),[s,a]=(0,n.useState)("COURSE"),[r,i]=(0,n.useState)([]),[l,o]=(0,n.useState)([]),[c,d]=(0,n.useState)([]),[u,p]=(0,n.useState)(""),[m,h]=(0,n.useState)(""),[f,x]=(0,n.useState)(""),[g,v]=(0,n.useState)({active:!0}),[b,y]=(0,n.useState)({active:!0}),[j,N]=(0,n.useState)({active:!0}),[w,k]=(0,n.useState)(!1),[S,C]=(0,n.useState)(!1),[I,A]=(0,n.useState)(!1),E=(0,n.useMemo)(()=>"CLASS"===s?"Class":"EXAM"===s?"Exam":"",[s]);(0,n.useEffect)(()=>{let a=!1;return(async()=>{try{k(!0);const t=await(0,Ge.F3)(e),n=Array.isArray(t)?t:(null===t||void 0===t?void 0:t.content)||(null===t||void 0===t?void 0:t.data)||[];let r=n;"CLASS"===s?r=n.filter(e=>"Academic Course"===e.name):"EXAM"===s&&(r=n.filter(e=>"Competitive Course"===e.name)),a||i(r)}catch(us){t({type:"error",message:"Failed to load course types: ".concat(us.message),duration:6e3})}finally{a||k(!1)}})(),()=>{a=!0}},[e,t,s]),(0,n.useEffect)(()=>{if(o([]),h(""),d([]),x(""),!u)return;const s=new AbortController;return(async()=>{try{C(!0);const t=await(0,Ge.V7)(e,u,s.signal),a=Array.isArray(t)?t:(null===t||void 0===t?void 0:t.content)||(null===t||void 0===t?void 0:t.data)||[];o(a)}catch(us){"AbortError"!==us.name&&t({type:"error",message:"Failed to load courses: ".concat(us.message),duration:6e3})}finally{C(!1)}})(),()=>s.abort()},[u,e,t]),(0,n.useEffect)(()=>{if(d([]),x(""),!m)return;if("COURSE"===s)return;const a=new AbortController;return(async()=>{try{if(A(!0),"CLASS"===s){const t=await(0,Ge.tW)(e,m,0,100,"createdAt","desc"),s=Array.isArray(t)?t:(null===t||void 0===t?void 0:t.content)||(null===t||void 0===t?void 0:t.data)||[];d(s)}else if("EXAM"===s){const t=await(0,Ge.rJ)(e,m,0,100,"createdAt","desc"),s=Array.isArray(t)?t:(null===t||void 0===t?void 0:t.content)||(null===t||void 0===t?void 0:t.data)||[];d(s)}}catch(us){"AbortError"!==us.name&&t({type:"error",message:"Failed to load ".concat(E.toLowerCase(),"s: ").concat(us.message),duration:6e3})}finally{A(!1)}})(),()=>a.abort()},[m,s,e,t,E]);const T=()=>{v({active:!0}),y({active:!0}),N({active:!0})},P=e=>{const t=e.target.value;a(t),p(""),h(""),d([]),x(""),T()},L=(0,n.useMemo)(()=>!(!u||!m)&&!("COURSE"!==s&&!f),[u,m,f,s]);return(0,Le.jsxs)("div",{className:"card",children:[(0,Le.jsxs)("div",{className:"card-header",children:[(0,Le.jsx)("h3",{children:"Unified Pricing"}),(0,Le.jsx)("p",{children:"Set Monthly, Quarterly, Yearly plans at Course or Class/Exam level"})]}),(0,Le.jsxs)("div",{className:"card-body",children:[(0,Le.jsx)("div",{className:"form-row",children:(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{className:"form-label",children:"Level"}),(0,Le.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,Le.jsxs)("label",{children:[(0,Le.jsx)("input",{type:"radio",value:"COURSE",checked:"COURSE"===s,onChange:P})," Course"]}),(0,Le.jsxs)("label",{children:[(0,Le.jsx)("input",{type:"radio",value:"CLASS",checked:"CLASS"===s,onChange:P})," Class"]}),(0,Le.jsxs)("label",{children:[(0,Le.jsx)("input",{type:"radio",value:"EXAM",checked:"EXAM"===s,onChange:P})," Exam"]})]})]})}),(0,Le.jsxs)("div",{className:"form-row grid grid-cols-3 gap-6",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{className:"form-label",children:"Course Type"}),(0,Le.jsxs)("select",{className:"form-select",value:u,onChange:e=>p(e.target.value),disabled:w,children:[(0,Le.jsx)("option",{value:"",children:"Select Course Type"}),r.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{className:"form-label",children:"Course"}),(0,Le.jsxs)("select",{className:"form-select",value:m,onChange:e=>h(e.target.value),disabled:!u||S,children:[(0,Le.jsx)("option",{value:"",children:"Select Course"}),l.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),"COURSE"!==s&&(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{className:"form-label",children:E}),(0,Le.jsxs)("select",{className:"form-select",value:f,onChange:e=>x(e.target.value),disabled:!m||I,children:[(0,Le.jsxs)("option",{value:"",children:["Select ",E]}),c.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,Le.jsxs)("div",{className:"plans-grid grid grid-cols-1 gap-4",children:[(0,Le.jsx)(St,{label:"Monthly",values:g,onChange:e=>v(t=>(0,Ue.A)((0,Ue.A)({},t),e))}),(0,Le.jsx)(St,{label:"Quarterly",values:b,onChange:e=>y(t=>(0,Ue.A)((0,Ue.A)({},t),e))}),(0,Le.jsx)(St,{label:"Yearly",values:j,onChange:e=>N(t=>(0,Ue.A)((0,Ue.A)({},t),e))})]})]}),(0,Le.jsxs)("div",{className:"card-footer",style:{display:"flex",gap:8,justifyContent:"flex-end"},children:[(0,Le.jsx)("button",{className:"btn btn-outline",onClick:T,children:"Reset"}),(0,Le.jsx)("button",{className:"btn btn-primary",disabled:!L,onClick:async()=>{if(L)if(g.basePrice||b.basePrice||j.basePrice)try{const a=l.find(e=>e.id===parseInt(m)),n="COURSE"!==s?c.find(e=>e.id===parseInt(f)):null,r=e=>e?"".concat(e,"T00:00:00"):null,i={courseTypeId:parseInt(u),monthlyPrice:g.basePrice||0,quarterlyPrice:b.basePrice||0,yearlyPrice:j.basePrice||0,monthlyDiscountPercent:g.discountPercent||0,monthlyOfferValidFrom:r(g.effectiveFrom),monthlyOfferValidTo:r(g.effectiveTo),quarterlyDiscountPercent:b.discountPercent||0,quarterlyOfferValidFrom:r(b.effectiveFrom),quarterlyOfferValidTo:r(b.effectiveTo),yearlyDiscountPercent:j.discountPercent||0,yearlyOfferValidFrom:r(j.effectiveFrom),yearlyOfferValidTo:r(j.effectiveTo),isActive:g.active||b.active||j.active};if("CLASS"===s){const t=(0,Ue.A)({classId:parseInt(f),className:(null===n||void 0===n?void 0:n.name)||"",courseId:parseInt(m),courseName:(null===a||void 0===a?void 0:a.name)||""},i);await(async(e,t)=>{const s="".concat(Xe.tE,"/api/admin/pricing/set-class-pricing");console.log("Setting class pricing:",t);const a={"Content-Type":"application/json",accept:"*/*"};e&&(a.Authorization="Bearer ".concat(e));const n=await fetch(s,{method:"POST",headers:a,body:JSON.stringify(t)});if(console.log("Set class pricing response status:",n.status),!n.ok){const e=await n.text();throw console.error("Set class pricing error:",e),new Error("Failed to set class pricing: ".concat(n.status," ").concat(n.statusText," - ").concat(e))}const r=await n.json();return console.log("Class pricing set successfully:",r),r})(e,t)}else if("EXAM"===s){const t=(0,Ue.A)({examId:parseInt(f),examName:(null===n||void 0===n?void 0:n.name)||""},i);await(async(e,t)=>{const s="".concat(Xe.tE,"/api/admin/pricing/set-exam-pricing");console.log("Setting exam pricing:",t);const a={"Content-Type":"application/json",accept:"*/*"};e&&(a.Authorization="Bearer ".concat(e));const n=await fetch(s,{method:"POST",headers:a,body:JSON.stringify(t)});if(console.log("Set exam pricing response status:",n.status),!n.ok){const e=await n.text();throw console.error("Set exam pricing error:",e),new Error("Failed to set exam pricing: ".concat(n.status," ").concat(n.statusText," - ").concat(e))}const r=await n.json();return console.log("Exam pricing set successfully:",r),r})(e,t)}else{const t=(0,Ue.A)({courseId:parseInt(m),courseName:(null===a||void 0===a?void 0:a.name)||"",monthlyDurationDays:30,quarterlyDurationDays:90,yearlyDurationDays:365},i);await(async(e,t)=>{const s="".concat(Xe.tE,"/api/admin/pricing/set-course-pricing");console.log("Setting course pricing:",t);const a={"Content-Type":"application/json",accept:"*/*"};e&&(a.Authorization="Bearer ".concat(e));const n=await fetch(s,{method:"POST",headers:a,body:JSON.stringify(t)});if(console.log("Set course pricing response status:",n.status),!n.ok){const e=await n.text();throw console.error("Set course pricing error:",e),new Error("Failed to set course pricing: ".concat(n.status," ").concat(n.statusText," - ").concat(e))}const r=await n.json();return console.log("Course pricing set successfully:",r),r})(e,t)}t({type:"success",message:"Successfully saved pricing for ".concat(s.toLowerCase()," level"),duration:4e3}),T()}catch(a){console.error("Error saving pricing:",a),t({type:"error",message:"Failed to save pricing: ".concat(a.message),duration:6e3})}else t({type:"error",message:"At least one plan must have a base price",duration:4e3});else t({type:"error",message:"Select required fields before saving",duration:4e3})},children:"Save Pricing"})]})]})},It=e=>{let{onBackToDashboard:t}=e;const[s,a]=(0,n.useState)("pricing");return(0,Le.jsxs)("div",{className:"pricing-dashboard",children:[(0,Le.jsx)(Ve,{title:"Pricing Management",subtitle:"Configure subscription plans and global offers",onBackToDashboard:t}),(0,Le.jsxs)("div",{className:"pricing-tabs",children:[(0,Le.jsx)("button",{className:"tab-button "+("pricing"===s?"active":""),onClick:()=>a("pricing"),children:"Set Pricing"}),(0,Le.jsx)("button",{className:"tab-button "+("offers"===s?"active":""),onClick:()=>a("offers"),children:"Global Offers"}),(0,Le.jsx)("button",{className:"tab-button "+("view"===s?"active":""),onClick:()=>a("view"),children:"View Pricing"})]}),(0,Le.jsxs)("div",{className:"pricing-content",children:["pricing"===s&&(0,Le.jsx)(Ct,{}),"offers"===s&&(0,Le.jsx)(wt,{}),"view"===s&&(0,Le.jsx)(kt,{})]})]})},At=()=>{const{user:e}=(0,Pe.nm)(),[t,s]=(0,n.useState)("overview");return(0,Le.jsxs)("div",{className:"dashboard-content",children:[(0,Le.jsx)("div",{className:"dashboard-header",children:(0,Le.jsxs)("div",{className:"dashboard-title",children:[(0,Le.jsx)("h1",{children:"Admin Dashboard"}),(0,Le.jsx)("p",{children:"Manage the entire learning management system"})]})}),(()=>{switch(t){case"users":return(0,Le.jsx)(Ye,{onBackToDashboard:()=>s("overview")});case"master-data":return(0,Le.jsx)(Be,{onBackToDashboard:()=>s("overview")});case"question-management":return(0,Le.jsx)(ft,{onBackToDashboard:()=>s("overview")});case"test-management":return(0,Le.jsx)(Nt,{onBackToDashboard:()=>s("overview")});case"pricing":return(0,Le.jsx)(It,{onBackToDashboard:()=>s("overview")});default:return(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)("div",{className:"welcome-card compact",children:(0,Le.jsxs)("div",{className:"welcome-header",children:[(0,Le.jsx)("h2",{children:"\u2699\ufe0f Admin Control Panel"}),(0,Le.jsxs)("div",{className:"user-info",children:[(0,Le.jsx)("span",{className:"user-name",children:(null===e||void 0===e?void 0:e.name)||"".concat(null===e||void 0===e?void 0:e.firstName," ").concat(null===e||void 0===e?void 0:e.lastName)}),(0,Le.jsx)("span",{className:"user-role",children:null===e||void 0===e?void 0:e.role})]})]})}),(0,Le.jsxs)("div",{className:"features-grid",children:[(0,Le.jsxs)("div",{className:"feature-card",children:[(0,Le.jsx)("div",{className:"feature-icon",children:"\ud83d\udc65"}),(0,Le.jsx)("h3",{children:"User Management"}),(0,Le.jsx)("p",{children:"Manage all users, view statistics, and analytics in one place."}),(0,Le.jsx)("button",{className:"btn btn-primary",onClick:()=>s("users"),children:"Manage Users"})]}),(0,Le.jsxs)("div",{className:"feature-card",children:[(0,Le.jsx)("div",{className:"feature-icon",children:"\ud83d\uddc2\ufe0f"}),(0,Le.jsx)("h3",{children:"Master Data Management"}),(0,Le.jsx)("p",{children:"Manage course types, classes, subjects, chapters, and topics."}),(0,Le.jsx)("button",{className:"btn btn-primary",onClick:()=>s("master-data"),children:"Manage Master Data"})]}),(0,Le.jsxs)("div",{className:"feature-card",children:[(0,Le.jsx)("div",{className:"feature-icon",children:"\u2753"}),(0,Le.jsx)("h3",{children:"Question Management"}),(0,Le.jsx)("p",{children:"Create and manage questions with exam tagging and hierarchical organization."}),(0,Le.jsx)("button",{className:"btn btn-primary",onClick:()=>s("question-management"),children:"Manage Questions"})]}),(0,Le.jsxs)("div",{className:"feature-card",children:[(0,Le.jsx)("div",{className:"feature-icon",children:"\ud83d\udcdd"}),(0,Le.jsx)("h3",{children:"Test Management"}),(0,Le.jsx)("p",{children:"Create and manage tests with intelligent question filtering and exam integration."}),(0,Le.jsx)("button",{className:"btn btn-primary",onClick:()=>s("test-management"),children:"Manage Tests"})]}),(0,Le.jsxs)("div",{className:"feature-card",children:[(0,Le.jsx)("div",{className:"feature-icon",children:"\ud83d\udcb3"}),(0,Le.jsx)("h3",{children:"Pricing Management"}),(0,Le.jsx)("p",{children:"Set course base plans and class/exam overrides with discounts."}),(0,Le.jsx)("button",{className:"btn btn-primary",onClick:()=>s("pricing"),children:"Manage Pricing"})]}),(0,Le.jsxs)("div",{className:"feature-card",children:[(0,Le.jsx)("div",{className:"feature-icon",children:"\ud83d\udcda"}),(0,Le.jsx)("h3",{children:"Course Management"}),(0,Le.jsx)("p",{children:"Oversee all courses and approve new course submissions."}),(0,Le.jsx)("button",{className:"btn btn-primary",children:"Manage Courses"})]}),(0,Le.jsxs)("div",{className:"feature-card",children:[(0,Le.jsx)("div",{className:"feature-icon",children:"\u2699\ufe0f"}),(0,Le.jsx)("h3",{children:"System Settings"}),(0,Le.jsx)("p",{children:"Configure system-wide settings and preferences."}),(0,Le.jsx)("button",{className:"btn btn-primary",children:"System Settings"})]}),(0,Le.jsxs)("div",{className:"feature-card",children:[(0,Le.jsx)("div",{className:"feature-icon",children:"\ud83d\udd12"}),(0,Le.jsx)("h3",{children:"Security & Permissions"}),(0,Le.jsx)("p",{children:"Manage user roles, permissions, and security settings."}),(0,Le.jsx)("button",{className:"btn btn-primary",children:"Security Settings"})]}),(0,Le.jsxs)("div",{className:"feature-card",children:[(0,Le.jsx)("div",{className:"feature-icon",children:"\ud83d\udcc8"}),(0,Le.jsx)("h3",{children:"Reports"}),(0,Le.jsx)("p",{children:"Generate and view detailed system reports."}),(0,Le.jsx)("button",{className:"btn btn-primary",children:"Generate Reports"})]}),(0,Le.jsxs)("div",{className:"feature-card",children:[(0,Le.jsx)("div",{className:"feature-icon",children:"\ud83d\udd0d"}),(0,Le.jsx)("h3",{children:"Subject Filter Chat"}),(0,Le.jsx)("p",{children:"Real-time subject filtering by course type with chat interface."}),(0,Le.jsx)("button",{className:"btn btn-primary",onClick:()=>window.open("/subject-filter-chat","_blank"),children:"Open Filter Chat"})]})]})]})}})()]})},Et=()=>(0,Le.jsxs)("div",{className:"home-page",children:[(0,Le.jsx)("section",{className:"hero-section",children:(0,Le.jsxs)("div",{className:"hero-content",children:[(0,Le.jsxs)("div",{className:"hero-badge animate-fade-in-up",children:[(0,Le.jsx)("svg",{viewBox:"0 0 20 20",fill:"currentColor",children:(0,Le.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Trusted by 10,000+ learners worldwide"]}),(0,Le.jsx)("h1",{className:"hero-title animate-fade-in-up",children:"Transform Your Learning Journey with Coaxial Academy"}),(0,Le.jsx)("p",{className:"hero-subtitle animate-fade-in-up",children:"Join our comprehensive online learning platform where students, instructors, and administrators collaborate to create exceptional educational experiences."}),(0,Le.jsxs)("div",{className:"hero-actions animate-fade-in-up",children:[(0,Le.jsx)(Ae,{to:"/register",className:"btn btn-primary btn-lg",children:"Start Learning Today"}),(0,Le.jsx)(Ae,{to:"/login",className:"btn btn-outline btn-lg",children:"Sign In"})]}),(0,Le.jsxs)("div",{className:"hero-stats animate-fade-in-scale",children:[(0,Le.jsxs)("div",{className:"stat-item",children:[(0,Le.jsx)("div",{className:"stat-number",children:"10K+"}),(0,Le.jsx)("div",{className:"stat-label",children:"Active Students"})]}),(0,Le.jsxs)("div",{className:"stat-item",children:[(0,Le.jsx)("div",{className:"stat-number",children:"500+"}),(0,Le.jsx)("div",{className:"stat-label",children:"Expert Instructors"})]}),(0,Le.jsxs)("div",{className:"stat-item",children:[(0,Le.jsx)("div",{className:"stat-number",children:"1,000+"}),(0,Le.jsx)("div",{className:"stat-label",children:"Courses Available"})]})]})]})}),(0,Le.jsx)("section",{className:"features-section",children:(0,Le.jsxs)("div",{className:"features-container",children:[(0,Le.jsxs)("div",{className:"section-header",children:[(0,Le.jsx)("div",{className:"section-badge",children:"Features"}),(0,Le.jsx)("h2",{className:"section-title",children:"Why Choose Coaxial Academy?"}),(0,Le.jsx)("p",{className:"section-subtitle",children:"Discover the powerful features that make Coaxial Academy the perfect platform for your educational journey."})]}),(0,Le.jsxs)("div",{className:"features-grid",children:[(0,Le.jsxs)("div",{className:"feature-card animate-fade-in-up",children:[(0,Le.jsx)("div",{className:"feature-icon",children:(0,Le.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,Le.jsx)("path",{d:"M9 12l2 2 4-4"}),(0,Le.jsx)("path",{d:"M21 12c-1 0-3-1-3-3s2-3 3-3 3 1 3 3-2 3-3 3"}),(0,Le.jsx)("path",{d:"M3 12c1 0 3-1 3-3s-2-3-3-3-3 1-3 3 2 3 3 3"}),(0,Le.jsx)("path",{d:"M12 3c0 1-1 3-3 3s-3-2-3-3 1-3 3-3 3 2 3 3"}),(0,Le.jsx)("path",{d:"M12 21c0-1 1-3 3-3s3 2 3 3-1 3-3 3-3-2-3-3"})]})}),(0,Le.jsx)("h3",{className:"feature-title",children:"Personalized Learning"}),(0,Le.jsx)("p",{className:"feature-description",children:"Adaptive learning paths tailored to your pace and preferences. Get personalized recommendations and track your progress."}),(0,Le.jsxs)(Ae,{to:"/courses",className:"feature-link",children:["Explore Courses",(0,Le.jsx)("svg",{viewBox:"0 0 20 20",fill:"currentColor",children:(0,Le.jsx)("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]}),(0,Le.jsxs)("div",{className:"feature-card animate-fade-in-up",children:[(0,Le.jsx)("div",{className:"feature-icon",children:(0,Le.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,Le.jsx)("path",{d:"M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"}),(0,Le.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,Le.jsx)("path",{d:"M23 21v-2a4 4 0 00-3-3.87"}),(0,Le.jsx)("path",{d:"M16 3.13a4 4 0 010 7.75"})]})}),(0,Le.jsx)("h3",{className:"feature-title",children:"Expert Instructors"}),(0,Le.jsx)("p",{className:"feature-description",children:"Learn from industry professionals and academic experts. Get direct access to mentors and participate in live sessions."}),(0,Le.jsxs)(Ae,{to:"/instructors",className:"feature-link",children:["Meet Instructors",(0,Le.jsx)("svg",{viewBox:"0 0 20 20",fill:"currentColor",children:(0,Le.jsx)("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]}),(0,Le.jsxs)("div",{className:"feature-card animate-fade-in-up",children:[(0,Le.jsx)("div",{className:"feature-icon",children:(0,Le.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,Le.jsx)("path",{d:"M18 20V10"}),(0,Le.jsx)("path",{d:"M12 20V4"}),(0,Le.jsx)("path",{d:"M6 20v-6"})]})}),(0,Le.jsx)("h3",{className:"feature-title",children:"Progress Tracking"}),(0,Le.jsx)("p",{className:"feature-description",children:"Monitor your learning journey with detailed analytics. Track completion rates, quiz scores, and skill development."}),(0,Le.jsxs)(Ae,{to:"/dashboard",className:"feature-link",children:["View Analytics",(0,Le.jsx)("svg",{viewBox:"0 0 20 20",fill:"currentColor",children:(0,Le.jsx)("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]}),(0,Le.jsxs)("div",{className:"feature-card animate-fade-in-up",children:[(0,Le.jsx)("div",{className:"feature-icon",children:(0,Le.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,Le.jsx)("circle",{cx:"12",cy:"12",r:"3"}),(0,Le.jsx)("path",{d:"M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"})]})}),(0,Le.jsx)("h3",{className:"feature-title",children:"Global Community"}),(0,Le.jsx)("p",{className:"feature-description",children:"Connect with learners from around the world. Join study groups, participate in discussions, and collaborate on projects."}),(0,Le.jsxs)(Ae,{to:"/community",className:"feature-link",children:["Join Community",(0,Le.jsx)("svg",{viewBox:"0 0 20 20",fill:"currentColor",children:(0,Le.jsx)("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]})]})]})}),(0,Le.jsx)("section",{className:"cta-section",children:(0,Le.jsxs)("div",{className:"cta-container",children:[(0,Le.jsx)("h2",{className:"cta-title",children:"Ready to Start Your Learning Journey?"}),(0,Le.jsx)("p",{className:"cta-subtitle",children:"Join thousands of students who are already transforming their lives through education."}),(0,Le.jsxs)("div",{className:"cta-actions",children:[(0,Le.jsx)(Ae,{to:"/register",className:"btn-cta-primary",children:"Get Started Free"}),(0,Le.jsx)(Ae,{to:"/about",className:"btn-cta-secondary",children:"Learn More"})]})]})})]}),Tt=()=>{const{user:e}=(0,Pe.nm)();return(0,Le.jsxs)("div",{className:"dashboard-content",children:[(0,Le.jsxs)("div",{className:"dashboard-header",children:[(0,Le.jsx)("h1",{children:"Instructor Dashboard"}),(0,Le.jsx)("p",{children:"Manage your courses and track student progress"})]}),(0,Le.jsxs)("div",{className:"welcome-card",children:[(0,Le.jsx)("h2",{children:"\ud83d\udc68\u200d\ud83c\udfeb Welcome to Your Teaching Hub!"}),(0,Le.jsxs)("p",{children:["You are logged in as an ",(0,Le.jsx)("strong",{children:"Instructor"})," in the Coaxial Academy platform."]}),(0,Le.jsxs)("div",{className:"user-details",children:[(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Name:"})," ",(null===e||void 0===e?void 0:e.name)||"".concat(null===e||void 0===e?void 0:e.firstName," ").concat(null===e||void 0===e?void 0:e.lastName)]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Username:"})," ",null===e||void 0===e?void 0:e.username]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Email:"})," ",null===e||void 0===e?void 0:e.email]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Role:"})," ",null===e||void 0===e?void 0:e.role]})]})]}),(0,Le.jsxs)("div",{className:"features-grid",children:[(0,Le.jsxs)("div",{className:"feature-card",children:[(0,Le.jsx)("div",{className:"feature-icon",children:"\ud83d\udcda"}),(0,Le.jsx)("h3",{children:"My Courses"}),(0,Le.jsx)("p",{children:"Create and manage your course content and materials."}),(0,Le.jsx)("button",{className:"btn btn-primary",children:"Manage Courses"})]}),(0,Le.jsxs)("div",{className:"feature-card",children:[(0,Le.jsx)("div",{className:"feature-icon",children:"\ud83d\udc65"}),(0,Le.jsx)("h3",{children:"Students"}),(0,Le.jsx)("p",{children:"View and manage your enrolled students."}),(0,Le.jsx)("button",{className:"btn btn-primary",children:"View Students"})]}),(0,Le.jsxs)("div",{className:"feature-card",children:[(0,Le.jsx)("div",{className:"feature-icon",children:"\ud83d\udcdd"}),(0,Le.jsx)("h3",{children:"Assignments"}),(0,Le.jsx)("p",{children:"Create assignments and grade student submissions."}),(0,Le.jsx)("button",{className:"btn btn-primary",children:"Manage Assignments"})]}),(0,Le.jsxs)("div",{className:"feature-card",children:[(0,Le.jsx)("div",{className:"feature-icon",children:"\ud83d\udcca"}),(0,Le.jsx)("h3",{children:"Analytics"}),(0,Le.jsx)("p",{children:"View detailed analytics and student performance metrics."}),(0,Le.jsx)("button",{className:"btn btn-primary",children:"View Analytics"})]}),(0,Le.jsxs)("div",{className:"feature-card",children:[(0,Le.jsx)("div",{className:"feature-icon",children:"\ud83d\udcac"}),(0,Le.jsx)("h3",{children:"Discussion Forum"}),(0,Le.jsx)("p",{children:"Moderate course discussions and answer student questions."}),(0,Le.jsx)("button",{className:"btn btn-primary",children:"Moderate Forum"})]}),(0,Le.jsxs)("div",{className:"feature-card",children:[(0,Le.jsx)("div",{className:"feature-icon",children:"\ud83d\udcc5"}),(0,Le.jsx)("h3",{children:"Schedule"}),(0,Le.jsx)("p",{children:"Manage your class schedule and important dates."}),(0,Le.jsx)("button",{className:"btn btn-primary",children:"Manage Schedule"})]})]})]})},Pt=()=>{const{currentPage:e}=(0,Pe.nm)(),[t,s]=(0,n.useState)("");return(0,Le.jsx)("footer",{className:"footer",children:(0,Le.jsxs)("div",{className:"footer-container",children:[(0,Le.jsxs)("div",{className:"footer-content",children:[(0,Le.jsxs)("div",{className:"footer-brand",children:[(0,Le.jsxs)("a",{href:"/",className:"footer-logo",children:[(0,Le.jsx)("div",{className:"footer-logo-icon",children:(0,Le.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,Le.jsx)("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})})}),(0,Le.jsx)("span",{className:"footer-logo-text",children:"Coaxial Academy"})]}),(0,Le.jsx)("p",{className:"footer-description",children:"Transform your learning journey with our comprehensive online learning management system. Join thousands of students and educators worldwide."}),(0,Le.jsxs)("div",{className:"footer-social",children:[(0,Le.jsx)("a",{href:"#",className:"social-link","aria-label":"Facebook",children:(0,Le.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,Le.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})}),(0,Le.jsx)("a",{href:"#",className:"social-link","aria-label":"Twitter",children:(0,Le.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,Le.jsx)("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})})}),(0,Le.jsx)("a",{href:"#",className:"social-link","aria-label":"LinkedIn",children:(0,Le.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,Le.jsx)("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})})}),(0,Le.jsx)("a",{href:"#",className:"social-link","aria-label":"Instagram",children:(0,Le.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,Le.jsx)("path",{d:"M12.017 0C5.396 0 .029 5.367.029 11.987c0 6.62 5.367 11.987 11.988 11.987s11.987-5.367 11.987-11.987C24.004 5.367 18.637.001 12.017.001zM8.449 16.988c-1.297 0-2.448-.49-3.323-1.297C4.198 14.895 3.708 13.744 3.708 12.447s.49-2.448 1.297-3.323c.875-.807 2.026-1.297 3.323-1.297s2.448.49 3.323 1.297c.807.875 1.297 2.026 1.297 3.323s-.49 2.448-1.297 3.323c-.875.807-2.026 1.297-3.323 1.297zm7.718-1.297c-.875.807-2.026 1.297-3.323 1.297s-2.448-.49-3.323-1.297c-.807-.875-1.297-2.026-1.297-3.323s.49-2.448 1.297-3.323c.875-.807 2.026-1.297 3.323-1.297s2.448.49 3.323 1.297c.807.875 1.297 2.026 1.297 3.323s-.49 2.448-1.297 3.323z"})})})]})]}),(0,Le.jsxs)("div",{className:"footer-section",children:[(0,Le.jsx)("h4",{className:"footer-title",children:"Quick Links"}),(0,Le.jsxs)("ul",{className:"footer-links",children:[(0,Le.jsx)("li",{children:(0,Le.jsx)("a",{href:"/",className:"footer-link",children:"Home"})}),(0,Le.jsx)("li",{children:(0,Le.jsx)("a",{href:"/login",className:"footer-link",children:"Login"})}),(0,Le.jsx)("li",{children:(0,Le.jsx)("a",{href:"/register",className:"footer-link",children:"Register"})}),(0,Le.jsx)("li",{children:(0,Le.jsx)("a",{href:"/about",className:"footer-link",children:"About Us"})}),(0,Le.jsx)("li",{children:(0,Le.jsx)("a",{href:"/contact",className:"footer-link",children:"Contact"})})]})]}),(0,Le.jsxs)("div",{className:"footer-section",children:[(0,Le.jsx)("h4",{className:"footer-title",children:"Features"}),(0,Le.jsxs)("ul",{className:"footer-links",children:[(0,Le.jsx)("li",{children:(0,Le.jsx)("a",{href:"/courses",className:"footer-link",children:"Courses"})}),(0,Le.jsx)("li",{children:(0,Le.jsx)("a",{href:"/progress",className:"footer-link",children:"Progress Tracking"})}),(0,Le.jsx)("li",{children:(0,Le.jsx)("a",{href:"/certificates",className:"footer-link",children:"Certificates"})}),(0,Le.jsx)("li",{children:(0,Le.jsx)("a",{href:"/forum",className:"footer-link",children:"Discussion Forum"})}),(0,Le.jsx)("li",{children:(0,Le.jsx)("a",{href:"/analytics",className:"footer-link",children:"Analytics"})})]})]}),(0,Le.jsxs)("div",{className:"footer-section",children:[(0,Le.jsx)("h4",{className:"footer-title",children:"Support"}),(0,Le.jsxs)("ul",{className:"footer-links",children:[(0,Le.jsx)("li",{children:(0,Le.jsx)("a",{href:"/help",className:"footer-link",children:"Help Center"})}),(0,Le.jsx)("li",{children:(0,Le.jsx)("a",{href:"/contact",className:"footer-link",children:"Contact Us"})}),(0,Le.jsx)("li",{children:(0,Le.jsx)("a",{href:"/privacy",className:"footer-link",children:"Privacy Policy"})}),(0,Le.jsx)("li",{children:(0,Le.jsx)("a",{href:"/terms",className:"footer-link",children:"Terms of Service"})}),(0,Le.jsx)("li",{children:(0,Le.jsx)("a",{href:"/faq",className:"footer-link",children:"FAQ"})})]})]})]}),(0,Le.jsxs)("div",{className:"newsletter",children:[(0,Le.jsx)("h4",{className:"newsletter-title",children:"Stay Updated"}),(0,Le.jsx)("p",{className:"newsletter-description",children:"Subscribe to our newsletter for the latest courses and updates."}),(0,Le.jsxs)("form",{className:"newsletter-form",onSubmit:e=>{e.preventDefault(),console.log("Newsletter subscription:",t),s("")},children:[(0,Le.jsx)("input",{type:"email",className:"newsletter-input",placeholder:"Enter your email",value:t,onChange:e=>s(e.target.value),required:!0}),(0,Le.jsx)("button",{type:"submit",className:"newsletter-button",children:"Subscribe"})]})]}),(0,Le.jsxs)("div",{className:"footer-bottom",children:[(0,Le.jsx)("p",{className:"footer-copyright",children:"\xa9 2024 Coaxial Academy. All rights reserved."}),(0,Le.jsxs)("ul",{className:"footer-legal",children:[(0,Le.jsx)("li",{children:(0,Le.jsx)("a",{href:"/privacy",className:"footer-legal-link",children:"Privacy"})}),(0,Le.jsx)("li",{children:(0,Le.jsx)("a",{href:"/terms",className:"footer-legal-link",children:"Terms"})}),(0,Le.jsx)("li",{children:(0,Le.jsx)("a",{href:"/cookies",className:"footer-legal-link",children:"Cookies"})})]})]})]})})},Lt=()=>{const{user:e,isAuthenticated:t,logout:s,toggleSidebar:a,setCurrentPage:r,backendConnected:i,checkBackendConnectivity:l}=(0,Pe.nm)(),o=se(),[c,d]=(0,n.useState)(!1),[u,p]=(0,n.useState)(!1),m=(0,n.useRef)(null),h=async()=>{if(window.confirm("Are you sure you want to logout?"))try{await fetch("http://localhost:8080/api/auth/logout",{method:"POST",headers:{accept:"*/*"}})}catch(e){console.error("Logout API error:",e)}finally{s(),o("/"),d(!1)}},f=(e,t)=>{r(t),o(e),p(!1)},x=()=>null!==e&&void 0!==e&&e.firstName&&null!==e&&void 0!==e&&e.lastName?"".concat(e.firstName[0]).concat(e.lastName[0]).toUpperCase():null!==e&&void 0!==e&&e.username?e.username[0].toUpperCase():"U";return(0,n.useEffect)(()=>{const e=e=>{m.current&&!m.current.contains(e.target)&&d(!1)},s=e=>{e.ctrlKey&&e.shiftKey&&"L"===e.key&&(e.preventDefault(),t&&h())};return document.addEventListener("mousedown",e),document.addEventListener("keydown",s),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("keydown",s)}},[t]),(0,Le.jsxs)("header",{className:"header",children:[(0,Le.jsxs)("div",{className:"header-container",children:[(0,Le.jsxs)(Ae,{to:"/",className:"header-logo",onClick:()=>r("home"),children:[(0,Le.jsx)("div",{className:"logo-icon",children:(0,Le.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,Le.jsx)("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})})}),(0,Le.jsx)("span",{className:"logo-text",children:"Coaxial Academy"})]}),(0,Le.jsxs)("nav",{className:"header-nav",children:[(0,Le.jsx)("div",{style:{marginRight:"16px",fontSize:"12px",fontWeight:"500",color:i?"#10b981":"#ef4444",cursor:"pointer"},onClick:()=>{console.log("Manual connectivity check triggered"),l()},title:"Backend is ".concat(i?"connected":"disconnected"),children:i?"Online":"Offline"}),t?(0,Le.jsx)("div",{className:"header-actions",children:(0,Le.jsxs)("div",{className:"user-menu ".concat(c?"open":""),ref:m,children:[(0,Le.jsxs)("button",{className:"user-button",onClick:()=>{d(!c)},"aria-expanded":c,"aria-haspopup":"true",children:[(0,Le.jsx)("div",{className:"user-avatar",children:x()}),(0,Le.jsxs)("div",{className:"user-info",children:[(0,Le.jsx)("div",{className:"user-name",children:(null===e||void 0===e?void 0:e.firstName)||(null===e||void 0===e?void 0:e.username)||"User"}),(0,Le.jsx)("div",{className:"user-role",children:(null===e||void 0===e?void 0:e.role)||"Student"})]}),(0,Le.jsx)("svg",{className:"dropdown-arrow",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Le.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),c&&(0,Le.jsxs)("div",{className:"user-dropdown",children:[(0,Le.jsxs)(Ae,{to:"/profile",className:"dropdown-item",onClick:()=>d(!1),children:[(0,Le.jsx)("svg",{className:"dropdown-icon",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Le.jsx)("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),"Profile"]}),(0,Le.jsxs)(Ae,{to:"/settings",className:"dropdown-item",onClick:()=>d(!1),children:[(0,Le.jsx)("svg",{className:"dropdown-icon",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Le.jsx)("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})}),"Settings"]}),(0,Le.jsxs)("button",{className:"dropdown-item danger",onClick:h,children:[(0,Le.jsx)("svg",{className:"dropdown-icon",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Le.jsx)("path",{fillRule:"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z",clipRule:"evenodd"})}),"Logout"]})]})]})}):(0,Le.jsxs)("div",{className:"auth-buttons",children:[(0,Le.jsx)(Ae,{to:"/login",className:"btn-login",onClick:()=>r("login"),children:"Login"}),(0,Le.jsx)(Ae,{to:"/register",className:"btn-register",onClick:()=>r("register"),children:"Get Started"})]})]}),(0,Le.jsx)("button",{className:"mobile-menu-button",onClick:()=>{p(!u)},"aria-label":"Toggle mobile menu",children:(0,Le.jsxs)("svg",{className:"mobile-menu-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,Le.jsx)("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),(0,Le.jsx)("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),(0,Le.jsx)("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})})]}),u&&(0,Le.jsxs)("div",{className:"mobile-nav",children:[(0,Le.jsxs)("ul",{className:"mobile-nav-links",children:[(0,Le.jsx)("li",{children:(0,Le.jsx)(Ae,{to:"/",className:"mobile-nav-link",onClick:()=>f("/","home"),children:"Home"})}),(0,Le.jsx)("li",{children:(0,Le.jsx)(Ae,{to:"/courses",className:"mobile-nav-link",onClick:()=>f("/courses","courses"),children:"Courses"})}),(0,Le.jsx)("li",{children:(0,Le.jsx)(Ae,{to:"/about",className:"mobile-nav-link",onClick:()=>f("/about","about"),children:"About"})}),(0,Le.jsx)("li",{children:(0,Le.jsx)(Ae,{to:"/contact",className:"mobile-nav-link",onClick:()=>f("/contact","contact"),children:"Contact"})}),(0,Le.jsx)("li",{children:(0,Le.jsx)(Ae,{to:"/subject-filter",className:"mobile-nav-link",onClick:()=>f("/subject-filter","subject-filter"),children:"Subject Filter"})})]}),t?(0,Le.jsxs)("div",{className:"mobile-user-actions",children:[(0,Le.jsxs)("div",{className:"mobile-user-info",children:[(0,Le.jsx)("div",{className:"mobile-user-avatar",children:x()}),(0,Le.jsxs)("div",{className:"mobile-user-details",children:[(0,Le.jsx)("div",{className:"mobile-user-name",children:(null===e||void 0===e?void 0:e.firstName)||(null===e||void 0===e?void 0:e.username)||"User"}),(0,Le.jsx)("div",{className:"mobile-user-role",children:(null===e||void 0===e?void 0:e.role)||"Student"})]})]}),(0,Le.jsx)("div",{className:"mobile-user-buttons",children:(0,Le.jsx)("button",{className:"btn btn-outline btn-full",onClick:()=>{h(),p(!1)},children:"Logout"})})]}):(0,Le.jsxs)("div",{className:"mobile-auth-buttons",children:[(0,Le.jsx)(Ae,{to:"/login",className:"btn btn-outline btn-full",onClick:()=>f("/login","login"),children:"Login"}),(0,Le.jsx)(Ae,{to:"/register",className:"btn btn-primary btn-full",onClick:()=>f("/register","register"),children:"Get Started"})]})]}),(0,Le.jsx)("style",{children:"\n          @keyframes pulse {\n            0%, 100% { opacity: 1; }\n            50% { opacity: 0.5; }\n          }\n        "})]})},Rt=()=>{const{notifications:e,removeNotification:t}=(0,Pe.nm)();return(0,n.useEffect)(()=>{e.forEach(e=>{if(e.autoDismiss){const s=setTimeout(()=>{t(e.id)},e.duration);return()=>clearTimeout(s)}})},[e,t]),(0,Le.jsx)("div",{className:"notification-container",children:e.map(e=>(0,Le.jsxs)("div",{className:"notification ".concat(e.type||"info"),children:[(0,Le.jsxs)("div",{className:"notification-content",children:[(0,Le.jsx)("span",{className:"notification-icon",children:"success"===e.type?"\u2705":"error"===e.type?"\u274c":"warning"===e.type?"\u26a0\ufe0f":"\u2139\ufe0f"}),(0,Le.jsx)("span",{className:"notification-message",children:e.message})]}),(0,Le.jsx)("button",{className:"notification-close",onClick:()=>t(e.id),"aria-label":"Close notification",children:"\xd7"})]},e.id))})},Mt=e=>{let{isOpen:t}=e;const{user:s,setCurrentPage:a}=(0,Pe.nm)(),n=se(),r=(()=>{if(!s)return[];const e=[{name:"Dashboard",path:"/dashboard/".concat(s.role.toLowerCase()),icon:"\ud83c\udfe0"},{name:"Profile",path:"/profile",icon:"\ud83d\udc64"},{name:"Settings",path:"/settings",icon:"\u2699\ufe0f"}];switch(s.role){case"STUDENT":return[...e,{name:"My Courses",path:"/courses",icon:"\ud83d\udcda"},{name:"Assignments",path:"/assignments",icon:"\ud83d\udcdd"},{name:"Progress",path:"/progress",icon:"\ud83d\udcca"},{name:"Achievements",path:"/achievements",icon:"\ud83c\udfc6"},{name:"Forum",path:"/forum",icon:"\ud83d\udcac"}];case"INSTRUCTOR":return[...e,{name:"My Courses",path:"/instructor/courses",icon:"\ud83d\udcda"},{name:"Students",path:"/instructor/students",icon:"\ud83d\udc65"},{name:"Assignments",path:"/instructor/assignments",icon:"\ud83d\udcdd"},{name:"Analytics",path:"/instructor/analytics",icon:"\ud83d\udcca"},{name:"Forum",path:"/instructor/forum",icon:"\ud83d\udcac"}];case"ADMIN":return[...e,{name:"Users",path:"/admin/users",icon:"\ud83d\udc65"},{name:"Courses",path:"/admin/courses",icon:"\ud83d\udcda"},{name:"Analytics",path:"/admin/analytics",icon:"\ud83d\udcca"},{name:"Settings",path:"/admin/settings",icon:"\u2699\ufe0f"},{name:"Reports",path:"/admin/reports",icon:"\ud83d\udcc8"}];default:return e}})();return(0,Le.jsx)("aside",{className:"sidebar ".concat(t?"open":""),children:(0,Le.jsxs)("div",{className:"sidebar-content",children:[(0,Le.jsx)("div",{className:"sidebar-header",children:(0,Le.jsx)("h3",{children:"Navigation"})}),(0,Le.jsx)("nav",{className:"sidebar-nav",children:(0,Le.jsx)("ul",{children:r.map((e,t)=>(0,Le.jsx)("li",{children:(0,Le.jsxs)("button",{className:"sidebar-item",onClick:()=>{return t=e.path,s=e.name,a(s),void n(t);var t,s},children:[(0,Le.jsx)("span",{className:"sidebar-icon",children:e.icon}),(0,Le.jsx)("span",{className:"sidebar-text",children:e.name})]})},t))})})]})})},Dt=e=>{let{children:t,showHeader:s=!0,showFooter:a=!0,showSidebar:n=!1}=e;const{sidebarOpen:r,theme:i}=(0,Pe.nm)();return(0,Le.jsxs)("div",{className:"layout ".concat(i),children:[s&&(0,Le.jsx)(Lt,{}),(0,Le.jsxs)("div",{className:"layout-body",children:[n&&(0,Le.jsx)(Mt,{isOpen:r}),(0,Le.jsxs)("main",{className:"main-content ".concat(n?"with-sidebar":""," ").concat(r?"sidebar-open":""),children:[(0,Le.jsx)(Rt,{}),t]})]}),a&&(0,Le.jsx)(Pt,{})]})},Ft={USER_NOT_FOUND:"Username not found. Please check your username and try again.",INVALID_CREDENTIALS:"Invalid password. Please check your password and try again.",USER_DISABLED:"Your account has been disabled. Please contact support for assistance.",BAD_CREDENTIALS:"Login failed. Please check your credentials and try again.",ACCOUNT_DISABLED:"Your account has been disabled. Please contact support for assistance.",VALIDATION_ERROR:"Please check your input and try again.",EMAIL_ALREADY_EXISTS:"This email address is already registered",USERNAME_ALREADY_EXISTS:"This username is already taken",INVALID_EMAIL_FORMAT:"Please enter a valid email address",NETWORK_ERROR:"Network error. Please check your connection and try again.",SERVER_ERROR:"Server error. Please try again later.",TIMEOUT_ERROR:"Request timeout. Please try again.",UNKNOWN_ERROR:"An unexpected error occurred. Please try again."},zt={400:"VALIDATION_ERROR",401:"BAD_CREDENTIALS",403:"ACCOUNT_DISABLED",404:"USER_NOT_FOUND",408:"TIMEOUT_ERROR",500:"SERVER_ERROR",502:"SERVER_ERROR",503:"SERVER_ERROR",504:"TIMEOUT_ERROR"},Ot=(e,t)=>{let s="UNKNOWN_ERROR",a=Ft.UNKNOWN_ERROR;return t&&t.code?(s=t.code,a=Ft[s]||t.message||Ft.UNKNOWN_ERROR):t&&t.message?a=t.message:e&&e.status&&(s=zt[e.status]||"UNKNOWN_ERROR",a=Ft[s]||Ft.UNKNOWN_ERROR),{code:s,message:a,status:null===e||void 0===e?void 0:e.status,originalError:t}};let _t=[],qt=!1;const Bt=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(a=>{_t.push({navigate:e,path:t,options:s,resolve:a}),qt||Ut()})},Ut=()=>{if(0===_t.length)return void(qt=!1);qt=!0;const{navigate:e,path:t,options:s,resolve:a}=_t.shift();requestAnimationFrame(()=>{setTimeout(()=>{try{!1!==s.replace?window.location.replace(t):window.location.href=t,a()}catch(e){console.error("Navigation error:",e),window.location.href=t,a()}setTimeout(()=>{Ut()},50)},100)})},Wt=e=>{let{to:t,replace:s=!0}=e;const[a,r]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{requestAnimationFrame(()=>{setTimeout(()=>{r(!0)},100)})},[]),(0,n.useEffect)(()=>{if(a)try{s?window.location.replace(t):window.location.href=t}catch(e){console.error("Redirect error:",e),window.location.href=t}},[a,t,s]),(0,Le.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"18px"},children:"Redirecting..."})},Qt=()=>{const[e,t]=(0,n.useState)({username:"",password:""}),[s,a]=(0,n.useState)({}),[r,i]=(0,n.useState)(0),[l,o]=(0,n.useState)(!1),[c,d]=(0,n.useState)(null),[u,p]=(0,n.useState)(!1),[m,h]=(0,n.useState)(!1),[f,x]=(0,n.useState)(!1),g=(0,n.useRef)(null),v=(0,n.useRef)(null),b=(0,n.useRef)(null),{loading:y,error:j,setLoading:N,setError:w,clearError:k,loginSuccess:S,addNotification:C,user:I,isAuthenticated:A,isOnline:E,backendConnected:T}=(0,Pe.nm)(),P=se(),L=9e5,R=(0,n.useCallback)((e,t)=>{const s={};switch(e){case"username":t?t.length<3?s.username="Username must be at least 3 characters":/^[a-zA-Z0-9_]+$/.test(t)||(s.username="Username can only contain letters, numbers, and underscores"):s.username="Username is required";break;case"password":t?t.length<6&&(s.password="Password must be at least 6 characters"):s.password="Password is required"}return s},[]),M=(0,n.useMemo)(()=>{let e;return(t,s)=>{clearTimeout(e),e=setTimeout(()=>{const e=R(t,s);a(s=>(0,Ue.A)((0,Ue.A)({},s),{},{[t]:e[t]||null}))},300)}},[R]),D=(0,n.useCallback)(()=>{if(!c)return 0;const e=L-(Date.now()-c);return Math.max(0,e)},[c]),F=(0,n.useCallback)(e=>{const t=Math.ceil(e/6e4);return"".concat(t," minute").concat(1!==t?"s":"")},[]),z=(0,n.useCallback)(e=>{const{name:n,value:r}=e.target;t(e=>(0,Ue.A)((0,Ue.A)({},e),{},{[n]:r})),s[n]&&a(e=>(0,Ue.A)((0,Ue.A)({},e),{},{[n]:null})),M(n,r)},[s,M]),O=(0,n.useCallback)(()=>{p(e=>!e)},[]),_=(0,n.useCallback)(async t=>{if(t.preventDefault(),l)C({type:"error",message:"Account temporarily locked due to multiple failed attempts. Please try again later.",autoDismiss:!1});else if(E){x(!0),N(!0),k(),a({});try{const t={};if(Object.keys(e).forEach(s=>{const a=R(s,e[s]);a[s]&&(t[s]=a[s])}),Object.keys(t).length>0)return a(t),void w("Please correct the errors below");const n={username:e.username.trim(),password:e.password};if(!1&&!T){const e={instructor:{user:{id:1,username:"instructor",firstName:"John",lastName:"Doe",email:"instructor@example.com",role:"INSTRUCTOR"},token:"mock-jwt-token-instructor-"+Date.now()},admin:{user:{id:2,username:"admin",firstName:"Admin",lastName:"User",email:"admin@example.com",role:"ADMIN"},token:"mock-jwt-token-admin-"+Date.now()},student:{user:{id:3,username:"student",firstName:"Jane",lastName:"Smith",email:"student@example.com",role:"STUDENT"},token:"mock-jwt-token-student-"+Date.now()}};if(await new Promise(e=>setTimeout(e,1e3)),e[n.username]&&"password"===n.password){const t=e[n.username];localStorage.removeItem("loginAttempts"),localStorage.removeItem("lockoutTime"),i(0),S(t.user,t.token),C({type:"success",message:"Welcome back, ".concat(t.user.firstName||t.user.username,"!"),duration:3e3});const s="/dashboard/".concat(t.user.role.toLowerCase());return void Bt(P,s)}throw new Error("Invalid credentials")}const l=await fetch("http://localhost:8080/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(n),credentials:"include"});if(l.ok){const e=await l.json();localStorage.removeItem("loginAttempts"),localStorage.removeItem("lockoutTime"),i(0),S(e.user,e.token),C({type:"success",message:"Welcome back, ".concat(e.user.firstName||e.user.username,"!"),duration:3e3});const t="/dashboard/".concat(e.user.role.toLowerCase());Bt(P,t)}else{const e=r+1;let t;i(e),localStorage.setItem("loginAttempts",e.toString());try{t=await l.json()}catch(s){t={message:"Invalid response from server"}}const a=Ot(l,t);e>=5?(o(!0),d(Date.now()),localStorage.setItem("lockoutTime",Date.now().toString()),C({type:"error",message:"Account locked due to ".concat(5," failed attempts. Please try again in 15 minutes."),autoDismiss:!1})):C({type:"error",message:a.message,duration:5e3}),w(a.message)}}catch(n){console.error("Login error:",n);const e=r+1;i(e),localStorage.setItem("loginAttempts",e.toString());const t=Ot(null,{message:n.message});w(t.message),C({type:"error",message:t.message,duration:5e3})}finally{x(!1),N(!1)}}else C({type:"error",message:"You are currently offline. Please check your internet connection.",autoDismiss:!1})},[l,E,e,r,R,N,k,S,C,P,T]),q=(0,n.useCallback)(e=>{"Enter"!==e.key||f||l||(e.preventDefault(),_(e))},[f,l,_]);if((0,n.useEffect)(()=>{const e=localStorage.getItem("loginAttempts"),t=localStorage.getItem("lockoutTime");if(e){const s=parseInt(e);if(i(s),t){const e=parseInt(t),s=Date.now();if(s-e<L){o(!0),d(e);setTimeout(()=>{o(!1),d(null),localStorage.removeItem("loginAttempts"),localStorage.removeItem("lockoutTime")},L-(s-e))}else localStorage.removeItem("loginAttempts"),localStorage.removeItem("lockoutTime")}}},[]),A&&null!==I&&void 0!==I&&I.role){const e="/dashboard/".concat(I.role.toLowerCase());return console.log("User already authenticated, redirecting to:",e),(0,Le.jsx)(Wt,{to:e})}return(0,Le.jsx)("div",{className:"auth-page",children:(0,Le.jsx)("div",{className:"auth-container",children:(0,Le.jsxs)("div",{className:"auth-card",children:[(0,Le.jsxs)("div",{className:"auth-header",children:[(0,Le.jsx)("div",{className:"auth-logo",children:(0,Le.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,Le.jsx)("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})})}),(0,Le.jsx)("h1",{className:"auth-title",children:"Welcome Back"}),(0,Le.jsx)("p",{className:"auth-subtitle",children:"Sign in to continue your learning journey"}),!E&&(0,Le.jsxs)("div",{className:"network-status offline",children:[(0,Le.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:(0,Le.jsx)("path",{d:"M1 9l2 2c4.97-4.97 13.03-4.97 18 0l2-2C16.93 2.93 7.07 2.93 1 9zm8 8l3 3 3-3c-1.65-1.66-4.34-1.66-6 0zm-4-4l2 2c2.76-2.76 7.24-2.76 10 0l2-2C15.14 9.14 8.87 9.14 5 13z"})}),"Offline"]})]}),(0,Le.jsxs)("div",{className:"auth-form",children:[j&&(0,Le.jsx)("div",{className:"error-message",role:"alert",children:j}),l&&(0,Le.jsxs)("div",{className:"lockout-message",role:"alert",children:[(0,Le.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,Le.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"})}),"Account locked. Try again in ",F(D()),"."]}),(0,Le.jsxs)("form",{onSubmit:_,noValidate:!0,children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsxs)("label",{htmlFor:"username",className:"form-label",children:["Username",(0,Le.jsx)("span",{className:"required","aria-label":"required",children:"*"})]}),(0,Le.jsx)("input",{ref:g,type:"text",id:"username",name:"username",value:e.username,onChange:z,onKeyDown:q,placeholder:"Enter your username",className:"form-input ".concat(s.username?"error":""),disabled:l||f,autoComplete:"username","aria-describedby":s.username?"username-error":void 0,"aria-invalid":!!s.username,required:!0}),s.username&&(0,Le.jsx)("div",{id:"username-error",className:"form-error",role:"alert",children:s.username})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsxs)("label",{htmlFor:"password",className:"form-label",children:["Password",(0,Le.jsx)("span",{className:"required","aria-label":"required",children:"*"})]}),(0,Le.jsxs)("div",{className:"password-input-container",children:[(0,Le.jsx)("input",{ref:v,type:u?"text":"password",id:"password",name:"password",value:e.password,onChange:z,onKeyDown:q,placeholder:"Enter your password",className:"form-input ".concat(s.password?"error":""),disabled:l||f,autoComplete:"current-password","aria-describedby":s.password?"password-error":void 0,"aria-invalid":!!s.password,required:!0}),(0,Le.jsx)("button",{type:"button",className:"password-toggle",onClick:O,disabled:l||f,"aria-label":u?"Hide password":"Show password",children:u?(0,Le.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,Le.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"})}):(0,Le.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,Le.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"})})})]}),s.password&&(0,Le.jsx)("div",{id:"password-error",className:"form-error",role:"alert",children:s.password})]}),(0,Le.jsx)("div",{className:"form-group",children:(0,Le.jsxs)("label",{className:"checkbox-label",children:[(0,Le.jsx)("input",{type:"checkbox",checked:m,onChange:e=>h(e.target.checked),disabled:l||f}),(0,Le.jsx)("span",{className:"checkbox-text",children:"Remember me"})]})}),(0,Le.jsx)("button",{ref:b,type:"submit",className:"btn btn-primary btn-full ".concat(y||f?"loading":""),disabled:y||f||l||!E,"aria-describedby":r>0?"attempts-info":void 0,children:y||f?"Signing In...":"Sign In"}),r>0&&(0,Le.jsxs)("div",{id:"attempts-info",className:"attempts-info",children:[5-r," attempts remaining"]})]}),(0,Le.jsxs)("div",{className:"auth-footer",children:[(0,Le.jsxs)("p",{children:["Don't have an account?"," ",(0,Le.jsx)(Ae,{to:"/register",className:"auth-link",children:"Sign up here"})]}),(0,Le.jsx)("div",{className:"forgot-password",children:(0,Le.jsx)(Ae,{to:"/forgot-password",className:"auth-link",children:"Forgot your password?"})}),!1]})]})]})})})},Ht=e=>{let{children:t,requiredRole:s}=e;const{user:a,token:n,isAuthenticated:r}=(0,Pe.nm)();if(!r||null===a||void 0===a||!a.username||!n)return(0,Le.jsx)(Wt,{to:"/login"});if(s&&a.role!==s){var i;const e=(null===(i=a.role)||void 0===i?void 0:i.toLowerCase())||"student";return(0,Le.jsx)(Wt,{to:"/dashboard/".concat(e)})}return t},Vt=()=>{const[e,t]=(0,n.useState)({username:"",email:"",password:"",confirmPassword:"",firstName:"",lastName:"",role:"STUDENT",phoneNumber:"",dateOfBirth:"",address:"",bio:""}),{loading:s,error:a,setLoading:r,setError:i,clearError:l,loginSuccess:o,addNotification:c}=(0,Pe.nm)(),[d,u]=(0,n.useState)({}),p=se(),m=s=>{t((0,Ue.A)((0,Ue.A)({},e),{},{[s.target.name]:s.target.value})),d[s.target.name]&&u((0,Ue.A)((0,Ue.A)({},d),{},{[s.target.name]:null}))};return(0,Le.jsx)("div",{className:"auth-page",children:(0,Le.jsx)("div",{className:"auth-container",children:(0,Le.jsxs)("div",{className:"auth-card",children:[(0,Le.jsxs)("div",{className:"auth-header",children:[(0,Le.jsx)("div",{className:"auth-logo",children:(0,Le.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,Le.jsx)("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})})}),(0,Le.jsx)("h1",{className:"auth-title",children:"Join Coaxial Academy"}),(0,Le.jsx)("p",{className:"auth-subtitle",children:"Create your account to start learning"})]}),(0,Le.jsxs)("div",{className:"auth-form",children:[a&&(0,Le.jsx)("div",{className:"error-message",children:a}),(0,Le.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),r(!0),l(),u({});try{if(e.password!==e.confirmPassword)return u({confirmPassword:"Passwords do not match"}),i("Passwords do not match"),void r(!1);if(!e.username||!e.email||!e.password||!e.firstName||!e.lastName){const t={};return e.username||(t.username="Username is required"),e.email||(t.email="Email is required"),e.password||(t.password="Password is required"),e.firstName||(t.firstName="First name is required"),e.lastName||(t.lastName="Last name is required"),u(t),i("Please fill in all required fields"),void r(!1)}const t={username:e.username,email:e.email,password:e.password,firstName:e.firstName,lastName:e.lastName,role:e.role,phoneNumber:e.phoneNumber||null,dateOfBirth:e.dateOfBirth||null,address:e.address||null,bio:e.bio||null},n=await fetch("http://localhost:8080/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json",accept:"*/*"},body:JSON.stringify(t)});if(n.ok){const t=await n.json(),s=t.user,a=t.token;o(s,a),c({type:"success",message:"Welcome to Coaxial Academy, ".concat(s.firstName,"!"),duration:3e3});const r=e.role||"STUDENT",i="/dashboard/".concat(r.toLowerCase());Bt(p,i)}else{let e;try{e=await n.json()}catch(a){e={message:"Invalid response from server"}}const t=Ot(n,e);if(console.log("Registration error:",t),i(t.message),c({type:(s=t.code,{USER_NOT_FOUND:"warning",INVALID_CREDENTIALS:"warning",VALIDATION_ERROR:"warning",EMAIL_ALREADY_EXISTS:"warning",USERNAME_ALREADY_EXISTS:"warning",INVALID_EMAIL_FORMAT:"warning",USER_DISABLED:"error",ACCOUNT_DISABLED:"error",BAD_CREDENTIALS:"error",NETWORK_ERROR:"error",SERVER_ERROR:"error",TIMEOUT_ERROR:"error",UNKNOWN_ERROR:"error"}[s]||"error"),message:t.message}),"VALIDATION_ERROR"===t.code&&e.fieldErrors)u(e.fieldErrors);else{const e={},s=t.message||"";(s.includes("Email already exists")||s.includes("email already exists")||s.includes("Email is already taken")||s.includes("email is already taken"))&&(e.email="This email address is already registered"),(s.includes("Username already exists")||s.includes("username already exists")||s.includes("Username is already taken")||s.includes("username is already taken"))&&(e.username="This username is already taken"),(s.includes("Invalid email format")||s.includes("invalid email")||s.includes("Email format is invalid"))&&(e.email="Please enter a valid email address"),s.includes("Password")&&(s.includes("too short")||s.includes("too weak")||s.includes("invalid")||s.includes("required"))&&(e.password=s),s.includes("Username")&&(s.includes("too short")||s.includes("invalid")||s.includes("required"))&&(e.username=s),s.includes("First name")&&(s.includes("required")||s.includes("invalid"))&&(e.firstName=s),s.includes("Last name")&&(s.includes("required")||s.includes("invalid"))&&(e.lastName=s),s.includes("Phone number")&&(s.includes("invalid")||s.includes("format"))&&(e.phoneNumber=s),Object.keys(e).length>0&&u(e)}}}catch(n){console.error("Registration error:",n);const e=Ot(null,{message:n.message});i(e.message),c({type:"error",message:e.message})}finally{r(!1)}var s},children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"username",className:"form-label",children:"Username *"}),(0,Le.jsx)("input",{type:"text",id:"username",name:"username",value:e.username,onChange:m,placeholder:"Choose a username",className:"form-input ".concat(d.username?"error":""),required:!0}),d.username&&(0,Le.jsx)("div",{className:"form-error",children:d.username})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email Address *"}),(0,Le.jsx)("input",{type:"email",id:"email",name:"email",value:e.email,onChange:m,placeholder:"Enter your email",className:"form-input ".concat(d.email?"error":""),required:!0}),d.email&&(0,Le.jsx)("div",{className:"form-error",children:d.email})]}),(0,Le.jsxs)("div",{className:"grid grid-cols-2",style:{gap:"var(--spacing-4)"},children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"firstName",className:"form-label",children:"First Name *"}),(0,Le.jsx)("input",{type:"text",id:"firstName",name:"firstName",value:e.firstName,onChange:m,placeholder:"First name",className:"form-input ".concat(d.firstName?"error":""),required:!0}),d.firstName&&(0,Le.jsx)("div",{className:"form-error",children:d.firstName})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"lastName",className:"form-label",children:"Last Name *"}),(0,Le.jsx)("input",{type:"text",id:"lastName",name:"lastName",value:e.lastName,onChange:m,placeholder:"Last name",className:"form-input ".concat(d.lastName?"error":""),required:!0}),d.lastName&&(0,Le.jsx)("div",{className:"form-error",children:d.lastName})]})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"role",className:"form-label",children:"Role *"}),(0,Le.jsxs)("select",{id:"role",name:"role",value:e.role,onChange:m,className:"form-select",required:!0,children:[(0,Le.jsx)("option",{value:"STUDENT",children:"Student"}),(0,Le.jsx)("option",{value:"INSTRUCTOR",children:"Instructor"})]})]}),(0,Le.jsxs)("div",{className:"grid grid-cols-2",style:{gap:"var(--spacing-4)"},children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"phoneNumber",className:"form-label",children:"Phone Number"}),(0,Le.jsx)("input",{type:"tel",id:"phoneNumber",name:"phoneNumber",value:e.phoneNumber,onChange:m,placeholder:"+1 (555) 123-4567",className:"form-input ".concat(d.phoneNumber?"error":"")}),d.phoneNumber&&(0,Le.jsx)("div",{className:"form-error",children:d.phoneNumber})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"dateOfBirth",className:"form-label",children:"Date of Birth"}),(0,Le.jsx)("input",{type:"date",id:"dateOfBirth",name:"dateOfBirth",value:e.dateOfBirth,onChange:m,className:"form-input"})]})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"address",className:"form-label",children:"Address"}),(0,Le.jsx)("textarea",{id:"address",name:"address",value:e.address,onChange:m,placeholder:"Enter your address (optional)",className:"form-textarea",rows:2})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"bio",className:"form-label",children:"Bio"}),(0,Le.jsx)("textarea",{id:"bio",name:"bio",value:e.bio,onChange:m,placeholder:"Tell us about yourself (optional)",className:"form-textarea",rows:3})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"password",className:"form-label",children:"Password *"}),(0,Le.jsx)("input",{type:"password",id:"password",name:"password",value:e.password,onChange:m,placeholder:"Create a password",className:"form-input ".concat(d.password?"error":""),required:!0}),d.password&&(0,Le.jsx)("div",{className:"form-error",children:d.password})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"confirmPassword",className:"form-label",children:"Confirm Password *"}),(0,Le.jsx)("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:e.confirmPassword,onChange:m,placeholder:"Confirm your password",className:"form-input ".concat(d.confirmPassword?"error":""),required:!0}),d.confirmPassword&&(0,Le.jsx)("div",{className:"form-error",children:d.confirmPassword})]}),(0,Le.jsx)("button",{type:"submit",className:"btn btn-primary btn-full ".concat(s?"loading":""),disabled:s,children:s?"Creating Account...":"Create Account"})]}),(0,Le.jsx)("div",{className:"auth-footer",children:(0,Le.jsxs)("p",{children:["Already have an account?"," ",(0,Le.jsx)(Ae,{to:"/login",className:"auth-link",children:"Sign in here"})]})})]})]})})})},Yt=async(e,t)=>{const s="/api/student/tests/".concat(t,"/start"),a={ipAddress:"client",userAgent:navigator.userAgent};console.log("Starting test:",t);try{const t=await(0,Xe.$P)(s,a,e),n=await t.json();return console.log("Test started with session:",n),n}catch(n){throw console.error("Error starting test:",n),n}},$t=async(e,t,s)=>{const a="/api/student/tests/".concat(t,"/submit-answer");console.log("=== Submitting Answer ==="),console.log("Endpoint:",a),console.log("Full URL:","http://localhost:8080".concat(a)),console.log("Answer data:",s),console.log("Validation:",{hasSessionId:!!s.sessionId,hasQuestionId:!!s.questionId,hasSelectedOptionId:!!s.selectedOptionId,sessionId:s.sessionId,questionId:s.questionId,selectedOptionId:s.selectedOptionId});try{const t=await(0,Xe.$P)(a,s,e),n=await t.json();return console.log("\u2705 Answer submitted successfully:",n),n}catch(n){throw console.error("\u274c Error submitting answer:",n),console.error("Error details:",n.message),n}},Jt=async(e,t)=>{const s="".concat(Xe.tE,"/api/student/subscriptions/verify-payment");console.log("Verifying payment:",t);const a={"Content-Type":"application/json",accept:"*/*"};e&&(a.Authorization="Bearer ".concat(e));const n=await fetch(s,{method:"POST",headers:a,body:JSON.stringify(t)});if(console.log("Verify payment response status:",n.status),!n.ok){const e=n.clone();try{const e=await n.json(),t=e.error||e.message||"Failed to verify payment";throw console.error("Verify payment error (JSON):",e),new Error(t)}catch(i){try{const t=await e.text();throw console.error("Verify payment error (text):",t),new Error(t||"Failed to verify payment: ".concat(n.status," ").concat(n.statusText))}catch(l){throw new Error("Failed to verify payment: ".concat(n.status," ").concat(n.statusText))}}}const r=await n.json();return console.log("Payment verified successfully:",r),r},Kt=async e=>{const t="".concat(Xe.tE,"/api/student/subscriptions"),s={accept:"*/*"};e&&(s.Authorization="Bearer ".concat(e));const a=await fetch(t,{headers:s});if(!a.ok){await a.text();throw new Error("Failed to fetch subscriptions: ".concat(a.status," ").concat(a.statusText))}return await a.json()},Gt=()=>new Promise(e=>{if(window.Razorpay)return console.log("Razorpay already loaded"),void e(!0);console.log("Loading Razorpay script...");const t=document.createElement("script");t.src="https://checkout.razorpay.com/v1/checkout.js",t.onload=()=>{console.log("Razorpay script loaded successfully"),e(!0)},t.onerror=t=>{console.error("Failed to load Razorpay script:",t),e(!1)},document.body.appendChild(t)}),Xt=e=>{var t,s,a;let{item:n,onSubscribe:r,formatPrice:i,isSubscribed:l}=e;const o=n.name||n.className||n.examName||n.courseName,c=n.difficulty||n.level;return(0,Le.jsxs)("div",{className:"class-card",children:[(0,Le.jsxs)("div",{className:"class-header",children:[(0,Le.jsx)("h5",{children:o}),(0,Le.jsxs)("div",{className:"class-meta",children:[(0,Le.jsx)("span",{className:"difficulty",children:c}),(0,Le.jsx)("span",{className:"duration",children:n.duration})]})]}),(0,Le.jsxs)("div",{className:"content-stats",children:[n.subjectCount>0&&(0,Le.jsxs)("div",{className:"stat",children:[(0,Le.jsx)("span",{className:"stat-number",children:n.subjectCount}),(0,Le.jsx)("span",{className:"stat-label",children:"Subjects"})]}),n.topicCount>0&&(0,Le.jsxs)("div",{className:"stat",children:[(0,Le.jsx)("span",{className:"stat-number",children:n.topicCount}),(0,Le.jsx)("span",{className:"stat-label",children:"Topics"})]}),n.moduleCount>0&&(0,Le.jsxs)("div",{className:"stat",children:[(0,Le.jsx)("span",{className:"stat-number",children:n.moduleCount}),(0,Le.jsx)("span",{className:"stat-label",children:"Modules"})]}),n.chapterCount>0&&(0,Le.jsxs)("div",{className:"stat",children:[(0,Le.jsx)("span",{className:"stat-number",children:n.chapterCount}),(0,Le.jsx)("span",{className:"stat-label",children:"Chapters"})]}),n.questionCount>0&&(0,Le.jsxs)("div",{className:"stat",children:[(0,Le.jsx)("span",{className:"stat-number",children:n.questionCount}),(0,Le.jsx)("span",{className:"stat-label",children:"Questions"})]})]}),n.subjects&&n.subjects.length>0&&(0,Le.jsxs)("div",{className:"subjects-preview",children:[(0,Le.jsx)("h6",{children:"Subjects Included:"}),(0,Le.jsx)("div",{className:"subjects-list",children:n.subjects.map((e,t)=>(0,Le.jsxs)("div",{className:"subject-item",children:[(0,Le.jsx)("span",{className:"subject-name",children:e.name}),(0,Le.jsxs)("span",{className:"subject-stats",children:[e.topicCount,"T, ",e.moduleCount,"M, ",e.chapterCount,"C, ",e.questionCount,"Q"]})]},t))})]}),n.skillsCovered&&n.skillsCovered.length>0&&(0,Le.jsxs)("div",{className:"subjects-preview",children:[(0,Le.jsx)("h6",{children:"Skills Covered:"}),(0,Le.jsx)("div",{className:"subjects-list",children:n.skillsCovered.map((e,t)=>(0,Le.jsx)("div",{className:"subject-item",children:(0,Le.jsx)("span",{className:"subject-name",children:e})},t))})]}),(0,Le.jsx)("div",{className:"pricing-section",children:(0,Le.jsxs)("div",{className:"pricing-options",children:[(0,Le.jsxs)("div",{className:"pricing-option",children:[(0,Le.jsx)("span",{className:"pricing-period",children:"Monthly"}),(0,Le.jsx)("span",{className:"pricing-amount",children:i(n.pricing.monthlyFinalPrice||0)}),(null===(t=n.pricing)||void 0===t?void 0:t.monthlyDiscountPercent)>0&&(0,Le.jsxs)("span",{className:"discount",children:[n.pricing.monthlyDiscountPercent,"% OFF"]})]}),(0,Le.jsxs)("div",{className:"pricing-option recommended",children:[(0,Le.jsx)("span",{className:"pricing-period",children:"Quarterly"}),(0,Le.jsx)("span",{className:"pricing-amount",children:i(n.pricing.quarterlyFinalPrice||0)}),(null===(s=n.pricing)||void 0===s?void 0:s.quarterlyDiscountPercent)>0&&(0,Le.jsxs)("span",{className:"discount",children:[n.pricing.quarterlyDiscountPercent,"% OFF"]})]}),(0,Le.jsxs)("div",{className:"pricing-option best-value",children:[(0,Le.jsx)("span",{className:"pricing-period",children:"Yearly"}),(0,Le.jsx)("span",{className:"pricing-amount",children:i(n.pricing.yearlyFinalPrice||0)}),(null===(a=n.pricing)||void 0===a?void 0:a.yearlyDiscountPercent)>0&&(0,Le.jsxs)("span",{className:"discount",children:[n.pricing.yearlyDiscountPercent,"% OFF"]})]})]})}),(0,Le.jsx)("button",{className:l?"btn btn-secondary subscribe-btn":"btn btn-primary subscribe-btn",onClick:()=>r(n),disabled:l,children:l?"\u2713 Subscribed":"Subscribe Now"})]})},Zt=()=>{var e,t;se();const s=ee(),{token:a,addNotification:r,isAuthenticated:i,user:l}=(0,Pe.nm)(),[o,c]=(0,n.useState)([]),[d,u]=(0,n.useState)(!1),[p,m]=(0,n.useState)(!1),[h,f]=(0,n.useState)(null),[x,g]=(0,n.useState)("monthly"),[v,b]=(0,n.useState)({courseType:"",priceRange:"",duration:"",search:""}),[y,j]=(0,n.useState)(new Set),N=n.useRef(!1);(0,n.useEffect)(()=>{console.log("StudentCourseCatalog - Auth state:",{hasToken:!!a,isAuthenticated:i,hasUser:!!l,userRole:null===l||void 0===l?void 0:l.role,currentPath:s.pathname})},[a,i,l,s]),(0,n.useEffect)(()=>{a&&!N.current&&(N.current=!0,k(),w())},[a]);const w=async()=>{if(a)try{const e=await Kt(a),t=new Set;e&&Array.isArray(e)&&e.forEach(e=>{if(e.isActive){const s="".concat(e.subscriptionLevel.toLowerCase(),"_").concat(e.entityId);t.add(s)}}),j(t)}catch(e){console.error("Failed to load user subscriptions:",e)}},k=async()=>{try{u(!0);const e=await(async()=>{const e="".concat(Xe.tE,"/api/public/course-catalogue/all");console.log("Fetching course catalog from:",e);try{const t=await fetch(e,{method:"GET",headers:{accept:"*/*"}});if(console.log("Course catalog response status:",t.status),!t.ok){const e=await t.text();throw console.error("Course catalog error:",e),new Error("Failed to fetch course catalog: "+t.status+" "+t.statusText)}const s=await t.json();return console.log("Course catalog data:",s),s}catch(t){throw console.error("Error fetching course catalog:",t),t}})();if(e.success){const t=[];if(e.classes&&e.classes.length>0&&t.push({id:1,type:"class",name:"Academic Classes",description:"School curriculum courses for all grades",icon:"\ud83c\udf93",items:e.classes.map(e=>(0,Ue.A)((0,Ue.A)({},e),{},{name:e.className,type:"class"}))}),e.exams&&e.exams.length>0){const s=e.exams.map(e=>{var t,s;const a=(null===(t=e.subjects)||void 0===t?void 0:t.reduce((e,t)=>e+(t.moduleCount||0),0))||0,n=(null===(s=e.subjects)||void 0===s?void 0:s.reduce((e,t)=>e+(t.chapterCount||0),0))||0;return(0,Ue.A)((0,Ue.A)({},e),{},{name:e.examName,type:"exam",moduleCount:a,chapterCount:n})});t.push({id:2,type:"exam",name:"Competitive Exams",description:"Preparation courses for competitive examinations",icon:"\ud83c\udfc6",items:s})}e.courses&&e.courses.length>0&&t.push({id:3,type:"course",name:"Professional Courses",description:"Skill-based professional development courses",icon:"\ud83d\udcbc",items:e.courses.map(e=>(0,Ue.A)((0,Ue.A)({},e),{},{name:e.courseName,type:"course"}))}),c(t),r({type:"success",message:"Course catalog loaded!",duration:3e3})}}catch(e){console.error("Error loading course data:",e),r({type:"error",message:"Failed to load course catalog",duration:6e3})}finally{u(!1)}},S=e=>{f(e),m(!0)},C=async e=>{if(e&&(e.preventDefault(),e.stopPropagation()),console.log("\ud83d\udd35 PAYMENT INITIATED - Starting payment flow"),!h)return;const t=a,n=l,o=i;if(console.log("\ud83d\udd35 Auth state captured:",{hasToken:!!t,hasUser:!!n,isAuthenticated:o,username:null===n||void 0===n?void 0:n.username}),t){t&&localStorage.setItem("token",t),n&&localStorage.setItem("user",JSON.stringify(n)),console.log("\ud83d\udd35 Auth data backed up to localStorage");try{var c;u(!0),console.log("\ud83d\udd35 Creating subscription order..."),r({type:"info",message:"Creating subscription...",duration:3e3});const e={subscriptionLevel:"class"===h.type?"CLASS":"exam"===h.type?"EXAM":"COURSE",entityId:h.id,planType:"monthly"===x?"MONTHLY":"quarterly"===x?"QUARTERLY":"YEARLY",amount:h.pricing[x+"FinalPrice"]||h.pricing[x+"Price"]||0,durationDays:"monthly"===x?30:"quarterly"===x?90:365},a=await(async(e,t)=>{const s="".concat(Xe.tE,"/api/student/subscriptions");console.log("Creating subscription:",t);const a={"Content-Type":"application/json",accept:"*/*"};e&&(a.Authorization="Bearer ".concat(e));const n=await fetch(s,{method:"POST",headers:a,body:JSON.stringify(t)});if(console.log("Create subscription response status:",n.status),!n.ok){const e=n.clone();try{const e=await n.json(),t=e.error||e.message||"Failed to create subscription";throw new Error(t)}catch(i){try{const t=await e.text();throw console.error("Create subscription error:",t),new Error(t||"Failed to create subscription: ".concat(n.status," ").concat(n.statusText))}catch(l){throw new Error("Failed to create subscription: ".concat(n.status," ").concat(n.statusText))}}}const r=await n.json();return console.log("Subscription created successfully:",r),r})(t,e);if(console.log("\ud83d\udd35 Order created:",null===(c=a.order)||void 0===c?void 0:c.id),console.log("\ud83d\udd35 Full response:",a),(a.callback_url||a.redirect_url||a.return_url)&&console.warn("\u26a0\ufe0f Backend response contains redirect URL:",{callback_url:a.callback_url,redirect_url:a.redirect_url,return_url:a.return_url}),!a.order||!a.order.id)throw new Error("Failed to create Razorpay order");console.log("\ud83d\udd35 Order notes (raw):",a.order.notes),console.log("\ud83d\udd35 Note: subscriptionId not needed - backend creates subscription after payment verification"),console.log("\ud83d\udd35 Loading Razorpay script...");if(!await Gt())throw new Error("Failed to load Razorpay script");if(!window.Razorpay)throw new Error("Razorpay not available");console.log("\ud83d\udd35 Opening Razorpay modal..."),window.__COAXIAL_AUTH__={token:t,user:n,isAuthenticated:o},console.log("\ud83d\udd35 Auth saved to window global:",!!window.__COAXIAL_AUTH__);const i={key:a.keyId||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_RAZORPAY_KEY_ID,amount:a.order.amount,currency:"INR",order_id:a.order.id,name:"Coaxial LMS",description:"Course Subscription",redirect:!1,callback_url:null,handler:async function(e){var a;console.log("\ud83d\udd35 HANDLER CALLED - Payment response received from Razorpay");const n=t||(null===(a=window.__COAXIAL_AUTH__)||void 0===a?void 0:a.token);console.log("\ud83d\udd35 Handler - Token available:",!!n);try{console.log("\ud83d\udd35 Payment successful from Razorpay!",e),console.log("\ud83d\udd35 Using token:",!!n);const t={razorpay_order_id:e.razorpay_order_id,razorpay_payment_id:e.razorpay_payment_id,razorpay_signature:e.razorpay_signature};console.log("\ud83d\udd35 Sending verification data (NO subscriptionId):",t),console.log("\ud83d\udd35 About to call verifyPayment API...");const a=await Jt(n,t);if(console.log("\u2705 Verification API returned!"),console.log("\u2705 Verification result:",a),console.log("\u2705 Verification success?:",null===a||void 0===a?void 0:a.success),console.log("\u2705 New subscription created:",null===a||void 0===a?void 0:a.subscription),!a.success||!a.subscription)throw new Error("Payment verification failed");{const e=a.subscription;console.log("\u2705 Subscription ID from response:",e.id);const t="".concat(h.type,"_").concat(h.id);j(e=>new Set([...e,t]));const n=localStorage.getItem("token"),i=localStorage.getItem("user");console.log("\u2705 PAYMENT SUCCESS - Token exists:",!!n,"User exists:",!!i),console.log("\u2705 Current URL:",window.location.href),console.log("\u2705 Will stay on:",s.pathname),n&&sessionStorage.setItem("token_backup",n),i&&sessionStorage.setItem("user_backup",i),"/dashboard/student"!==window.location.pathname&&(console.warn("\u26a0\ufe0f Navigation detected! Forcing back to student dashboard"),window.history.pushState(null,"","/dashboard/student")),r({type:"success",message:"\ud83c\udf89 Subscription activated successfully! Welcome aboard!",duration:5e3}),setTimeout(()=>{m(!1),f(null),u(!1)},100)}}catch(i){console.error("\u274c VERIFICATION ERROR CAUGHT:",i),console.error("\u274c Error type:",i.constructor.name),console.error("\u274c Error message:",i.message),console.error("\u274c Error stack:",i.stack),console.error("\u274c Full error object:",JSON.stringify(i,Object.getOwnPropertyNames(i)));const t=i.message||"Unknown error";t.includes("401")||t.includes("Unauthorized")?r({type:"error",message:"\u274c Session expired. Please refresh and try again.",duration:8e3}):t.includes("verify")||t.includes("signature")?r({type:"error",message:"\u274c Payment verification failed. Contact support with payment ID: "+e.razorpay_payment_id,duration:1e4}):r({type:"warning",message:"Payment received! Verification in progress... If not activated in 5 minutes, contact support.",duration:8e3}),m(!1),f(null),u(!1)}},prefill:{name:"",email:"",contact:""},theme:{color:"#3399cc"},modal:{ondismiss:function(){r({type:"warning",message:"Payment cancelled",duration:4e3}),u(!1)},escape:!1,backdrop_close:!1},notes:{stay_on_page:"true"}};console.log("\ud83d\udd35 Creating Razorpay instance with options:",{hasKey:!!i.key,hasOrderId:!!i.order_id,hasHandler:!!i.handler});const l=new window.Razorpay(i);l.on("payment.failed",function(e){console.error("\u274c Payment failed:",e.error),r({type:"error",message:"Payment failed: "+e.error.description,duration:6e3}),u(!1)}),console.log("\ud83d\udd35 Opening Razorpay checkout..."),l.open(),console.log("\ud83d\udd35 Razorpay checkout opened successfully")}catch(d){if(console.error("Payment error:",d),d.message.includes("already has an active subscription")){r({type:"warning",message:"You already have an active subscription for this course!",duration:5e3});const e="".concat(h.type,"_").concat(h.id);j(t=>new Set([...t,e])),m(!1),f(null)}else r({type:"error",message:d.message||"Failed to initialize payment",duration:6e3});u(!1)}}else r({type:"error",message:"Authentication required. Please log in again.",duration:5e3})},I=e=>"\u20b9".concat(e),A=o.filter(e=>{if(v.courseType&&e.id!==parseInt(v.courseType))return!1;if(v.search){const t=v.search.toLowerCase();return e.name.toLowerCase().includes(t)||e.items&&e.items.some(e=>{var s;return null===(s=e.name)||void 0===s?void 0:s.toLowerCase().includes(t)})}return!0});return(0,Le.jsxs)("div",{className:"student-course-catalog",children:[(0,Le.jsxs)("div",{className:"page-header",children:[(0,Le.jsx)("h2",{children:"Course Catalog"}),(0,Le.jsx)("p",{children:"Explore and subscribe to our comprehensive learning programs"})]}),(0,Le.jsx)("div",{className:"filters-section",children:(0,Le.jsxs)("div",{className:"filter-row",children:[(0,Le.jsx)("div",{className:"filter-group",children:(0,Le.jsx)("input",{type:"text",placeholder:"Search courses...",value:v.search,onChange:e=>b(t=>(0,Ue.A)((0,Ue.A)({},t),{},{search:e.target.value})),className:"form-input"})}),(0,Le.jsx)("div",{className:"filter-group",children:(0,Le.jsxs)("select",{value:v.courseType,onChange:e=>b(t=>(0,Ue.A)((0,Ue.A)({},t),{},{courseType:e.target.value})),className:"form-input",children:[(0,Le.jsx)("option",{value:"",children:"All Course Types"}),o.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]})}),(0,Le.jsx)("div",{className:"filter-group",children:(0,Le.jsxs)("select",{value:v.priceRange,onChange:e=>b(t=>(0,Ue.A)((0,Ue.A)({},t),{},{priceRange:e.target.value})),className:"form-input",children:[(0,Le.jsx)("option",{value:"",children:"All Prices"}),(0,Le.jsx)("option",{value:"0-500",children:"Under \u20b9500"}),(0,Le.jsx)("option",{value:"500-1000",children:"\u20b9500 - \u20b91000"}),(0,Le.jsx)("option",{value:"1000+",children:"Above \u20b91000"})]})})]})}),d?(0,Le.jsx)("div",{className:"loading",children:"Loading course catalog..."}):(0,Le.jsx)("div",{className:"course-types-section",children:A.map(e=>(0,Le.jsxs)("div",{className:"course-type-section",children:[(0,Le.jsxs)("div",{className:"course-type-header",children:[(0,Le.jsx)("div",{className:"course-type-icon",children:e.icon}),(0,Le.jsxs)("div",{className:"course-type-info",children:[(0,Le.jsx)("h3",{children:e.name}),(0,Le.jsx)("p",{children:e.description})]})]}),(0,Le.jsx)("div",{className:"courses-grid",children:e.items&&e.items.map(t=>{const s="".concat(e.type,"_").concat(t.id);return(0,Le.jsx)(Xt,{item:t,onSubscribe:S,formatPrice:I,isSubscribed:y.has(s)},t.id)})})]},e.id))}),p&&h&&(0,Le.jsx)("div",{className:"modal-overlay",children:(0,Le.jsxs)("div",{className:"modal-content subscription-modal",children:[(0,Le.jsxs)("div",{className:"modal-header",children:[(0,Le.jsxs)("h3",{children:["Subscribe to ",h.name]}),(0,Le.jsx)("button",{className:"btn-close",onClick:()=>m(!1),children:"\xd7"})]}),(0,Le.jsxs)("div",{className:"modal-body",children:[(0,Le.jsxs)("div",{className:"course-details",children:[(0,Le.jsx)("p",{children:h.description}),(0,Le.jsxs)("div",{className:"course-stats-modal",children:[(0,Le.jsxs)("div",{className:"stat",children:[(0,Le.jsx)("span",{className:"stat-number",children:h.subjectCount}),(0,Le.jsx)("span",{className:"stat-label",children:"Subjects"})]}),(0,Le.jsxs)("div",{className:"stat",children:[(0,Le.jsx)("span",{className:"stat-number",children:h.topicCount}),(0,Le.jsx)("span",{className:"stat-label",children:"Topics"})]}),(0,Le.jsxs)("div",{className:"stat",children:[(0,Le.jsx)("span",{className:"stat-number",children:h.moduleCount}),(0,Le.jsx)("span",{className:"stat-label",children:"Modules"})]}),(0,Le.jsxs)("div",{className:"stat",children:[(0,Le.jsx)("span",{className:"stat-number",children:h.chapterCount}),(0,Le.jsx)("span",{className:"stat-label",children:"Chapters"})]}),(0,Le.jsxs)("div",{className:"stat",children:[(0,Le.jsx)("span",{className:"stat-number",children:h.questionCount}),(0,Le.jsx)("span",{className:"stat-label",children:"Questions"})]})]})]}),(0,Le.jsxs)("div",{className:"pricing-selection",children:[(0,Le.jsx)("h4",{children:"Choose Subscription Plan"}),(0,Le.jsxs)("div",{className:"pricing-options-modal",children:[(0,Le.jsxs)("label",{className:"pricing-option-modal",children:[(0,Le.jsx)("input",{type:"radio",name:"pricing",value:"monthly",checked:"monthly"===x,onChange:e=>g(e.target.value)}),(0,Le.jsxs)("div",{className:"pricing-card",children:[(0,Le.jsxs)("div",{className:"pricing-header",children:[(0,Le.jsx)("span",{className:"pricing-period",children:"Monthly"}),(0,Le.jsx)("span",{className:"pricing-amount",children:I(h.pricing.monthlyFinalPrice||0)})]}),(0,Le.jsx)("p",{className:"pricing-description",children:"Perfect for trying out the course"})]})]}),(0,Le.jsxs)("label",{className:"pricing-option-modal",children:[(0,Le.jsx)("input",{type:"radio",name:"pricing",value:"quarterly",checked:"quarterly"===x,onChange:e=>g(e.target.value)}),(0,Le.jsxs)("div",{className:"pricing-card recommended",children:[(0,Le.jsxs)("div",{className:"pricing-header",children:[(0,Le.jsx)("span",{className:"pricing-period",children:"Quarterly"}),(0,Le.jsx)("span",{className:"pricing-amount",children:I(h.pricing.quarterlyFinalPrice||0)}),(null===(e=h.pricing)||void 0===e?void 0:e.quarterlyDiscountPercent)>0&&(0,Le.jsxs)("span",{className:"discount",children:[h.pricing.quarterlyDiscountPercent,"% OFF"]})]}),(0,Le.jsx)("p",{className:"pricing-description",children:"Great value for committed learners"})]})]}),(0,Le.jsxs)("label",{className:"pricing-option-modal",children:[(0,Le.jsx)("input",{type:"radio",name:"pricing",value:"yearly",checked:"yearly"===x,onChange:e=>g(e.target.value)}),(0,Le.jsxs)("div",{className:"pricing-card best-value",children:[(0,Le.jsxs)("div",{className:"pricing-header",children:[(0,Le.jsx)("span",{className:"pricing-period",children:"Yearly"}),(0,Le.jsx)("span",{className:"pricing-amount",children:I(h.pricing.yearlyFinalPrice||0)}),(null===(t=h.pricing)||void 0===t?void 0:t.yearlyDiscountPercent)>0&&(0,Le.jsxs)("span",{className:"discount",children:[h.pricing.yearlyDiscountPercent,"% OFF"]})]}),(0,Le.jsx)("p",{className:"pricing-description",children:"Best value for serious students"})]})]})]})]}),(0,Le.jsxs)("div",{className:"total-amount",children:[(0,Le.jsxs)("div",{className:"amount-breakdown",children:[(0,Le.jsxs)("span",{children:["Plan: ",x.charAt(0).toUpperCase()+x.slice(1)]}),(0,Le.jsx)("span",{children:I(h.pricing[x+"FinalPrice"]||h.pricing[x+"Price"]||0)})]}),(0,Le.jsxs)("div",{className:"amount-total",children:[(0,Le.jsx)("span",{children:"Total Amount"}),(0,Le.jsx)("span",{children:I(h.pricing[x+"FinalPrice"]||h.pricing[x+"Price"]||0)})]})]})]}),(0,Le.jsxs)("div",{className:"modal-footer",children:[(0,Le.jsx)("button",{className:"btn btn-secondary",onClick:()=>m(!1),children:"Cancel"}),(0,Le.jsx)("button",{type:"button",className:"btn btn-primary",onClick:e=>C(e),disabled:d,children:d?"Processing...":"Proceed to Payment"})]})]})})]})},es=()=>{var e,t,s;const{token:a,addNotification:r,user:i,isAuthenticated:l}=(0,Pe.nm)(),[o,c]=(0,n.useState)([]),[d,u]=(0,n.useState)([]),[p,m]=(0,n.useState)(!1),[h,f]=(0,n.useState)(null),[x,g]=(0,n.useState)(!1),[v,b]=(0,n.useState)("ALL"),[y,j]=(0,n.useState)(!1),[N,w]=(0,n.useState)("MONTHLY");(0,n.useEffect)(()=>{k(),S()},[a]);const k=async()=>{if(a)try{m(!0),console.log("\ud83d\udce5 Loading subscriptions from API...");const e=await(async e=>{const t="".concat(Xe.tE,"/api/student/subscriptions/my-subscriptions"),s={accept:"*/*",Authorization:"Bearer ".concat(e)},a=await fetch(t,{headers:s});if(!a.ok)throw new Error("Failed to fetch subscriptions: ".concat(a.status));return await a.json()})(a);console.log("\ud83d\udce5 Subscriptions loaded:",e);const t=Array.isArray(e)?e:e.subscriptions||[];c(t)}catch(e){console.error("Error loading subscriptions:",e),r({type:"error",message:"Failed to load subscriptions: "+e.message,duration:5e3})}finally{m(!1)}},S=async()=>{if(a)try{console.log("\ud83d\udce5 Loading expiring subscriptions from API...");const e=await(async e=>{const t="".concat(Xe.tE,"/api/student/subscriptions/expiring-soon"),s={accept:"*/*",Authorization:"Bearer ".concat(e)},a=await fetch(t,{headers:s});if(!a.ok)throw new Error("Failed to fetch expiring subscriptions: ".concat(a.status));return await a.json()})(a);console.log("\ud83d\udce5 Expiring subscriptions loaded:",e);const t=Array.isArray(e)?e:e.expiringSubscriptions||[];u(t)}catch(e){console.error("Error loading expiring subscriptions:",e)}},C=e=>{if(void 0!==e.remainingDays)return e.remainingDays;const t=new Date,s=new Date(e.expiryDate)-t;return Math.ceil(s/864e5)},I=e=>new Date(e).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}),A=e=>{const t=C(e);return e.isActive&&"CANCELLED"!==e.status?t<=0||"EXPIRED"===e.status?"status-expired":t<=7?"status-expiring":"status-active":"status-cancelled"},E=e=>{const t=C(e);return e.isActive&&"CANCELLED"!==e.status?t<=0||"EXPIRED"===e.status?"Expired":t<=7?"Expiring in ".concat(t," days"):"Active":"Cancelled"},T=async e=>{if(window.confirm("Are you sure you want to cancel this subscription? This action cannot be undone."))try{m(!0),console.log("\ud83d\udeab Cancelling subscription:",e);const t=await(async(e,t)=>{const s="".concat(Xe.tE,"/api/student/subscriptions/").concat(t,"/cancel"),a={Authorization:"Bearer ".concat(e)},n=await fetch(s,{method:"PUT",headers:a});if(!n.ok)throw new Error("Failed to cancel subscription: ".concat(n.status));return await n.json()})(a,e);console.log("\ud83d\udeab Cancel response:",t),r({type:"success",message:t.message||"Subscription cancelled successfully",duration:5e3}),await k(),g(!1)}catch(t){console.error("Error cancelling subscription:",t),r({type:"error",message:"Failed to cancel subscription: "+t.message,duration:5e3})}finally{m(!1)}},P=async e=>{if(e&&(e.preventDefault(),e.stopPropagation()),!h)return;const t=a,s=i,n=l;if(console.log("\ud83d\udd35 RENEWAL INITIATED - Starting renewal flow"),console.log("\ud83d\udd35 Auth state captured:",{hasToken:!!t,hasUser:!!s,isAuthenticated:n,username:null===s||void 0===s?void 0:s.username}),t){t&&localStorage.setItem("token",t),s&&localStorage.setItem("user",JSON.stringify(s)),console.log("\ud83d\udd35 Auth data backed up to localStorage");try{var o;m(!0),console.log("\ud83d\udd35 Renewing subscription:",h.id,"Plan:",N),r({type:"info",message:"Creating renewal order...",duration:3e3});const e=await(async(e,t,s)=>{const a="".concat(Xe.tE,"/api/student/subscriptions/").concat(t,"/renew"),n={"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},r=await fetch(a,{method:"POST",headers:n,body:JSON.stringify({planType:s})});if(!r.ok)throw new Error("Failed to renew subscription: ".concat(r.status));return await r.json()})(t,h.id,N);if(console.log("\ud83d\udd35 Renewal order created:",null===(o=e.order)||void 0===o?void 0:o.id),console.log("\ud83d\udd35 Full renewal response:",e),(e.callback_url||e.redirect_url||e.return_url)&&console.warn("\u26a0\ufe0f Backend response contains redirect URL:",{callback_url:e.callback_url,redirect_url:e.redirect_url,return_url:e.return_url}),!e.order||!e.order.id)throw new Error("Failed to create renewal order");console.log("\ud83d\udd35 Order notes (raw):",e.order.notes),console.log("\ud83d\udd35 Note: subscriptionId not needed - backend creates new subscription after payment verification"),console.log("\ud83d\udd35 Loading Razorpay script...");if(!await Gt())throw new Error("Failed to load Razorpay script");if(!window.Razorpay)throw new Error("Razorpay not available");console.log("\ud83d\udd35 Opening Razorpay modal for renewal..."),window.__COAXIAL_AUTH__={token:t,user:s,isAuthenticated:n},console.log("\ud83d\udd35 Auth saved to window global:",!!window.__COAXIAL_AUTH__);const a={key:e.keyId||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_RAZORPAY_KEY_ID,amount:e.order.amount,currency:"INR",order_id:e.order.id,name:"Coaxial LMS",description:"Renewal: ".concat(h.entityName),redirect:!1,callback_url:null,handler:async function(e){var s;console.log("\ud83d\udd35 HANDLER CALLED - Renewal payment response received from Razorpay");const a=t||(null===(s=window.__COAXIAL_AUTH__)||void 0===s?void 0:s.token);console.log("\ud83d\udd35 Handler - Token available:",!!a);try{console.log("\ud83d\udd35 Renewal payment successful from Razorpay!",e),console.log("\ud83d\udd35 Using token:",!!a);const t={razorpay_order_id:e.razorpay_order_id,razorpay_payment_id:e.razorpay_payment_id,razorpay_signature:e.razorpay_signature};console.log("\ud83d\udd35 Sending verification data (NO subscriptionId):",t),console.log("\ud83d\udd35 About to call verifyPayment API for renewal...");const s=await Jt(a,t);if(console.log("\u2705 Renewal verification API returned!"),console.log("\u2705 Renewal verification result:",s),console.log("\u2705 Renewal verification success?:",null===s||void 0===s?void 0:s.success),console.log("\u2705 New subscription created:",null===s||void 0===s?void 0:s.subscription),!s.success||!s.subscription)throw new Error("Renewal verification failed");{const e=s.subscription;console.log("\u2705 New subscription ID from renewal:",e.id);const t=localStorage.getItem("token"),a=localStorage.getItem("user");console.log("\u2705 RENEWAL SUCCESS - Token exists:",!!t,"User exists:",!!a),t&&sessionStorage.setItem("token_backup",t),a&&sessionStorage.setItem("user_backup",a),"/dashboard/student"!==window.location.pathname&&(console.warn("\u26a0\ufe0f Navigation detected! Forcing back to student dashboard"),window.history.pushState(null,"","/dashboard/student")),r({type:"success",message:"\ud83c\udf89 Subscription renewed successfully!",duration:5e3}),setTimeout(()=>{j(!1),f(null),m(!1)},100),setTimeout(()=>{k()},200)}}catch(n){console.error("\u274c RENEWAL VERIFICATION ERROR CAUGHT:",n),console.error("\u274c Error type:",n.constructor.name),console.error("\u274c Error message:",n.message),console.error("\u274c Error stack:",n.stack),console.error("\u274c Full error object:",JSON.stringify(n,Object.getOwnPropertyNames(n))),r({type:"warning",message:"Payment received! Renewal activation in progress...",duration:6e3}),j(!1),m(!1)}},prefill:{name:(null===i||void 0===i?void 0:i.name)||"",email:(null===i||void 0===i?void 0:i.email)||"",contact:""},theme:{color:"#3399cc"},modal:{ondismiss:function(){r({type:"warning",message:"Renewal cancelled",duration:4e3}),m(!1)},escape:!1,backdrop_close:!1},notes:{stay_on_page:"true"}};console.log("\ud83d\udd35 Creating Razorpay instance for renewal with options:",{hasKey:!!a.key,hasOrderId:!!a.order_id,hasHandler:!!a.handler});const l=new window.Razorpay(a);l.on("payment.failed",function(e){console.error("\u274c Renewal payment failed:",e.error),r({type:"error",message:"Renewal payment failed: "+e.error.description,duration:6e3}),m(!1)}),console.log("\ud83d\udd35 Opening Razorpay checkout for renewal..."),l.open(),console.log("\ud83d\udd35 Razorpay renewal checkout opened successfully")}catch(c){console.error("Error renewing subscription:",c),r({type:"error",message:"Failed to renew subscription: "+c.message,duration:5e3}),m(!1)}}else r({type:"error",message:"Authentication required",duration:5e3})},L=o.filter(e=>"ALL"===v||("ACTIVE"===v?e.isActive&&"ACTIVE"===e.status:"EXPIRED"===v?"EXPIRED"===e.status||C(e)<=0:"CANCELLED"!==v||"CANCELLED"===e.status)),R={total:o.length,active:o.filter(e=>e.isActive&&"ACTIVE"===e.status&&C(e)>0).length,expiring:d.length,totalSpent:o.reduce((e,t)=>e+t.amount,0)};return(0,Le.jsxs)("div",{className:"student-subscription-dashboard",children:[(0,Le.jsx)("div",{className:"page-header",children:(0,Le.jsxs)("div",{children:[(0,Le.jsx)("h2",{children:"My Subscriptions"}),(0,Le.jsx)("p",{children:"Manage all your course subscriptions"})]})}),d.length>0&&(0,Le.jsxs)("div",{className:"expiring-banner",children:[(0,Le.jsx)("div",{className:"banner-icon",children:"\u26a0\ufe0f"}),(0,Le.jsxs)("div",{className:"banner-content",children:[(0,Le.jsx)("strong",{children:"Renewal Reminder:"})," You have ",d.length," subscription(s) expiring soon!",(0,Le.jsx)("button",{className:"btn-link",onClick:()=>b("EXPIRED"),children:"View Details"})]})]}),(0,Le.jsxs)("div",{className:"stats-grid",children:[(0,Le.jsxs)("div",{className:"stat-card",children:[(0,Le.jsx)("div",{className:"stat-icon",children:"\ud83d\udcda"}),(0,Le.jsxs)("div",{className:"stat-content",children:[(0,Le.jsx)("div",{className:"stat-value",children:R.total}),(0,Le.jsx)("div",{className:"stat-label",children:"Total Subscriptions"})]})]}),(0,Le.jsxs)("div",{className:"stat-card active",children:[(0,Le.jsx)("div",{className:"stat-icon",children:"\u2705"}),(0,Le.jsxs)("div",{className:"stat-content",children:[(0,Le.jsx)("div",{className:"stat-value",children:R.active}),(0,Le.jsx)("div",{className:"stat-label",children:"Active"})]})]}),(0,Le.jsxs)("div",{className:"stat-card warning",children:[(0,Le.jsx)("div",{className:"stat-icon",children:"\u23f0"}),(0,Le.jsxs)("div",{className:"stat-content",children:[(0,Le.jsx)("div",{className:"stat-value",children:R.expiring}),(0,Le.jsx)("div",{className:"stat-label",children:"Expiring Soon"})]})]}),(0,Le.jsxs)("div",{className:"stat-card",children:[(0,Le.jsx)("div",{className:"stat-icon",children:"\ud83d\udcb0"}),(0,Le.jsxs)("div",{className:"stat-content",children:[(0,Le.jsxs)("div",{className:"stat-value",children:["\u20b9",R.totalSpent.toFixed(2)]}),(0,Le.jsx)("div",{className:"stat-label",children:"Total Spent"})]})]})]}),(0,Le.jsx)("div",{className:"filters-section",children:(0,Le.jsxs)("div",{className:"filter-tabs",children:[(0,Le.jsxs)("button",{className:"filter-tab ".concat("ALL"===v?"active":""),onClick:()=>b("ALL"),children:["All (",o.length,")"]}),(0,Le.jsxs)("button",{className:"filter-tab ".concat("ACTIVE"===v?"active":""),onClick:()=>b("ACTIVE"),children:["Active (",R.active,")"]}),(0,Le.jsx)("button",{className:"filter-tab ".concat("EXPIRED"===v?"active":""),onClick:()=>b("EXPIRED"),children:"Expired"}),(0,Le.jsx)("button",{className:"filter-tab ".concat("CANCELLED"===v?"active":""),onClick:()=>b("CANCELLED"),children:"Cancelled"})]})}),p&&0===o.length?(0,Le.jsxs)("div",{className:"loading-container",children:[(0,Le.jsx)("div",{className:"spinner"}),(0,Le.jsx)("p",{children:"Loading subscriptions..."})]}):0===L.length?(0,Le.jsxs)("div",{className:"empty-state",children:[(0,Le.jsx)("div",{className:"empty-icon",children:"\ud83d\udced"}),(0,Le.jsx)("h3",{children:"No Subscriptions Found"}),(0,Le.jsx)("p",{children:"You don't have any subscriptions yet. Browse our catalog to get started!"}),(0,Le.jsx)("button",{className:"btn btn-primary",children:"Browse Catalog"})]}):(0,Le.jsx)("div",{className:"subscriptions-grid",children:L.map(e=>(0,Le.jsxs)("div",{className:"subscription-card",children:[(0,Le.jsxs)("div",{className:"card-header",children:[(0,Le.jsxs)("div",{className:"card-title",children:[(0,Le.jsx)("h4",{children:e.entityName}),(0,Le.jsx)("span",{className:"status-badge ".concat(A(e)),children:E(e)})]}),(0,Le.jsx)("div",{className:"card-meta",children:(0,Le.jsx)("span",{className:"course-type",children:e.courseTypeName})})]}),(0,Le.jsxs)("div",{className:"card-body",children:[(0,Le.jsxs)("div",{className:"info-row",children:[(0,Le.jsx)("span",{className:"label",children:"Course:"}),(0,Le.jsx)("span",{className:"value",children:e.courseName})]}),(0,Le.jsxs)("div",{className:"info-row",children:[(0,Le.jsx)("span",{className:"label",children:"Plan:"}),(0,Le.jsx)("span",{className:"value",children:e.planType})]}),(0,Le.jsxs)("div",{className:"info-row",children:[(0,Le.jsx)("span",{className:"label",children:"Started:"}),(0,Le.jsx)("span",{className:"value",children:I(e.startDate)})]}),(0,Le.jsxs)("div",{className:"info-row",children:[(0,Le.jsx)("span",{className:"label",children:"Expires:"}),(0,Le.jsx)("span",{className:"value",children:I(e.expiryDate)})]}),(0,Le.jsxs)("div",{className:"info-row",children:[(0,Le.jsx)("span",{className:"label",children:"Days Remaining:"}),(0,Le.jsxs)("span",{className:"value ".concat(C(e)<=7?"text-warning":""),children:[Math.max(0,C(e))," days"]})]})]}),(0,Le.jsxs)("div",{className:"card-footer",children:[(0,Le.jsxs)("div",{className:"amount",children:["\u20b9",e.amount.toFixed(2)]}),(0,Le.jsxs)("div",{className:"actions",children:[e.isActive&&C(e)>0&&(0,Le.jsx)("button",{className:"btn btn-sm btn-outline",onClick:()=>{f(e),g(!0)},children:"View Details"}),(C(e)<=7||!e.isActive)&&(0,Le.jsx)("button",{className:"btn btn-sm btn-primary",onClick:()=>(e=>{f(e),j(!0)})(e),children:"Renew Now"})]})]})]},e.id))}),x&&h&&(0,Le.jsx)("div",{className:"modal-overlay",onClick:()=>g(!1),children:(0,Le.jsxs)("div",{className:"modal-content subscription-details-modal",onClick:e=>e.stopPropagation(),children:[(0,Le.jsxs)("div",{className:"modal-header",children:[(0,Le.jsx)("h3",{children:"Subscription Details"}),(0,Le.jsx)("button",{className:"btn-close",onClick:()=>g(!1),children:"\xd7"})]}),(0,Le.jsx)("div",{className:"modal-body",children:(0,Le.jsxs)("div",{className:"details-section",children:[(0,Le.jsx)("h4",{children:h.entityName}),(0,Le.jsxs)("p",{className:"course-info",children:[h.courseTypeName," \u2022 ",h.courseName]}),(0,Le.jsxs)("div",{className:"details-grid",children:[(0,Le.jsxs)("div",{className:"detail-item",children:[(0,Le.jsx)("span",{className:"detail-label",children:"Plan Type"}),(0,Le.jsx)("span",{className:"detail-value",children:h.planType})]}),(0,Le.jsxs)("div",{className:"detail-item",children:[(0,Le.jsx)("span",{className:"detail-label",children:"Amount Paid"}),(0,Le.jsxs)("span",{className:"detail-value",children:["\u20b9",h.amount.toFixed(2)]})]}),(0,Le.jsxs)("div",{className:"detail-item",children:[(0,Le.jsx)("span",{className:"detail-label",children:"Duration"}),(0,Le.jsxs)("span",{className:"detail-value",children:[h.durationDays," days"]})]}),(0,Le.jsxs)("div",{className:"detail-item",children:[(0,Le.jsx)("span",{className:"detail-label",children:"Status"}),(0,Le.jsx)("span",{className:"status-badge ".concat(A(h)),children:E(h)})]}),(0,Le.jsxs)("div",{className:"detail-item",children:[(0,Le.jsx)("span",{className:"detail-label",children:"Start Date"}),(0,Le.jsx)("span",{className:"detail-value",children:I(h.startDate)})]}),(0,Le.jsxs)("div",{className:"detail-item",children:[(0,Le.jsx)("span",{className:"detail-label",children:"Expiry Date"}),(0,Le.jsx)("span",{className:"detail-value",children:I(h.expiryDate)})]}),(0,Le.jsxs)("div",{className:"detail-item",children:[(0,Le.jsx)("span",{className:"detail-label",children:"Payment ID"}),(0,Le.jsx)("span",{className:"detail-value small",children:h.razorpay_payment_id})]}),(0,Le.jsxs)("div",{className:"detail-item",children:[(0,Le.jsx)("span",{className:"detail-label",children:"Order ID"}),(0,Le.jsx)("span",{className:"detail-value small",children:h.razorpay_order_id})]})]})]})}),(0,Le.jsxs)("div",{className:"modal-footer",children:[(0,Le.jsx)("button",{className:"btn btn-secondary",onClick:()=>g(!1),children:"Close"}),h.isActive&&(0,Le.jsx)("button",{className:"btn btn-danger",onClick:()=>T(h.id),disabled:p,children:p?"Cancelling...":"Cancel Subscription"})]})]})}),y&&h&&(0,Le.jsx)("div",{className:"modal-overlay",onClick:()=>j(!1),children:(0,Le.jsxs)("div",{className:"modal-content renew-modal",onClick:e=>e.stopPropagation(),children:[(0,Le.jsxs)("div",{className:"modal-header",children:[(0,Le.jsx)("h3",{children:"Renew Subscription"}),(0,Le.jsx)("button",{className:"btn-close",onClick:()=>j(!1),children:"\xd7"})]}),(0,Le.jsxs)("div",{className:"modal-body",children:[(0,Le.jsxs)("div",{className:"renew-info",children:[(0,Le.jsx)("h4",{children:h.entityName}),(0,Le.jsxs)("p",{children:[h.courseTypeName," \u2022 ",h.courseName]})]}),(0,Le.jsxs)("div",{className:"plan-selection",children:[(0,Le.jsx)("h5",{children:"Select Renewal Plan"}),(0,Le.jsxs)("div",{className:"plan-options",children:[(0,Le.jsxs)("label",{className:"plan-option ".concat("MONTHLY"===N?"selected":""),children:[(0,Le.jsx)("input",{type:"radio",name:"renewPlan",value:"MONTHLY",checked:"MONTHLY"===N,onChange:e=>w(e.target.value)}),(0,Le.jsxs)("div",{className:"plan-details",children:[(0,Le.jsx)("span",{className:"plan-name",children:"Monthly"}),(0,Le.jsxs)("span",{className:"plan-price",children:["\u20b9",(null===(e=h.monthlyPrice)||void 0===e?void 0:e.toFixed(2))||"0.00","/month"]})]})]}),(0,Le.jsxs)("label",{className:"plan-option ".concat("QUARTERLY"===N?"selected":""),children:[(0,Le.jsx)("input",{type:"radio",name:"renewPlan",value:"QUARTERLY",checked:"QUARTERLY"===N,onChange:e=>w(e.target.value)}),(0,Le.jsxs)("div",{className:"plan-details",children:[(0,Le.jsx)("span",{className:"plan-name",children:"Quarterly"}),(0,Le.jsxs)("span",{className:"plan-price",children:["\u20b9",(null===(t=h.quarterlyPrice)||void 0===t?void 0:t.toFixed(2))||"0.00","/3 months"]}),h.quarterlyPrice&&h.monthlyPrice&&h.quarterlyPrice<3*h.monthlyPrice&&(0,Le.jsxs)("span",{className:"plan-badge",children:["Save ",Math.round(100*(1-h.quarterlyPrice/(3*h.monthlyPrice))),"%"]})]})]}),(0,Le.jsxs)("label",{className:"plan-option ".concat("YEARLY"===N?"selected":""),children:[(0,Le.jsx)("input",{type:"radio",name:"renewPlan",value:"YEARLY",checked:"YEARLY"===N,onChange:e=>w(e.target.value)}),(0,Le.jsxs)("div",{className:"plan-details",children:[(0,Le.jsx)("span",{className:"plan-name",children:"Yearly"}),(0,Le.jsxs)("span",{className:"plan-price",children:["\u20b9",(null===(s=h.yearlyPrice)||void 0===s?void 0:s.toFixed(2))||"0.00","/year"]}),h.yearlyPrice&&h.monthlyPrice&&h.yearlyPrice<12*h.monthlyPrice&&(0,Le.jsxs)("span",{className:"plan-badge",children:["Save ",Math.round(100*(1-h.yearlyPrice/(12*h.monthlyPrice))),"%"]})]})]})]})]})]}),(0,Le.jsxs)("div",{className:"modal-footer",children:[(0,Le.jsx)("button",{className:"btn btn-secondary",onClick:()=>j(!1),children:"Cancel"}),(0,Le.jsx)("button",{type:"button",className:"btn btn-primary",onClick:e=>P(e),disabled:p,children:p?"Processing...":"Proceed to Payment"})]})]})})]})},ts=()=>{var e,t,s,a,r,i;const{token:l,addNotification:o}=(0,Pe.nm)(),[c,d]=(0,n.useState)([]),[u,p]=(0,n.useState)(null),[m,h]=(0,n.useState)({subjects:[],topics:[],modules:[],chapters:[]}),[f,x]=(0,n.useState)(!1),[g,v]=(0,n.useState)({subjectId:null,topicId:null,moduleId:null,chapterId:null}),[b,y]=(0,n.useState)({subjects:!1,topics:!1,modules:!1,chapters:!1}),[j,N]=(0,n.useState)(!1),[w,k]=(0,n.useState)(null),[S,C]=(0,n.useState)("video"),[I,A]=(0,n.useState)(1),[E,T]=(0,n.useState)(100),[P,L]=(0,n.useState)(1),[R,M]=(0,n.useState)(null),[D,F]=(0,n.useState)(!1),[z,O]=(0,n.useState)(0),[_,q]=(0,n.useState)(0),[B,U]=(0,n.useState)(!1),[W,Q]=(0,n.useState)(!1),H=(0,n.useRef)(null),V=(0,n.useRef)(null),Y=(0,n.useRef)(null),$=(0,n.useRef)(null),J=e=>{y(t=>(0,Ue.A)((0,Ue.A)({},t),{},{[e]:!t[e]}))},K=(0,n.useRef)(!1),G=(0,n.useRef)(!1),X=(0,n.useRef)(!1),Z=((0,n.useRef)(!1),(0,n.useRef)(null)),ee=(0,n.useRef)(null),te=(0,n.useRef)(null),se=(0,n.useCallback)(async()=>{if(l)try{x(!0),console.log("\ud83d\udce5 Loading active subscriptions from API...");const e=await(async e=>{const t="".concat(Xe.tE,"/api/student/subscriptions/active"),s={accept:"*/*",Authorization:"Bearer ".concat(e)},a=await fetch(t,{headers:s});if(!a.ok)throw new Error("Failed to fetch active subscriptions: ".concat(a.status));return await a.json()})(l);console.log("\ud83d\udce5 Active subscriptions loaded:",e);const t=(Array.isArray(e)?e:[]).filter(e=>e.isActive);console.log("\u2705 Found ".concat(t.length," active subscriptions")),d(t)}catch(e){console.error("\u274c Error loading subscriptions:",e),o("Failed to load subscriptions: "+e.message,"error"),d([])}finally{x(!1)}},[l,o]);(0,n.useEffect)(()=>{se()},[se]),(0,n.useEffect)(()=>{u&&ae()},[u]);const ae=async()=>{if(u&&l)try{x(!0),console.log("\ud83d\udce5 Loading subjects for subscription:",u.entityName);const e=await(async(e,t,s)=>{const a="".concat(Xe.tE,"/api/student/course-content/subjects?entityId=").concat(t,"&courseTypeId=").concat(s),n={accept:"*/*",Authorization:"Bearer ".concat(e)},r=await fetch(a,{headers:n});if(!r.ok)throw new Error("Failed to fetch subjects: ".concat(r.status));return await r.json()})(l,u.entityId,u.courseTypeId);console.log("\ud83d\udce5 Subjects API response:",e);const t=(e.subjects||[]).map(e=>({id:e.subjectId,linkageId:e.linkageId,name:e.subjectName,subjectName:e.subjectName,description:e.subjectDescription||"No description available",topicCount:0,moduleCount:0,chapterCount:0,progress:0,status:"not-started"}));console.log("\u2705 Loaded ".concat(t.length," subjects")),h(e=>(0,Ue.A)((0,Ue.A)({},e),{},{subjects:t})),v({subjectId:null,topicId:null,moduleId:null,chapterId:null})}catch(e){console.error("\u274c Error loading subjects:",e),o("Failed to load subjects: "+e.message,"error"),h(e=>(0,Ue.A)((0,Ue.A)({},e),{},{subjects:[]}))}finally{x(!1)}},ne=async(e,t)=>{if(!K.current&&l&&u)try{K.current=!0,console.log("\ud83d\udce5 Loading topics for subject:",e,"linkageId:",t);const s=await(async(e,t,s)=>{const a="".concat(Xe.tE,"/api/student/course-content/topics?courseTypeId=").concat(t,"&linkageId=").concat(s),n={accept:"*/*",Authorization:"Bearer ".concat(e)},r=await fetch(a,{headers:n});if(!r.ok)throw new Error("Failed to fetch topics: ".concat(r.status));return await r.json()})(l,u.courseTypeId,t);console.log("\ud83d\udce5 Topics API response:",s);const a=(s.topics||[]).map(e=>({id:e.id||e.topicId,name:e.name||e.topicName,linkageId:e.linkageId,subjectId:e.subjectId,subjectName:e.subjectName,description:e.description||""}));console.log("\u2705 Loaded ".concat(a.length," topics")),h(e=>(0,Ue.A)((0,Ue.A)({},e),{},{topics:a})),v(e=>(0,Ue.A)((0,Ue.A)({},e),{},{subjectId:t,topicId:null,moduleId:null,chapterId:null})),setTimeout(()=>{Z.current&&Z.current.scrollIntoView({behavior:"smooth",block:"start"})},100)}catch(s){console.error("\u274c Error loading topics:",s),o("Failed to load topics: "+s.message,"error"),h(e=>(0,Ue.A)((0,Ue.A)({},e),{},{topics:[]}))}finally{K.current=!1}},re=async e=>{if(!G.current&&l)try{G.current=!0,console.log("\ud83d\udce5 Loading modules for topic:",e);const t=await(async(e,t)=>{const s="".concat(Xe.tE,"/api/student/course-content/modules?topicId=").concat(t),a={accept:"*/*",Authorization:"Bearer ".concat(e)},n=await fetch(s,{headers:a});if(!n.ok)throw new Error("Failed to fetch modules: ".concat(n.status));return await n.json()})(l,e);console.log("\ud83d\udce5 Modules API response:",t);const s=(t.modules||[]).map(e=>({id:e.id||e.moduleId,name:e.name||e.moduleName,topicId:e.topicId,topicName:e.topicName,description:e.description||""}));console.log("\u2705 Loaded ".concat(s.length," modules")),h(e=>(0,Ue.A)((0,Ue.A)({},e),{},{modules:s})),v(t=>(0,Ue.A)((0,Ue.A)({},t),{},{topicId:e,moduleId:null,chapterId:null})),setTimeout(()=>{ee.current&&ee.current.scrollIntoView({behavior:"smooth",block:"start"})},100)}catch(t){console.error("\u274c Error loading modules:",t),o("Failed to load modules: "+t.message,"error"),h(e=>(0,Ue.A)((0,Ue.A)({},e),{},{modules:[]}))}finally{G.current=!1}},ie=async e=>{if(!X.current&&l)try{X.current=!0,console.log("\ud83d\udce5 Loading chapters for module:",e);const t=await(async(e,t)=>{const s="".concat(Xe.tE,"/api/student/course-content/chapters?moduleId=").concat(t),a={accept:"*/*",Authorization:"Bearer ".concat(e)},n=await fetch(s,{headers:a});if(!n.ok)throw new Error("Failed to fetch chapters: ".concat(n.status));return await n.json()})(l,e);console.log("\ud83d\udce5 Chapters API response:",t);const s=(t.chapters||[]).map(e=>{var t,s;return{id:e.id,name:e.name,description:e.description||"No description available",moduleId:e.moduleId,moduleName:e.moduleName,topicId:e.topicId,topicName:e.topicName,subjectId:e.subjectId,subjectName:e.subjectName,displayOrder:e.displayOrder,videos:e.videos||[],hasVideo:(e.videos||[]).length>0,videoUrl:(null===(t=(e.videos||[])[0])||void 0===t?void 0:t.youtubeLink)||null,documents:e.documents||[],hasPdf:(e.documents||[]).length>0,pdfUrl:(null===(s=(e.documents||[])[0])||void 0===s?void 0:s.filePath)||null,hasQuestions:!1,questionCount:0,status:"not-started",progress:0,duration:"45 min"}});console.log("\u2705 Loaded ".concat(s.length," chapters")),h(e=>(0,Ue.A)((0,Ue.A)({},e),{},{chapters:s})),v(t=>(0,Ue.A)((0,Ue.A)({},t),{},{moduleId:e,chapterId:null})),setTimeout(()=>{te.current&&te.current.scrollIntoView({behavior:"smooth",block:"start"})},100)}catch(t){console.error("\u274c Error loading chapters:",t),o("Failed to load chapters: "+t.message,"error"),h(e=>(0,Ue.A)((0,Ue.A)({},e),{},{chapters:[]}))}finally{X.current=!1}},le=e=>e.entityName||"Unknown Subscription",oe=e=>"".concat(e.courseTypeName," - ").concat(e.courseName),ce=e=>e.subjectName||e.name||"Unknown Subject";(0,n.useEffect)(()=>((async()=>{if(!w||!w.documents||0===w.documents.length||"pdf"!==S)return;const e=w.documents[_];if(e&&e.filePath)try{F(!0),console.log("\ud83d\udce5 Fetching PDF from:",e.filePath);const t=e.filePath.startsWith("http")?e.filePath:"http://localhost:8080".concat(e.filePath),s=await fetch(t);if(!s.ok)throw new Error("HTTP ".concat(s.status,": ").concat(s.statusText));const a=await s.blob();console.log("\u2705 PDF fetched, size:",a.size),V.current&&URL.revokeObjectURL(V.current);const n=URL.createObjectURL(a);V.current=n,M(n),console.log("\u2705 PDF blob URL created")}catch(t){console.error("\u274c Error fetching PDF:",t),o("Failed to load PDF: "+t.message,"error"),M(null)}finally{F(!1)}})(),()=>{V.current&&(URL.revokeObjectURL(V.current),V.current=null,M(null))}),[w,S,_,o]);const de=()=>{N(!1),k(null),H.current&&H.current.pause(),V.current&&(URL.revokeObjectURL(V.current),V.current=null,M(null)),U(!1),Q(!1)},ue=()=>w&&m.chapters.length?m.chapters.findIndex(e=>e.id===w.id):-1,pe=e=>{const t={completed:{text:"Completed",class:"status-completed"},"in-progress":{text:"In Progress",class:"status-in-progress"},"not-started":{text:"Not Started",class:"status-not-started"}};return t[e]||t["not-started"]},me=e=>({subject:"\ud83d\udcda",topic:"\ud83d\udcd6",module:"\ud83d\udce6",chapter:"\ud83d\udcc3"}[e]||"\ud83d\udcc4"),he=()=>{const e=[];if(u&&e.push({label:le(u),onClick:()=>{v({subjectId:null,topicId:null,moduleId:null,chapterId:null}),h(e=>(0,Ue.A)((0,Ue.A)({},e),{},{topics:[],modules:[],chapters:[]}))}}),g.subjectId){const t=m.subjects.find(e=>e.linkageId===g.subjectId);t&&e.push({label:t.name,onClick:()=>{v(e=>(0,Ue.A)((0,Ue.A)({},e),{},{topicId:null,moduleId:null,chapterId:null})),h(e=>(0,Ue.A)((0,Ue.A)({},e),{},{modules:[],chapters:[]}))}})}if(g.topicId){const t=m.topics.find(e=>e.id===g.topicId);t&&e.push({label:t.name,onClick:()=>{v(e=>(0,Ue.A)((0,Ue.A)({},e),{},{moduleId:null,chapterId:null})),h(e=>(0,Ue.A)((0,Ue.A)({},e),{},{chapters:[]}))}})}if(g.moduleId){const t=m.modules.find(e=>e.id===g.moduleId);t&&e.push({label:t.name,onClick:null})}return e};return(0,Le.jsxs)("div",{className:"student-content-browser",children:[(0,Le.jsxs)("div",{className:"page-header",children:[(0,Le.jsx)("h2",{children:"\ud83d\udcda Content Browser"}),(0,Le.jsx)("p",{children:"Access your study materials, videos, PDFs, and practice questions"})]}),(0,Le.jsxs)("div",{className:"subscription-section",children:[(0,Le.jsx)("h3",{children:"\ud83d\udccb Select Your Subscription"}),f&&0===c.length?(0,Le.jsxs)("div",{className:"loading-state",children:[(0,Le.jsx)("div",{className:"spinner"}),(0,Le.jsx)("p",{children:"Loading subscriptions..."})]}):0===c.length?(0,Le.jsxs)("div",{className:"empty-state",children:[(0,Le.jsx)("div",{className:"empty-icon",children:"\ud83d\udced"}),(0,Le.jsx)("h4",{children:"No Active Subscriptions"}),(0,Le.jsx)("p",{children:"You don't have any active subscriptions. Please subscribe to a course to access content."})]}):(0,Le.jsx)("div",{className:"subscription-cards",children:c.filter(e=>e.isActive).map(e=>(0,Le.jsxs)("div",{className:"subscription-card ".concat((null===u||void 0===u?void 0:u.id)===e.id?"selected":""),onClick:()=>{p(e),h({subjects:[],topics:[],modules:[],chapters:[]}),v({subjectId:null,topicId:null,moduleId:null,chapterId:null})},children:[(0,Le.jsxs)("div",{className:"subscription-card-header",children:[(0,Le.jsx)("h4",{children:le(e)}),(0,Le.jsx)("span",{className:"subscription-badge active",children:"Active"})]}),(0,Le.jsx)("p",{className:"subscription-subtitle",children:oe(e)}),(0,Le.jsx)("div",{className:"subscription-meta",children:(0,Le.jsxs)("span",{className:"meta-item",children:[(0,Le.jsx)("span",{className:"meta-icon",children:"\ud83d\udcc5"}),(0,Le.jsxs)("span",{children:[new Date(e.startDate).toLocaleDateString()," - ",new Date(e.expiryDate).toLocaleDateString()]})]})})]},e.id))})]}),u&&he().length>0&&(0,Le.jsx)("div",{className:"breadcrumb-nav",children:(0,Le.jsx)("div",{className:"breadcrumb",children:he().map((e,t)=>(0,Le.jsxs)("span",{className:"breadcrumb-item",children:[t>0&&(0,Le.jsx)("span",{className:"breadcrumb-separator",children:"\u203a"}),e.onClick?(0,Le.jsx)("button",{className:"breadcrumb-link",onClick:e.onClick,children:e.label}):(0,Le.jsx)("span",{className:"breadcrumb-current",children:e.label})]},t))})}),u&&(0,Le.jsxs)("div",{className:"content-navigation",children:[(0,Le.jsxs)("div",{className:"content-section",children:[(0,Le.jsxs)("div",{className:"section-header",children:[(0,Le.jsxs)("h4",{children:[(0,Le.jsx)("span",{className:"section-icon",children:me("subject")}),"Subjects (",m.subjects.length,")"]}),m.subjects.length>0&&(0,Le.jsx)("button",{className:"collapse-btn",onClick:()=>J("subjects"),title:b.subjects?"Expand":"Collapse",children:b.subjects?"\u25bc":"\u25b2"})]}),0===m.subjects.length?(0,Le.jsx)("div",{className:"empty-message",children:"No subjects available for this subscription."}):!b.subjects&&(0,Le.jsx)("div",{className:"content-grid",children:m.subjects.map(e=>{pe(e.status);return(0,Le.jsxs)("div",{className:"content-card subject-card ".concat(g.subjectId===e.linkageId?"selected":""),onClick:()=>ne(e.linkageId||e.id,e.linkageId),children:[(0,Le.jsxs)("div",{className:"card-header-row",children:[(0,Le.jsx)("span",{className:"card-icon",children:me("subject")}),(0,Le.jsx)("h5",{className:"card-title",children:ce(e)})]}),(0,Le.jsx)("p",{className:"card-description",children:e.description||"No description available"}),(0,Le.jsxs)("div",{className:"card-stats",children:[e.topicCount>0&&(0,Le.jsxs)("span",{className:"stat-item",children:[(0,Le.jsx)("span",{className:"stat-icon",children:"\ud83d\udcd6"}),(0,Le.jsxs)("span",{children:[e.topicCount," Topics"]})]}),e.moduleCount>0&&(0,Le.jsxs)("span",{className:"stat-item",children:[(0,Le.jsx)("span",{className:"stat-icon",children:"\ud83d\udce6"}),(0,Le.jsxs)("span",{children:[e.moduleCount," Modules"]})]}),e.chapterCount>0&&(0,Le.jsxs)("span",{className:"stat-item",children:[(0,Le.jsx)("span",{className:"stat-icon",children:"\ud83d\udcc3"}),(0,Le.jsxs)("span",{children:[e.chapterCount," Chapters"]})]})]})]},e.linkageId||e.id)})})]}),g.subjectId&&(0,Le.jsxs)("div",{className:"content-section",ref:Z,children:[(0,Le.jsxs)("div",{className:"section-header",children:[(0,Le.jsxs)("h4",{children:[(0,Le.jsx)("span",{className:"section-icon",children:me("topic")}),"Topics (",m.topics.length,")"]}),m.topics.length>0&&(0,Le.jsx)("button",{className:"collapse-btn",onClick:()=>J("topics"),title:b.topics?"Expand":"Collapse",children:b.topics?"\u25bc":"\u25b2"})]}),0===m.topics.length?(0,Le.jsx)("div",{className:"empty-message",children:"No topics available for this subject."}):!b.topics&&(0,Le.jsx)("div",{className:"content-grid",children:m.topics.map(e=>(0,Le.jsxs)("div",{className:"content-card topic-card ".concat(g.topicId===e.id?"selected":""),onClick:()=>re(e.id),children:[(0,Le.jsxs)("div",{className:"card-header-row",children:[(0,Le.jsx)("span",{className:"card-icon",children:me("topic")}),(0,Le.jsx)("h5",{className:"card-title",children:e.name})]}),(0,Le.jsx)("p",{className:"card-description",children:e.description||"No description available"})]},e.id))})]}),g.topicId&&(0,Le.jsxs)("div",{className:"content-section",ref:ee,children:[(0,Le.jsxs)("div",{className:"section-header",children:[(0,Le.jsxs)("h4",{children:[(0,Le.jsx)("span",{className:"section-icon",children:me("module")}),"Modules (",m.modules.length,")"]}),m.modules.length>0&&(0,Le.jsx)("button",{className:"collapse-btn",onClick:()=>J("modules"),title:b.modules?"Expand":"Collapse",children:b.modules?"\u25bc":"\u25b2"})]}),0===m.modules.length?(0,Le.jsx)("div",{className:"empty-message",children:"No modules available for this topic."}):!b.modules&&(0,Le.jsx)("div",{className:"content-grid",children:m.modules.map(e=>(0,Le.jsxs)("div",{className:"content-card module-card ".concat(g.moduleId===e.id?"selected":""),onClick:()=>ie(e.id),children:[(0,Le.jsxs)("div",{className:"card-header-row",children:[(0,Le.jsx)("span",{className:"card-icon",children:me("module")}),(0,Le.jsx)("h5",{className:"card-title",children:e.name})]}),(0,Le.jsx)("p",{className:"card-description",children:e.description||"No description available"})]},e.id))})]}),g.moduleId&&(0,Le.jsxs)("div",{className:"content-section",ref:te,children:[(0,Le.jsxs)("div",{className:"section-header",children:[(0,Le.jsxs)("h4",{children:[(0,Le.jsx)("span",{className:"section-icon",children:me("chapter")}),"Chapters (",m.chapters.length,")"]}),m.chapters.length>0&&(0,Le.jsx)("button",{className:"collapse-btn",onClick:()=>J("chapters"),title:b.chapters?"Expand":"Collapse",children:b.chapters?"\u25bc":"\u25b2"})]}),0===m.chapters.length?(0,Le.jsx)("div",{className:"empty-message",children:"No chapters available for this module."}):!b.chapters&&(0,Le.jsx)("div",{className:"content-grid",children:m.chapters.map(e=>{const t=pe(e.status);return(0,Le.jsxs)("div",{className:"content-card chapter-card ".concat(g.chapterId===e.id?"selected":""),children:[(0,Le.jsxs)("div",{className:"card-header-row",children:[(0,Le.jsx)("span",{className:"card-icon",children:me("chapter")}),(0,Le.jsx)("span",{className:"status-badge ".concat(t.class),children:t.text})]}),(0,Le.jsx)("h5",{className:"card-title",children:e.name}),(0,Le.jsx)("p",{className:"card-description",children:e.description||"No description available"}),(0,Le.jsxs)("div",{className:"chapter-meta",children:[e.duration&&(0,Le.jsxs)("span",{className:"meta-tag",children:[(0,Le.jsx)("span",{className:"meta-icon",children:"\u23f1\ufe0f"}),e.duration]}),e.questionCount>0&&(0,Le.jsxs)("span",{className:"meta-tag",children:[(0,Le.jsx)("span",{className:"meta-icon",children:"\u2753"}),e.questionCount," Questions"]})]}),void 0!==e.progress&&(0,Le.jsxs)("div",{className:"progress-container",children:[(0,Le.jsx)("div",{className:"progress-bar-wrapper",children:(0,Le.jsx)("div",{className:"progress-bar-fill",style:{width:"".concat(e.progress,"%")}})}),(0,Le.jsxs)("span",{className:"progress-text",children:[e.progress,"% Complete"]})]}),(0,Le.jsx)("div",{className:"chapter-resources",children:(0,Le.jsxs)("div",{className:"resource-icons",children:[e.hasVideo&&(0,Le.jsxs)("span",{className:"resource-badge video",children:[(0,Le.jsx)("span",{children:"\ud83c\udfa5"}),"Video"]}),e.hasPdf&&(0,Le.jsxs)("span",{className:"resource-badge pdf",children:[(0,Le.jsx)("span",{children:"\ud83d\udcc4"}),"PDF"]}),e.hasQuestions&&(0,Le.jsxs)("span",{className:"resource-badge quiz",children:[(0,Le.jsx)("span",{children:"\u2753"}),"Quiz"]})]})}),(0,Le.jsx)("div",{className:"content-actions",children:(0,Le.jsx)("button",{className:"btn btn-primary btn-block",onClick:()=>(e=>{k(e),N(!0),C("video"),T(100),L(1),M(null),O(0),q(0),U(!1),Q(!1)})(e),children:"\ud83d\ude80 Start Learning"})})]},e.id)})})]})]}),j&&w&&(0,Le.jsx)("div",{className:"modal-overlay chapter-modal-overlay",onClick:de,children:(0,Le.jsxs)("div",{className:"modal-content chapter-modal",onClick:e=>e.stopPropagation(),children:[(0,Le.jsxs)("div",{className:"modal-header chapter-modal-header",children:[(0,Le.jsxs)("div",{className:"modal-title-section",children:[(0,Le.jsx)("h3",{children:w.name}),(0,Le.jsxs)("div",{className:"chapter-modal-meta",children:[w.duration&&(0,Le.jsxs)("span",{children:["\u23f1\ufe0f ",w.duration]}),w.questionCount&&(0,Le.jsxs)("span",{children:["\u2753 ",w.questionCount," Questions"]})]})]}),(0,Le.jsxs)("div",{className:"modal-actions",children:[(0,Le.jsxs)("div",{className:"chapter-nav-buttons",children:[(0,Le.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:()=>{const e=ue();if(e>0){const t=m.chapters[e-1];k(t),C("video")}},disabled:!(ue()>0),title:"Previous Chapter",children:"\u2190 Prev"}),(0,Le.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:()=>{const e=ue();if(e<m.chapters.length-1){const t=m.chapters[e+1];k(t),C("video")}},disabled:!(ue()<m.chapters.length-1),title:"Next Chapter",children:"Next \u2192"})]}),(0,Le.jsx)("button",{className:"btn-close",onClick:de,children:"\xd7"})]})]}),w.description&&(0,Le.jsx)("div",{className:"chapter-info",children:(0,Le.jsx)("p",{children:w.description})}),(0,Le.jsxs)("div",{className:"chapter-tabs",children:[(0,Le.jsxs)("button",{className:"tab-btn ".concat("video"===S?"active":""),onClick:()=>C("video"),disabled:!w.hasVideo,children:[(0,Le.jsx)("span",{className:"tab-icon",children:"\ud83c\udfa5"}),(0,Le.jsx)("span",{children:"Video"})]}),(0,Le.jsxs)("button",{className:"tab-btn ".concat("pdf"===S?"active":""),onClick:()=>C("pdf"),disabled:!w.hasPdf,children:[(0,Le.jsx)("span",{className:"tab-icon",children:"\ud83d\udcc4"}),(0,Le.jsx)("span",{children:"PDF"})]}),(0,Le.jsxs)("button",{className:"tab-btn ".concat("questions"===S?"active":""),onClick:()=>C("questions"),disabled:!w.hasQuestions,children:[(0,Le.jsx)("span",{className:"tab-icon",children:"\u2753"}),(0,Le.jsxs)("span",{children:["Practice (",w.questionCount,")"]})]})]}),(0,Le.jsxs)("div",{className:"modal-body chapter-modal-body",children:["video"===S&&w.hasVideo&&(0,Le.jsxs)("div",{className:"video-container",ref:Y,children:[w.videos&&w.videos.length>1&&(0,Le.jsxs)("div",{className:"media-selector",children:[(0,Le.jsx)("label",{children:"Select Video:"}),(0,Le.jsx)("select",{value:z,onChange:e=>O(parseInt(e.target.value)),className:"form-select",children:w.videos.map((e,t)=>(0,Le.jsxs)("option",{value:t,children:[t+1,". ",e.videoTitle]},t))})]}),(0,Le.jsxs)("div",{className:"video-player-wrapper",children:[w.videos&&w.videos[z]&&w.videos[z].youtubeLink.includes("youtube")?(0,Le.jsx)("iframe",{className:"video-player youtube-player",src:(e=>{if(!e)return null;let t=null;if(e.includes("youtube.com/watch")){t=new URLSearchParams(e.split("?")[1]).get("v")}else if(e.includes("youtu.be/"))t=e.split("youtu.be/")[1].split("?")[0];else if(e.includes("youtube.com/embed/"))return e;return t?"https://www.youtube.com/embed/".concat(t):e})(w.videos[z].youtubeLink),title:w.videos[z].videoTitle||"Chapter Video",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; fullscreen",allowFullScreen:!0}):(0,Le.jsxs)("video",{ref:H,controls:!0,controlsList:"nodownload",className:"video-player",children:[(0,Le.jsx)("source",{src:(null===(e=w.videos)||void 0===e||null===(t=e[z])||void 0===t?void 0:t.youtubeLink)||w.videoUrl,type:"video/mp4"}),"Your browser does not support the video tag."]},"".concat(w.id,"-").concat(z)),(0,Le.jsx)("button",{className:"fullscreen-btn",onClick:()=>{B?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen():Y.current.requestFullscreen?Y.current.requestFullscreen():Y.current.webkitRequestFullscreen?Y.current.webkitRequestFullscreen():Y.current.msRequestFullscreen&&Y.current.msRequestFullscreen(),U(!B)},title:"Toggle Fullscreen",children:B?"\ud83d\uddd7":"\u26f6"})]})]}),"pdf"===S&&w.hasPdf&&(0,Le.jsxs)("div",{className:"pdf-container",ref:$,children:[w.documents&&w.documents.length>1&&(0,Le.jsxs)("div",{className:"media-selector",children:[(0,Le.jsx)("label",{children:"Select Document:"}),(0,Le.jsx)("select",{value:_,onChange:e=>q(parseInt(e.target.value)),className:"form-select",children:w.documents.map((e,t)=>(0,Le.jsxs)("option",{value:t,children:[t+1,". ",e.documentTitle||e.fileName]},t))})]}),(0,Le.jsxs)("div",{className:"pdf-controls",children:[(0,Le.jsx)("div",{className:"pdf-page-controls",children:(0,Le.jsxs)("span",{children:["\ud83d\udcc4 ",(null===(s=w.documents[_])||void 0===s?void 0:s.documentTitle)||(null===(a=w.documents[_])||void 0===a?void 0:a.fileName)||"PDF Document"]})}),(0,Le.jsxs)("div",{className:"pdf-actions",children:[(0,Le.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:()=>{W?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen():$.current.requestFullscreen?$.current.requestFullscreen():$.current.webkitRequestFullscreen?$.current.webkitRequestFullscreen():$.current.msRequestFullscreen&&$.current.msRequestFullscreen(),Q(!W)},title:"Toggle Fullscreen",children:W?"\ud83d\uddd7 Exit Fullscreen":"\u26f6 Fullscreen"}),(0,Le.jsx)("a",{href:R||"http://localhost:8080".concat(null===(r=w.documents[_])||void 0===r?void 0:r.filePath),download:(null===(i=w.documents[_])||void 0===i?void 0:i.fileName)||"document.pdf",className:"btn btn-sm btn-primary",target:"_blank",rel:"noopener noreferrer",children:"\ud83d\udce5 Download"})]})]}),(0,Le.jsx)("div",{className:"pdf-viewer-wrapper",children:D?(0,Le.jsxs)("div",{className:"pdf-loading",children:[(0,Le.jsx)("div",{className:"spinner"}),(0,Le.jsx)("p",{children:"Loading PDF..."})]}):R?(0,Le.jsx)("iframe",{src:"".concat(R,"#toolbar=0&navpanes=0&scrollbar=0"),title:"PDF Viewer",className:"pdf-viewer",frameBorder:"0",onLoad:()=>console.log("\u2705 PDF iframe loaded successfully"),onError:e=>console.error("\u274c PDF iframe error:",e)}):(0,Le.jsxs)("div",{className:"pdf-error",children:[(0,Le.jsx)("p",{children:"\u274c Failed to load PDF"}),(0,Le.jsx)("p",{children:"Please try downloading the file instead."})]})})]}),"questions"===S&&w.hasQuestions&&(0,Le.jsxs)("div",{className:"questions-container",children:[(0,Le.jsxs)("div",{className:"questions-header",children:[(0,Le.jsx)("h4",{children:"Practice Questions"}),(0,Le.jsx)("p",{children:"Test your understanding of this chapter"})]}),(0,Le.jsx)("div",{className:"questions-list",children:(w.id,[{id:1,question:"What is the main concept covered in this chapter?",options:["Option A","Option B","Option C","Option D"],correctAnswer:0,explanation:"This is the correct answer explanation."},{id:2,question:"Which of the following best describes the topic?",options:["First option","Second option","Third option","Fourth option"],correctAnswer:2,explanation:"Third option is correct because..."},{id:3,question:"How would you apply this concept in real life?",options:["Practical use 1","Practical use 2","Practical use 3","Practical use 4"],correctAnswer:1,explanation:"The second option provides the best practical application."}]).map((e,t)=>(0,Le.jsxs)("div",{className:"question-item",children:[(0,Le.jsx)("div",{className:"question-header",children:(0,Le.jsxs)("h5",{children:["Question ",t+1]})}),(0,Le.jsx)("p",{className:"question-text",children:e.question}),(0,Le.jsx)("div",{className:"question-options",children:e.options.map((t,s)=>(0,Le.jsxs)("div",{className:"option-item",children:[(0,Le.jsx)("input",{type:"radio",id:"q".concat(e.id,"-opt").concat(s),name:"question-".concat(e.id)}),(0,Le.jsx)("label",{htmlFor:"q".concat(e.id,"-opt").concat(s),children:t})]},s))}),(0,Le.jsx)("div",{className:"question-actions",children:(0,Le.jsx)("button",{className:"btn btn-sm btn-primary",children:"Check Answer"})})]},e.id))})]})]})]})})]})},ss=()=>{var e,t,s,a,r,i,l,o,c,d,u,p,m,h,f,x,g,v,b,y,j,N,w,k,S,C,I,A,E,T;const{token:P,addNotification:L}=(0,Pe.nm)(),[R,M]=(0,n.useState)([]),[D,F]=(0,n.useState)(null),[z,O]=(0,n.useState)([]),[_,q]=(0,n.useState)([]),[B,U]=(0,n.useState)(!1),[W,Q]=(0,n.useState)(!1),[H,V]=(0,n.useState)(null),[Y,$]=(0,n.useState)([]),[J,K]=(0,n.useState)(0),[G,X]=(0,n.useState)({}),[Z,ee]=(0,n.useState)(0),[te,se]=(0,n.useState)(null),[ae,ne]=(0,n.useState)(new Set),[re,ie]=(0,n.useState)(null),[le,oe]=(0,n.useState)(null),[ce,de]=(0,n.useState)(null),[ue,pe]=(0,n.useState)(!1),[me,he]=(0,n.useState)(null),[fe,xe]=(0,n.useState)(!1),ge=(0,n.useRef)(null),ve=(0,n.useCallback)(async()=>{if(P)try{U(!0);const e=(await Kt(P)).filter(e=>e.isActive);M(e),e.length>0&&F(e[0])}catch(e){console.error("Error loading subscriptions:",e),L("Failed to load subscriptions","error")}finally{U(!1)}},[P,L]);(0,n.useEffect)(()=>{ve()},[P]),(0,n.useEffect)(()=>{D&&(be(),ye())},[D]),(0,n.useEffect)(()=>(Z>0&&te&&H&&(ge.current=setInterval(()=>{const e=Math.floor((Date.now()-te)/1e3),t=Math.max(0,60*H.timeLimitMinutes-e);ee(t),0===t&&(L("\u23f0 Time is up! Auto-submitting test...","warning"),Se())},1e3)),()=>{ge.current&&clearInterval(ge.current)}),[te,H]);const be=async()=>{if(D&&P)try{U(!0);const e={};if(console.log("Selected subscription:",D),console.log("Subscription level:",D.subscriptionLevel),console.log("Entity ID:",D.entityId),"CLASS"===D.subscriptionLevel&&D.entityId?(e.classId=D.entityId,console.log("Using classId filter:",e.classId)):"EXAM"===D.subscriptionLevel&&D.entityId?(e.examId=D.entityId,console.log("Using examId filter:",e.examId)):"COURSE"===D.subscriptionLevel&&D.entityId&&(e.courseId=D.entityId,console.log("Using courseId filter:",e.courseId)),!e.classId&&!e.examId&&!e.courseId)return console.warn("No classId, examId, or courseId found in subscription"),L("Invalid subscription data","warning"),void O([]);console.log("Loading tests with filters:",e),console.log("API will call: GET /api/student/dashboard/tests?"+new URLSearchParams(e).toString());const t=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=new URLSearchParams;t.classId?s.append("classId",t.classId):t.examId?s.append("examId",t.examId):t.courseId&&s.append("courseId",t.courseId);const a="/api/student/dashboard/tests".concat(s.toString()?"?".concat(s.toString()):"");console.log("Fetching student tests from:",a),console.log("Full URL: http://localhost:8080"+a);try{const t=await(0,Xe.Vg)(a,e),s=await t.json();return console.log("Student tests data:",s),s}catch(n){throw console.error("Error fetching student tests:",n),n}}(P,e),s=Array.isArray(t)?t:t.content||t.data||[];console.log("Loaded tests:",s.length,"tests"),O(s),s.length>0?L("\u2705 ".concat(s.length," test(s) available"),"success"):L("No tests available for this subscription","info")}catch(e){console.error("Error loading tests:",e),L("Failed to load available tests","error"),O([])}finally{U(!1)}},ye=async()=>{if(P)try{const e=await(async e=>{const t="/api/student/tests/attempts";console.log("Fetching all test attempts from:",t);try{const s=await(0,Xe.Vg)(t,e),a=await s.json();return console.log("Student test attempts:",a),a}catch(s){throw console.error("Error fetching test attempts:",s),s}})(P),t=Array.isArray(e)?e:e.content||e.data||[];q(t)}catch(e){console.error("Error loading test attempts:",e)}},je=async e=>{try{U(!0),console.log("Step 1: Checking for active session...");const t=await(async(e,t)=>{const s="/api/student/tests/".concat(t,"/active-session");console.log("Checking active session for test:",t);try{const t=await(0,Xe.Vg)(s,e),a=await t.json();return console.log("Active session check:",a),a}catch(a){throw console.error("Error checking active session:",a),a}})(P,e.id);console.log("Active session check result:",t);let s=null;if(!1!==t.hasActiveSession&&t.sessionId){console.log("Active session found:",t.sessionId);window.confirm("\u26a0\ufe0f You have an active test session in progress.\n\n"+"Started at: ".concat(new Date(t.startedAt).toLocaleString(),"\n")+"Expires at: ".concat(new Date(t.expiresAt).toLocaleString(),"\n\n")+"\u2022 Click OK to CONTINUE your existing session\n\u2022 Click Cancel to ABANDON and start fresh\n\nNote: Abandoning will count as one attempt.")?(console.log("Continuing with existing session"),s=t):(console.log("User chose to abandon session"),await(async(e,t)=>{const s="/api/student/tests/".concat(t,"/abandon-session");console.log("Abandoning test session for test:",t);try{const t=await fetch("http://localhost:8080".concat(s),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e),accept:"*/*"}});if(!t.ok){const e=await t.text();throw new Error("Failed to abandon session: ".concat(t.status," - ").concat(e))}const a=await t.json();return console.log("Session abandoned:",a),a}catch(a){throw console.error("Error abandoning session:",a),a}})(P,e.id),L("\u2705 Previous session abandoned. Starting fresh...","success"),s=await Yt(P,e.id))}else console.log("No active session, starting new test..."),s=await Yt(P,e.id);if(console.log("Session data:",s),console.log("SessionId:",s.sessionId),console.log("AttemptId:",s.attemptId),!s||!s.sessionId)throw console.error("Invalid session data:",s),new Error("Failed to get session ID from response");console.log("\u2705 Session ready:",s.sessionId),ie(s.sessionId),oe(s.attemptId),console.log("Step 2: Fetching questions with sessionId:",s.sessionId);const a=await(async(e,t,s)=>{if(!s)throw new Error("SessionId is required to fetch test questions");const a="/api/student/tests/".concat(t,"/questions?sessionId=").concat(s);console.log("Fetching test questions from:",a),console.log("SessionId:",s),console.log("Full URL:","http://localhost:8080".concat(a));try{const t=await(0,Xe.Vg)(a,e),s=await t.json();return console.log("Test questions data:",s),s}catch(n){throw console.error("Error fetching test questions:",n),n}})(P,e.id,s.sessionId),n=Array.isArray(a)?a:a.content||a.data||[];if(0===n.length)return void L("This test has no questions","warning");console.log("Loaded questions:",n.length),V((0,Ue.A)((0,Ue.A)({},e),{},{startedAt:s.startedAt,expiresAt:s.expiresAt})),$(n),K(0),X({}),ne(new Set),se(new Date(s.startedAt).getTime()),ee(60*e.timeLimitMinutes),Q(!0),L("\u2705 Test started! Good luck!","success")}catch(t){console.error("Error starting test:",t),L("Failed to start test: ".concat(t.message),"error")}finally{U(!1)}},Ne=async(e,t)=>{var s;if(console.log("handleAnswerChange called with:",{questionId:e,answer:t}),!e)return void console.error("QuestionId is missing!");if(X(s=>(0,Ue.A)((0,Ue.A)({},s),{},{[e]:t})),!re)return void console.warn("SessionId not available, skipping backend submission");const a=Y[J];console.log("Current question:",a),console.log("Current question ID:",(null===a||void 0===a?void 0:a.questionId)||(null===a||void 0===a?void 0:a.id));const n=null===a||void 0===a||null===(s=a.options)||void 0===s?void 0:s.find(e=>(e.optionText||e)===t);if(console.log("Selected option:",n),console.log("Selected option optionId:",null===n||void 0===n?void 0:n.optionId),console.log("Selected option id (fallback):",null===n||void 0===n?void 0:n.id),!n)return void console.error("Could not find selected option");const r=n.optionId||n.id;if(r)try{const t={sessionId:re,questionId:Number(e),selectedOptionId:Number(r)};console.log("=== Submitting Answer ==="),console.log("Answer data:",JSON.stringify(t,null,2)),console.log("Data types:",{sessionId:typeof t.sessionId,questionId:typeof t.questionId,selectedOptionId:typeof t.selectedOptionId});const s=await $t(P,H.id,t);console.log("\u2705 Answer saved to backend successfully:",s)}catch(i){console.error("\u274c Error submitting answer:",i),console.error("Error message:",i.message)}else console.error("Selected option has no ID:",n)},we=()=>{J<Y.length-1&&K(e=>e+1)},ke=()=>{J>0&&K(e=>e-1)};(0,n.useEffect)(()=>{const e=e=>{if(W)if("ArrowLeft"===e.key)ke();else if("ArrowRight"===e.key)we();else if(["1","2","3","4"].includes(e.key)){var t;const s=parseInt(e.key)-1,a=Y[J];if(null!==a&&void 0!==a&&null!==(t=a.options)&&void 0!==t&&t[s]){const e=a.options[s];Ne(a.id,e.optionText||e)}}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[W,J,Y]);const Se=async()=>{if(!H||!Y.length||!te||!re)return;const e=Object.keys(G).length,t=Y.length-e,s=ae.size;let a="\u26a0\ufe0f Are you sure you want to submit the test?\n\n";a+="\ud83d\udcca Summary:\n",a+="\u2705 Answered: ".concat(e," questions\n"),a+="\u274c Not Answered: ".concat(t," questions\n"),s>0&&(a+="\ud83d\udea9 Marked for Review: ".concat(s," questions\n")),a+="\n\u23f1\ufe0f Time Used: ".concat(Ce(Math.floor((Date.now()-te)/1e3)),"\n"),a+="\n\u26a0\ufe0f You cannot change your answers after submission!";if(window.confirm(a))try{U(!0),console.log("Submitting test with sessionId:",re);const e=await(async(e,t,s)=>{const a="/api/student/tests/".concat(t,"/submit?sessionId=").concat(s);console.log("Submitting test with endpoint:",a),console.log("Full URL:","http://localhost:8080".concat(a));try{const t=await(0,Xe.$P)(a,{},e),s=await t.json();return console.log("Test submitted, result:",s),s}catch(n){throw console.error("Error submitting test:",n),n}})(P,H.id,re);console.log("Test submission result:",e),de(e),Q(!1),pe(!0),ge.current&&clearInterval(ge.current),ye(),L("\u2705 Test submitted successfully!","success")}catch(n){console.error("Error submitting test:",n),L("\u274c Failed to submit test: ".concat(n.message),"error")}finally{U(!1)}},Ce=e=>{const t=Math.floor(e/3600),s=Math.floor(e%3600/60),a=e%60;return t>0?"".concat(t,":").concat(s.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0")):"".concat(s,":").concat(a.toString().padStart(2,"0"))},Ie=e=>{e&&e.stopPropagation(),console.log("Closing attempt details modal"),xe(!1),he(null)},Ae=e=>{let t=e.subscriptionLevel||"Unknown";return e.className?t+=" - ".concat(e.className):e.examName?t+=" - ".concat(e.examName):e.courseName&&(t+=" - ".concat(e.courseName)),t};return(0,Le.jsxs)("div",{className:"student-test-center",children:[(0,Le.jsxs)("div",{className:"page-header",children:[(0,Le.jsx)("h2",{children:"\ud83d\udcdd Test Center"}),(0,Le.jsx)("p",{children:"Take tests and track your performance"})]}),(0,Le.jsxs)("div",{className:"subscription-section",children:[(0,Le.jsx)("h3",{children:"Your Active Subscriptions"}),B&&0===R.length?(0,Le.jsx)("div",{className:"loading",children:"Loading subscriptions..."}):0===R.length?(0,Le.jsx)("div",{className:"empty-state",children:(0,Le.jsx)("p",{children:"\ud83d\udcda No active subscriptions found. Subscribe to a course to access tests."})}):(0,Le.jsx)("div",{className:"subscription-cards",children:R.map(e=>(0,Le.jsxs)("div",{className:"subscription-card ".concat((null===D||void 0===D?void 0:D.id)===e.id?"selected":""),onClick:()=>F(e),children:[(0,Le.jsx)("h4",{children:Ae(e)}),(0,Le.jsx)("p",{className:"subscription-details",children:(0,Le.jsxs)("span",{children:["\ud83d\udcc5 Valid until: ",new Date(e.endDate).toLocaleDateString()]})})]},e.id))})]}),D&&(0,Le.jsxs)("div",{className:"tests-section",children:[(0,Le.jsxs)("h3",{children:["Available Tests (",z.length,")"]}),B?(0,Le.jsx)("div",{className:"loading",children:"Loading tests..."}):0===z.length?(0,Le.jsx)("div",{className:"empty-state",children:(0,Le.jsx)("p",{children:"\ud83d\udcdd No tests available for this subscription yet."})}):(0,Le.jsx)("div",{className:"test-cards",children:z.map(e=>(0,Le.jsxs)("div",{className:"test-card",children:[(0,Le.jsxs)("div",{className:"test-info",children:[(0,Le.jsx)("h4",{children:e.testName}),(0,Le.jsx)("p",{className:"test-description",children:e.description||"No description available"}),(0,Le.jsxs)("div",{className:"test-details",children:[(0,Le.jsxs)("span",{children:["\u23f1\ufe0f ",e.timeLimitMinutes," minutes"]}),(0,Le.jsxs)("span",{children:["\ud83d\udcdd ",e.totalMarks," marks"]}),(0,Le.jsxs)("span",{children:["\u2705 Passing: ",e.passingMarks]}),(0,Le.jsxs)("span",{children:["\ud83d\udd04 Max Attempts: ",e.maxAttempts||"Unlimited"]})]})]}),(0,Le.jsx)("div",{className:"test-actions",children:(0,Le.jsx)("button",{className:"btn btn-primary",onClick:()=>je(e),disabled:B,children:"\ud83d\ude80 Start Test"})})]},e.id))})]}),D&&_.length>0&&(0,Le.jsxs)("div",{className:"attempts-section",style:{marginTop:"32px"},children:[(0,Le.jsx)("h3",{style:{marginBottom:"20px",fontSize:"22px",fontWeight:"700",color:"#1e293b"},children:"\ud83d\udcca Test Attempts History"}),(0,Le.jsx)("div",{style:{background:"white",borderRadius:"16px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",overflow:"hidden"},children:(0,Le.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,Le.jsx)("thead",{children:(0,Le.jsxs)("tr",{style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"},children:[(0,Le.jsx)("th",{style:{padding:"16px 24px",textAlign:"left",fontWeight:"600",color:"#475569",fontSize:"14px",borderBottom:"2px solid #e2e8f0"},children:"Attempt #"}),(0,Le.jsx)("th",{style:{padding:"16px 24px",textAlign:"left",fontWeight:"600",color:"#475569",fontSize:"14px",borderBottom:"2px solid #e2e8f0"},children:"Test Name"}),(0,Le.jsx)("th",{style:{padding:"16px 24px",textAlign:"center",fontWeight:"600",color:"#475569",fontSize:"14px",borderBottom:"2px solid #e2e8f0"},children:"Score"}),(0,Le.jsx)("th",{style:{padding:"16px 24px",textAlign:"center",fontWeight:"600",color:"#475569",fontSize:"14px",borderBottom:"2px solid #e2e8f0"},children:"Result"}),(0,Le.jsx)("th",{style:{padding:"16px 24px",textAlign:"center",fontWeight:"600",color:"#475569",fontSize:"14px",borderBottom:"2px solid #e2e8f0"},children:"Date"}),(0,Le.jsx)("th",{style:{padding:"16px 24px",textAlign:"center",fontWeight:"600",color:"#475569",fontSize:"14px",borderBottom:"2px solid #e2e8f0"},children:"Action"})]})}),(0,Le.jsx)("tbody",{children:_.map((e,t)=>(0,Le.jsxs)("tr",{style:{borderBottom:t<_.length-1?"1px solid #e2e8f0":"none",transition:"background 0.2s ease"},onMouseOver:e=>e.currentTarget.style.background="#f8fafc",onMouseOut:e=>e.currentTarget.style.background="white",children:[(0,Le.jsxs)("td",{style:{padding:"20px 24px",fontSize:"15px",fontWeight:"600",color:"#667eea"},children:["#",e.attemptNumber]}),(0,Le.jsx)("td",{style:{padding:"20px 24px",fontSize:"15px",color:"#1e293b",fontWeight:"500"},children:e.testName||"Unknown Test"}),(0,Le.jsx)("td",{style:{padding:"20px 24px",textAlign:"center"},children:(0,Le.jsx)("span",{style:{display:"inline-block",padding:"6px 16px",borderRadius:"8px",fontSize:"16px",fontWeight:"700",background:e.percentage>=80?"#dcfce7":e.percentage>=60?"#fef3c7":"#fee2e2",color:e.percentage>=80?"#166534":e.percentage>=60?"#92400e":"#991b1b"},children:e.percentage?"".concat(e.percentage.toFixed(1),"%"):"N/A"})}),(0,Le.jsx)("td",{style:{padding:"20px 24px",textAlign:"center"},children:(0,Le.jsx)("span",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"6px 14px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",background:e.isPassed?"linear-gradient(135deg, #22c55e 0%, #16a34a 100%)":"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"white"},children:e.isPassed?"\u2713 PASSED":"\u2717 FAILED"})}),(0,Le.jsx)("td",{style:{padding:"20px 24px",textAlign:"center",fontSize:"14px",color:"#64748b"},children:new Date(e.submittedAt||e.attemptedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}),(0,Le.jsx)("td",{style:{padding:"20px 24px",textAlign:"center"},children:(0,Le.jsxs)("button",{onClick:()=>{he(e),xe(!0)},style:{padding:"8px 20px",borderRadius:"8px",border:"2px solid #667eea",background:"white",color:"#667eea",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"6px",transition:"all 0.2s ease"},onMouseOver:e=>{e.currentTarget.style.background="#667eea",e.currentTarget.style.color="white"},onMouseOut:e=>{e.currentTarget.style.background="white",e.currentTarget.style.color="#667eea"},children:[(0,Le.jsx)("span",{children:"\ud83d\udc41\ufe0f"}),"View Details"]})})]},e.attemptId||t))})]})})]}),W&&H&&(0,Le.jsxs)("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.95)",zIndex:9999,display:"flex",flexDirection:"column"},children:[(0,Le.jsxs)("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"0",display:"flex",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",flexShrink:0,minHeight:"90px",width:"100%"},children:[(0,Le.jsx)("div",{style:{width:"280px",background:"rgba(0,0,0,0.2)",display:"flex",alignItems:"center",padding:"20px 24px"},children:(0,Le.jsxs)("div",{style:{fontSize:"13px",opacity:.9,fontWeight:"500"},children:["Question ",J+1," / ",Y.length]})}),(0,Le.jsxs)("div",{style:{flex:1,padding:"20px 40px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Le.jsxs)("div",{style:{flex:"0 0 auto"},children:[(0,Le.jsxs)("h2",{style:{margin:0,fontSize:"26px",fontWeight:"700",textShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:["\ud83d\udcdd ",H.testName]}),(0,Le.jsx)("p",{style:{margin:"8px 0 0 0",opacity:.95,fontSize:"15px",fontWeight:"500"},children:H.description||"Test in progress"})]}),(0,Le.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"20px",flex:"0 0 auto"},children:[(0,Le.jsxs)("div",{style:{background:Z<300?"linear-gradient(135deg, #dc2626 0%, #b91c1c 100%)":"rgba(255,255,255,0.15)",padding:"14px 28px",borderRadius:"12px",display:"flex",alignItems:"center",gap:"12px",border:"2px solid rgba(255,255,255,0.2)",backdropFilter:"blur(10px)",boxShadow:Z<300?"0 4px 12px rgba(220, 38, 38, 0.4)":"0 2px 4px rgba(0,0,0,0.1)",minWidth:"180px"},children:[(0,Le.jsx)("span",{style:{fontSize:"28px"},children:"\u23f1\ufe0f"}),(0,Le.jsxs)("div",{children:[(0,Le.jsx)("div",{style:{fontSize:"11px",opacity:.9,fontWeight:"500"},children:"Time Remaining"}),(0,Le.jsx)("div",{style:{fontSize:"26px",fontWeight:"bold",lineHeight:"1.2"},children:Ce(Z)})]})]}),(0,Le.jsxs)("div",{style:{background:"rgba(255,255,255,0.15)",padding:"14px 28px",borderRadius:"12px",textAlign:"center",border:"2px solid rgba(255,255,255,0.2)",backdropFilter:"blur(10px)",minWidth:"140px"},children:[(0,Le.jsx)("div",{style:{fontSize:"11px",opacity:.9,fontWeight:"500"},children:"Answered"}),(0,Le.jsxs)("div",{style:{fontSize:"26px",fontWeight:"bold",lineHeight:"1.2"},children:[Object.keys(G).length," / ",Y.length]})]}),(0,Le.jsxs)("button",{onClick:()=>{window.confirm("\u26a0\ufe0f Are you sure you want to exit the test?\n\nYour answers have been saved. You can continue later if attempts are remaining.\nHowever, the timer will continue running.")&&(Q(!1),V(null),$([]),X({}),se(null),ne(new Set),ie(null),oe(null),ge.current&&clearInterval(ge.current),L("Test exited - Your answers have been saved","info"))},style:{background:"rgba(239, 68, 68, 0.3)",border:"2px solid rgba(255,255,255,0.4)",color:"white",padding:"14px 24px",borderRadius:"10px",fontSize:"15px",fontWeight:"700",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",backdropFilter:"blur(10px)",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",transition:"all 0.2s ease"},onMouseOver:e=>{e.currentTarget.style.background="rgba(239, 68, 68, 0.5)",e.currentTarget.style.transform="scale(1.05)"},onMouseOut:e=>{e.currentTarget.style.background="rgba(239, 68, 68, 0.3)",e.currentTarget.style.transform="scale(1)"},children:[(0,Le.jsx)("span",{style:{fontSize:"18px"},children:"\u274c"}),"Exit Test"]})]})]})]}),(0,Le.jsxs)("div",{style:{flex:1,display:"flex",overflow:"hidden"},children:[(0,Le.jsxs)("div",{style:{width:"280px",background:"#1e293b",color:"white",padding:"24px",overflowY:"auto",flexShrink:0},children:[(0,Le.jsx)("h3",{style:{margin:"0 0 16px 0",fontSize:"16px",fontWeight:"600"},children:"\ud83d\udccb Question Palette"}),(0,Le.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"10px"},children:Y.map((e,t)=>{const s=e.questionId||e.id,a=!!G[s],n=t===J,r=ae.has(s);let i="#475569";return a&&r?i="#f59e0b":a?i="#22c55e":r&&(i="#8b5cf6"),(0,Le.jsxs)("button",{onClick:()=>(e=>{K(e)})(t),style:{width:"48px",height:"48px",borderRadius:"10px",border:n?"3px solid #fbbf24":"none",background:i,color:"white",fontSize:"15px",fontWeight:"700",cursor:"pointer",transition:"all 0.2s ease",position:"relative",boxShadow:n?"0 0 0 3px rgba(251, 191, 36, 0.3)":"none"},onMouseOver:e=>{n||(e.currentTarget.style.transform="scale(1.1)",e.currentTarget.style.boxShadow="0 4px 8px rgba(0,0,0,0.3)")},onMouseOut:e=>{e.currentTarget.style.transform="scale(1)",e.currentTarget.style.boxShadow=n?"0 0 0 3px rgba(251, 191, 36, 0.3)":"none"},title:a&&r?"Answered & Marked for Review":a?"Answered":r?"Marked for Review":"Not Answered",children:[t+1,r&&(0,Le.jsx)("span",{style:{position:"absolute",top:"-6px",right:"-6px",fontSize:"12px",filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.3))"},children:"\ud83d\udea9"})]},t)})}),(0,Le.jsxs)("div",{style:{marginTop:"24px",padding:"16px",background:"#334155",borderRadius:"8px"},children:[(0,Le.jsx)("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"12px"},children:"Legend:"}),(0,Le.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"8px",fontSize:"12px"},children:[(0,Le.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,Le.jsx)("div",{style:{width:"20px",height:"20px",background:"#22c55e",borderRadius:"4px"}}),(0,Le.jsx)("span",{children:"Answered"})]}),(0,Le.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,Le.jsx)("div",{style:{width:"20px",height:"20px",background:"#f59e0b",borderRadius:"4px",position:"relative"},children:(0,Le.jsx)("span",{style:{position:"absolute",top:"-4px",right:"-4px",fontSize:"8px"},children:"\ud83d\udea9"})}),(0,Le.jsx)("span",{children:"Marked for Review"})]}),(0,Le.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,Le.jsx)("div",{style:{width:"20px",height:"20px",background:"#8b5cf6",borderRadius:"4px",position:"relative"},children:(0,Le.jsx)("span",{style:{position:"absolute",top:"-4px",right:"-4px",fontSize:"8px"},children:"\ud83d\udea9"})}),(0,Le.jsx)("span",{children:"Not Ans. + Marked"})]}),(0,Le.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,Le.jsx)("div",{style:{width:"20px",height:"20px",background:"#475569",borderRadius:"4px"}}),(0,Le.jsx)("span",{children:"Not Answered"})]}),(0,Le.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,Le.jsx)("div",{style:{width:"20px",height:"20px",border:"2px solid white",borderRadius:"4px"}}),(0,Le.jsx)("span",{children:"Current Question"})]})]})]}),(0,Le.jsxs)("div",{style:{marginTop:"16px",padding:"16px",background:"#334155",borderRadius:"8px"},children:[(0,Le.jsx)("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"12px"},children:"\u2328\ufe0f Shortcuts:"}),(0,Le.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"6px",fontSize:"12px"},children:[(0,Le.jsx)("div",{children:"\u2190 \u2192 Navigate"}),(0,Le.jsx)("div",{children:"1-4: Select Option"})]})]}),(0,Le.jsxs)("div",{style:{marginTop:"16px",padding:"16px",background:"#334155",borderRadius:"8px"},children:[(0,Le.jsx)("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"12px"},children:"\ud83d\udcca Progress:"}),(0,Le.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"8px",fontSize:"13px"},children:[(0,Le.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,Le.jsx)("span",{children:"Answered:"}),(0,Le.jsx)("strong",{style:{color:"#22c55e"},children:Object.keys(G).length})]}),(0,Le.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,Le.jsx)("span",{children:"Not Answered:"}),(0,Le.jsx)("strong",{style:{color:"#ef4444"},children:Y.length-Object.keys(G).length})]}),(0,Le.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,Le.jsx)("span",{children:"Marked:"}),(0,Le.jsx)("strong",{style:{color:"#f59e0b"},children:ae.size})]})]})]}),(0,Le.jsxs)("div",{style:{marginTop:"16px",padding:"16px",background:"#334155",borderRadius:"8px"},children:[(0,Le.jsx)("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"12px"},children:"\ud83d\udcdd Test Info:"}),(0,Le.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"8px",fontSize:"13px"},children:[(0,Le.jsxs)("div",{children:["\ud83d\udcca Total Marks: ",H.totalMarks]}),(0,Le.jsxs)("div",{children:["\u2705 Passing: ",H.passingMarks]}),H.negativeMarking&&(0,Le.jsxs)("div",{children:["\u26a0\ufe0f Negative: -",(100*H.negativeMarkPercentage).toFixed(0),"%"]}),(0,Le.jsxs)("div",{children:["\ud83d\udd04 Max Attempts: ",H.maxAttempts||"\u221e"]})]})]})]}),(0,Le.jsx)("div",{style:{flex:1,background:"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",display:"flex",flexDirection:"column",overflow:"hidden"},children:Y.length>0&&(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)("div",{style:{flex:1,overflowY:"auto",padding:"32px",display:"flex",flexDirection:"column"},children:(0,Le.jsxs)("div",{style:{width:"100%",height:"100%",background:"white",borderRadius:"20px",padding:"48px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.15), 0 10px 10px -5px rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column"},children:[(0,Le.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"32px",paddingBottom:"24px",borderBottom:"3px solid #e2e8f0"},children:[(0,Le.jsxs)("div",{children:[(0,Le.jsxs)("div",{style:{display:"inline-block",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"12px 28px",borderRadius:"12px",fontSize:"22px",fontWeight:"700",marginBottom:"12px",boxShadow:"0 4px 6px rgba(102, 126, 234, 0.3)"},children:["Question ",J+1," of ",Y.length]}),(0,Le.jsxs)("div",{style:{fontSize:"16px",color:"#64748b",marginTop:"8px",display:"flex",gap:"16px"},children:[(0,Le.jsxs)("span",{style:{fontWeight:"600",color:"#1e293b"},children:["\ud83d\udcca Marks: ",(0,Le.jsx)("span",{style:{color:"#667eea"},children:(null===(e=Y[J])||void 0===e?void 0:e.marks)||1})]}),H.negativeMarking&&(null===(t=Y[J])||void 0===t?void 0:t.negativeMarks)>0&&(0,Le.jsxs)("span",{style:{fontWeight:"600",color:"#dc2626"},children:["\u26a0\ufe0f Negative: -",null===(s=Y[J])||void 0===s?void 0:s.negativeMarks]})]})]}),(0,Le.jsxs)("div",{style:{background:G[(null===(a=Y[J])||void 0===a?void 0:a.questionId)||(null===(r=Y[J])||void 0===r?void 0:r.id)]?"linear-gradient(135deg, #22c55e 0%, #16a34a 100%)":"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"white",padding:"12px 24px",borderRadius:"12px",fontSize:"15px",fontWeight:"700",boxShadow:"0 4px 6px rgba(0,0,0,0.2)",display:"flex",alignItems:"center",gap:"8px"},children:[(0,Le.jsx)("span",{style:{fontSize:"20px"},children:G[(null===(i=Y[J])||void 0===i?void 0:i.questionId)||(null===(l=Y[J])||void 0===l?void 0:l.id)]?"\u2713":"\u25cb"}),G[(null===(o=Y[J])||void 0===o?void 0:o.questionId)||(null===(c=Y[J])||void 0===c?void 0:c.id)]?"Answered":"Not Answered"]})]}),(0,Le.jsxs)("div",{style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",padding:"40px",borderRadius:"20px",marginBottom:"36px",borderLeft:"8px solid #667eea",boxShadow:"inset 0 2px 4px rgba(0,0,0,0.05)"},children:[(0,Le.jsx)("div",{style:{fontSize:"14px",fontWeight:"700",color:"#667eea",marginBottom:"16px",textTransform:"uppercase",letterSpacing:"1.5px"},children:"Question"}),(0,Le.jsx)("div",{style:{fontSize:"22px",lineHeight:"2",color:"#1e293b",fontWeight:"500"},children:null===(d=Y[J])||void 0===d?void 0:d.questionText})]}),(0,Le.jsxs)("div",{style:{display:"flex",gap:"20px",marginBottom:"36px",justifyContent:"center"},children:[(0,Le.jsxs)("button",{onClick:()=>{var e,t;(async e=>{if(X(t=>{const s=(0,Ue.A)({},t);return delete s[e],s}),re)try{const t={sessionId:re,questionId:Number(e),selectedOptionId:null};console.log("Clearing answer (marking as skipped):",t),await $t(P,H.id,t),console.log("\u2705 Answer cleared in backend")}catch(t){console.error("Error clearing answer:",t)}})((null===(e=Y[J])||void 0===e?void 0:e.questionId)||(null===(t=Y[J])||void 0===t?void 0:t.id))},disabled:!G[(null===(u=Y[J])||void 0===u?void 0:u.questionId)||(null===(p=Y[J])||void 0===p?void 0:p.id)],style:{padding:"14px 32px",borderRadius:"12px",border:"2px solid #fecaca",background:"white",color:"#dc2626",fontSize:"16px",fontWeight:"600",cursor:G[(null===(m=Y[J])||void 0===m?void 0:m.questionId)||(null===(h=Y[J])||void 0===h?void 0:h.id)]?"pointer":"not-allowed",opacity:G[(null===(f=Y[J])||void 0===f?void 0:f.questionId)||(null===(x=Y[J])||void 0===x?void 0:x.id)]?1:.4,display:"flex",alignItems:"center",gap:"10px",boxShadow:G[(null===(g=Y[J])||void 0===g?void 0:g.questionId)||(null===(v=Y[J])||void 0===v?void 0:v.id)]?"0 2px 6px rgba(220, 38, 38, 0.25)":"none",minWidth:"180px",justifyContent:"center"},children:[(0,Le.jsx)("span",{style:{fontSize:"20px"},children:"\ud83d\uddd1\ufe0f"}),"Clear Answer"]}),(0,Le.jsxs)("button",{onClick:()=>{var e,t;const s=(null===(e=Y[J])||void 0===e?void 0:e.questionId)||(null===(t=Y[J])||void 0===t?void 0:t.id);var a;a=s,ne(e=>{const t=new Set(e);return t.has(a)?t.delete(a):t.add(a),t})},style:{padding:"14px 32px",borderRadius:"12px",border:"2px solid "+(ae.has((null===(b=Y[J])||void 0===b?void 0:b.questionId)||(null===(y=Y[J])||void 0===y?void 0:y.id))?"#fde047":"#e2e8f0"),background:ae.has((null===(j=Y[J])||void 0===j?void 0:j.questionId)||(null===(N=Y[J])||void 0===N?void 0:N.id))?"linear-gradient(135deg, #fef3c7 0%, #fde047 100%)":"white",color:ae.has((null===(w=Y[J])||void 0===w?void 0:w.questionId)||(null===(k=Y[J])||void 0===k?void 0:k.id))?"#92400e":"#64748b",fontSize:"16px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",boxShadow:ae.has((null===(S=Y[J])||void 0===S?void 0:S.questionId)||(null===(C=Y[J])||void 0===C?void 0:C.id))?"0 2px 6px rgba(245, 158, 11, 0.35)":"none",minWidth:"220px",justifyContent:"center"},children:[(0,Le.jsx)("span",{style:{fontSize:"20px"},children:"\ud83d\udea9"}),ae.has((null===(I=Y[J])||void 0===I?void 0:I.questionId)||(null===(A=Y[J])||void 0===A?void 0:A.id))?"Unmark Review":"Mark for Review"]})]}),(0,Le.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:[(0,Le.jsx)("div",{style:{fontSize:"13px",fontWeight:"600",color:"#475569",marginBottom:"20px",textTransform:"uppercase",letterSpacing:"1px"},children:"Choose your answer"}),(0,Le.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"20px",flex:1},children:null===(E=Y[J])||void 0===E||null===(T=E.options)||void 0===T?void 0:T.map((e,t)=>{const s=e.optionText||e,a=Y[J],n=a.questionId||a.id,r=G[n]===s;return(0,Le.jsxs)("label",{onClick:()=>Ne(n,s),style:{display:"flex",alignItems:"center",gap:"20px",padding:"24px 28px",background:r?"linear-gradient(135deg, #e0e7ff 0%, #dbeafe 100%)":"white",border:"3px solid ".concat(r?"#667eea":"#e2e8f0"),borderRadius:"16px",cursor:"pointer",transition:"all 0.2s ease",position:"relative",boxShadow:r?"0 4px 12px rgba(102, 126, 234, 0.3)":"0 2px 4px rgba(0,0,0,0.05)",width:"100%"},onMouseOver:e=>{r||(e.currentTarget.style.background="linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",e.currentTarget.style.borderColor="#667eea",e.currentTarget.style.transform="translateX(8px)",e.currentTarget.style.boxShadow="0 6px 16px rgba(102, 126, 234, 0.2)")},onMouseOut:e=>{r||(e.currentTarget.style.background="white",e.currentTarget.style.borderColor="#e2e8f0",e.currentTarget.style.transform="translateX(0)",e.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.05)")},children:[(0,Le.jsx)("input",{type:"radio",name:"question_".concat(n),value:s,checked:r,onChange:e=>{e.stopPropagation(),Ne(n,e.target.value)},style:{display:"none"}}),(0,Le.jsx)("div",{style:{width:"64px",height:"64px",borderRadius:"14px",background:r?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"#f1f5f9",color:r?"white":"#475569",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",fontWeight:"800",flexShrink:0,boxShadow:r?"0 6px 12px rgba(102, 126, 234, 0.5)":"0 2px 4px rgba(0,0,0,0.05)",transition:"all 0.2s ease"},children:e.optionLetter||String.fromCharCode(65+t)}),(0,Le.jsx)("span",{style:{flex:1,fontSize:"19px",color:"#1e293b",lineHeight:"1.8",fontWeight:"500"},children:e.optionText||e}),r&&(0,Le.jsx)("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"linear-gradient(135deg, #22c55e 0%, #16a34a 100%)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"22px",fontWeight:"bold",boxShadow:"0 4px 8px rgba(34, 197, 94, 0.5)"},children:"\u2713"})]},t)})})]})]})}),(0,Le.jsxs)("div",{style:{background:"white",padding:"24px 48px",borderTop:"3px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"32px",flexShrink:0,boxShadow:"0 -4px 6px rgba(0,0,0,0.05)"},children:[(0,Le.jsxs)("button",{className:"btn btn-secondary",onClick:ke,disabled:0===J,style:{padding:"16px 32px",borderRadius:"12px",border:"2px solid #cbd5e1",background:0===J?"#e2e8f0":"white",color:0===J?"#94a3b8":"#475569",fontSize:"17px",fontWeight:"600",cursor:0===J?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"10px",minWidth:"160px",justifyContent:"center",boxShadow:0===J?"none":"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,Le.jsx)("span",{style:{fontSize:"20px"},children:"\u2b05\ufe0f"}),"Previous"]}),(0,Le.jsxs)("div",{style:{flex:1,textAlign:"center",display:"flex",flexDirection:"column",gap:"12px"},children:[(0,Le.jsxs)("div",{style:{fontSize:"16px",color:"#1e293b",fontWeight:"600"},children:["Progress: ",(0,Le.jsx)("span",{style:{color:"#22c55e"},children:Object.keys(G).length})," answered,",(0,Le.jsxs)("span",{style:{color:"#ef4444"},children:[" ",Y.length-Object.keys(G).length]})," remaining"]}),(0,Le.jsx)("div",{style:{height:"12px",background:"#e2e8f0",borderRadius:"6px",overflow:"hidden",maxWidth:"500px",margin:"0 auto",width:"100%",boxShadow:"inset 0 2px 4px rgba(0,0,0,0.1)"},children:(0,Le.jsx)("div",{style:{height:"100%",background:"linear-gradient(90deg, #22c55e 0%, #16a34a 100%)",width:"".concat(Object.keys(G).length/Y.length*100,"%"),transition:"width 0.3s ease",boxShadow:"0 2px 4px rgba(34, 197, 94, 0.4)"}})})]}),J<Y.length-1?(0,Le.jsxs)("button",{className:"btn btn-secondary",onClick:we,style:{padding:"16px 32px",borderRadius:"12px",border:"2px solid #667eea",background:"white",color:"#667eea",fontSize:"17px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px",minWidth:"160px",justifyContent:"center",boxShadow:"0 2px 4px rgba(102, 126, 234, 0.2)"},children:["Next",(0,Le.jsx)("span",{style:{fontSize:"20px"},children:"\u27a1\ufe0f"})]}):(0,Le.jsxs)("button",{className:"btn btn-primary",onClick:Se,disabled:B,style:{padding:"16px 40px",borderRadius:"12px",background:B?"#cbd5e1":"linear-gradient(135deg, #22c55e 0%, #16a34a 100%)",color:"white",border:"none",fontSize:"18px",fontWeight:"700",cursor:B?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"10px",minWidth:"200px",justifyContent:"center",boxShadow:B?"none":"0 4px 6px rgba(34, 197, 94, 0.4)"},children:[(0,Le.jsx)("span",{style:{fontSize:"22px"},children:B?"\u23f3":"\u2705"}),B?"Submitting...":"Submit Test"]})]})]})})]})]}),ue&&ce&&(0,Le.jsx)("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(4px)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:(0,Le.jsxs)("div",{style:{background:"white",borderRadius:"16px",maxWidth:"600px",width:"100%",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.2)"},children:[(0,Le.jsxs)("div",{style:{background:ce.isPassed?"linear-gradient(135deg, #22c55e 0%, #16a34a 100%)":"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"white",padding:"32px",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",textAlign:"center"},children:[(0,Le.jsx)("div",{style:{fontSize:"64px",marginBottom:"16px"},children:ce.isPassed?"\ud83c\udf89":"\ud83d\udcda"}),(0,Le.jsx)("h2",{style:{margin:0,fontSize:"32px",fontWeight:"700",marginBottom:"8px"},children:ce.isPassed?"Congratulations!":"Keep Practicing!"}),(0,Le.jsx)("p",{style:{margin:0,fontSize:"18px",opacity:.95},children:ce.isPassed?"You have passed the test!":"You can try again to improve your score"})]}),(0,Le.jsxs)("div",{style:{padding:"32px"},children:[(0,Le.jsxs)("div",{style:{background:"linear-gradient(135deg, #667eea15 0%, #764ba215 100%)",padding:"24px",borderRadius:"12px",marginBottom:"24px",textAlign:"center"},children:[(0,Le.jsx)("div",{style:{fontSize:"16px",color:"#64748b",marginBottom:"8px"},children:"Your Score"}),(0,Le.jsxs)("div",{style:{fontSize:"48px",fontWeight:"bold",color:ce.isPassed?"#22c55e":"#ef4444",marginBottom:"8px"},children:[ce.percentage.toFixed(1),"%"]}),(0,Le.jsxs)("div",{style:{fontSize:"18px",color:"#475569"},children:[ce.totalMarksObtained," / ",ce.totalMarks," marks"]})]}),(0,Le.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px",marginBottom:"24px"},children:[(0,Le.jsxs)("div",{style:{background:"#dcfce7",padding:"16px",borderRadius:"8px",textAlign:"center"},children:[(0,Le.jsx)("div",{style:{fontSize:"28px",fontWeight:"bold",color:"#166534"},children:ce.correctAnswers}),(0,Le.jsx)("div",{style:{fontSize:"13px",color:"#166534",marginTop:"4px"},children:"\u2713 Correct"})]}),(0,Le.jsxs)("div",{style:{background:"#fee2e2",padding:"16px",borderRadius:"8px",textAlign:"center"},children:[(0,Le.jsx)("div",{style:{fontSize:"28px",fontWeight:"bold",color:"#991b1b"},children:ce.wrongAnswers}),(0,Le.jsx)("div",{style:{fontSize:"13px",color:"#991b1b",marginTop:"4px"},children:"\u2717 Wrong"})]}),(0,Le.jsxs)("div",{style:{background:"#e0e7ff",padding:"16px",borderRadius:"8px",textAlign:"center"},children:[(0,Le.jsx)("div",{style:{fontSize:"28px",fontWeight:"bold",color:"#3730a3"},children:ce.unanswered}),(0,Le.jsx)("div",{style:{fontSize:"13px",color:"#3730a3",marginTop:"4px"},children:"\u25cb Skipped"})]})]}),(0,Le.jsxs)("div",{style:{background:"#f8fafc",padding:"16px",borderRadius:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Le.jsx)("span",{style:{fontSize:"14px",color:"#64748b",fontWeight:"500"},children:"\u23f1\ufe0f Time Taken:"}),(0,Le.jsx)("span",{style:{fontSize:"16px",color:"#1e293b",fontWeight:"600"},children:Ce(ce.timeTakenSeconds)})]})]}),(0,Le.jsx)("div",{style:{background:"#f8fafc",padding:"20px 32px",borderTop:"1px solid #e2e8f0",borderBottomLeftRadius:"16px",borderBottomRightRadius:"16px",display:"flex",justifyContent:"center"},children:(0,Le.jsx)("button",{onClick:()=>{pe(!1),de(null),V(null),$([]),X({}),ie(null),oe(null),ne(new Set)},style:{padding:"12px 48px",borderRadius:"8px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",fontSize:"16px",fontWeight:"600",cursor:"pointer"},children:"Close"})})]})}),fe&&me&&(0,Le.jsx)("div",{className:"modal-overlay",onClick:e=>{console.log("Overlay clicked",e.target,e.currentTarget),e.target===e.currentTarget&&(console.log("Closing modal via backdrop click"),Ie())},style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(4px)",zIndex:10001,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",overflow:"auto"},children:(0,Le.jsxs)("div",{onClick:e=>{e.stopPropagation(),console.log("Modal content clicked - should not close")},style:{background:"white",borderRadius:"20px",maxWidth:"700px",width:"100%",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.3)",position:"relative"},children:[(0,Le.jsxs)("div",{style:{background:me.isPassed?"linear-gradient(135deg, #22c55e 0%, #16a34a 100%)":"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"white",padding:"32px",borderTopLeftRadius:"20px",borderTopRightRadius:"20px",textAlign:"center",position:"relative"},children:[(0,Le.jsx)("div",{style:{fontSize:"72px",marginBottom:"16px"},children:me.isPassed?"\ud83c\udf89":"\ud83d\udcda"}),(0,Le.jsx)("h2",{style:{margin:0,fontSize:"32px",fontWeight:"700",marginBottom:"8px"},children:me.isPassed?"Test Passed!":"Keep Practicing!"}),(0,Le.jsxs)("p",{style:{margin:0,fontSize:"16px",opacity:.95},children:["Attempt #",me.attemptNumber," - ",me.testName]}),(0,Le.jsx)("button",{onClick:Ie,style:{position:"absolute",top:"16px",right:"16px",background:"rgba(255,255,255,0.2)",border:"none",color:"white",width:"40px",height:"40px",borderRadius:"8px",fontSize:"24px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",zIndex:1},onMouseOver:e=>{e.currentTarget.style.background="rgba(255,255,255,0.4)",e.currentTarget.style.transform="scale(1.1)"},onMouseOut:e=>{e.currentTarget.style.background="rgba(255,255,255,0.2)",e.currentTarget.style.transform="scale(1)"},children:"\u2715"})]}),(0,Le.jsxs)("div",{style:{padding:"40px"},children:[(0,Le.jsxs)("div",{style:{background:"linear-gradient(135deg, #667eea15 0%, #764ba215 100%)",padding:"32px",borderRadius:"16px",marginBottom:"32px",textAlign:"center",border:"2px solid #e0e7ff"},children:[(0,Le.jsx)("div",{style:{fontSize:"16px",color:"#64748b",marginBottom:"12px",fontWeight:"500"},children:"Final Score"}),(0,Le.jsxs)("div",{style:{fontSize:"56px",fontWeight:"bold",color:me.isPassed?"#22c55e":"#ef4444",marginBottom:"12px",textShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[me.percentage.toFixed(1),"%"]}),(0,Le.jsxs)("div",{style:{fontSize:"20px",color:"#475569",fontWeight:"600"},children:[me.totalMarksObtained," / ",me.totalMarksAvailable," marks"]}),(0,Le.jsxs)("div",{style:{marginTop:"16px",fontSize:"14px",color:"#64748b",padding:"12px",background:"rgba(255,255,255,0.6)",borderRadius:"8px"},children:["Passing Marks: ",me.passingMarks]})]}),(0,Le.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"20px",marginBottom:"32px"},children:[(0,Le.jsxs)("div",{style:{background:"#dcfce7",padding:"24px",borderRadius:"12px",textAlign:"center",border:"2px solid #86efac"},children:[(0,Le.jsx)("div",{style:{fontSize:"36px",fontWeight:"bold",color:"#166534",marginBottom:"8px"},children:me.correctAnswers}),(0,Le.jsx)("div",{style:{fontSize:"14px",color:"#166534",fontWeight:"600"},children:"\u2713 Correct"})]}),(0,Le.jsxs)("div",{style:{background:"#fee2e2",padding:"24px",borderRadius:"12px",textAlign:"center",border:"2px solid #fca5a5"},children:[(0,Le.jsx)("div",{style:{fontSize:"36px",fontWeight:"bold",color:"#991b1b",marginBottom:"8px"},children:me.wrongAnswers}),(0,Le.jsx)("div",{style:{fontSize:"14px",color:"#991b1b",fontWeight:"600"},children:"\u2717 Wrong"})]}),(0,Le.jsxs)("div",{style:{background:"#e0e7ff",padding:"24px",borderRadius:"12px",textAlign:"center",border:"2px solid #a5b4fc"},children:[(0,Le.jsx)("div",{style:{fontSize:"36px",fontWeight:"bold",color:"#3730a3",marginBottom:"8px"},children:me.unansweredQuestions}),(0,Le.jsx)("div",{style:{fontSize:"14px",color:"#3730a3",fontWeight:"600"},children:"\u25cb Skipped"})]})]}),(0,Le.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[(0,Le.jsxs)("div",{style:{background:"#f8fafc",padding:"20px",borderRadius:"12px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Le.jsx)("span",{style:{fontSize:"14px",color:"#64748b",fontWeight:"600"},children:"\u23f1\ufe0f Time Taken:"}),(0,Le.jsx)("span",{style:{fontSize:"18px",color:"#1e293b",fontWeight:"700"},children:Ce(me.timeTakenSeconds)})]}),(0,Le.jsxs)("div",{style:{background:"#f8fafc",padding:"20px",borderRadius:"12px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Le.jsx)("span",{style:{fontSize:"14px",color:"#64748b",fontWeight:"600"},children:"\ud83d\udcdd Total Questions:"}),(0,Le.jsx)("span",{style:{fontSize:"18px",color:"#1e293b",fontWeight:"700"},children:me.totalQuestions})]}),(0,Le.jsxs)("div",{style:{background:"#f8fafc",padding:"20px",borderRadius:"12px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Le.jsx)("span",{style:{fontSize:"14px",color:"#64748b",fontWeight:"600"},children:"\ud83d\udcc5 Started:"}),(0,Le.jsx)("span",{style:{fontSize:"14px",color:"#1e293b",fontWeight:"600"},children:new Date(me.startedAt).toLocaleString()})]}),(0,Le.jsxs)("div",{style:{background:"#f8fafc",padding:"20px",borderRadius:"12px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Le.jsx)("span",{style:{fontSize:"14px",color:"#64748b",fontWeight:"600"},children:"\u2705 Submitted:"}),(0,Le.jsx)("span",{style:{fontSize:"14px",color:"#1e293b",fontWeight:"600"},children:new Date(me.submittedAt).toLocaleString()})]})]})]}),(0,Le.jsx)("div",{style:{background:"#f8fafc",padding:"24px 40px",borderTop:"1px solid #e2e8f0",borderBottomLeftRadius:"20px",borderBottomRightRadius:"20px",display:"flex",justifyContent:"center"},children:(0,Le.jsx)("button",{onClick:Ie,style:{padding:"14px 48px",borderRadius:"10px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",fontSize:"16px",fontWeight:"600",cursor:"pointer",boxShadow:"0 4px 6px rgba(102, 126, 234, 0.3)",transition:"transform 0.2s ease, boxShadow 0.2s ease"},onMouseOver:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 6px 12px rgba(102, 126, 234, 0.4)"},onMouseOut:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 6px rgba(102, 126, 234, 0.3)"},children:"Close"})})]})})]})},as=e=>{var t,s;let{question:a,isBookmarked:r,onToggleBookmark:i}=e;const[l,o]=(0,n.useState)(!1),[c,d]=(0,n.useState)(!1),[u,p]=(0,n.useState)(!1),m=(e=>{switch(null===e||void 0===e?void 0:e.toUpperCase()){case"EASY":return{bg:"#dcfce7",text:"#166534",border:"#86efac"};case"MEDIUM":return{bg:"#fef3c7",text:"#92400e",border:"#fcd34d"};case"HARD":return{bg:"#fee2e2",text:"#991b1b",border:"#fca5a5"};default:return{bg:"#f3f4f6",text:"#4b5563",border:"#d1d5db"}}})(a.difficultyLevel),h=(null===(t=a.options)||void 0===t||t.find(e=>e.isCorrect),a.questionText||""),f=h.length>150;return(0,Le.jsxs)("div",{style:{background:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"all 0.3s ease",border:"1px solid #e5e7eb",position:"relative"},onMouseOver:e=>e.currentTarget.style.boxShadow="0 8px 24px rgba(0,0,0,0.15)",onMouseOut:e=>e.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)",children:[(0,Le.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px",flexWrap:"wrap",gap:"8px"},children:[(0,Le.jsxs)("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",flex:1},children:[(0,Le.jsx)("span",{style:{padding:"6px 12px",borderRadius:"8px",fontSize:"12px",fontWeight:"600",background:m.bg,color:m.text,border:"1px solid ".concat(m.border)},children:a.difficultyLevel}),(0,Le.jsxs)("span",{style:{padding:"6px 12px",borderRadius:"8px",fontSize:"12px",fontWeight:"600",background:"#e0e7ff",color:"#3730a3",border:"1px solid #a5b4fc",display:"flex",alignItems:"center",gap:"4px"},children:[(e=>{switch(null===e||void 0===e?void 0:e.toUpperCase()){case"MULTIPLE_CHOICE":return"\ud83d\udcdd";case"TRUE_FALSE":return"\u2705";case"FILL_BLANK":return"\u270d\ufe0f";case"ESSAY":return"\ud83d\udcc4";default:return"\u2753"}})(a.questionType),null===(s=a.questionType)||void 0===s?void 0:s.replace("_"," ")]}),(0,Le.jsxs)("span",{style:{padding:"6px 12px",borderRadius:"8px",fontSize:"12px",fontWeight:"600",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},children:[a.marks," ",1===a.marks?"mark":"marks"]})]}),(0,Le.jsx)("button",{onClick:()=>i(a.id),style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",padding:"4px",transition:"transform 0.2s ease"},onMouseOver:e=>e.currentTarget.style.transform="scale(1.2)",onMouseOut:e=>e.currentTarget.style.transform="scale(1)",title:r?"Remove bookmark":"Bookmark this question",children:r?"\u2764\ufe0f":"\ud83e\udd0d"})]}),(0,Le.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,Le.jsx)("h3",{style:{margin:"0 0 12px 0",fontSize:"16px",fontWeight:"600",color:"#1f2937",lineHeight:"1.6"},children:u||!f?h:"".concat(h.substring(0,150),"...")}),f&&(0,Le.jsx)("button",{onClick:()=>p(!u),style:{background:"none",border:"none",color:"#667eea",fontSize:"14px",fontWeight:"600",cursor:"pointer",padding:"4px 0"},children:u?"\u2190 Show less":"Read more \u2192"})]}),(0,Le.jsxs)("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",marginBottom:"16px",fontSize:"13px",color:"#6b7280"},children:[a.subjectName&&(0,Le.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:["\ud83d\udcda ",a.subjectName]}),a.topicName&&(0,Le.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:["\ud83d\udcd6 ",a.topicName]}),a.chapterName&&(0,Le.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:["\ud83d\udcd1 ",a.chapterName]})]}),l&&a.options&&a.options.length>0&&(0,Le.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,Le.jsx)("div",{style:{fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"12px"},children:"Options:"}),(0,Le.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:a.options.map((e,t)=>(0,Le.jsxs)("div",{style:{padding:"12px 16px",borderRadius:"8px",background:e.isCorrect?"#dcfce7":"#f9fafb",border:"2px solid ".concat(e.isCorrect?"#86efac":"#e5e7eb"),display:"flex",justifyContent:"space-between",alignItems:"center",transition:"all 0.2s ease"},children:[(0,Le.jsxs)("span",{style:{fontSize:"14px",color:e.isCorrect?"#166534":"#374151",fontWeight:e.isCorrect?"600":"400"},children:[(0,Le.jsxs)("strong",{children:[String.fromCharCode(65+t),"."]})," ",e.optionText]}),e.isCorrect&&(0,Le.jsx)("span",{style:{fontSize:"14px",fontWeight:"700",color:"#166534",display:"flex",alignItems:"center",gap:"4px"},children:"\u2713 Correct"})]},e.optionId||t))})]}),c&&a.explanation&&(0,Le.jsxs)("div",{style:{marginBottom:"16px",padding:"16px",background:"linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%)",borderLeft:"4px solid #ff9800",borderRadius:"8px"},children:[(0,Le.jsx)("div",{style:{fontSize:"14px",fontWeight:"600",color:"#e65100",marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px"},children:"\ud83d\udca1 Explanation:"}),(0,Le.jsx)("div",{style:{fontSize:"14px",color:"#6d4c41",lineHeight:"1.6"},children:a.explanation})]}),(0,Le.jsxs)("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",marginTop:"16px",paddingTop:"16px",borderTop:"1px solid #e5e7eb"},children:[(0,Le.jsx)("button",{onClick:()=>o(!l),style:{padding:"10px 20px",borderRadius:"8px",border:l?"none":"2px solid #667eea",background:l?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"white",color:l?"white":"#667eea",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"6px"},onMouseOver:e=>{l||(e.currentTarget.style.background="#667eea",e.currentTarget.style.color="white")},onMouseOut:e=>{l||(e.currentTarget.style.background="white",e.currentTarget.style.color="#667eea")},children:l?"\u2713 Answer Shown":"\ud83d\udc41\ufe0f Show Answer"}),a.explanation&&(0,Le.jsx)("button",{onClick:()=>d(!c),style:{padding:"10px 20px",borderRadius:"8px",border:c?"none":"2px solid #ff9800",background:c?"linear-gradient(135deg, #ff9800 0%, #f57c00 100%)":"white",color:c?"white":"#ff9800",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"6px"},onMouseOver:e=>{c||(e.currentTarget.style.background="#ff9800",e.currentTarget.style.color="white")},onMouseOut:e=>{c||(e.currentTarget.style.background="white",e.currentTarget.style.color="#ff9800")},children:c?"\u2713 Explanation Shown":"\ud83d\udca1 Show Explanation"})]})]})},ns=e=>{let{filters:t,onFilterChange:s,onApplyFilters:a,onClearFilters:r,questionCount:i}=e;const{token:l}=(0,Pe.nm)(),[o,c]=(0,n.useState)(!0),[d,u]=(0,n.useState)([]),[p,m]=(0,n.useState)(null),[h,f]=(0,n.useState)([]),[x,g]=(0,n.useState)([]),[v,b]=(0,n.useState)([]),[y,j]=(0,n.useState)([]);(0,n.useEffect)(()=>{l&&N()},[l]);const N=async()=>{try{const e=await Kt(l);console.log("Loaded subscriptions:",e);const t=(e||[]).filter(e=>"ACTIVE"===e.subscriptionStatus&&"PAID"===e.paymentStatus);u(t),t.length>0&&!p&&m(t[0])}catch(e){console.error("Error loading subscriptions:",e)}};(0,n.useEffect)(()=>{p?w(p):(f([]),g([]),b([]),j([]))},[p]);const w=async e=>{try{let t=[];"CLASS"===e.subscriptionLevel&&e.classId?t=await(0,Ge.u7)(l,null,null,e.classId,null,!0):"EXAM"===e.subscriptionLevel&&e.examId?t=await(0,Ge.u7)(l,null,null,null,e.examId,!0):"COURSE"===e.subscriptionLevel&&e.courseId&&(t=await(0,Ge.u7)(l,null,e.courseId,null,null,!0)),console.log("Loaded subjects for subscription:",t),f(t||[]),g([]),b([]),j([])}catch(t){console.error("Error loading subjects:",t)}};(0,n.useEffect)(()=>{t.subjectId?k(t.subjectId):(g([]),b([]),j([]))},[t.subjectId]);const k=async e=>{try{if(!p)return;let t=[];"CLASS"===p.subscriptionLevel?t=await(0,Ge.DU)(l,e,null,null,!0):"EXAM"===p.subscriptionLevel?t=await(0,Ge.DU)(l,null,e,null,!0):"COURSE"===p.subscriptionLevel&&(t=await(0,Ge.DU)(l,null,null,e,!0)),console.log("Loaded topics:",t),g(t||[])}catch(t){console.error("Error loading topics:",t)}};(0,n.useEffect)(()=>{t.topicId?S(t.topicId):(b([]),j([]))},[t.topicId]);const S=async e=>{try{const t=await(0,Ge.OA)(l,e);console.log("Loaded modules:",t),b(t||[])}catch(t){console.error("Error loading modules:",t)}};(0,n.useEffect)(()=>{t.moduleId?C(t.moduleId):j([])},[t.moduleId]);const C=async e=>{try{const t=await(0,Ge.CE)(l,e);console.log("Loaded chapters:",t),j(t||[])}catch(t){console.error("Error loading chapters:",t)}},I=(e,a)=>{s((0,Ue.A)((0,Ue.A)({},t),{},{[e]:a,page:0}))};return(0,Le.jsxs)("div",{style:{background:"white",borderRadius:"16px",padding:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",border:"1px solid #e5e7eb",position:"sticky",top:"20px"},children:[(0,Le.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",paddingBottom:"16px",borderBottom:"2px solid #e5e7eb"},children:[(0,Le.jsxs)("h3",{style:{margin:0,fontSize:"18px",fontWeight:"700",color:"#1f2937",display:"flex",alignItems:"center",gap:"8px"},children:["\ud83d\udd0d Filters",void 0!==i&&(0,Le.jsx)("span",{style:{fontSize:"14px",fontWeight:"600",color:"#667eea",background:"#e0e7ff",padding:"4px 12px",borderRadius:"12px"},children:i})]}),(0,Le.jsx)("button",{onClick:()=>c(!o),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer",padding:"4px"},children:o?"\u25bc":"\u25b6"})]}),o&&(0,Le.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[(0,Le.jsxs)("div",{children:[(0,Le.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"\ud83c\udf93 My Subscription"}),(0,Le.jsxs)("select",{value:(null===p||void 0===p?void 0:p.subscriptionId)||"",onChange:e=>{const t=parseInt(e.target.value),s=d.find(e=>e.subscriptionId===t);m(s),I("subjectId",void 0),I("topicId",void 0),I("moduleId",void 0),I("chapterId",void 0)},style:{width:"100%",padding:"10px 12px",borderRadius:"8px",border:"2px solid #667eea",fontSize:"14px",color:"#374151",background:"white",cursor:"pointer",fontWeight:"500"},children:[0===d.length&&(0,Le.jsx)("option",{value:"",children:"No active subscriptions"}),d.map(e=>{let t=e.subscriptionLevel;return e.className?t+=" - ".concat(e.className):e.examName?t+=" - ".concat(e.examName):e.courseName&&(t+=" - ".concat(e.courseName)),(0,Le.jsx)("option",{value:e.subscriptionId,children:t},e.subscriptionId)})]})]}),p&&(0,Le.jsx)(Le.Fragment,{children:(0,Le.jsxs)("div",{children:[(0,Le.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"\ud83d\udcda Subject"}),(0,Le.jsxs)("select",{value:t.subjectId||"",onChange:e=>{const t=e.target.value;I("subjectId",t?parseInt(t):void 0),I("topicId",void 0),I("moduleId",void 0),I("chapterId",void 0)},style:{width:"100%",padding:"10px 12px",borderRadius:"8px",border:"2px solid #e5e7eb",fontSize:"14px",color:"#374151",background:"white",cursor:"pointer"},children:[(0,Le.jsx)("option",{value:"",children:"All Subjects"}),h.map(e=>(0,Le.jsx)("option",{value:e.linkageId||e.id,children:e.subjectName||e.name||"Unknown Subject"},e.linkageId||e.id))]})]})}),t.subjectId&&x.length>0&&(0,Le.jsxs)("div",{children:[(0,Le.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"\ud83d\udcd6 Topic"}),(0,Le.jsxs)("select",{value:t.topicId||"",onChange:e=>{const t=e.target.value;I("topicId",t?parseInt(t):void 0),I("moduleId",void 0),I("chapterId",void 0)},style:{width:"100%",padding:"10px 12px",borderRadius:"8px",border:"2px solid #e5e7eb",fontSize:"14px",color:"#374151",background:"white",cursor:"pointer"},children:[(0,Le.jsx)("option",{value:"",children:"All Topics"}),x.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.topicName||e.name||"Unknown Topic"},e.id))]})]}),t.topicId&&v.length>0&&(0,Le.jsxs)("div",{children:[(0,Le.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"\ud83d\udcda Module"}),(0,Le.jsxs)("select",{value:t.moduleId||"",onChange:e=>{const t=e.target.value;I("moduleId",t?parseInt(t):void 0),I("chapterId",void 0)},style:{width:"100%",padding:"10px 12px",borderRadius:"8px",border:"2px solid #e5e7eb",fontSize:"14px",color:"#374151",background:"white",cursor:"pointer"},children:[(0,Le.jsx)("option",{value:"",children:"All Modules"}),v.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.moduleName||e.name||"Unknown Module"},e.id))]})]}),t.moduleId&&y.length>0&&(0,Le.jsxs)("div",{children:[(0,Le.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"\ud83d\udcd1 Chapter"}),(0,Le.jsxs)("select",{value:t.chapterId||"",onChange:e=>{const t=e.target.value;I("chapterId",t?parseInt(t):void 0)},style:{width:"100%",padding:"10px 12px",borderRadius:"8px",border:"2px solid #e5e7eb",fontSize:"14px",color:"#374151",background:"white",cursor:"pointer"},children:[(0,Le.jsx)("option",{value:"",children:"All Chapters"}),y.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.chapterName||e.name||"Unknown Chapter"},e.id))]})]}),p&&(0,Le.jsxs)("div",{children:[(0,Le.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"\ud83d\udcca Difficulty Level"}),(0,Le.jsx)("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:["EASY","MEDIUM","HARD"].map(e=>{const s=t.difficultyLevel===e,a={EASY:{bg:"#dcfce7",text:"#166534",selected:"#86efac"},MEDIUM:{bg:"#fef3c7",text:"#92400e",selected:"#fcd34d"},HARD:{bg:"#fee2e2",text:"#991b1b",selected:"#fca5a5"}}[e];return(0,Le.jsxs)("button",{onClick:()=>I("difficultyLevel",s?void 0:e),style:{padding:"8px 16px",borderRadius:"8px",border:"2px solid ".concat(s?a.selected:a.bg),background:s?a.selected:a.bg,color:a.text,fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},children:[s&&"\u2713 ",e]},e)})})]}),p&&(0,Le.jsxs)("div",{children:[(0,Le.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"\ud83d\udcdd Question Type"}),(0,Le.jsxs)("select",{value:t.questionType||"",onChange:e=>I("questionType",e.target.value||void 0),style:{width:"100%",padding:"10px 12px",borderRadius:"8px",border:"2px solid #e5e7eb",fontSize:"14px",color:"#374151",background:"white",cursor:"pointer"},children:[(0,Le.jsx)("option",{value:"",children:"All Types"}),[{value:"MULTIPLE_CHOICE",label:"Multiple Choice"},{value:"TRUE_FALSE",label:"True/False"},{value:"FILL_BLANK",label:"Fill in the Blank"},{value:"ESSAY",label:"Essay"}].map(e=>(0,Le.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,Le.jsxs)("div",{style:{display:"flex",gap:"12px",paddingTop:"16px",borderTop:"1px solid #e5e7eb"},children:[(0,Le.jsx)("button",{onClick:a,disabled:!p,style:{flex:1,padding:"12px 20px",borderRadius:"8px",border:"none",background:p?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"#e5e7eb",color:p?"white":"#9ca3af",fontSize:"14px",fontWeight:"600",cursor:p?"pointer":"not-allowed",transition:"transform 0.2s ease",opacity:p?1:.6},onMouseOver:e=>{p&&(e.currentTarget.style.transform="translateY(-2px)")},onMouseOut:e=>{p&&(e.currentTarget.style.transform="translateY(0)")},children:"Apply Filters"}),(0,Le.jsx)("button",{onClick:()=>{r(),d.length>0&&m(d[0])},style:{flex:1,padding:"12px 20px",borderRadius:"8px",border:"2px solid #e5e7eb",background:"white",color:"#6b7280",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},onMouseOver:e=>{e.currentTarget.style.background="#f3f4f6",e.currentTarget.style.borderColor="#d1d5db"},onMouseOut:e=>{e.currentTarget.style.background="white",e.currentTarget.style.borderColor="#e5e7eb"},children:"Clear Filters"})]})]})]})},rs=e=>{let{onBackToDashboard:t=null}=e;const{token:s,addNotification:a}=(0,Pe.nm)(),[r,i]=(0,n.useState)(null),[l,o]=(0,n.useState)(!1),[c,d]=(0,n.useState)(null),[u,p]=(0,n.useState)(!1),[m,h]=(0,n.useState)(()=>{const e=localStorage.getItem("questionBookmarks");return e?new Set(JSON.parse(e)):new Set}),[f,x]=(0,n.useState)({page:0,size:20,sortBy:"id",sortDir:"asc"});(0,n.useEffect)(()=>{s&&g()},[s,f.page,f.size]);const g=async()=>{try{o(!0);const e=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=new URLSearchParams;t.subjectId&&s.append("subjectId",t.subjectId),t.topicId&&s.append("topicId",t.topicId),t.moduleId&&s.append("moduleId",t.moduleId),t.chapterId&&s.append("chapterId",t.chapterId),t.questionType&&s.append("questionType",t.questionType),t.difficultyLevel&&s.append("difficultyLevel",t.difficultyLevel),void 0!==t.page&&s.append("page",t.page),t.size&&s.append("size",t.size),t.sortBy&&s.append("sortBy",t.sortBy),t.sortDir&&s.append("sortDir",t.sortDir);const a="/api/student/questions".concat(s.toString()?"?".concat(s.toString()):"");console.log("Fetching student questions from:",a),console.log("Full URL:","http://localhost:8080".concat(a)),console.log("Filters applied:",t);try{const t=await(0,Xe.Vg)(a,e),s=await t.json();return console.log("Student questions data:",s),console.log("Total questions:",s.totalElements),s}catch(n){throw console.error("Error fetching student questions:",n),n}}(s,f);i(e),0===e.totalElements&&(y()?a("\u2139\ufe0f No questions found with the selected filters","info"):a("\u2139\ufe0f No questions available. Please check your subscriptions.","info"))}catch(e){console.error("Error loading questions:",e),a("\u274c Failed to load questions: ".concat(e.message),"error")}finally{o(!1)}},v=()=>{x({page:0,size:20,sortBy:"id",sortDir:"asc"})},b=e=>{x(t=>(0,Ue.A)((0,Ue.A)({},t),{},{page:e})),window.scrollTo({top:0,behavior:"smooth"})},y=()=>f.subjectId||f.topicId||f.moduleId||f.chapterId||f.questionType||f.difficultyLevel,j=e=>{h(t=>{const s=new Set(t);return s.has(e)?(s.delete(e),a("\ud83e\udd0d Bookmark removed","info")):(s.add(e),a("\u2764\ufe0f Question bookmarked","success")),localStorage.setItem("questionBookmarks",JSON.stringify([...s])),s})},N=()=>{p(!1),d(null)};return s?(0,Le.jsxs)("div",{className:"student-question-bank",children:[(0,Le.jsx)("div",{className:"page-header",children:(0,Le.jsxs)("div",{className:"header-content",children:[t&&(0,Le.jsx)("button",{onClick:t,className:"back-button",children:"\u2190 Back"}),(0,Le.jsxs)("div",{children:[(0,Le.jsx)("h1",{className:"page-title",children:"\ud83d\udcda Question Bank"}),(0,Le.jsx)("p",{className:"page-subtitle",children:"Browse and practice questions from your subscribed courses"})]})]})}),(0,Le.jsxs)("div",{className:"content-wrapper",children:[(0,Le.jsx)("aside",{className:"filters-sidebar",children:(0,Le.jsx)(ns,{filters:f,onFilterChange:e=>{x(e)},onApplyFilters:()=>{g()},onClearFilters:v,questionCount:null===r||void 0===r?void 0:r.totalElements})}),(0,Le.jsx)("main",{className:"questions-main",children:l?(0,Le.jsxs)("div",{className:"loading-container",children:[(0,Le.jsx)("div",{className:"loading-spinner"}),(0,Le.jsx)("p",{children:"Loading questions..."})]}):r?r&&r.content.length>0?(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)("div",{className:"results-info",children:(0,Le.jsxs)("p",{children:["Showing ",(0,Le.jsx)("strong",{children:r.content.length})," of ",(0,Le.jsx)("strong",{children:r.totalElements})," questions",r.totalPages>1&&(0,Le.jsxs)(Le.Fragment,{children:[" (Page ",(0,Le.jsx)("strong",{children:r.number+1})," of ",(0,Le.jsx)("strong",{children:r.totalPages}),")"]})]})}),(0,Le.jsx)("div",{className:"questions-grid",children:r.content.map(e=>(0,Le.jsx)(as,{question:e,isBookmarked:m.has(e.id),onToggleBookmark:j},e.id))}),r.totalPages>1&&(0,Le.jsxs)("div",{className:"pagination",children:[(0,Le.jsx)("button",{disabled:r.first,onClick:()=>b(f.page-1),className:"pagination-button",children:"\u2190 Previous"}),(0,Le.jsx)("div",{className:"pagination-info",children:(0,Le.jsxs)("span",{children:["Page ",r.number+1," of ",r.totalPages]})}),(0,Le.jsx)("button",{disabled:r.last,onClick:()=>b(f.page+1),className:"pagination-button",children:"Next \u2192"}),(0,Le.jsxs)("select",{value:f.size,onChange:e=>{return t=e.target.value,void x(e=>(0,Ue.A)((0,Ue.A)({},e),{},{size:parseInt(t),page:0}));var t},className:"page-size-select",children:[(0,Le.jsx)("option",{value:10,children:"10 per page"}),(0,Le.jsx)("option",{value:20,children:"20 per page"}),(0,Le.jsx)("option",{value:50,children:"50 per page"}),(0,Le.jsx)("option",{value:100,children:"100 per page"})]})]})]}):(0,Le.jsxs)("div",{className:"empty-state",children:[(0,Le.jsx)("div",{className:"empty-icon",children:y()?"\ud83d\udd0d":"\ud83d\udcda"}),(0,Le.jsx)("h2",{children:y()?"No Questions Found":"No Questions Available"}),(0,Le.jsx)("p",{children:y()?"Try adjusting your filters to find more questions.":"You don't have any active subscriptions or there are no questions available for your subscribed courses."}),y()?(0,Le.jsx)("button",{onClick:v,className:"clear-filters-button",children:"Clear All Filters"}):t?(0,Le.jsx)("button",{onClick:t,className:"clear-filters-button",children:"Browse Courses"}):null]}):(0,Le.jsxs)("div",{className:"empty-state",children:[(0,Le.jsx)("div",{className:"empty-icon",children:"\ud83c\udf93"}),(0,Le.jsx)("h2",{children:"Select a Subscription"}),(0,Le.jsx)("p",{children:"Choose a subscription from the filters to view questions."})]})})]}),u&&c&&(0,Le.jsx)("div",{className:"modal-overlay",onClick:N,children:(0,Le.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,Le.jsx)("button",{className:"modal-close",onClick:N,children:"\u2715"}),(0,Le.jsx)("div",{className:"modal-header",children:(0,Le.jsx)("h2",{children:"Question Details"})}),(0,Le.jsx)("div",{className:"modal-body",children:(0,Le.jsx)(as,{question:c,isBookmarked:m.has(c.id),onToggleBookmark:j})})]})})]}):(0,Le.jsx)("div",{className:"student-question-bank",children:(0,Le.jsxs)("div",{className:"empty-state",children:[(0,Le.jsx)("div",{className:"empty-icon",children:"\ud83d\udd12"}),(0,Le.jsx)("h2",{children:"Authentication Required"}),(0,Le.jsx)("p",{children:"Please log in to access the question bank."})]})})},is=()=>{const{token:e,addNotification:t}=(0,Pe.nm)(),s=[{id:1,name:"Academic Course",description:"Complete school curriculum courses"},{id:2,name:"Competitive Exam",description:"Preparation courses for various competitive examinations"},{id:3,name:"Professional Course",description:"Skill-based professional development courses"}],a=[{id:1,name:"Academic Course Class 1-10",courseTypeId:1},{id:2,name:"SSC",courseTypeId:2},{id:3,name:"Photography",courseTypeId:3}],r=[{id:6,name:"Grade 1",courseId:1},{id:7,name:"Grade 2",courseId:1},{id:8,name:"Grade 12",courseId:4}],i=[{id:1,name:"SSC MTS",courseId:2},{id:2,name:"SSC GD",courseId:2}],[l,o]=(0,n.useState)([]),[c,d]=(0,n.useState)(null),[u,p]=(0,n.useState)({overall:{},subjects:[],topics:[],modules:[],chapters:[]}),[m,h]=(0,n.useState)([]),[f,x]=(0,n.useState)({}),[g,v]=(0,n.useState)(!1),[b,y]=(0,n.useState)("30");(0,n.useEffect)(()=>{console.log("Course types loaded:",s)},[s]);const j=(0,n.useCallback)(async()=>{try{v(!0);o([{id:1,courseTypeId:1,courseId:1,classId:6,examId:null,subscriptionType:"class",startDate:"2024-01-01",endDate:"2024-12-31",isActive:!0}])}catch(e){console.error("Error loading subscriptions:",e),t("Failed to load subscriptions","error")}finally{v(!1)}},[]);(0,n.useEffect)(()=>{j()},[j]),(0,n.useEffect)(()=>{c&&(N(),w(),k())},[c,b]);const N=async()=>{if(c)try{v(!0);p({overall:{chaptersCompleted:25,totalChapters:360,questionsAttempted:150,correctAnswers:120,timeSpent:7200},subjects:[{id:1,name:"Mathematics",chaptersCompleted:10,totalChapters:120,questionsAttempted:80,accuracy:85,progressPercentage:8},{id:2,name:"Hindi",chaptersCompleted:8,totalChapters:96,questionsAttempted:45,accuracy:78,progressPercentage:8}],topics:[{id:1,name:"Basic Addition",subjectName:"Mathematics",chaptersCompleted:5,totalChapters:15,accuracy:90,progressPercentage:33}]})}catch(e){console.error("Error loading progress data:",e),t("Failed to load progress data","error")}finally{v(!1)}},w=async()=>{if(c)try{h([{id:1,testId:1,testName:"Mathematics Chapter 1 Test",score:85,totalQuestions:20,correctAnswers:17,timeSpent:1800,attemptedAt:"2024-01-15T10:30:00.000Z",completedAt:"2024-01-15T11:00:00.000Z",isCompleted:!0},{id:2,testId:2,testName:"Hindi Vocabulary Test",score:92,totalQuestions:15,correctAnswers:14,timeSpent:1200,attemptedAt:"2024-01-14T14:00:00.000Z",completedAt:"2024-01-14T14:20:00.000Z",isCompleted:!0}])}catch(e){console.error("Error loading test performance:",e)}},k=async()=>{if(c)try{x({totalAttempted:150,correctAnswers:120,accuracy:80,timeSpent:7200,currentStreak:5,longestStreak:15,totalStudyTime:18e3})}catch(e){console.error("Error loading question stats:",e)}},S=e=>{const t=s.find(t=>t.id===e.courseTypeId),n=a.find(t=>t.id===e.courseId);let l="".concat((null===t||void 0===t?void 0:t.name)||"Unknown"," - ").concat((null===n||void 0===n?void 0:n.name)||"Unknown");if(e.classId){const t=r.find(t=>t.id===e.classId);l+=" - ".concat((null===t||void 0===t?void 0:t.name)||"Unknown Class")}else if(e.examId){const t=i.find(t=>t.id===e.examId);l+=" - ".concat((null===t||void 0===t?void 0:t.name)||"Unknown Exam")}return l},C=(e,t)=>0===t?0:Math.round(e/t*100),I=e=>e>=80?"progress-success":e>=60?"progress-warning":e>=40?"progress-info":"progress-danger",A=e=>e>=80?"text-success":e>=60?"text-warning":e>=40?"text-info":"text-danger",E=e=>{const t=Math.floor(e/3600),s=Math.floor(e%3600/60);return t>0?"".concat(t,"h ").concat(s,"m"):"".concat(s,"m")};return(0,Le.jsxs)("div",{className:"student-progress-tracker",children:[(0,Le.jsxs)("div",{className:"page-header",children:[(0,Le.jsx)("h2",{children:"Progress Tracker"}),(0,Le.jsx)("div",{className:"time-range-selector",children:(0,Le.jsxs)("select",{value:b,onChange:e=>y(e.target.value),className:"form-input",children:[(0,Le.jsx)("option",{value:"7",children:"Last 7 days"}),(0,Le.jsx)("option",{value:"30",children:"Last 30 days"}),(0,Le.jsx)("option",{value:"90",children:"Last 90 days"}),(0,Le.jsx)("option",{value:"365",children:"Last year"}),(0,Le.jsx)("option",{value:"all",children:"All time"})]})})]}),(0,Le.jsxs)("div",{className:"subscription-section",children:[(0,Le.jsx)("h3",{children:"Select Subscription"}),g&&0===l.length?(0,Le.jsx)("div",{className:"loading",children:"Loading subscriptions..."}):0===l.length?(0,Le.jsx)("div",{className:"empty-state",children:(0,Le.jsx)("p",{children:"No active subscriptions found. Please create a subscription first."})}):(0,Le.jsx)("div",{className:"subscription-cards",children:l.filter(e=>e.isActive).map(e=>(0,Le.jsxs)("div",{className:"subscription-card ".concat((null===c||void 0===c?void 0:c.id)===e.id?"selected":""),onClick:()=>d(e),children:[(0,Le.jsx)("h4",{children:S(e)}),(0,Le.jsxs)("p",{className:"subscription-details",children:[(0,Le.jsxs)("span",{children:["Type: ",e.subscriptionType]}),(0,Le.jsxs)("span",{children:["Start: ",new Date(e.startDate).toLocaleDateString()]})]})]},e.id))})]}),c&&u.overall&&(0,Le.jsxs)("div",{className:"progress-section",children:[(0,Le.jsxs)("h3",{children:["Overall Progress (",(e=>{switch(e){case"7":return"Last 7 days";case"30":return"Last 30 days";case"90":return"Last 90 days";case"365":return"Last year";default:return"All time"}})(b),")"]}),(0,Le.jsxs)("div",{className:"progress-cards",children:[(0,Le.jsxs)("div",{className:"progress-card",children:[(0,Le.jsx)("h4",{children:"Learning Progress"}),(0,Le.jsx)("div",{className:"progress-stats",children:(0,Le.jsxs)("div",{className:"stat",children:[(0,Le.jsx)("span",{className:"stat-label",children:"Chapters Completed"}),(0,Le.jsxs)("span",{className:"stat-value",children:[u.overall.chaptersCompleted||0," / ",u.overall.totalChapters||0]}),(0,Le.jsx)("div",{className:"progress-bar",children:(0,Le.jsx)("div",{className:"progress-fill ".concat(I(C(u.overall.chaptersCompleted||0,u.overall.totalChapters||0))),style:{width:"".concat(C(u.overall.chaptersCompleted||0,u.overall.totalChapters||0),"%")}})}),(0,Le.jsxs)("span",{className:"progress-percentage",children:[C(u.overall.chaptersCompleted||0,u.overall.totalChapters||0),"%"]})]})})]}),(0,Le.jsxs)("div",{className:"progress-card",children:[(0,Le.jsx)("h4",{children:"Question Practice"}),(0,Le.jsxs)("div",{className:"progress-stats",children:[(0,Le.jsxs)("div",{className:"stat",children:[(0,Le.jsx)("span",{className:"stat-label",children:"Questions Attempted"}),(0,Le.jsx)("span",{className:"stat-value",children:f.totalAttempted||0})]}),(0,Le.jsxs)("div",{className:"stat",children:[(0,Le.jsx)("span",{className:"stat-label",children:"Correct Answers"}),(0,Le.jsxs)("span",{className:"stat-value ".concat(A(f.accuracy||0)),children:[f.correctAnswers||0," (",f.accuracy||0,"%)"]})]}),(0,Le.jsxs)("div",{className:"stat",children:[(0,Le.jsx)("span",{className:"stat-label",children:"Time Spent"}),(0,Le.jsx)("span",{className:"stat-value",children:E(f.timeSpent||0)})]})]})]}),(0,Le.jsxs)("div",{className:"progress-card",children:[(0,Le.jsx)("h4",{children:"Test Performance"}),(0,Le.jsxs)("div",{className:"progress-stats",children:[(0,Le.jsxs)("div",{className:"stat",children:[(0,Le.jsx)("span",{className:"stat-label",children:"Tests Taken"}),(0,Le.jsx)("span",{className:"stat-value",children:m.length})]}),(0,Le.jsxs)("div",{className:"stat",children:[(0,Le.jsx)("span",{className:"stat-label",children:"Average Score"}),(0,Le.jsxs)("span",{className:"stat-value ".concat(A(m.reduce((e,t)=>e+(t.score||0),0)/Math.max(m.length,1))),children:[m.length>0?Math.round(m.reduce((e,t)=>e+(t.score||0),0)/m.length):0,"%"]})]}),(0,Le.jsxs)("div",{className:"stat",children:[(0,Le.jsx)("span",{className:"stat-label",children:"Best Score"}),(0,Le.jsxs)("span",{className:"stat-value ".concat(A(Math.max(...m.map(e=>e.score||0),0))),children:[m.length>0?Math.max(...m.map(e=>e.score||0)):0,"%"]})]})]})]})]})]}),c&&u.subjects.length>0&&(0,Le.jsxs)("div",{className:"progress-section",children:[(0,Le.jsx)("h3",{children:"Subject-wise Progress"}),(0,Le.jsx)("div",{className:"subject-progress-table",children:(0,Le.jsxs)("table",{children:[(0,Le.jsx)("thead",{children:(0,Le.jsxs)("tr",{children:[(0,Le.jsx)("th",{children:"Subject"}),(0,Le.jsx)("th",{children:"Chapters"}),(0,Le.jsx)("th",{children:"Progress"}),(0,Le.jsx)("th",{children:"Questions"}),(0,Le.jsx)("th",{children:"Accuracy"})]})}),(0,Le.jsx)("tbody",{children:u.subjects.map(e=>(0,Le.jsxs)("tr",{children:[(0,Le.jsx)("td",{children:e.name}),(0,Le.jsxs)("td",{children:[e.chaptersCompleted," / ",e.totalChapters]}),(0,Le.jsxs)("td",{children:[(0,Le.jsx)("div",{className:"progress-bar",children:(0,Le.jsx)("div",{className:"progress-fill ".concat(I(e.progressPercentage)),style:{width:"".concat(e.progressPercentage,"%")}})}),(0,Le.jsxs)("span",{className:"progress-text",children:[e.progressPercentage,"%"]})]}),(0,Le.jsx)("td",{children:e.questionsAttempted}),(0,Le.jsxs)("td",{className:A(e.accuracy),children:[e.accuracy,"%"]})]},e.id))})]})})]}),c&&m.length>0&&(0,Le.jsxs)("div",{className:"progress-section",children:[(0,Le.jsx)("h3",{children:"Test Performance Details"}),(0,Le.jsx)("div",{className:"test-performance-table",children:(0,Le.jsxs)("table",{children:[(0,Le.jsx)("thead",{children:(0,Le.jsxs)("tr",{children:[(0,Le.jsx)("th",{children:"Test Name"}),(0,Le.jsx)("th",{children:"Date"}),(0,Le.jsx)("th",{children:"Score"}),(0,Le.jsx)("th",{children:"Time Spent"}),(0,Le.jsx)("th",{children:"Questions"}),(0,Le.jsx)("th",{children:"Status"})]})}),(0,Le.jsx)("tbody",{children:m.map(e=>(0,Le.jsxs)("tr",{children:[(0,Le.jsx)("td",{children:e.testName}),(0,Le.jsx)("td",{children:new Date(e.attemptedAt).toLocaleDateString()}),(0,Le.jsxs)("td",{className:A(e.score),children:[e.score,"%"]}),(0,Le.jsx)("td",{children:E(e.timeSpent)}),(0,Le.jsx)("td",{children:e.totalQuestions}),(0,Le.jsx)("td",{children:(0,Le.jsx)("span",{className:"status ".concat(e.isCompleted?"completed":"incomplete"),children:e.isCompleted?"Completed":"Incomplete"})})]},e.id))})]})})]}),c&&u.topics.length>0&&(0,Le.jsxs)("div",{className:"progress-section",children:[(0,Le.jsx)("h3",{children:"Topic-wise Progress"}),(0,Le.jsx)("div",{className:"topics-grid",children:u.topics.map(e=>(0,Le.jsxs)("div",{className:"topic-progress-card",children:[(0,Le.jsxs)("div",{className:"topic-header",children:[(0,Le.jsx)("h4",{children:e.name}),(0,Le.jsx)("span",{className:"topic-subject",children:e.subjectName})]}),(0,Le.jsxs)("div",{className:"topic-stats",children:[(0,Le.jsxs)("div",{className:"stat",children:[(0,Le.jsx)("span",{className:"stat-label",children:"Chapters"}),(0,Le.jsxs)("span",{className:"stat-value",children:[e.chaptersCompleted," / ",e.totalChapters]})]}),(0,Le.jsxs)("div",{className:"stat",children:[(0,Le.jsx)("span",{className:"stat-label",children:"Progress"}),(0,Le.jsxs)("span",{className:"stat-value",children:[e.progressPercentage,"%"]})]}),(0,Le.jsxs)("div",{className:"stat",children:[(0,Le.jsx)("span",{className:"stat-label",children:"Accuracy"}),(0,Le.jsxs)("span",{className:"stat-value ".concat(A(e.accuracy)),children:[e.accuracy,"%"]})]})]}),(0,Le.jsx)("div",{className:"progress-bar",children:(0,Le.jsx)("div",{className:"progress-fill ".concat(I(e.progressPercentage)),style:{width:"".concat(e.progressPercentage,"%")}})})]},e.id))})]}),c&&(0,Le.jsxs)("div",{className:"progress-section",children:[(0,Le.jsx)("h3",{children:"Learning Streak"}),(0,Le.jsxs)("div",{className:"streak-cards",children:[(0,Le.jsxs)("div",{className:"streak-card",children:[(0,Le.jsx)("h4",{children:"Current Streak"}),(0,Le.jsx)("div",{className:"streak-number",children:f.currentStreak||0}),(0,Le.jsx)("p",{children:"days"})]}),(0,Le.jsxs)("div",{className:"streak-card",children:[(0,Le.jsx)("h4",{children:"Longest Streak"}),(0,Le.jsx)("div",{className:"streak-number",children:f.longestStreak||0}),(0,Le.jsx)("p",{children:"days"})]}),(0,Le.jsxs)("div",{className:"streak-card",children:[(0,Le.jsx)("h4",{children:"Total Study Time"}),(0,Le.jsx)("div",{className:"streak-number",children:E(f.totalStudyTime||0)}),(0,Le.jsx)("p",{children:"this period"})]})]})]})]})},ls=()=>{const{user:e}=(0,Pe.nm)(),[t,s]=(0,n.useState)("overview");return(0,Le.jsxs)("div",{className:"dashboard-content",children:[(0,Le.jsxs)("div",{className:"dashboard-header",children:[(0,Le.jsx)("h1",{children:"Student Dashboard"}),(0,Le.jsx)("p",{children:"Track your learning progress and access your courses"})]}),(0,Le.jsx)("div",{className:"tab-navigation",children:[{id:"overview",label:"Overview",icon:"\ud83c\udfe0"},{id:"catalog",label:"Course Catalog",icon:"\ud83d\udecd\ufe0f"},{id:"subscriptions",label:"Subscriptions",icon:"\ud83d\udccb"},{id:"content",label:"Content Browser",icon:"\ud83d\udcda"},{id:"tests",label:"Test Center",icon:"\ud83d\udcdd"},{id:"questions",label:"Question Bank",icon:"\u2753"},{id:"progress",label:"Progress Tracker",icon:"\ud83d\udcca"}].map(e=>(0,Le.jsxs)("button",{className:"tab-button ".concat(t===e.id?"active":""),onClick:()=>s(e.id),children:[(0,Le.jsx)("span",{className:"tab-icon",children:e.icon}),(0,Le.jsx)("span",{className:"tab-label",children:e.label})]},e.id))}),(0,Le.jsx)("div",{className:"tab-content",children:(()=>{switch(t){case"catalog":return(0,Le.jsx)(Zt,{});case"subscriptions":return(0,Le.jsx)(es,{});case"content":return(0,Le.jsx)(ts,{});case"tests":return(0,Le.jsx)(ss,{});case"questions":return(0,Le.jsx)(rs,{});case"progress":return(0,Le.jsx)(is,{});default:return(0,Le.jsxs)("div",{className:"dashboard-overview",children:[(0,Le.jsxs)("div",{className:"welcome-card",children:[(0,Le.jsx)("h2",{children:"\ud83c\udf93 Welcome to Your Learning Journey!"}),(0,Le.jsxs)("p",{children:["You are logged in as a ",(0,Le.jsx)("strong",{children:"Student"})," in the Coaxial Academy platform."]}),(0,Le.jsxs)("div",{className:"user-details",children:[(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Name:"})," ",(null===e||void 0===e?void 0:e.name)||"".concat(null===e||void 0===e?void 0:e.firstName," ").concat(null===e||void 0===e?void 0:e.lastName)]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Username:"})," ",null===e||void 0===e?void 0:e.username]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Email:"})," ",null===e||void 0===e?void 0:e.email]}),(0,Le.jsxs)("p",{children:[(0,Le.jsx)("strong",{children:"Role:"})," ",null===e||void 0===e?void 0:e.role]})]})]}),(0,Le.jsxs)("div",{className:"features-grid",children:[(0,Le.jsxs)("div",{className:"feature-card",onClick:()=>s("catalog"),children:[(0,Le.jsx)("div",{className:"feature-icon",children:"\ud83d\udecd\ufe0f"}),(0,Le.jsx)("h3",{children:"Course Catalog"}),(0,Le.jsx)("p",{children:"Browse and subscribe to courses, classes, and exams."}),(0,Le.jsx)("button",{className:"btn btn-primary",children:"Browse Catalog"})]}),(0,Le.jsxs)("div",{className:"feature-card",onClick:()=>s("subscriptions"),children:[(0,Le.jsx)("div",{className:"feature-icon",children:"\ud83d\udccb"}),(0,Le.jsx)("h3",{children:"My Subscriptions"}),(0,Le.jsx)("p",{children:"Manage your class, exam, or course level subscriptions."}),(0,Le.jsx)("button",{className:"btn btn-primary",children:"Manage Subscriptions"})]}),(0,Le.jsxs)("div",{className:"feature-card",onClick:()=>s("content"),children:[(0,Le.jsx)("div",{className:"feature-icon",children:"\ud83d\udcda"}),(0,Le.jsx)("h3",{children:"Content Browser"}),(0,Le.jsx)("p",{children:"Browse subjects, topics, modules, and chapters."}),(0,Le.jsx)("button",{className:"btn btn-primary",children:"Browse Content"})]}),(0,Le.jsxs)("div",{className:"feature-card",onClick:()=>s("tests"),children:[(0,Le.jsx)("div",{className:"feature-icon",children:"\ud83d\udcdd"}),(0,Le.jsx)("h3",{children:"Test Center"}),(0,Le.jsx)("p",{children:"Take tests and view your test history."}),(0,Le.jsx)("button",{className:"btn btn-primary",children:"Take Tests"})]}),(0,Le.jsxs)("div",{className:"feature-card",onClick:()=>s("questions"),children:[(0,Le.jsx)("div",{className:"feature-icon",children:"\u2753"}),(0,Le.jsx)("h3",{children:"Question Bank"}),(0,Le.jsx)("p",{children:"Practice questions and track your progress."}),(0,Le.jsx)("button",{className:"btn btn-primary",children:"Practice Questions"})]}),(0,Le.jsxs)("div",{className:"feature-card",onClick:()=>s("progress"),children:[(0,Le.jsx)("div",{className:"feature-icon",children:"\ud83d\udcca"}),(0,Le.jsx)("h3",{children:"Progress Tracker"}),(0,Le.jsx)("p",{children:"Monitor your learning progress and performance."}),(0,Le.jsx)("button",{className:"btn btn-primary",children:"View Progress"})]})]})]})}})()})]})},os=()=>{const{token:e}=(0,Pe.nm)(),[t,s]=(0,n.useState)({courseTypeId:null,courseId:null,classId:null,examId:null,activeOnly:!0}),[a,r]=(0,n.useState)([]),[i,l]=(0,n.useState)([]),[o,c]=(0,n.useState)([]),[d,u]=(0,n.useState)([]),[p,m]=(0,n.useState)([]),[h,f]=(0,n.useState)(!1),[x,g]=(0,n.useState)(null);(0,n.useEffect)(()=>{v()},[e]);const v=async()=>{if(e)try{f(!0),g(null);const[t,s]=await Promise.all([(0,xt.RG)(e),(0,Ge.u7)(e)]);l(t||[]),r(s||[])}catch(x){console.error("Error fetching initial data:",x),g("Failed to load initial data")}finally{f(!1)}},b=async()=>{if(e)try{f(!0),g(null),console.log('Fetching all subjects for "All Course Types"');let s=await(0,Ge.u7)(e)||[];t.activeOnly&&(s=s.filter(e=>e.isActive));const a=s.filter((e,t,s)=>t===s.findIndex(t=>t.id===e.id));a.sort((e,t)=>(e.displayOrder||0)-(t.displayOrder||0)),r(a),console.log("Loaded ".concat(a.length," subjects for all course types"))}catch(x){console.error("Error fetching all subjects:",x),g("Failed to load subjects")}finally{f(!1)}};(0,n.useEffect)(()=>{t.courseTypeId&&e?y():(c([]),u([]),m([]),b())},[t.courseTypeId,e]),(0,n.useEffect)(()=>{t.courseId&&e?j():(u([]),m([]),r([]))},[t.courseId,e]),(0,n.useEffect)(()=>{(t.classId||t.examId)&&e?N():t.courseId&&e&&w()},[t.classId,t.examId,t.courseId,e]),(0,n.useEffect)(()=>{t.courseTypeId||t.courseId||t.classId||t.examId||b()},[t.activeOnly,e]);const y=async()=>{try{const s=await(0,xt.bh)(e),a=(null===s||void 0===s?void 0:s.filter(e=>{var s;return(null===(s=e.courseType)||void 0===s?void 0:s.id)===t.courseTypeId}))||[];c(a)}catch(x){console.error("Error fetching courses:",x),g("Failed to load courses")}},j=async()=>{try{const[s,a]=await Promise.all([(0,Ge.lw)(e),(0,Ge.Dl)(e)]),n=(null===s||void 0===s?void 0:s.filter(e=>{var s;return(null===(s=e.course)||void 0===s?void 0:s.id)===t.courseId}))||[],r=(null===a||void 0===a?void 0:a.filter(e=>{var s;return(null===(s=e.course)||void 0===s?void 0:s.id)===t.courseId}))||[];u(n),m(r)}catch(x){console.error("Error fetching classes and exams:",x),g("Failed to load classes and exams")}},N=async()=>{try{f(!0);let s=[];if(t.classId){const a=await(0,Ge._A)(e,t.classId);s=(null===a||void 0===a?void 0:a.map(e=>e.subject))||[]}else if(t.examId){const a=await(0,Ge.pm)(e,t.examId);s=(null===a||void 0===a?void 0:a.map(e=>e.subject))||[]}t.activeOnly&&(s=s.filter(e=>e.isActive));const a=s.filter((e,t,s)=>t===s.findIndex(t=>t.id===e.id));a.sort((e,t)=>(e.displayOrder||0)-(t.displayOrder||0)),r(a)}catch(x){console.error("Error fetching filtered subjects:",x),g("Failed to load subjects")}finally{f(!1)}},w=async()=>{try{f(!0);const s=await(0,Ge.u7)(e),a=(null===s||void 0===s?void 0:s.filter(e=>{var s;return(null===(s=e.course)||void 0===s?void 0:s.id)===t.courseId}))||[];let n=a;t.activeOnly&&(n=a.filter(e=>e.isActive));const i=n.filter((e,t,s)=>t===s.findIndex(t=>t.id===e.id));i.sort((e,t)=>(e.displayOrder||0)-(t.displayOrder||0)),r(i)}catch(x){console.error("Error fetching subjects by course:",x),g("Failed to load subjects")}finally{f(!1)}},k=(e,t)=>{s(s=>{const a=(0,Ue.A)((0,Ue.A)({},s),{},{[e]:t});return"courseTypeId"===e?(a.courseId=null,a.classId=null,a.examId=null):"courseId"===e&&(a.classId=null,a.examId=null),a})};return(0,Le.jsxs)("div",{className:"subject-filter-container",children:[(0,Le.jsxs)("div",{className:"filter-header",children:[(0,Le.jsx)("h2",{children:"Subject Filter"}),(0,Le.jsx)("button",{onClick:()=>{s({courseTypeId:null,courseId:null,classId:null,examId:null,activeOnly:!0}),c([]),u([]),m([]),b()},className:"btn btn-secondary",children:"Clear All Filters"})]}),(0,Le.jsxs)("div",{className:"filter-controls",children:[(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"courseType",children:"Course Type:"}),(0,Le.jsxs)("select",{id:"courseType",className:"form-control",value:t.courseTypeId||"",onChange:e=>k("courseTypeId",e.target.value?Number(e.target.value):null),children:[(0,Le.jsx)("option",{value:"",children:"Select Course Type"}),null===i||void 0===i?void 0:i.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"course",children:"Course:"}),(0,Le.jsxs)("select",{id:"course",className:"form-control",value:t.courseId||"",onChange:e=>k("courseId",e.target.value?Number(e.target.value):null),disabled:!t.courseTypeId,children:[(0,Le.jsx)("option",{value:"",children:"Select Course"}),null===o||void 0===o?void 0:o.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),1===t.courseTypeId&&(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"class",children:"Class:"}),(0,Le.jsxs)("select",{id:"class",className:"form-control",value:t.classId||"",onChange:e=>k("classId",e.target.value?Number(e.target.value):null),disabled:!t.courseId,children:[(0,Le.jsx)("option",{value:"",children:"Select Class"}),null===d||void 0===d?void 0:d.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),2===t.courseTypeId&&(0,Le.jsxs)("div",{className:"form-group",children:[(0,Le.jsx)("label",{htmlFor:"exam",children:"Exam:"}),(0,Le.jsxs)("select",{id:"exam",className:"form-control",value:t.examId||"",onChange:e=>k("examId",e.target.value?Number(e.target.value):null),disabled:!t.courseId,children:[(0,Le.jsx)("option",{value:"",children:"Select Exam"}),null===p||void 0===p?void 0:p.map(e=>(0,Le.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Le.jsx)("div",{className:"form-group",children:(0,Le.jsxs)("label",{children:[(0,Le.jsx)("input",{type:"checkbox",checked:t.activeOnly,onChange:e=>k("activeOnly",e.target.checked)}),"Active Only"]})})]}),(t.courseTypeId||t.courseId||t.classId||t.examId)&&(0,Le.jsxs)("div",{className:"filter-summary",children:[(0,Le.jsx)("h4",{children:"Current Filter:"}),(0,Le.jsxs)("div",{className:"filter-breadcrumb",children:[t.courseTypeId&&(0,Le.jsxs)("span",{className:"filter-item",children:["Course Type: ",(e=>{const t=i.find(t=>t.id===e);return t?t.name:""})(t.courseTypeId)]}),t.courseId&&(0,Le.jsxs)("span",{className:"filter-item",children:["\u2192 Course: ",(e=>{const t=o.find(t=>t.id===e);return t?t.name:""})(t.courseId)]}),t.classId&&(0,Le.jsxs)("span",{className:"filter-item",children:["\u2192 Class: ",(e=>{const t=d.find(t=>t.id===e);return t?t.name:""})(t.classId)]}),t.examId&&(0,Le.jsxs)("span",{className:"filter-item",children:["\u2192 Exam: ",(e=>{const t=p.find(t=>t.id===e);return t?t.name:""})(t.examId)]})]})]}),(0,Le.jsxs)("div",{className:"results-section",children:[(0,Le.jsxs)("div",{className:"results-header",children:[(0,Le.jsxs)("h3",{children:["Subjects (",a.length,")"]}),h&&(0,Le.jsx)("span",{className:"loading-indicator",children:"Loading..."})]}),x&&(0,Le.jsx)("div",{className:"alert alert-danger",children:x}),!h&&!x&&(0,Le.jsx)("div",{className:"subjects-grid",children:0===a.length?(0,Le.jsx)("div",{className:"no-results",children:t.courseTypeId?"No subjects found matching the current filters.":"Please select a course type to start filtering subjects."}):a.map(e=>(0,Le.jsxs)("div",{className:"subject-card",children:[(0,Le.jsx)("h4",{children:e.name}),e.description&&(0,Le.jsx)("p",{className:"subject-description",children:e.description}),(0,Le.jsx)("div",{className:"subject-meta",children:(0,Le.jsxs)("div",{className:"subject-status",children:[(0,Le.jsx)("span",{className:"badge ".concat(e.isActive?"badge-success":"badge-danger"),children:e.isActive?"Active":"Inactive"}),(0,Le.jsxs)("span",{className:"display-order",children:["Order: ",e.displayOrder]})]})}),(0,Le.jsx)("div",{className:"subject-details",children:(0,Le.jsxs)("small",{className:"text-muted",children:["Created: ",new Date(e.createdAt).toLocaleDateString()]})})]},e.id))})]})]})},cs=()=>{const{token:e,addNotification:t}=(0,Pe.nm)(),[s,a]=(0,n.useState)(""),[r,i]=(0,n.useState)([]),[l,o]=(0,n.useState)(!1),[c,d]=(0,n.useState)(null),[u,p]=(0,n.useState)([]),m=(0,n.useCallback)((e,t)=>{let s;return function(){for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];clearTimeout(s),s=setTimeout(()=>e.apply(null,n),t)}},[]),h=(0,n.useCallback)(async s=>{if(!s||!s.trim())return i([]),void d(null);const a=parseInt(s.trim());if(isNaN(a))return d("Please enter a valid numeric course type ID"),void i([]);try{o(!0),d(null),console.log("Fetching subjects for course type ID: ".concat(a));const t=await(0,Ge.u7)(e,a);console.log("Found ".concat((null===t||void 0===t?void 0:t.length)||0," subjects for course type ").concat(a)),i(t||[]);const s={id:a,timestamp:(new Date).toISOString(),resultCount:(null===t||void 0===t?void 0:t.length)||0};p(e=>[s,...e.slice(0,4)])}catch(n){console.error("Error fetching subjects:",n),n.message.includes("404")?d("Course type ID ".concat(a," not found")):n.message.includes("401")||n.message.includes("403")?d("Authentication required. Please log in again."):n.message.includes("500")?d("Server error. Please try again later."):d("Failed to fetch subjects: ".concat(n.message)),i([]),t({type:"error",message:"Failed to fetch subjects for course type ".concat(a),duration:5e3})}finally{o(!1)}},[e,t]),f=(0,n.useCallback)(m(h,500),[h,m]);return(0,Le.jsxs)("div",{className:"subject-filter-chat",children:[(0,Le.jsxs)("div",{className:"chat-header",children:[(0,Le.jsx)("h2",{children:"\ud83d\udcda Subject Filter Chat"}),(0,Le.jsx)("p",{children:"Enter a course type ID to find related subjects in real-time"})]}),(0,Le.jsxs)("div",{className:"chat-input-section",children:[(0,Le.jsxs)("div",{className:"input-group",children:[(0,Le.jsx)("input",{type:"text",value:s,onChange:e=>{const t=e.target.value;a(t),t.trim()?f(t):(i([]),d(null),o(!1))},placeholder:"Enter Course Type ID (e.g., 1, 2, 3...)",className:"course-type-input",disabled:l}),s&&(0,Le.jsx)("button",{onClick:()=>{a(""),i([]),d(null),o(!1)},className:"clear-button",disabled:l,title:"Clear search",children:"\u2715"})]}),l&&(0,Le.jsxs)("div",{className:"loading-indicator",children:[(0,Le.jsx)("div",{className:"spinner"}),(0,Le.jsx)("span",{children:"Searching subjects..."})]})]}),c&&(0,Le.jsxs)("div",{className:"error-message",children:[(0,Le.jsx)("div",{className:"error-icon",children:"\u26a0\ufe0f"}),(0,Le.jsxs)("div",{className:"error-content",children:[(0,Le.jsx)("strong",{children:"Error:"})," ",c]})]}),u.length>0&&(0,Le.jsxs)("div",{className:"search-history",children:[(0,Le.jsx)("h4",{children:"Recent Searches:"}),(0,Le.jsx)("div",{className:"history-items",children:u.map((e,t)=>(0,Le.jsxs)("button",{onClick:()=>{return t=e.id,a(t.toString()),void h(t.toString());var t},className:"history-item",title:"Found ".concat(e.resultCount," subjects"),children:[(0,Le.jsxs)("span",{className:"history-id",children:["#",e.id]}),(0,Le.jsxs)("span",{className:"history-count",children:[e.resultCount," subjects"]}),(0,Le.jsx)("span",{className:"history-time",children:new Date(e.timestamp).toLocaleTimeString()})]},t))})]}),(0,Le.jsxs)("div",{className:"results-section",children:[r.length>0&&(0,Le.jsx)("div",{className:"results-header",children:(0,Le.jsxs)("h3",{children:["\ud83d\udccb Found ",r.length," subject",1!==r.length?"s":"",s&&" for Course Type #".concat(s)]})}),0===r.length&&s&&!l&&!c&&(0,Le.jsxs)("div",{className:"empty-results",children:[(0,Le.jsx)("div",{className:"empty-icon",children:"\ud83d\udd0d"}),(0,Le.jsx)("h4",{children:"No Subjects Found"}),(0,Le.jsxs)("p",{children:["No subjects are linked to course type #",s]}),(0,Le.jsxs)("div",{className:"empty-suggestions",children:[(0,Le.jsx)("p",{children:(0,Le.jsx)("strong",{children:"Possible reasons:"})}),(0,Le.jsxs)("ul",{children:[(0,Le.jsx)("li",{children:"Course type doesn't exist"}),(0,Le.jsx)("li",{children:"No courses are linked to this course type"}),(0,Le.jsx)("li",{children:"No subjects are linked to the courses"}),(0,Le.jsx)("li",{children:"All linked subjects are inactive"})]})]})]}),r.length>0&&(0,Le.jsx)("div",{className:"subjects-list",children:r.map(e=>{var t;return(0,Le.jsxs)("div",{className:"subject-card",children:[(0,Le.jsxs)("div",{className:"subject-header",children:[(0,Le.jsx)("h4",{className:"subject-name",children:e.name}),(0,Le.jsx)("span",{className:"status-badge ".concat(e.isActive?"active":"inactive"),children:e.isActive?"\u2705 Active":"\u274c Inactive"})]}),e.description&&(0,Le.jsx)("p",{className:"subject-description",children:e.description}),(0,Le.jsxs)("div",{className:"subject-details",children:[(0,Le.jsxs)("div",{className:"detail-item",children:[(0,Le.jsx)("span",{className:"detail-label",children:"ID:"}),(0,Le.jsxs)("span",{className:"detail-value",children:["#",e.id]})]}),e.displayOrder&&(0,Le.jsxs)("div",{className:"detail-item",children:[(0,Le.jsx)("span",{className:"detail-label",children:"Display Order:"}),(0,Le.jsx)("span",{className:"detail-value",children:e.displayOrder})]}),(0,Le.jsxs)("div",{className:"detail-item",children:[(0,Le.jsx)("span",{className:"detail-label",children:"Course Type:"}),(0,Le.jsx)("span",{className:"detail-value",children:(null===(t=e.courseType)||void 0===t?void 0:t.name)||"Unknown"})]}),e.createdAt&&(0,Le.jsxs)("div",{className:"detail-item",children:[(0,Le.jsx)("span",{className:"detail-label",children:"Created:"}),(0,Le.jsx)("span",{className:"detail-value",children:new Date(e.createdAt).toLocaleDateString()})]})]})]},e.id)})}),!s&&(0,Le.jsxs)("div",{className:"welcome-message",children:[(0,Le.jsx)("div",{className:"welcome-icon",children:"\ud83c\udfaf"}),(0,Le.jsx)("h4",{children:"Welcome to Subject Filter Chat!"}),(0,Le.jsx)("p",{children:"Start by entering a course type ID above to see all subjects linked to that course type."}),(0,Le.jsxs)("div",{className:"feature-list",children:[(0,Le.jsx)("h5",{children:"Features:"}),(0,Le.jsxs)("ul",{children:[(0,Le.jsx)("li",{children:"\ud83d\udd0d Real-time filtering as you type"}),(0,Le.jsx)("li",{children:"\ud83d\udcca Supports both Academic and Competitive course types"}),(0,Le.jsx)("li",{children:"\u23f1\ufe0f Search history for quick access"}),(0,Le.jsx)("li",{children:"\ud83d\udd04 Automatic deduplication of results"}),(0,Le.jsx)("li",{children:"\ud83d\udcf1 Responsive design"})]})]})]})]})]})};const ds=function(){return(0,Le.jsx)(Pe.Dv,{children:(0,Le.jsx)(Se,{children:(0,Le.jsx)("div",{className:"App",children:(0,Le.jsxs)(be,{children:[(0,Le.jsx)(ge,{path:"/",element:(0,Le.jsx)(Dt,{showHeader:!0,showFooter:!0,children:(0,Le.jsx)(Et,{})})}),(0,Le.jsx)(ge,{path:"/login",element:(0,Le.jsx)(Dt,{showHeader:!0,showFooter:!1,children:(0,Le.jsx)(Qt,{})})}),(0,Le.jsx)(ge,{path:"/register",element:(0,Le.jsx)(Dt,{showHeader:!0,showFooter:!1,children:(0,Le.jsx)(Vt,{})})}),(0,Le.jsx)(ge,{path:"/dashboard/student",element:(0,Le.jsx)(Ht,{requiredRole:"STUDENT",children:(0,Le.jsx)(Dt,{showHeader:!0,showFooter:!0,showSidebar:!0,children:(0,Le.jsx)(ls,{})})})}),(0,Le.jsx)(ge,{path:"/dashboard/instructor",element:(0,Le.jsx)(Ht,{requiredRole:"INSTRUCTOR",children:(0,Le.jsx)(Dt,{showHeader:!0,showFooter:!0,showSidebar:!0,children:(0,Le.jsx)(Tt,{})})})}),(0,Le.jsx)(ge,{path:"/dashboard/admin",element:(0,Le.jsx)(Ht,{requiredRole:"ADMIN",children:(0,Le.jsx)(Dt,{showHeader:!0,showFooter:!0,showSidebar:!0,children:(0,Le.jsx)(At,{})})})}),(0,Le.jsx)(ge,{path:"/subject-filter",element:(0,Le.jsx)(Dt,{showHeader:!0,showFooter:!0,children:(0,Le.jsx)(os,{})})}),(0,Le.jsx)(ge,{path:"/subject-filter-chat",element:(0,Le.jsx)(Ht,{requiredRole:"ADMIN",children:(0,Le.jsx)(cs,{})})})]})})})})};i.createRoot(document.getElementById("root")).render((0,Le.jsx)(n.StrictMode,{children:(0,Le.jsx)(ds,{})}))})();
//# sourceMappingURL=main.219dce9b.js.map