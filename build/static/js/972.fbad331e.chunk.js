"use strict";(self.webpackChunklearning_management_system=self.webpackChunklearning_management_system||[]).push([[972],{972:(e,s,l)=>{l.r(s),l.d(s,{default:()=>d});var a=l(555),o=l(43),r=l(580),i=l(872),c=l(712),t=(l(595),l(579));const n=e=>{let{item:s,itemType:l="item",onEdit:a,onDelete:o,fields:r=[],badges:i=[]}=e;const c=()=>s.description,n=()=>s.createdByName;return(0,t.jsxs)("div",{className:"data-card",children:[(0,t.jsxs)("div",{className:"card-header",children:[(0,t.jsxs)("div",{className:"card-title",children:[(0,t.jsx)("h4",{children:(()=>{switch(l){case"subject":return s.subjectName||s.name;case"topic":return s.topicName||s.name;default:return s.name}})()}),(0,t.jsxs)("div",{className:"card-badges",children:[(0,t.jsx)("span",{className:"status-badge ".concat(s.isActive?"active":"inactive"),children:s.isActive?"Active":"Inactive"}),i.map(e=>{const{key:l,label:a,value:o,condition:r,style:i,icon:c}=e;if(r&&!r(s))return null;const n=o||s[l];return n?(0,t.jsxs)("span",{className:"structure-badge",style:i,children:[c," ",n]},l):null})]})]}),(0,t.jsxs)("div",{className:"card-actions",children:[(0,t.jsx)("button",{className:"btn btn-outline btn-xs",onClick:()=>{a&&a(s)},children:"Edit"}),(0,t.jsx)("button",{className:"btn btn-danger btn-xs",onClick:()=>{o&&o(s.id)},children:"Delete"})]})]}),(0,t.jsxs)("div",{className:"card-content",children:[c()&&(0,t.jsx)("p",{className:"description",children:c()}),r.map(e=>{const{key:l,label:a,value:o,condition:r}=e;if(r&&!r(s))return null;const i="function"===typeof o?o(s):o||s[l];return i?(0,t.jsxs)("p",{children:[(0,t.jsxs)("strong",{children:[a,":"]})," ",i]},l):null})]}),(0,t.jsx)("div",{className:"card-footer",children:(0,t.jsxs)("small",{className:"text-muted",children:["Created: ",new Date(s.createdAt).toLocaleDateString(),n()&&(0,t.jsxs)("span",{children:[" by ",n()]})]})})]})},d=()=>{var e,s,l,d,u,m,p,h,v,g,y,j,f,x,b,N,I,A,T,C,S,F,k,w,E,M,R,O,D,q,P,z,U,L,_,B,J,W,G;const{token:Y,addNotification:H}=(0,r.nm)(),K=e=>"1"===e||1===e,Q=e=>"2"===e||2===e,[V,X]=(0,o.useState)(""),[Z,$]=(0,o.useState)(""),[ee,se]=(0,o.useState)(""),[le,ae]=(0,o.useState)(""),[oe,re]=(0,o.useState)(""),[ie,ce]=(0,o.useState)(""),[te,ne]=(0,o.useState)(!0),[de,ue]=(0,o.useState)({name:"",description:"",displayOrder:"",isActive:!0,courseType:{id:""},course:{id:""},class:{id:""},exam:{id:""},subjectId:"",topicId:""}),[me,pe]=(0,o.useState)([]),[he,ve]=(0,o.useState)([]),[ge,ye]=(0,o.useState)([]),[je,fe]=(0,o.useState)([]),[xe,be]=(0,o.useState)([]),[Ne,Ie]=(0,o.useState)([]),[Ae,Te]=(0,o.useState)([]),[Ce,Se]=(0,o.useState)([]),[Fe,ke]=(0,o.useState)([]),[we,Ee]=(0,o.useState)([]),[Me,Re]=(0,o.useState)([]),[Oe,De]=(0,o.useState)({courses:!1,classes:!1,exams:!1,masterSubjects:!1,subjects:!1,topics:!1,modules:!1}),[qe,Pe]=(0,o.useState)(!1),[ze,Ue]=(0,o.useState)(null),[Le,_e]=(0,o.useState)(!1),Be=(0,o.useRef)(!0),Je=(0,o.useRef)(!1),We=(0,o.useRef)(null),Ge=(0,o.useRef)(null),Ye=((0,o.useRef)({data:null,ts:0}),(0,o.useRef)(!1)),He=(0,o.useRef)(!1),Ke=(0,o.useRef)(!1),Qe=(0,o.useRef)(!1),Ve=(0,o.useRef)(!1);(0,o.useEffect)(()=>()=>{if(Ge.current)try{Ge.current.abort()}catch(e){}if(We.current)try{We.current.abort()}catch(e){}},[]);const Xe=async e=>{if(!Y||!e)return be([]),void ve([]);try{console.log("Fetching courses for course type:",e);const s=await(0,c.NJ)(Y,e,0,100,"createdAt","desc");console.log("Raw courses data from API:",s);let l=[];Array.isArray(s)?l=s:s&&Array.isArray(s.content)?l=s.content:s&&Array.isArray(s.data)?l=s.data:s&&s.courses&&Array.isArray(s.courses)?l=s.courses:(console.warn("Unexpected courses data format:",s),l=[]),console.log("Normalized courses array:",l),be(l),ve(l)}catch(s){console.error("Error fetching courses:",s),be([])}},Ze=async(e,s)=>{if(!Y||!e||!s)return Ie([]),Te([]),ye([]),void fe([]);try{console.log("Fetching classes and exams for course:",s,"courseType:",e);const[l,a]=await Promise.all([(0,c.tW)(Y,s,0,100,"createdAt","desc"),(0,c.rJ)(Y,s,0,100,"createdAt","desc")]);console.log("Raw classes data:",l),console.log("Raw exams data:",a);let o=[];o=Array.isArray(l)?l:l&&Array.isArray(l.content)?l.content:l&&Array.isArray(l.data)?l.data:[];let r=[];r=Array.isArray(a)?a:a&&Array.isArray(a.content)?a.content:a&&Array.isArray(a.data)?a.data:[],console.log("Normalized classes array:",o),console.log("Normalized exams array:",r),Ie(o),Te(r),ye(o),fe(r)}catch(l){console.error("Error fetching classes and exams:",l),Ie([]),Te([])}},$e=async(e,s,l,a)=>{if(e&&s)try{console.log("Fetching subject linkages for:",{courseTypeId:e,courseId:s,classId:l,examId:a});const o=await(0,c.sW)(Y,{courseTypeId:e,courseId:s,classId:l,examId:a,active:te});console.log("Raw subject linkages data from API:",o);let r=[];r=Array.isArray(o)?o:o&&Array.isArray(o.content)?o.content:o&&Array.isArray(o.data)?o.data:[],console.log("Normalized subject linkages array:",r),ke(r)}catch(o){console.error("Error fetching subject linkages:",o),ke([])}else ke([])},es=async e=>{if(Y&&e)try{console.log("Fetching modules for topic:",e);const s=await(0,c.jh)(Y,{topicId:parseInt(e),active:te});console.log("Raw modules data from API:",s);let l=[];l=Array.isArray(s)?s:s&&Array.isArray(s.content)?s.content:s&&Array.isArray(s.data)?s.data:[],console.log("Normalized modules array:",l),Re(l)}catch(s){console.error("Error fetching modules:",s),Re([])}else Re([])};(0,o.useEffect)(()=>{Be.current&&(Be.current=!1,console.log("\ud83d\udd04 ModuleManagement: Initial mount, fetching data..."),(async()=>{if(Y)try{console.log("\ud83d\udd04 Fetching initial course types for ModuleManagement");const e=await(0,i.RG)(Y);let s=[];Array.isArray(e)?s=e:e&&Array.isArray(e.content)?s=e.content:e&&Array.isArray(e.data)?s=e.data:e&&e.courseTypes&&Array.isArray(e.courseTypes)?s=e.courseTypes:(console.warn("Unexpected course types data format:",e),s=[]),console.log("Normalized course types array:",s),pe(s)}catch(e){console.error("Error fetching course types:",e),H({type:"error",message:"Failed to load course types"})}})(),console.log("\ud83d\udd04 ModuleManagement: Fetching initial modules..."),is())},[Y]),(0,o.useEffect)(()=>{if(Ye.current){if(V){console.log("\ud83d\udd04 Filter: Course type changed to:",V);const e=parseInt(V);Xe(e),$(""),se(""),ae(""),re(""),ce(""),be([]),Ie([]),Te([]),ke([]),Ee([]),Re([])}else be([]),Ie([]),Te([]),Se([]),ke([]),Ee([]),Re([]);is()}else Ye.current=!0},[V]),(0,o.useEffect)(()=>{if(He.current){if(Z&&V){console.log("\ud83d\udd04 Filter: Course changed to:",Z);const e=parseInt(V),s=parseInt(Z);Ze(e,s),$e(e,s,null,null),se(""),ae(""),re(""),ce(""),Ie([]),Te([]),Ee([]),Re([])}else Ie([]),Te([]),ke([]),Ee([]),Re([]);is()}else He.current=!0},[Z]),(0,o.useEffect)(()=>{if(Ke.current){if(ee&&Z&&V){console.log("\ud83d\udd04 Filter: Class changed to:",ee);const e=parseInt(V),s=parseInt(Z),l=parseInt(ee);$e(e,s,l,null),ae(""),re(""),ce(""),Ee([]),Re([])}is()}else Ke.current=!0},[ee]),(0,o.useEffect)(()=>{if(Qe.current){if(le&&Z&&V){console.log("\ud83d\udd04 Filter: Exam changed to:",le);const e=parseInt(V),s=parseInt(Z),l=parseInt(le);$e(e,s,null,l),se(""),re(""),ce(""),Ee([]),Re([])}is()}else Qe.current=!0},[le]),(0,o.useEffect)(()=>{if(!Ve.current)return void(Ve.current=!0);const e=V?parseInt(V):null,s=Z?parseInt(Z):null,l=ee?parseInt(ee):null,a=le?parseInt(le):null;s&&$e(e,s,l,a),is()},[te]);const ss=e=>{const{name:s,value:l,type:o,checked:r}=e.target;console.log("\ud83d\udd04 Form input change:",s,l),ue(e=>(0,a.A)((0,a.A)({},e),{},{[s]:"checkbox"===o?r:l}))};(0,o.useEffect)(()=>{var e,s;if(console.log("\ud83d\udd04 Form effect triggered - courseTypeId:",null===(e=de.courseType)||void 0===e?void 0:e.id),null!==(s=de.courseType)&&void 0!==s&&s.id){console.log("\ud83d\udd04 Course type selected in form, fetching courses and master subjects");const e=parseInt(de.courseType.id);Xe(e),(async e=>{if(Y&&e)try{console.log("Fetching master subjects for course type:",e);const s=await(0,c.ui)(Y,e);console.log("Raw master subjects data:",s);let l=[];Array.isArray(s)?l=s:s&&Array.isArray(s.content)?l=s.content:s&&Array.isArray(s.data)?l=s.data:s&&s.subjects&&Array.isArray(s.subjects)?l=s.subjects:(console.warn("Unexpected master subjects data format:",s),l=[]),console.log("Normalized master subjects array:",l),Se(l)}catch(s){console.error("Error fetching master subjects:",s),Se([])}else Se([])})(e)}else console.log("\ud83d\udd04 No course type selected, clearing dependent fields"),ue(e=>(0,a.A)((0,a.A)({},e),{},{course:{id:""},class:{id:""},exam:{id:""},subjectId:"",topicId:""})),ve([]),ye([]),fe([]),Se([])},[null===(e=de.courseType)||void 0===e?void 0:e.id]),(0,o.useEffect)(()=>{var e,s,l;if(console.log("\ud83d\udd04 Form effect - courseId:",null===(e=de.course)||void 0===e?void 0:e.id),null!==(s=de.course)&&void 0!==s&&s.id&&null!==(l=de.courseType)&&void 0!==l&&l.id){var o;console.log("\ud83d\udd04 Course selected in form, fetching classes and exams");const e=parseInt(de.course.id),s=parseInt(de.courseType.id);"3"===(null===(o=de.courseType)||void 0===o?void 0:o.id)?(console.log("\ud83d\udd04 Professional course selected, fetching subjects by courseId only"),$e(s,e,null,null)):Ze(s,e)}else console.log("\ud83d\udd04 No course selected, clearing classes/exams/subjects"),ue(e=>(0,a.A)((0,a.A)({},e),{},{class:{id:""},exam:{id:""},subjectId:"",topicId:""})),ye([]),fe([])},[null===(s=de.course)||void 0===s?void 0:s.id,null===(l=de.courseType)||void 0===l?void 0:l.id]),(0,o.useEffect)(()=>{var e,s,l,o,r,i;console.log("\ud83d\udd04 Form effect - class/exam change triggered"),console.log("\ud83d\udd04 Current formData.class?.id:",null===(e=de.class)||void 0===e?void 0:e.id),console.log("\ud83d\udd04 Current formData.exam?.id:",null===(s=de.exam)||void 0===s?void 0:s.id),console.log("\ud83d\udd04 Current formData.courseType?.id:",null===(l=de.courseType)||void 0===l?void 0:l.id);const c="3"===(null===(o=de.courseType)||void 0===o?void 0:o.id);var t,n;if(null!==(r=de.class)&&void 0!==r&&r.id||null!==(i=de.exam)&&void 0!==i&&i.id||c)if(console.log("\ud83d\udd04 Class, exam, or professional course selected in form, fetching subjects"),ue(e=>(0,a.A)((0,a.A)({},e),{},{subjectId:"",topicId:""})),null!==(t=de.courseType)&&void 0!==t&&t.id&&null!==(n=de.course)&&void 0!==n&&n.id){const e=parseInt(de.courseType.id),s=parseInt(de.course.id);if(c)console.log("\ud83d\udd04 Professional course detected, fetching subjects by courseId only:",s),$e(e,s,null,null);else{var d,u;const l=null!==(d=de.class)&&void 0!==d&&d.id?parseInt(de.class.id):null,a=null!==(u=de.exam)&&void 0!==u&&u.id?parseInt(de.exam.id):null;console.log("\ud83d\udd04 Fetching subjects for courseTypeId:",e,"courseId:",s,"classId:",l,"examId:",a),$e(e,s,l,a)}}else console.log("\ud83d\udd04 Missing courseType or course selection, cannot fetch subjects");else console.log("\ud83d\udd04 No class, exam, or professional course selected, clearing subjects"),ke([])},[null===(d=de.class)||void 0===d?void 0:d.id,null===(u=de.exam)||void 0===u?void 0:u.id,null===(m=de.courseType)||void 0===m?void 0:m.id]);const ls=(e,s)=>{switch(console.log("\ud83d\udd04 Filter change:",e,s),e){case"courseTypeId":console.log("\ud83d\udd04 Filter: Course type changed to:",s),X(s);break;case"courseId":console.log("\ud83d\udd04 Filter: Course changed to:",s),$(s);break;case"classId":console.log("\ud83d\udd04 Filter: Class changed to:",s),se(s);break;case"examId":console.log("\ud83d\udd04 Filter: Exam changed to:",s),ae(s);break;case"subjectId":console.log("\ud83d\udd04 Filter: Subject changed to:",s),re(s);break;case"topicId":console.log("\ud83d\udd04 Filter: Topic changed to:",s),ce(s),s?es(s):Re([]);break;default:console.log("Unknown filter name:",e)}},as=()=>{ue({name:"",description:"",displayOrder:"",isActive:!0,courseType:{id:""},course:{id:""},class:{id:""},exam:{id:""},subjectId:"",topicId:""}),Pe(!1),Ue(null),ve([]),ye([]),fe([]),Se([])},os=async e=>{if(window.confirm("Are you sure you want to delete this module?"))try{_e(!0),await(0,c.s)(Y,e),H({type:"success",message:"Module deleted successfully",duration:3e3}),ie&&es(ie)}catch(s){console.error("Error deleting module:",s),H({type:"error",message:"Failed to delete module",duration:5e3})}finally{_e(!1)}},rs=e=>{var s,l,a,o,r,i,c,t,n,d,u,m;ue({name:e.name,description:e.description||"",displayOrder:e.displayOrder||"",isActive:e.isActive,courseType:{id:(null===(s=e.topic)||void 0===s||null===(l=s.subject)||void 0===l||null===(a=l.course)||void 0===a||null===(o=a.courseType)||void 0===o?void 0:o.id)||""},course:{id:(null===(r=e.topic)||void 0===r||null===(i=r.subject)||void 0===i||null===(c=i.course)||void 0===c?void 0:c.id)||""},class:{id:""},exam:{id:""},subjectId:(null===(t=e.topic)||void 0===t||null===(n=t.subject)||void 0===n?void 0:n.linkageId)||(null===(d=e.topic)||void 0===d||null===(u=d.subject)||void 0===u?void 0:u.id)||"",topicId:(null===(m=e.topic)||void 0===m?void 0:m.id)||""}),Ue(e.id),Pe(!0)},is=async()=>{if(Je.current)console.log("\ud83d\udd04 fetchModulesData already in progress, skipping duplicate call");else if(Y)try{console.log("\ud83d\udd04 Starting fetchModulesData..."),Je.current=!0,De(e=>(0,a.A)((0,a.A)({},e),{},{modules:!0}));const e=cs();console.log("\ud83d\udd04 Fetching modules with params:",e);const s=await(0,c.jh)(Y,e);console.log("\ud83d\udd04 Fetched modules data:",s);let l=[];Array.isArray(s)?l=s:s&&Array.isArray(s.content)?l=s.content:s&&Array.isArray(s.data)?l=s.data:(console.warn("Unexpected modules data format:",s),l=[]),console.log("\ud83d\udd04 Normalized modules array:",l),Re(l),console.log("\ud83d\udd04 Modules state updated with",l.length,"modules")}catch(e){console.error("\ud83d\udd04 Error fetching modules:",e),Re([]),H({type:"error",message:"Failed to load modules"})}finally{De(e=>(0,a.A)((0,a.A)({},e),{},{modules:!1})),Je.current=!1,console.log("\ud83d\udd04 fetchModulesData completed")}else console.log("\ud83d\udd04 No token available, skipping modules fetch")},cs=()=>{const e={active:te};return V&&(e.courseTypeId=parseInt(V)),Z&&(e.courseId=parseInt(Z)),ee&&(e.classId=parseInt(ee)),le&&(e.examId=parseInt(le)),oe&&(e.subjectId=parseInt(oe)),ie&&(e.topicId=parseInt(ie)),e};(0,o.useEffect)(()=>{const e=setTimeout(()=>{is()},300);return()=>clearTimeout(e)},[oe,ie,te]);const ts=async(e,s)=>{if(Y&&e&&s)try{console.log("\ud83d\udd04 Fetching topics for subject linkage:",{courseTypeId:e,subjectLinkageId:s});const l=await(0,c.Nk)(Y,e,s,te);console.log("Raw topics data from API:",l);let a=[];Array.isArray(l)?a=l:l&&Array.isArray(l.content)?a=l.content:l&&Array.isArray(l.data)?a=l.data:(console.warn("Unexpected topics data format:",l),a=[]),console.log("Normalized topics array:",a),Ee(a)}catch(l){console.error("Error fetching topics:",l),Ee([]),H({type:"error",message:"Failed to load topics"})}else Ee([])};return(0,o.useEffect)(()=>{if(oe&&V){console.log("\ud83d\udd04 Filter: Subject changed, fetching topics for subject:",oe);const e=parseInt(V),s=parseInt(oe);ts(e,s)}else Ee([])},[oe,V,te]),(0,o.useEffect)(()=>{var e;if(de.subjectId&&null!==(e=de.courseType)&&void 0!==e&&e.id){console.log("\ud83d\udd04 Form: Subject changed, fetching topics for subject:",de.subjectId);const e=parseInt(de.courseType.id),s=parseInt(de.subjectId);ts(e,s),ue(e=>(0,a.A)((0,a.A)({},e),{},{topicId:""}))}},[de.subjectId,null===(p=de.courseType)||void 0===p?void 0:p.id]),(0,t.jsxs)("div",{className:"master-data-component",children:[(0,t.jsxs)("div",{className:"component-header",children:[(0,t.jsxs)("div",{className:"header-info",children:[(0,t.jsx)("h2",{children:"Module Management"}),(0,t.jsx)("p",{children:"Manage modules with hierarchical filtering and linking to subjects and topics"})]}),(0,t.jsx)("div",{className:"header-actions",children:(0,t.jsx)("button",{className:"btn btn-primary",onClick:()=>{as(),Pe(!0)},disabled:Le,children:"Add Module"})})]}),(0,t.jsxs)("div",{className:"filter-section",children:[(0,t.jsxs)("div",{className:"filter-header",children:[(0,t.jsx)("h4",{children:"Filter Modules"}),(0,t.jsxs)("div",{className:"filter-header-controls",children:[(0,t.jsxs)("label",{className:"filter-checkbox",children:[(0,t.jsx)("input",{type:"checkbox",checked:te,onChange:e=>ne(e.target.checked)}),(0,t.jsx)("span",{children:"Active Only"})]}),(0,t.jsx)("button",{className:"btn btn-outline btn-xs",onClick:()=>{X(""),$(""),se(""),ae(""),re(""),ce(""),be([]),Ie([]),Te([]),ke([]),Ee([]),Re([])},disabled:Le,children:"Clear All Filters"})]})]}),(0,t.jsxs)("div",{className:"filter-row",children:[(0,t.jsxs)("div",{className:"filter-group",children:[(0,t.jsx)("label",{htmlFor:"course-type-filter",children:"1. Course Type:"}),(0,t.jsxs)("select",{id:"course-type-filter",value:V,onChange:e=>ls("courseTypeId",e.target.value),className:"filter-select",children:[(0,t.jsx)("option",{value:"",children:"Select Course Type"}),me&&me.length>0?me.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id)):(0,t.jsx)("option",{value:"",disabled:!0,children:"No course types available"})]})]}),(0,t.jsxs)("div",{className:"filter-group",children:[(0,t.jsx)("label",{htmlFor:"course-filter",children:"2. Course:"}),(0,t.jsxs)("select",{id:"course-filter",value:Z,onChange:e=>ls("courseId",e.target.value),className:"filter-select",disabled:!V,children:[(0,t.jsx)("option",{value:"",children:"Select Course"}),xe&&xe.length>0?xe.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id)):(0,t.jsx)("option",{value:"",disabled:!0,children:"No courses available"})]})]}),K(V)&&(0,t.jsxs)("div",{className:"filter-group",children:[(0,t.jsx)("label",{htmlFor:"class-filter",children:"3. Class:"}),(0,t.jsxs)("select",{id:"class-filter",value:ee,onChange:e=>ls("classId",e.target.value),className:"filter-select",disabled:!Z,children:[(0,t.jsx)("option",{value:"",children:"Select Class"}),Ne&&Ne.length>0?Ne.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id)):(0,t.jsx)("option",{value:"",disabled:!0,children:"No classes available"})]})]}),Q(V)&&(0,t.jsxs)("div",{className:"filter-group",children:[(0,t.jsx)("label",{htmlFor:"exam-filter",children:"3. Exam:"}),(0,t.jsxs)("select",{id:"exam-filter",value:le,onChange:e=>ls("examId",e.target.value),className:"filter-select",disabled:!Z,children:[(0,t.jsx)("option",{value:"",children:"Select Exam"}),Ae&&Ae.length>0?Ae.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id)):(0,t.jsx)("option",{value:"",disabled:!0,children:"No exams available"})]})]}),(0,t.jsxs)("div",{className:"filter-group",children:[(0,t.jsx)("label",{htmlFor:"subject-filter",children:"4. Subject:"}),(0,t.jsxs)("select",{id:"subject-filter",value:oe,onChange:e=>ls("subjectId",e.target.value),className:"filter-select",disabled:!Z||Oe.subjects,children:[(0,t.jsx)("option",{value:"",children:"Select Subject"}),Fe&&Fe.length>0?Fe.map(e=>(0,t.jsx)("option",{value:e.linkageId,children:e.subjectName||e.name},e.linkageId)):(0,t.jsx)("option",{value:"",disabled:!0,children:"No subjects available"})]})]}),(0,t.jsxs)("div",{className:"filter-group",children:[(0,t.jsx)("label",{htmlFor:"topic-filter",children:"5. Topic:"}),(0,t.jsxs)("select",{id:"topic-filter",value:ie,onChange:e=>ls("topicId",e.target.value),className:"filter-select",disabled:!oe||Oe.topics,children:[(0,t.jsx)("option",{value:"",children:"Select Topic"}),we&&we.length>0?we.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id)):(0,t.jsx)("option",{value:"",disabled:!0,children:"No topics available"})]})]})]}),(V||Z||ee||le||oe||ie)&&(0,t.jsxs)("div",{className:"active-filters",children:[(0,t.jsx)("strong",{children:"Active Filters:"}),V&&(0,t.jsxs)("span",{className:"filter-tag",children:["Course Type: ",null===(h=me.find(e=>e.id===parseInt(V)))||void 0===h?void 0:h.name]}),Z&&(0,t.jsxs)("span",{className:"filter-tag",children:["Course: ",null===(v=xe.find(e=>e.id===parseInt(Z)))||void 0===v?void 0:v.name]}),ee&&(0,t.jsxs)("span",{className:"filter-tag",children:["Class: ",null===(g=Ne.find(e=>e.id===parseInt(ee)))||void 0===g?void 0:g.name]}),le&&(0,t.jsxs)("span",{className:"filter-tag",children:["Exam: ",null===(y=Ae.find(e=>e.id===parseInt(le)))||void 0===y?void 0:y.name]}),oe&&(0,t.jsxs)("span",{className:"filter-tag",children:["Subject: ",(null===(j=Fe.find(e=>e.linkageId===parseInt(oe)))||void 0===j?void 0:j.subjectName)||(null===(f=Fe.find(e=>e.linkageId===parseInt(oe)))||void 0===f?void 0:f.name)]}),ie&&(0,t.jsxs)("span",{className:"filter-tag",children:["Topic: ",null===(x=we.find(e=>e.id===parseInt(ie)))||void 0===x?void 0:x.name]})]})]}),qe&&(0,t.jsxs)("div",{className:"form-section",children:[(0,t.jsxs)("div",{className:"form-header",children:[(0,t.jsx)("h3",{children:ze?"Edit Module":"Add New Module"}),(0,t.jsx)("button",{className:"btn btn-outline btn-sm",onClick:as,children:"Cancel"})]}),(0,t.jsxs)("form",{onSubmit:async e=>{var s;if(e.preventDefault(),console.log("=== MODULE FORM SUBMISSION STARTED ==="),console.log("Form data:",de),de.name.trim())if(null!==(s=de.courseType)&&void 0!==s&&s.id)if(de.subjectId)if(de.topicId)try{if(_e(!0),ze){const e={name:de.name.trim(),description:de.description?de.description.trim():"",displayOrder:de.displayOrder?parseInt(de.displayOrder):0,isActive:de.isActive,topicId:parseInt(de.topicId)};await(0,c.YB)(Y,ze,e),H({type:"success",message:"Module updated successfully",duration:3e3})}else{const e={name:de.name.trim(),description:de.description?de.description.trim():"",displayOrder:de.displayOrder?parseInt(de.displayOrder):0,isActive:de.isActive,topicId:parseInt(de.topicId)};await(0,c.Fi)(Y,e),H({type:"success",message:"Module created successfully",duration:3e3})}as(),ie&&es(ie)}catch(l){console.error("Error saving module:",l),H({type:"error",message:"Failed to save module"})}finally{_e(!1)}else H({type:"error",message:"Topic is required"});else H({type:"error",message:"Subject is required"});else H({type:"error",message:"Course type is required"});else H({type:"error",message:"Module name is required"})},className:"master-data-form",children:[(0,t.jsxs)("div",{className:"form-row",children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"name",children:"Module Name *"}),(0,t.jsx)("input",{type:"text",id:"name",name:"name",value:de.name,onChange:ss,className:"form-input",required:!0,placeholder:"e.g., Introduction to Programming"})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"displayOrder",children:"Display Order"}),(0,t.jsx)("input",{type:"number",id:"displayOrder",name:"displayOrder",value:de.displayOrder,onChange:ss,className:"form-input",min:"0",placeholder:"0"})]})]}),(0,t.jsx)("div",{className:"form-row",children:(0,t.jsxs)("div",{className:"form-group full-width",children:[(0,t.jsx)("label",{htmlFor:"description",children:"Description"}),(0,t.jsx)("textarea",{id:"description",name:"description",value:de.description,onChange:ss,className:"form-input",rows:3,placeholder:"Describe the module content and scope"})]})}),(0,t.jsxs)("div",{className:"form-row",children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"courseType",children:"Course Type *"}),(0,t.jsxs)("select",{id:"courseType",name:"courseType",value:(null===(b=de.courseType)||void 0===b?void 0:b.id)||"",onChange:e=>ue((0,a.A)((0,a.A)({},de),{},{courseType:{id:e.target.value}})),className:"form-input",required:!0,children:[(0,t.jsx)("option",{value:"",children:"Select Course Type"}),me&&me.length>0?me.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id)):(0,t.jsx)("option",{value:"",disabled:!0,children:"No course types available"})]})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"course",children:"Course *"}),(0,t.jsxs)("select",{id:"course",name:"course",value:(null===(N=de.course)||void 0===N?void 0:N.id)||"",onChange:e=>ue((0,a.A)((0,a.A)({},de),{},{course:{id:e.target.value}})),className:"form-input",required:!0,disabled:!(null!==(I=de.courseType)&&void 0!==I&&I.id),children:[(0,t.jsx)("option",{value:"",children:null!==(A=de.courseType)&&void 0!==A&&A.id?Oe.courses?"Loading courses...":"Select Course":"Select Course Type first"}),he&&he.length>0?he.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id)):(0,t.jsx)("option",{value:"",disabled:!0,children:"No courses available"})]})]})]}),(K(null===(T=de.courseType)||void 0===T?void 0:T.id)||Q(null===(C=de.courseType)||void 0===C?void 0:C.id))&&(0,t.jsxs)("div",{className:"form-row",children:[K(null===(S=de.courseType)||void 0===S?void 0:S.id)&&(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"class",children:"Class *"}),(0,t.jsxs)("select",{id:"class",name:"class",value:(null===(F=de.class)||void 0===F?void 0:F.id)||"",onChange:e=>ue((0,a.A)((0,a.A)({},de),{},{class:{id:e.target.value}})),className:"form-input",required:!0,disabled:!(null!==(k=de.course)&&void 0!==k&&k.id)||Oe.classes,children:[(0,t.jsx)("option",{value:"",children:null!==(w=de.course)&&void 0!==w&&w.id?Oe.classes?"Loading classes...":"Select Class":"Select Course first"}),ge&&ge.length>0?ge.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id)):(0,t.jsx)("option",{value:"",disabled:!0,children:"No classes available"})]})]}),Q(null===(E=de.courseType)||void 0===E?void 0:E.id)&&(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"exam",children:"Exam *"}),(0,t.jsxs)("select",{id:"exam",name:"exam",value:(null===(M=de.exam)||void 0===M?void 0:M.id)||"",onChange:e=>ue((0,a.A)((0,a.A)({},de),{},{exam:{id:e.target.value}})),className:"form-input",required:!0,disabled:!(null!==(R=de.course)&&void 0!==R&&R.id)||Oe.exams,children:[(0,t.jsx)("option",{value:"",children:null!==(O=de.course)&&void 0!==O&&O.id?Oe.exams?"Loading exams...":"Select Exam":"Select Course first"}),je&&je.length>0?je.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id)):(0,t.jsx)("option",{value:"",disabled:!0,children:"No exams available"})]})]})]}),(0,t.jsxs)("div",{className:"form-row",children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"subjectId",children:"Subject *"}),(0,t.jsxs)("select",{id:"subjectId",name:"subjectId",value:de.subjectId,onChange:ss,className:"form-input",required:!0,disabled:!(null!==(D=de.course)&&void 0!==D&&D.id)||K(null===(q=de.courseType)||void 0===q?void 0:q.id)&&!(null!==(P=de.class)&&void 0!==P&&P.id)||Q(null===(z=de.courseType)||void 0===z?void 0:z.id)&&!(null!==(U=de.exam)&&void 0!==U&&U.id),children:[(0,t.jsx)("option",{value:"",children:null!==(L=de.course)&&void 0!==L&&L.id?!K(null===(_=de.courseType)||void 0===_?void 0:_.id)||null!==(B=de.class)&&void 0!==B&&B.id?!Q(null===(J=de.courseType)||void 0===J?void 0:J.id)||null!==(W=de.exam)&&void 0!==W&&W.id?"3"===(null===(G=de.courseType)||void 0===G?void 0:G.id)?"Professional course - Select Subject":"Select Subject":"Select Exam first":"Select Class first":"Select Course first"}),Fe&&Fe.length>0?Fe.map(e=>(0,t.jsx)("option",{value:e.linkageId,children:e.subjectName||e.name},e.linkageId)):(0,t.jsx)("option",{value:"",disabled:!0,children:"No subjects available"})]})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"topicId",children:"Topic *"}),(0,t.jsxs)("select",{id:"topicId",name:"topicId",value:de.topicId,onChange:ss,className:"form-input",required:!0,disabled:!de.subjectId,children:[(0,t.jsx)("option",{value:"",children:de.subjectId?"Select Topic":"Select Subject first"}),we&&we.length>0?we.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id)):(0,t.jsx)("option",{value:"",disabled:!0,children:"No topics available"})]})]})]}),(0,t.jsx)("div",{className:"form-row",children:(0,t.jsx)("div",{className:"form-group",children:(0,t.jsxs)("label",{className:"checkbox-label",children:[(0,t.jsx)("input",{type:"checkbox",name:"isActive",checked:de.isActive,onChange:ss}),(0,t.jsx)("span",{children:"Active"})]})})}),(0,t.jsxs)("div",{className:"form-actions",children:[(0,t.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:Le,children:Le?"Saving...":ze?"Update Module":"Create Module"}),(0,t.jsx)("button",{type:"button",className:"btn btn-outline",onClick:as,children:"Cancel"})]})]})]}),(0,t.jsxs)("div",{className:"data-section",children:[(0,t.jsxs)("div",{className:"data-header",children:[(0,t.jsxs)("h4",{children:["\ud83d\udce6 Modules (",Me.length,")"]}),console.log("\ud83d\udd04 Rendering modules:",Me.length,Me),(0,t.jsx)("button",{className:"btn btn-outline btn-sm",onClick:()=>{is()},disabled:Le,children:"Refresh"})]}),Oe.modules?(0,t.jsx)("div",{className:"loading-state",children:(0,t.jsx)("p",{children:"Loading modules..."})}):0===Me.length?(0,t.jsxs)("div",{className:"empty-state",children:[(0,t.jsx)("div",{className:"empty-icon",children:"No Modules"}),(0,t.jsx)("h4",{children:"No Modules Found"}),(0,t.jsx)("p",{children:ie?"No modules found for the selected topic":"No modules found. Try adjusting your filter criteria or create a new module."})]}):(0,t.jsx)("div",{className:"modules-container",children:(()=>{const e=Me.filter(e=>{var s;const l=e.courseTypeId||(null===(s=e.courseType)||void 0===s?void 0:s.id);return 1===l||"1"===l}),s=Me.filter(e=>{var s;const l=e.courseTypeId||(null===(s=e.courseType)||void 0===s?void 0:s.id);return 2===l||"2"===l}),l=Me.filter(e=>{var s;const l=e.courseTypeId||(null===(s=e.courseType)||void 0===s?void 0:s.id);return 3===l||"3"===l}),a=[{key:"courseTypeName",label:"Course Type"},{key:"courseName",label:"Course"},{key:"className",label:"Class",condition:e=>e.className},{key:"examName",label:"Exam",condition:e=>e.examName},{key:"subjectName",label:"Subject"},{key:"topicName",label:"Topic"},{key:"structureType",label:"Structure Type"}],o=e=>(0,t.jsx)(n,{item:e,itemType:"module",onEdit:rs,onDelete:os,fields:a},e.id);return(0,t.jsxs)(t.Fragment,{children:[e.length>0&&(0,t.jsxs)("div",{className:"module-section",children:[(0,t.jsxs)("div",{className:"section-header",children:[(0,t.jsx)("h3",{children:"Academic Course Modules"}),(0,t.jsxs)("span",{className:"section-count",children:["(",e.length," modules)"]})]}),(0,t.jsx)("div",{className:"data-grid",children:e.map(o)})]}),s.length>0&&(0,t.jsxs)("div",{className:"module-section",children:[(0,t.jsxs)("div",{className:"section-header",children:[(0,t.jsx)("h3",{children:"Competitive Course Modules"}),(0,t.jsxs)("span",{className:"section-count",children:["(",s.length," modules)"]})]}),(0,t.jsx)("div",{className:"data-grid",children:s.map(o)})]}),l.length>0&&(0,t.jsxs)("div",{className:"module-section",children:[(0,t.jsxs)("div",{className:"section-header",children:[(0,t.jsx)("h3",{children:"Professional Course Modules"}),(0,t.jsxs)("span",{className:"section-count",children:["(",l.length," modules)"]})]}),(0,t.jsx)("div",{className:"data-grid",children:l.map(o)})]}),0===e.length&&0===s.length&&0===l.length&&(0,t.jsxs)("div",{className:"empty-state",children:[(0,t.jsx)("div",{className:"empty-icon",children:"No Modules"}),(0,t.jsx)("h4",{children:"No Modules Found"}),(0,t.jsx)("p",{children:"No modules match your current filters. Try adjusting your filter criteria or create a new module."})]})]})})()})]})]})}}}]);
//# sourceMappingURL=972.fbad331e.chunk.js.map