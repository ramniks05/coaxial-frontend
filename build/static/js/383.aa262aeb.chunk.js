"use strict";(self.webpackChunklearning_management_system=self.webpackChunklearning_management_system||[]).push([[383],{383:(e,s,l)=>{l.r(s),l.d(s,{default:()=>d});var a=l(555),o=l(43),i=l(580),c=l(872),r=l(712),n=(l(595),l(579));const t=e=>{let{item:s,itemType:l="item",onEdit:a,onDelete:o,fields:i=[],badges:c=[]}=e;const r=()=>s.description,t=()=>s.createdByName;return(0,n.jsxs)("div",{className:"data-card",children:[(0,n.jsxs)("div",{className:"card-header",children:[(0,n.jsxs)("div",{className:"card-title",children:[(0,n.jsx)("h4",{children:(()=>{switch(l){case"subject":return s.subjectName||s.name;case"topic":return s.topicName||s.name;default:return s.name}})()}),(0,n.jsxs)("div",{className:"card-badges",children:[(0,n.jsx)("span",{className:"status-badge ".concat(s.isActive?"active":"inactive"),children:s.isActive?"Active":"Inactive"}),c.map(e=>{const{key:l,label:a,value:o,condition:i,style:c,icon:r}=e;if(i&&!i(s))return null;const t=o||s[l];return t?(0,n.jsxs)("span",{className:"structure-badge",style:c,children:[r," ",t]},l):null})]})]}),(0,n.jsxs)("div",{className:"card-actions",children:[(0,n.jsx)("button",{className:"btn btn-outline btn-xs",onClick:()=>{a&&a(s)},children:"Edit"}),(0,n.jsx)("button",{className:"btn btn-danger btn-xs",onClick:()=>{o&&o(s.id)},children:"Delete"})]})]}),(0,n.jsxs)("div",{className:"card-content",children:[r()&&(0,n.jsx)("p",{className:"description",children:r()}),i.map(e=>{const{key:l,label:a,value:o,condition:i}=e;if(i&&!i(s))return null;const c="function"===typeof o?o(s):o||s[l];return c?(0,n.jsxs)("p",{children:[(0,n.jsxs)("strong",{children:[a,":"]})," ",c]},l):null})]}),(0,n.jsx)("div",{className:"card-footer",children:(0,n.jsxs)("small",{className:"text-muted",children:["Created: ",new Date(s.createdAt).toLocaleDateString(),t()&&(0,n.jsxs)("span",{children:[" by ",t()]})]})})]})},d=()=>{var e,s,l,d,u,m,v,p,h,j,x,y,f,g,b,N,T,A,I,S,C,F,E,w,k,R,O,D,P,L,z,M,q,U,G,H,_;const{token:B,addNotification:J}=(0,i.nm)(),[W,Y]=(0,o.useState)([]),[Q,X]=(0,o.useState)([]),[K,V]=(0,o.useState)(!1),[Z,$]=(0,o.useState)(!1),[ee,se]=(0,o.useState)(null),[le,ae]=(0,o.useState)(""),[oe,ie]=(0,o.useState)(""),[ce,re]=(0,o.useState)(""),[ne,te]=(0,o.useState)(""),[de,ue]=(0,o.useState)(""),[me,ve]=(0,o.useState)(!0),[pe,he]=(0,o.useState)({name:"",description:"",displayOrder:"",isActive:!0,courseType:{id:""},course:{id:""},class:{id:""},exam:{id:""},subjectId:""}),[je,xe]=(0,o.useState)([]),[ye,fe]=(0,o.useState)([]),[ge,be]=(0,o.useState)([]),[Ne,Te]=(0,o.useState)([]),[Ae,Ie]=(0,o.useState)([]),[Se,Ce]=(0,o.useState)([]),[Fe,Ee]=(0,o.useState)([]),[we,ke]=(0,o.useState)([]),[Re,Oe]=(0,o.useState)({courses:!1,classes:!1,exams:!1,masterSubjects:!1}),De=(0,o.useRef)(!0),Pe=(0,o.useRef)(!1),Le=(0,o.useRef)(null),ze=(0,o.useRef)(null),Me=(0,o.useRef)({data:null,ts:0}),qe=(0,o.useRef)(!1),Ue=(0,o.useRef)(!1),Ge=(0,o.useRef)(!1),He=(0,o.useRef)(!1),_e=(0,o.useRef)(!1);(0,o.useEffect)(()=>()=>{if(ze.current)try{ze.current.abort()}catch(e){}if(Le.current)try{Le.current.abort()}catch(e){}},[]);const Be=(0,o.useRef)(!1);(0,o.useEffect)(()=>{B&&!Be.current&&(Be.current=!0,Ye())},[B]);const Je=e=>{const s=Q.find(s=>s.id===parseInt(e));return s&&s.name&&s.name.toLowerCase().includes("academic")},We=e=>{const s=Q.find(s=>s.id===parseInt(e));return s&&s.name&&s.name.toLowerCase().includes("competitive")},Ye=async()=>{try{V(!0);let s=null;const l=Date.now();if(Me.current.data&&l-Me.current.ts<5e3)s=Me.current.data;else{if(ze.current)try{ze.current.abort()}catch(e){}ze.current=new AbortController,s=await(0,c.RG)(B),Me.current={data:s,ts:l}}console.log("Raw courseTypes API response (TopicManagement):",s);let a=[];Array.isArray(s)?a=s:s&&Array.isArray(s.content)?a=s.content:s&&Array.isArray(s.data)?a=s.data:s&&s.courseTypes&&Array.isArray(s.courseTypes)?a=s.courseTypes:(console.warn("Unexpected course types data format:",s),a=[]),console.log("Normalized course types array:",a),X(a)}catch(s){console.error("Error fetching initial data:",s),J({type:"error",message:"Failed to load course types",duration:5e3})}finally{V(!1)}},Qe=async e=>{if(e)try{Oe(e=>(0,a.A)((0,a.A)({},e),{},{courses:!0})),console.log("Fetching courses for course type:",e);const s=await(0,r.NJ)(B,e,0,100,"createdAt","desc");console.log("Raw courses data from API:",s);let l=[];Array.isArray(s)?l=s:s&&Array.isArray(s.content)?l=s.content:s&&Array.isArray(s.data)?l=s.data:s&&s.courses&&Array.isArray(s.courses)?l=s.courses:(console.warn("Unexpected courses data format:",s),l=[]),console.log("Normalized courses array:",l),Te(l),xe(l)}catch(s){console.error("Error fetching courses:",s),Te([])}finally{Oe(e=>(0,a.A)((0,a.A)({},e),{},{courses:!1}))}else Te([])},Xe=async(e,s)=>{if(!e||!s)return Ie([]),void Ce([]);try{Oe(e=>(0,a.A)((0,a.A)({},e),{},{classes:!0,exams:!0})),console.log("Fetching classes and exams for course:",s);const[e,l]=await Promise.all([(0,r.tW)(B,s,0,100,"createdAt","desc"),(0,r.rJ)(B,s,0,100,"createdAt","desc")]);console.log("Raw classes data from API:",e),console.log("Raw exams data from API:",l);let o=[];o=Array.isArray(e)?e:e&&Array.isArray(e.content)?e.content:e&&Array.isArray(e.data)?e.data:[];let i=[];i=Array.isArray(l)?l:l&&Array.isArray(l.content)?l.content:l&&Array.isArray(l.data)?l.data:[],console.log("Normalized classes array:",o),console.log("Normalized exams array:",i),Ie(o),Ce(i),fe(o),be(i)}catch(l){console.error("Error fetching classes and exams:",l),Ie([]),Ce([])}finally{Oe(e=>(0,a.A)((0,a.A)({},e),{},{classes:!1,exams:!1}))}},Ke=async e=>{if(e)try{Oe(e=>(0,a.A)((0,a.A)({},e),{},{masterSubjects:!0})),console.log("Fetching master subjects for course type:",e);const s=await(0,r.ui)(B,e,{active:me});console.log("Raw master subjects data from API:",s);let l=[];l=Array.isArray(s)?s:s&&Array.isArray(s.content)?s.content:s&&Array.isArray(s.data)?s.data:[],console.log("Normalized master subjects array:",l),Ee(l)}catch(s){console.error("Error fetching master subjects:",s),Ee([])}finally{Oe(e=>(0,a.A)((0,a.A)({},e),{},{masterSubjects:!1}))}else Ee([])},Ve=async(e,s,l,a)=>{if(e&&s)try{console.log("Fetching subject linkages for:",{courseTypeId:e,courseId:s,classId:l,examId:a});const o=await(0,r.sW)(B,{courseTypeId:e,courseId:s,classId:l,examId:a,active:me});console.log("Raw subject linkages data from API:",o);let i=[];i=Array.isArray(o)?o:o&&Array.isArray(o.content)?o.content:o&&Array.isArray(o.data)?o.data:[],console.log("Normalized subject linkages array:",i),ke(i)}catch(o){console.error("Error fetching subject linkages:",o),ke([])}else ke([])};(0,o.useEffect)(()=>{if(qe.current)if(console.log("=== COURSE TYPE CHANGE EFFECT ==="),console.log("Selected course type changed:",le),le){const e=parseInt(le);console.log("Filtering courses for course type:",e),Qe(e),Ke(e),ie(""),re(""),te(""),ue("")}else Te([]),Ie([]),Ce([]),Ee([]),ke([]);else qe.current=!0},[le]),(0,o.useEffect)(()=>{if(Ue.current)if(oe){const e=parseInt(oe),s=le?parseInt(le):null;console.log("=== COURSE CHANGE EFFECT ==="),console.log("Selected course changed:",e,"course type:",s),Xe(s,e),Ve(s,e,null,null),re(""),te(""),ue("")}else Ie([]),Ce([]),ke([]);else Ue.current=!0},[oe]),(0,o.useEffect)(()=>{if(Ge.current){if(ce){const e=parseInt(ce),s=le?parseInt(le):null,l=oe?parseInt(oe):null;console.log("=== CLASS CHANGE EFFECT ==="),console.log("Selected class changed:",e),Ve(s,l,e,null),te(""),ue("")}}else Ge.current=!0},[ce]),(0,o.useEffect)(()=>{if(He.current){if(ne){const e=parseInt(ne),s=le?parseInt(le):null,l=oe?parseInt(oe):null;console.log("=== EXAM CHANGE EFFECT ==="),console.log("Selected exam changed:",e),Ve(s,l,null,e),re(""),ue("")}}else He.current=!0},[ne]),(0,o.useEffect)(()=>{if(!_e.current)return void(_e.current=!0);console.log("Show active only changed:",me);const e=le?parseInt(le):null,s=oe?parseInt(oe):null,l=ce?parseInt(ce):null,a=ne?parseInt(ne):null;e&&Ke(e),s&&Ve(e,s,l,a)},[me]);const Ze=async()=>{if(Pe.current)console.log("fetchTopicsData already in progress, skipping duplicate call");else try{Pe.current=!0,V(!0),Le.current&&Le.current.abort(),Le.current=new AbortController;const e=(()=>{const e={active:me};return le&&(e.courseTypeId=parseInt(le)),oe&&(e.courseId=parseInt(oe)),ce&&(e.classId=parseInt(ce)),ne&&(e.examId=parseInt(ne)),de&&(e.subjectId=parseInt(de)),e})();console.log("Fetching topics with params:",e);const s=await(0,r.ko)(B,e);console.log("Fetched topics data:",s),Y(s||[])}catch(e){"AbortError"!==e.name&&(console.error("Error fetching topics:",e),J({type:"error",message:"Failed to fetch topics",duration:5e3}))}finally{V(!1),Pe.current=!1}};(0,o.useEffect)(()=>{if(console.log("\ud83d\udd04 Topic filters changed:",{courseType:le,course:oe,class:ce,exam:ne,subject:de,showActiveOnly:me}),De.current)return void(De.current=!1);const e=setTimeout(()=>{Ze()},300);return()=>clearTimeout(e)},[le,oe,ce,ne,de,me]);const $e=e=>{const{name:s,value:l,type:o,checked:i}=e.target;console.log("\ud83d\udd04 Form input change:",s,l),he(e=>(0,a.A)((0,a.A)({},e),{},{[s]:"checkbox"===o?i:l}))};(0,o.useEffect)(()=>{var e,s;if(console.log("\ud83d\udd04 Form effect triggered - courseTypeId:",null===(e=pe.courseType)||void 0===e?void 0:e.id),null!==(s=pe.courseType)&&void 0!==s&&s.id){console.log("\ud83d\udd04 Course type selected in form, fetching courses and master subjects");const e=parseInt(pe.courseType.id);Qe(e),Ke(e)}else console.log("\ud83d\udd04 No course type selected, clearing dependent fields"),he(e=>(0,a.A)((0,a.A)({},e),{},{course:{id:""},class:{id:""},exam:{id:""},subjectId:""})),xe([]),fe([]),be([]),Ee([])},[null===(e=pe.courseType)||void 0===e?void 0:e.id]),(0,o.useEffect)(()=>{var e,s,l;if(console.log("\ud83d\udd04 Form effect - courseId:",null===(e=pe.course)||void 0===e?void 0:e.id),null!==(s=pe.course)&&void 0!==s&&s.id&&null!==(l=pe.courseType)&&void 0!==l&&l.id){var o;console.log("\ud83d\udd04 Course selected in form, fetching classes and exams");const e=parseInt(pe.course.id),s=parseInt(pe.courseType.id);"3"===(null===(o=pe.courseType)||void 0===o?void 0:o.id)?(console.log("\ud83d\udd04 Professional course selected, fetching subjects by courseId only"),Ve(s,e,null,null)):Xe(s,e)}else console.log("\ud83d\udd04 No course selected, clearing classes/exams/subjects"),he(e=>(0,a.A)((0,a.A)({},e),{},{class:{id:""},exam:{id:""},subjectId:""})),fe([]),be([])},[null===(s=pe.course)||void 0===s?void 0:s.id,null===(l=pe.courseType)||void 0===l?void 0:l.id]),(0,o.useEffect)(()=>{var e,s,l,o,i,c;console.log("\ud83d\udd04 Form effect - class/exam change triggered"),console.log("\ud83d\udd04 Current formData.class?.id:",null===(e=pe.class)||void 0===e?void 0:e.id),console.log("\ud83d\udd04 Current formData.exam?.id:",null===(s=pe.exam)||void 0===s?void 0:s.id),console.log("\ud83d\udd04 Current formData.courseType?.id:",null===(l=pe.courseType)||void 0===l?void 0:l.id);const r="3"===(null===(o=pe.courseType)||void 0===o?void 0:o.id);var n,t;if(null!==(i=pe.class)&&void 0!==i&&i.id||null!==(c=pe.exam)&&void 0!==c&&c.id||r)if(console.log("\ud83d\udd04 Class, exam, or professional course selected in form, fetching subjects"),he(e=>(0,a.A)((0,a.A)({},e),{},{subjectId:""})),null!==(n=pe.courseType)&&void 0!==n&&n.id&&null!==(t=pe.course)&&void 0!==t&&t.id){const e=parseInt(pe.courseType.id),s=parseInt(pe.course.id);if(r)console.log("\ud83d\udd04 Professional course detected, fetching subjects by courseId only:",s),Ve(e,s,null,null);else{var d,u;const l=null!==(d=pe.class)&&void 0!==d&&d.id?parseInt(pe.class.id):null,a=null!==(u=pe.exam)&&void 0!==u&&u.id?parseInt(pe.exam.id):null;console.log("\ud83d\udd04 Fetching subjects for courseTypeId:",e,"courseId:",s,"classId:",l,"examId:",a),Ve(e,s,l,a)}}else console.log("\ud83d\udd04 Missing courseType or course selection, cannot fetch subjects");else console.log("\ud83d\udd04 No class, exam, or professional course selected, clearing subjects"),ke([])},[null===(d=pe.class)||void 0===d?void 0:d.id,null===(u=pe.exam)||void 0===u?void 0:u.id,null===(m=pe.courseType)||void 0===m?void 0:m.id]);const es=(e,s)=>{switch(console.log("\ud83d\udd04 Filter change:",e,s),e){case"courseTypeId":console.log("\ud83d\udd04 Filter: Course type changed to:",s),ae(s);break;case"courseId":console.log("\ud83d\udd04 Filter: Course changed to:",s),ie(s);break;case"classId":console.log("\ud83d\udd04 Filter: Class changed to:",s),re(s);break;case"examId":console.log("\ud83d\udd04 Filter: Exam changed to:",s),te(s);break;case"subjectId":console.log("\ud83d\udd04 Filter: Subject changed to:",s),ue(s)}},ss=()=>{he({name:"",description:"",displayOrder:"",isActive:!0,courseType:{id:""},course:{id:""},class:{id:""},exam:{id:""},subjectId:""}),$(!1),se(null),xe([]),fe([]),be([]),Ee([])},ls=e=>{var s,l,a,o,i,c,r;he({name:e.name,description:e.description||"",displayOrder:e.displayOrder||"",isActive:e.isActive,courseType:{id:(null===(s=e.subject)||void 0===s||null===(l=s.course)||void 0===l||null===(a=l.courseType)||void 0===a?void 0:a.id)||""},course:{id:(null===(o=e.subject)||void 0===o||null===(i=o.course)||void 0===i?void 0:i.id)||""},class:{id:""},exam:{id:""},subjectId:(null===(c=e.subject)||void 0===c?void 0:c.linkageId)||(null===(r=e.subject)||void 0===r?void 0:r.id)||""}),se(e.id),$(!0)},as=async e=>{if(window.confirm("Are you sure you want to delete this topic?"))try{await(0,r.do)(B,e),J({type:"success",message:"Topic deleted successfully",duration:3e3}),Ze()}catch(s){console.error("Error deleting topic:",s),J({type:"error",message:"Failed to delete topic",duration:5e3})}};return(0,n.jsxs)("div",{className:"master-data-component",children:[(0,n.jsxs)("div",{className:"component-header",children:[(0,n.jsxs)("div",{className:"header-info",children:[(0,n.jsx)("h2",{children:"Topic Management"}),(0,n.jsx)("p",{children:"Manage topics with optimized filtering and shared cache"})]}),(0,n.jsx)("div",{className:"header-actions",children:(0,n.jsx)("button",{className:"btn btn-primary",onClick:()=>{ss(),$(!0)},disabled:K,children:"Add Topic"})})]}),(0,n.jsxs)("div",{className:"filter-section",children:[(0,n.jsxs)("div",{className:"filter-header",children:[(0,n.jsx)("h4",{children:"Filter Topics"}),(0,n.jsx)("div",{className:"filter-header-controls",children:(0,n.jsx)("button",{className:"btn btn-outline btn-xs",onClick:()=>{ae(""),ie(""),re(""),te(""),ue(""),Te([]),Ie([]),Ce([]),Ee([]),ke([])},children:"Clear All Filters"})})]}),(0,n.jsxs)("div",{className:"filter-row",children:[(0,n.jsxs)("div",{className:"filter-group",children:[(0,n.jsx)("label",{htmlFor:"course-type-filter",children:"1. Course Type:"}),(0,n.jsxs)("select",{id:"course-type-filter",value:le,onChange:e=>es("courseTypeId",e.target.value),className:"filter-select",children:[(0,n.jsx)("option",{value:"",children:"Select Course Type"}),Q&&Q.length>0?Q.map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id)):(0,n.jsx)("option",{value:"",disabled:!0,children:"No course types available"})]})]}),(0,n.jsxs)("div",{className:"filter-group",children:[(0,n.jsx)("label",{htmlFor:"course-filter",children:"2. Course:"}),(0,n.jsxs)("select",{id:"course-filter",value:oe,onChange:e=>es("courseId",e.target.value),className:"filter-select",disabled:!le||Re.courses,children:[(0,n.jsx)("option",{value:"",children:"Select Course"}),Ne&&Ne.length>0?Ne.map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id)):(0,n.jsx)("option",{value:"",disabled:!0,children:"No courses available"})]})]}),Je(le)&&(0,n.jsxs)("div",{className:"filter-group",children:[(0,n.jsx)("label",{htmlFor:"class-filter",children:"3. Class:"}),(0,n.jsxs)("select",{id:"class-filter",value:ce,onChange:e=>es("classId",e.target.value),className:"filter-select",disabled:!oe||Re.classes,children:[(0,n.jsx)("option",{value:"",children:"Select Class"}),Ae&&Ae.length>0?Ae.map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id)):(0,n.jsx)("option",{value:"",disabled:!0,children:"No classes available"})]})]}),We(le)&&(0,n.jsxs)("div",{className:"filter-group",children:[(0,n.jsx)("label",{htmlFor:"exam-filter",children:"3. Exam:"}),(0,n.jsxs)("select",{id:"exam-filter",value:ne,onChange:e=>es("examId",e.target.value),className:"filter-select",disabled:!oe||Re.exams,children:[(0,n.jsx)("option",{value:"",children:"Select Exam"}),Se&&Se.length>0?Se.map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id)):(0,n.jsx)("option",{value:"",disabled:!0,children:"No exams available"})]})]}),(0,n.jsxs)("div",{className:"filter-group",children:[(0,n.jsx)("label",{htmlFor:"subject-filter",children:"4. Subject:"}),(0,n.jsxs)("select",{id:"subject-filter",value:de,onChange:e=>es("subjectId",e.target.value),className:"filter-select",disabled:!oe||Re.subjects,children:[(0,n.jsx)("option",{value:"",children:"Select Subject"}),we&&we.length>0?we.map(e=>(0,n.jsx)("option",{value:e.linkageId,children:e.subjectName||e.name},e.linkageId)):(0,n.jsx)("option",{value:"",disabled:!0,children:"No subjects available"})]})]})]}),(le||oe||ce||ne||de)&&(0,n.jsxs)("div",{className:"active-filters",children:[(0,n.jsx)("strong",{children:"Active Filters:"}),le&&(0,n.jsxs)("span",{className:"filter-tag",children:["Course Type: ",null===(v=Q.find(e=>e.id===parseInt(le)))||void 0===v?void 0:v.name]}),oe&&(0,n.jsxs)("span",{className:"filter-tag",children:["Course: ",null===(p=Ne.find(e=>e.id===parseInt(oe)))||void 0===p?void 0:p.name]}),ce&&(0,n.jsxs)("span",{className:"filter-tag",children:["Class: ",null===(h=Ae.find(e=>e.id===parseInt(ce)))||void 0===h?void 0:h.name]}),ne&&(0,n.jsxs)("span",{className:"filter-tag",children:["Exam: ",null===(j=Se.find(e=>e.id===parseInt(ne)))||void 0===j?void 0:j.name]}),de&&(0,n.jsxs)("span",{className:"filter-tag",children:["Subject: ",(null===(x=we.find(e=>e.id===parseInt(de)))||void 0===x?void 0:x.subjectName)||(null===(y=we.find(e=>e.id===parseInt(de)))||void 0===y?void 0:y.name)]})]})]}),Z&&(0,n.jsxs)("div",{className:"form-section",children:[(0,n.jsxs)("div",{className:"form-header",children:[(0,n.jsx)("h3",{children:ee?"Edit Topic":"Add New Topic"}),(0,n.jsx)("button",{className:"btn btn-outline btn-sm",onClick:ss,children:"Cancel"})]}),(0,n.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),console.log("=== TOPIC FORM SUBMISSION STARTED ==="),console.log("Form data:",pe);try{if(V(!0),ee){const e={name:pe.name.trim(),description:pe.description?pe.description.trim():"",displayOrder:pe.displayOrder?parseInt(pe.displayOrder):0,isActive:pe.isActive};await(0,r.Tw)(B,ee,e),J({type:"success",message:"Topic updated successfully",duration:3e3})}else{var s;const e=parseInt(null===(s=pe.courseType)||void 0===s?void 0:s.id),l=parseInt(pe.subjectId),a={name:pe.name.trim(),description:pe.description?pe.description.trim():"",courseTypeId:e,relationshipId:l,displayOrder:pe.displayOrder?parseInt(pe.displayOrder):0,isActive:pe.isActive};await(0,r.OY)(B,a),J({type:"success",message:"Topic created successfully",duration:3e3})}ss(),Ze()}catch(l){console.error("Error saving topic:",l),J({type:"error",message:"Failed to save topic",duration:5e3})}finally{V(!1)}},className:"master-data-form",children:[(0,n.jsxs)("div",{className:"form-row",children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{htmlFor:"name",children:"Topic Name *"}),(0,n.jsx)("input",{type:"text",id:"name",name:"name",value:pe.name,onChange:$e,className:"form-input",required:!0,placeholder:"e.g., Algebra Basics, Quantitative Aptitude"})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{htmlFor:"displayOrder",children:"Display Order"}),(0,n.jsx)("input",{type:"number",id:"displayOrder",name:"displayOrder",value:pe.displayOrder,onChange:$e,className:"form-input",min:"0",placeholder:"0"})]})]}),(0,n.jsx)("div",{className:"form-row",children:(0,n.jsxs)("div",{className:"form-group full-width",children:[(0,n.jsx)("label",{htmlFor:"description",children:"Description"}),(0,n.jsx)("textarea",{id:"description",name:"description",value:pe.description,onChange:$e,className:"form-input",rows:3,placeholder:"Describe the topic content and scope"})]})}),(0,n.jsxs)("div",{className:"form-row",children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{htmlFor:"courseTypeId",children:"Course Type *"}),(0,n.jsxs)("select",{id:"courseType",name:"courseType",value:(null===(f=pe.courseType)||void 0===f?void 0:f.id)||"",onChange:e=>he((0,a.A)((0,a.A)({},pe),{},{courseType:{id:e.target.value}})),className:"form-input",required:!0,children:[(0,n.jsx)("option",{value:"",children:"Select Course Type"}),Q&&Q.length>0?Q.map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id)):(0,n.jsx)("option",{value:"",disabled:!0,children:"No course types available"})]})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{htmlFor:"course",children:"Course *"}),(0,n.jsxs)("select",{id:"course",name:"course",value:(null===(g=pe.course)||void 0===g?void 0:g.id)||"",onChange:e=>he((0,a.A)((0,a.A)({},pe),{},{course:{id:e.target.value}})),className:"form-input",required:!0,disabled:!(null!==(b=pe.courseType)&&void 0!==b&&b.id),children:[(0,n.jsx)("option",{value:"",children:null!==(N=pe.courseType)&&void 0!==N&&N.id?Re.courses?"Loading courses...":"Select Course":"Select Course Type first"}),je&&je.length>0?je.map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id)):(0,n.jsx)("option",{value:"",disabled:!0,children:"No courses available"})]})]})]}),(Je(null===(T=pe.courseType)||void 0===T?void 0:T.id)||We(null===(A=pe.courseType)||void 0===A?void 0:A.id))&&(0,n.jsxs)("div",{className:"form-row",children:[Je(null===(I=pe.courseType)||void 0===I?void 0:I.id)&&(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{htmlFor:"class",children:"Class *"}),(0,n.jsxs)("select",{id:"class",name:"class",value:(null===(S=pe.class)||void 0===S?void 0:S.id)||"",onChange:e=>he((0,a.A)((0,a.A)({},pe),{},{class:{id:e.target.value}})),className:"form-input",required:!0,disabled:!(null!==(C=pe.course)&&void 0!==C&&C.id)||Re.classes,children:[(0,n.jsx)("option",{value:"",children:null!==(F=pe.course)&&void 0!==F&&F.id?Re.classes?"Loading classes...":"Select Class":"Select Course first"}),ye&&ye.length>0?ye.map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id)):(0,n.jsx)("option",{value:"",disabled:!0,children:"No classes available"})]})]}),We(null===(E=pe.courseType)||void 0===E?void 0:E.id)&&(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{htmlFor:"exam",children:"Exam *"}),(0,n.jsxs)("select",{id:"exam",name:"exam",value:(null===(w=pe.exam)||void 0===w?void 0:w.id)||"",onChange:e=>he((0,a.A)((0,a.A)({},pe),{},{exam:{id:e.target.value}})),className:"form-input",required:!0,disabled:!(null!==(k=pe.course)&&void 0!==k&&k.id)||Re.exams,children:[(0,n.jsx)("option",{value:"",children:null!==(R=pe.course)&&void 0!==R&&R.id?Re.exams?"Loading exams...":"Select Exam":"Select Course first"}),ge&&ge.length>0?ge.map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id)):(0,n.jsx)("option",{value:"",disabled:!0,children:"No exams available"})]})]})]}),(0,n.jsx)("div",{className:"form-row",children:(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{htmlFor:"subjectId",children:"Subject *"}),(0,n.jsxs)("select",{id:"subjectId",name:"subjectId",value:pe.subjectId,onChange:$e,className:"form-input",required:!0,disabled:!(null!==(O=pe.course)&&void 0!==O&&O.id)||Je(null===(D=pe.courseType)||void 0===D?void 0:D.id)&&!(null!==(P=pe.class)&&void 0!==P&&P.id)||We(null===(L=pe.courseType)||void 0===L?void 0:L.id)&&!(null!==(z=pe.exam)&&void 0!==z&&z.id),children:[(0,n.jsx)("option",{value:"",children:null!==(M=pe.course)&&void 0!==M&&M.id?!Je(null===(q=pe.courseType)||void 0===q?void 0:q.id)||null!==(U=pe.class)&&void 0!==U&&U.id?!We(null===(G=pe.courseType)||void 0===G?void 0:G.id)||null!==(H=pe.exam)&&void 0!==H&&H.id?"3"===(null===(_=pe.courseType)||void 0===_?void 0:_.id)?"Professional course - Select Subject":"Select Subject":"Select Exam first":"Select Class first":"Select Course first"}),we&&we.length>0?we.map(e=>(0,n.jsx)("option",{value:e.linkageId,children:e.subjectName||e.name},e.linkageId)):(0,n.jsx)("option",{value:"",disabled:!0,children:"No subjects available"})]})]})}),(0,n.jsx)("div",{className:"form-row",children:(0,n.jsx)("div",{className:"form-group",children:(0,n.jsxs)("label",{className:"checkbox-label",children:[(0,n.jsx)("input",{type:"checkbox",name:"isActive",checked:pe.isActive,onChange:$e}),(0,n.jsx)("span",{children:"Active"})]})})}),(0,n.jsxs)("div",{className:"form-actions",children:[(0,n.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:K,children:K?"Saving...":ee?"Update Topic":"Create Topic"}),(0,n.jsx)("button",{type:"button",className:"btn btn-outline",onClick:ss,children:"Cancel"})]})]})]}),(0,n.jsxs)("div",{className:"data-section",children:[(0,n.jsxs)("div",{className:"data-header",children:[(0,n.jsxs)("h3",{children:["Topics (",W.length,")"]}),(0,n.jsx)("div",{className:"data-actions",children:(0,n.jsx)("button",{className:"btn btn-outline btn-sm",onClick:()=>{Ze()},disabled:K,children:"Refresh"})})]}),K?(0,n.jsxs)("div",{className:"loading-state",children:[(0,n.jsx)("div",{className:"spinner"}),(0,n.jsx)("p",{children:"Loading topics..."})]}):0===W.length?(0,n.jsxs)("div",{className:"empty-state",children:[(0,n.jsx)("div",{className:"empty-icon",children:"No Topics"}),(0,n.jsx)("h4",{children:"No Topics Found"}),(0,n.jsx)("p",{children:"No topics match your current filters. Try adjusting your filter criteria or create a new topic."})]}):(0,n.jsx)("div",{className:"topics-container",children:(()=>{const e=W.filter(e=>{var s,l,a,o,i,c,r,n,t,d,u,m,v,p;const h=e.courseTypeId||(null===(s=e.subject)||void 0===s||null===(l=s.course)||void 0===l||null===(a=l.courseType)||void 0===a?void 0:a.id)||(null===(o=e.classSubject)||void 0===o||null===(i=o.class)||void 0===i||null===(c=i.course)||void 0===c||null===(r=c.courseType)||void 0===r?void 0:r.id)||(null===(n=e.examSubject)||void 0===n||null===(t=n.exam)||void 0===t||null===(d=t.course)||void 0===d||null===(u=d.courseType)||void 0===u?void 0:u.id)||(null===(m=e.courseSubject)||void 0===m||null===(v=m.course)||void 0===v||null===(p=v.courseType)||void 0===p?void 0:p.id);return 1===h||"1"===h}),s=W.filter(e=>{var s,l,a,o,i,c,r,n,t,d,u,m,v,p;const h=e.courseTypeId||(null===(s=e.subject)||void 0===s||null===(l=s.course)||void 0===l||null===(a=l.courseType)||void 0===a?void 0:a.id)||(null===(o=e.classSubject)||void 0===o||null===(i=o.class)||void 0===i||null===(c=i.course)||void 0===c||null===(r=c.courseType)||void 0===r?void 0:r.id)||(null===(n=e.examSubject)||void 0===n||null===(t=n.exam)||void 0===t||null===(d=t.course)||void 0===d||null===(u=d.courseType)||void 0===u?void 0:u.id)||(null===(m=e.courseSubject)||void 0===m||null===(v=m.course)||void 0===v||null===(p=v.courseType)||void 0===p?void 0:p.id);return 2===h||"2"===h}),l=W.filter(e=>{var s,l,a,o,i,c,r,n,t,d,u,m,v,p;const h=e.courseTypeId||(null===(s=e.subject)||void 0===s||null===(l=s.course)||void 0===l||null===(a=l.courseType)||void 0===a?void 0:a.id)||(null===(o=e.classSubject)||void 0===o||null===(i=o.class)||void 0===i||null===(c=i.course)||void 0===c||null===(r=c.courseType)||void 0===r?void 0:r.id)||(null===(n=e.examSubject)||void 0===n||null===(t=n.exam)||void 0===t||null===(d=t.course)||void 0===d||null===(u=d.courseType)||void 0===u?void 0:u.id)||(null===(m=e.courseSubject)||void 0===m||null===(v=m.course)||void 0===v||null===(p=v.courseType)||void 0===p?void 0:p.id);return 3===h||"3"===h}),a=[{key:"courseTypeName",label:"Course Type",value:e=>{var s,l,a,o,i,c,r,n,t,d,u,m,v,p;return e.courseTypeName||(null===(s=e.subject)||void 0===s||null===(l=s.course)||void 0===l||null===(a=l.courseType)||void 0===a?void 0:a.name)||(null===(o=e.classSubject)||void 0===o||null===(i=o.class)||void 0===i||null===(c=i.course)||void 0===c||null===(r=c.courseType)||void 0===r?void 0:r.name)||(null===(n=e.examSubject)||void 0===n||null===(t=n.exam)||void 0===t||null===(d=t.course)||void 0===d||null===(u=d.courseType)||void 0===u?void 0:u.name)||(null===(m=e.courseSubject)||void 0===m||null===(v=m.course)||void 0===v||null===(p=v.courseType)||void 0===p?void 0:p.name)}},{key:"courseName",label:"Course",value:e=>{var s,l,a,o,i,c,r,n,t,d;return e.courseName||(null===(s=e.subject)||void 0===s||null===(l=s.course)||void 0===l?void 0:l.name)||(null===(a=e.classSubject)||void 0===a||null===(o=a.class)||void 0===o||null===(i=o.course)||void 0===i?void 0:i.name)||(null===(c=e.examSubject)||void 0===c||null===(r=c.exam)||void 0===r||null===(n=r.course)||void 0===n?void 0:n.name)||(null===(t=e.courseSubject)||void 0===t||null===(d=t.course)||void 0===d?void 0:d.name)}},{key:"className",label:"Class",value:e=>{var s,l;return e.className||(null===(s=e.classSubject)||void 0===s||null===(l=s.class)||void 0===l?void 0:l.name)},condition:e=>{var s,l;return e.className||(null===(s=e.classSubject)||void 0===s||null===(l=s.class)||void 0===l?void 0:l.name)}},{key:"examName",label:"Exam",value:e=>{var s,l;return e.examName||(null===(s=e.examSubject)||void 0===s||null===(l=s.exam)||void 0===l?void 0:l.name)},condition:e=>{var s,l,a,o;return(e.examName||(null===(s=e.examSubject)||void 0===s||null===(l=s.exam)||void 0===l?void 0:l.name))&&!(e.className||null!==(a=e.classSubject)&&void 0!==a&&null!==(o=a.class)&&void 0!==o&&o.name)}},{key:"subjectName",label:"Subject",value:e=>{var s,l,a,o,i,c,r;return e.subjectName||(null===(s=e.subject)||void 0===s?void 0:s.name)||(null===(l=e.classSubject)||void 0===l||null===(a=l.subject)||void 0===a?void 0:a.name)||(null===(o=e.examSubject)||void 0===o||null===(i=o.subject)||void 0===i?void 0:i.name)||(null===(c=e.courseSubject)||void 0===c||null===(r=c.subject)||void 0===r?void 0:r.name)}}],o=e=>(0,n.jsx)(t,{item:e,itemType:"topic",onEdit:ls,onDelete:as,fields:a},e.id);return(0,n.jsxs)(n.Fragment,{children:[e.length>0&&(0,n.jsxs)("div",{className:"topic-section",children:[(0,n.jsxs)("div",{className:"section-header",children:[(0,n.jsx)("h3",{children:"Academic Course Topics"}),(0,n.jsxs)("span",{className:"section-count",children:["(",e.length," topics)"]})]}),(0,n.jsx)("div",{className:"data-grid",children:e.map(o)})]}),s.length>0&&(0,n.jsxs)("div",{className:"topic-section",children:[(0,n.jsxs)("div",{className:"section-header",children:[(0,n.jsx)("h3",{children:"Competitive Course Topics"}),(0,n.jsxs)("span",{className:"section-count",children:["(",s.length," topics)"]})]}),(0,n.jsx)("div",{className:"data-grid",children:s.map(o)})]}),l.length>0&&(0,n.jsxs)("div",{className:"topic-section",children:[(0,n.jsxs)("div",{className:"section-header",children:[(0,n.jsx)("h3",{children:"Professional Course Topics"}),(0,n.jsxs)("span",{className:"section-count",children:["(",l.length," topics)"]})]}),(0,n.jsx)("div",{className:"data-grid",children:l.map(o)})]}),0===e.length&&0===s.length&&0===l.length&&(0,n.jsxs)("div",{className:"empty-state",children:[(0,n.jsx)("div",{className:"empty-icon",children:"No Topics"}),(0,n.jsx)("h4",{children:"No Topics Found"}),(0,n.jsx)("p",{children:"No topics match your current filters. Try adjusting your filter criteria or create a new topic."})]})]})})()})]})]})}}}]);
//# sourceMappingURL=383.aa262aeb.chunk.js.map